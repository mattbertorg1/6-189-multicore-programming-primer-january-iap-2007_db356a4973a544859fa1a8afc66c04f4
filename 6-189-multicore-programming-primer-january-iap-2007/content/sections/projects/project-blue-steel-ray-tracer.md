---
about_this_resource_text: <p><strong>Topics covered:</strong> Blue-steel ray tracer</p><p><strong>Instructor/speaker:</strong>
  Natalia Chernenko, Michael D'Ambrosio, Scott Fisher, Brian Sweatt, R. J. Ryan, and
  Leevar Williams</p>
course_id: 6-189-multicore-programming-primer-january-iap-2007
embedded_media:
- id: p3.jpg
  parent_uid: f6e6349d29b5857ef6c74beac6628d42
  technical_location: https://ocw.mit.edu/courses/electrical-engineering-and-computer-science/6-189-multicore-programming-primer-january-iap-2007/projects/project-blue-steel-ray-tracer/p3.jpg
  title: Blue-steel Ray Tracer
  type: null
  uid: 1410eff1169a142ef3591e9c7cdc9583
- id: Video-YouTube-Stream
  media_location: EkMfTvmLJl0
  parent_uid: f6e6349d29b5857ef6c74beac6628d42
  title: Video-YouTube-Stream
  type: Video
  uid: f1e7c0f0a0914642208f95ba76c4dffa
- id: Thumbnail-YouTube-JPG
  media_location: https://img.youtube.com/vi/EkMfTvmLJl0/default.jpg
  parent_uid: f6e6349d29b5857ef6c74beac6628d42
  title: Thumbnail-YouTube-JPG
  type: Thumbnail
  uid: 645a6e7a26cc547d45ad528617840d4d
- id: Video-iTunesU-MP4
  media_location: https://itunes.apple.com/us/itunes-u/id341597759
  parent_uid: f6e6349d29b5857ef6c74beac6628d42
  title: Video-iTunes U-MP4
  type: Video
  uid: ce9055ca5deab73017a8b717b10636b0
- id: Video-InternetArchive-MP4
  media_location: http://www.archive.org/download/MIT6.189IAP07/ocw-6.189-iap07-pro03_300k.mp4
  parent_uid: f6e6349d29b5857ef6c74beac6628d42
  title: Video-Internet Archive-MP4
  type: Video
  uid: cd52e0d6bf251ccf531f0a382a4d5c4a
- id: Thumbnail-OCW-JPG
  parent_uid: f6e6349d29b5857ef6c74beac6628d42
  title: Thumbnail-OCW-JPG
  type: Thumbnail
  uid: 7379f42b7dc24709c43b18cb368ae36a
- id: 3Play-3PlayYouTubeid-MP4
  media_location: EkMfTvmLJl0
  parent_uid: f6e6349d29b5857ef6c74beac6628d42
  title: 3Play-3Play YouTube id
  type: 3Play
  uid: 86f6c4ae5bd9a9d61ebffbf319f95b9f
- id: EkMfTvmLJl0.srt
  parent_uid: f6e6349d29b5857ef6c74beac6628d42
  technical_location: https://ocw.mit.edu/courses/electrical-engineering-and-computer-science/6-189-multicore-programming-primer-january-iap-2007/projects/project-blue-steel-ray-tracer/EkMfTvmLJl0.srt
  title: 3play caption file
  type: null
  uid: b36ffd40b772c0318e0f87165116831f
- id: EkMfTvmLJl0.pdf
  parent_uid: f6e6349d29b5857ef6c74beac6628d42
  technical_location: https://ocw.mit.edu/courses/electrical-engineering-and-computer-science/6-189-multicore-programming-primer-january-iap-2007/projects/project-blue-steel-ray-tracer/EkMfTvmLJl0.pdf
  title: 3play pdf file
  type: null
  uid: c040c9779135adfc7cbe215c4def3ed5
- id: Caption-3Play YouTube id-SRT
  parent_uid: f6e6349d29b5857ef6c74beac6628d42
  title: Caption-3Play YouTube id-SRT-English - US
  type: Caption
  uid: ad7c188690ed330bdad801bf28a55810
- id: Transcript-3Play YouTube id-PDF
  parent_uid: f6e6349d29b5857ef6c74beac6628d42
  title: Transcript-3Play YouTube id-PDF-English - US
  type: Transcript
  uid: 9a5ad0e72d5461874eb762d145e75a7a
inline_embed_id: 70330338project:blue-steelraytracer8815266
layout: video
order_index: null
parent_uid: b639672ad9ad956df1d830e6183298ae
related_resources_text: <p class="instruction">This section contains documents that
  are inaccessible to screen reader software. A &quot;#&quot; symbol is used to denote
  such documents.</p> <p>(<a href="./resolveuid/80cc6e28c46b819b0ab4b4cf4ab2825f"
  target="_blank" title="Open in a new window.">PDF - 2.7 MB</a>)<sup>#</sup></p>
short_url: project-blue-steel-ray-tracer
technical_location: https://ocw.mit.edu/courses/electrical-engineering-and-computer-science/6-189-multicore-programming-primer-january-iap-2007/projects/project-blue-steel-ray-tracer
template_type: Tabbed
title: 'Project: Blue-steel Ray Tracer '
transcript: '<p><span m=''50''>The</span> <span m=''180''>following</span> <span m=''620''>content</span>
  <span m=''1210''>is</span> <span m=''1330''>provided</span> <span m=''1770''>under</span>
  <span m=''2050''>a</span> <span m=''2090''>Creative</span> <span m=''2500''>Commons</span>
  <span m=''2900''>license.</span> <span m=''4010''>Your</span> <span m=''4200''>support</span>
  <span m=''4710''>will</span> <span m=''4860''>help</span> <span m=''5100''>MIT</span>
  <span m=''5560''>OpenCourseWare</span> <span m=''6350''>continue</span> <span m=''6860''>to</span>
  <span m=''6940''>offer</span> <span m=''7350''>high</span> <span m=''7590''>quality</span>
  <span m=''8109''>educational</span> <span m=''8740''>resources</span> <span m=''9360''>for</span>
  <span m=''9510''>free.</span> <span m=''10720''>To</span> <span m=''10730''>make</span>
  <span m=''10930''>a</span> <span m=''10970''>donation</span> <span m=''11660''>or</span>
  <span m=''11930''>view</span> <span m=''12370''>additional</span> <span m=''12790''>materials</span>
  <span m=''13330''>from</span> <span m=''13480''>hundreds</span> <span m=''13910''>of</span>
  <span m=''14030''>MIT</span> <span m=''14450''>courses,</span> <span m=''15570''>visit</span>
  <span m=''15770''>MIT</span> <span m=''16200''>OpenCourseWare</span> <span m=''17250''>at</span>
  <span m=''17410''>ocw.mit.edu.</span> </p><p><span m=''21480''>BRIAN SWEATT: So</span>
  <span m=''22240''>we''re the</span> <span m=''22560''>real</span> <span m=''23017''>time</span>
  <span m=''23474''>ray</span> <span m=''23931''>tracing group.</span> <span m=''24388''>And</span>
  <span m=''24845''>as</span> <span m=''25302''>we like</span> <span m=''26216''>to
  call</span> <span m=''26680''>ourselves,</span> <span m=''27880''>Blue Steel.</span>
  <span m=''29020''>So</span> <span m=''30140''>one</span> <span m=''30370''>thing</span>
  <span m=''30580''>you</span> <span m=''30690''>might</span> <span m=''30930''>be</span>
  <span m=''31970''>asking</span> <span m=''32280''>yourselves</span> <span m=''32729''>and</span>
  <span m=''33070''>wondering</span> <span m=''33440''>from</span> <span m=''33630''>us</span>
  <span m=''33860''>is,</span> <span m=''34490''>where</span> <span m=''34720''>did</span>
  <span m=''34850''>we</span> <span m=''34960''>get</span> <span m=''35130''>the</span>
  <span m=''35200''>name</span> <span m=''35420''>Blue</span> <span m=''35700''>Steel?</span>
  <span m=''35980''>What</span> <span m=''36110''>does</span> <span m=''36200''>it</span>
  <span m=''36280''>have</span> <span m=''36450''>to</span> <span m=''36550''>do</span>
  <span m=''36700''>with</span> <span m=''36850''>this</span> <span m=''37050''>thing</span>
  <span m=''37230''>we</span> <span m=''37330''>call</span> <span m=''37550''>ray</span>
  <span m=''37700''>tracing?</span> </p><p><span m=''38670''>And</span> <span m=''40280''>this</span>
  <span m=''40500''>morning</span> <span m=''40900''>when</span> <span m=''41040''>I</span>
  <span m=''41080''>was</span> <span m=''42140''>sitting</span> <span m=''42480''>up</span>
  <span m=''42660''>and</span> <span m=''43870''>finishing</span> <span m=''44220''>up</span>
  <span m=''44350''>the</span> <span m=''44390''>project,</span> <span m=''45010''>I</span>
  <span m=''45250''>was</span> <span m=''45530''>asking</span> <span m=''45590''>myself</span>
  <span m=''45910''>the</span> <span m=''46000''>same</span> <span m=''46270''>thing.</span>
  <span m=''47410''>We''re</span> <span m=''47550''>doing ray</span> <span m=''47770''>tracing.</span>
  <span m=''48390''>Where</span> <span m=''48540''>did</span> <span m=''48650''>we</span>
  <span m=''48750''>come</span> <span m=''48920''>up</span> <span m=''49030''>with</span>
  <span m=''49150''>this</span> <span m=''49310''>name?</span> <span m=''49740''>So</span>
  <span m=''50110''>I''m</span> <span m=''50230''>going</span> <span m=''50310''>to</span>
  <span m=''50350''>give</span> <span m=''50490''>you</span> <span m=''50560''>a</span>
  <span m=''50580''>little</span> <span m=''50770''>background</span> <span m=''51260''>on</span>
  <span m=''51350''>what</span> <span m=''51640''>Blue</span> <span m=''51810''>Steel</span>
  <span m=''52150''>is.</span> </p><p></p><p></p><p><span m=''57890''>The</span> <span
  m=''58010''>name</span> <span m=''58360''>came</span> <span m=''58680''>from</span>
  <span m=''59710''>the</span> <span m=''59800''>first</span> <span m=''60040''>day</span>
  <span m=''60180''>we</span> <span m=''60270''>got</span> <span m=''60430''>access</span>
  <span m=''60710''>to</span> <span m=''60810''>our</span> <span m=''60980''>PS3,</span>
  <span m=''61630''>we</span> <span m=''61710''>went</span> <span m=''61890''>to</span>
  <span m=''61940''>the</span> <span m=''62010''>student</span> <span m=''62340''>center</span>
  <span m=''62820''>like</span> <span m=''63060''>a</span> <span m=''63120''>bunch</span>
  <span m=''63360''>of</span> <span m=''63440''>excited</span> <span m=''63770''>kids</span>
  <span m=''64010''>on</span> <span m=''64120''>Christmas.</span> <span m=''64920''>And</span>
  <span m=''65060''>what</span> <span m=''65190''>did</span> <span m=''65269''>we</span>
  <span m=''65370''>do?</span> <span m=''66060''>We</span> <span m=''66170''>created</span>
  <span m=''66530''>a</span> <span m=''66580''>mailing</span> <span m=''66910''>list</span>
  <span m=''67690''>for</span> <span m=''67860''>our</span> <span m=''67940''>group.</span>
  <span m=''70060''>Didn''t</span> <span m=''70210''>even</span> <span m=''70410''>mess</span>
  <span m=''70610''>with</span> <span m=''70690''>the</span> <span m=''70780''>PS3.</span>
  <span m=''71260''>Just</span> <span m=''71400''>created</span> <span m=''71630''>the</span>
  <span m=''71670''>mailing</span> <span m=''71970''>list</span> <span m=''72230''>and</span>
  <span m=''72890''>sat</span> <span m=''73110''>there</span> <span m=''73250''>for</span>
  <span m=''73360''>about</span> <span m=''73570''>an</span> <span m=''73680''>hour</span>
  <span m=''73890''>and</span> <span m=''73960''>a</span> <span m=''73980''>half,</span>
  <span m=''74260''>thinking</span> <span m=''74380''>of</span> <span m=''74600''>a</span>
  <span m=''74640''>name.</span> </p><p><span m=''75520''>And</span> <span m=''75730''>somehow,</span>
  <span m=''76160''>we</span> <span m=''76260''>decided</span> <span m=''76670''>on</span>
  <span m=''77770''>Zoolander''s</span> <span m=''78310''>famous</span> <span m=''78530''>face,</span>
  <span m=''79140''>Blue</span> <span m=''79340''>Steel.</span> <span m=''80350''>And</span>
  <span m=''80710''>it</span> <span m=''82670''>didn''t</span> <span m=''82870''>have</span>
  <span m=''83060''>particular</span> <span m=''83580''>significance</span> <span
  m=''84020''>to</span> <span m=''84120''>us</span> <span m=''84240''>before,</span>
  <span m=''84740''>but</span> <span m=''85800''>as</span> <span m=''85940''>you''ll</span>
  <span m=''86070''>see,</span> <span m=''86390''>it</span> <span m=''86510''>has</span>
  <span m=''87360''>a</span> <span m=''87450''>lot</span> <span m=''87700''>of</span>
  <span m=''87770''>historical</span> <span m=''88270''>value.</span> </p><p><span
  m=''92080''>Blue</span> <span m=''92425''>Steel</span> <span m=''92770''>is</span>
  <span m=''92970''>also</span> <span m=''94560''>an</span> <span m=''94730''>alloy,</span>
  <span m=''96150''>a ferrous</span> <span m=''96630''>alloy.</span> <span m=''99680''>As</span>
  <span m=''99850''>you</span> <span m=''99920''>could</span> <span m=''100060''>see,</span>
  <span m=''101785''>we</span> <span m=''102270''>have</span> <span m=''102450''>blue</span>
  <span m=''102650''>tempered</span> <span m=''103070''>spring</span> <span m=''103410''>steel</span>
  <span m=''104000''>that</span> <span m=''104860''>many</span> <span m=''105160''>companies,</span>
  <span m=''105740''>industries,</span> <span m=''106040''>use.</span> <span m=''107210''>And</span>
  <span m=''107600''>Blue</span> <span m=''107820''>Steel</span> <span m=''108070''>is</span>
  <span m=''108190''>also</span> <span m=''111090''>a</span> <span m=''111210''>warhead</span>
  <span m=''112370''>made</span> <span m=''112710''>in</span> <span m=''112790''>the</span>
  <span m=''112880''>Cold</span> <span m=''113160''>War.</span> <span m=''114440''>But</span>
  <span m=''114560''>these</span> <span m=''114720''>have</span> <span m=''114880''>nothing</span>
  <span m=''115120''>to</span> <span m=''115200''>do</span> <span m=''115350''>with</span>
  <span m=''115970''>our</span> <span m=''116110''>project.</span> </p><p><span m=''116770''>To</span>
  <span m=''116970''>us,</span> <span m=''118280''>and</span> <span m=''118810''>for</span>
  <span m=''118890''>the</span> <span m=''119000''>purpose</span> <span m=''119360''>of</span>
  <span m=''119470''>this</span> <span m=''119640''>project,</span> <span m=''120400''>Blue</span>
  <span m=''120630''>Steel</span> <span m=''121050''>is</span> <span m=''121190''>a</span>
  <span m=''121250''>distributed</span> <span m=''121690''>real</span> <span m=''122130''>time</span>
  <span m=''122560''>ray</span> <span m=''122950''>tracer.</span> <span m=''124000''>And</span>
  <span m=''124830''>Natalia</span> <span m=''124970''>is going</span> <span m=''125240''>to</span>
  <span m=''125900''>give</span> <span m=''126020''>you</span> <span m=''126070''>a</span>
  <span m=''126090''>little</span> <span m=''126260''>background</span> <span m=''126800''>on</span>
  <span m=''126900''>what</span> <span m=''127020''>ray</span> <span m=''127480''>tracing</span>
  <span m=''127790''>really is.</span> </p><p><span m=''129970''>NATALIA CHERNENKO:
  Thank</span> <span m=''130289''>you.</span> <span m=''137660''>So</span> <span m=''138810''>ray</span>
  <span m=''139270''>tracing,</span> <span m=''140960''>there</span> <span m=''141070''>are</span>
  <span m=''143030''>two</span> <span m=''143170''>terms</span> <span m=''143460''>that
  you</span> <span m=''143580''>would</span> <span m=''143790''>generally</span> <span
  m=''144210''>hear,</span> <span m=''145070''>ray</span> <span m=''145370''>tracing</span>
  <span m=''145830''>and</span> <span m=''145980''>ray</span> <span m=''146240''>casting.</span>
  <span m=''147250''>Basically,</span> <span m=''149320''>the</span> <span m=''149570''>idea</span>
  <span m=''150010''>is</span> <span m=''150730''>the</span> <span m=''150910''>camera</span>
  <span m=''151310''>is</span> <span m=''151470''>like</span> <span m=''151620''>the</span>
  <span m=''151710''>eye.</span> <span m=''152800''>And</span> <span m=''153060''>from</span>
  <span m=''153220''>the</span> <span m=''153320''>camera,</span> <span m=''154530''>rays</span>
  <span m=''154930''>are</span> <span m=''155050''>cast</span> <span m=''155710''>for</span>
  <span m=''155880''>each</span> <span m=''156100''>pixel</span> <span m=''156560''>in</span>
  <span m=''156630''>a</span> <span m=''156730''>picture.</span> </p><p><span m=''158170''>And</span>
  <span m=''159530''>these</span> <span m=''159760''>rays,</span> <span m=''160660''>they</span>
  <span m=''160790''>intersect</span> <span m=''161360''>with</span> <span m=''161520''>all</span>
  <span m=''161860''>the</span> <span m=''162800''>virtual</span> <span m=''163180''>objects</span>
  <span m=''163590''>in</span> <span m=''163700''>the</span> <span m=''163780''>scene.</span>
  <span m=''164700''>When</span> <span m=''165070''>an</span> <span m=''165150''>object</span>
  <span m=''165510''>is</span> <span m=''165660''>hit,</span> <span m=''169470''>the</span>
  <span m=''169640''>color</span> <span m=''170040''>of</span> <span m=''170190''>it</span>
  <span m=''170330''>is</span> <span m=''170530''>computed.</span> <span m=''173610''>The</span>
  <span m=''173890''>closest</span> <span m=''174320''>object</span> <span m=''174940''>that</span>
  <span m=''175110''>is</span> <span m=''175260''>intersected</span> <span m=''176400''>is</span>
  <span m=''176750''>the</span> <span m=''176830''>object</span> <span m=''178870''>that</span>
  <span m=''179110''>shows</span> <span m=''179370''>up</span> <span m=''179650''>on</span>
  <span m=''179790''>the</span> <span m=''179870''>screen.</span> </p><p><span m=''182796''>BRIAN
  SWEATT: We</span> <span m=''183292''>should credit</span> <span m=''183788''>these
  slides.</span> <span m=''184284''>They''re</span> <span m=''184780''>Fredo</span>
  <span m=''185276''>Durand''s</span> <span m=''185772''>from</span> <span m=''186268''>6A37.</span>
  </p><p><span m=''188760''>NATALIA CHERNENKO: And</span> <span m=''189130''>ray</span>
  <span m=''189280''>tracing</span> <span m=''190310''>is</span> <span m=''190490''>recursive.</span>
  <span m=''192180''>It</span> <span m=''192490''>accounts</span> <span m=''192740''>for</span>
  <span m=''193146''>shadows,</span> <span m=''194290''>positions</span> <span m=''195140''>of</span>
  <span m=''198310''>other</span> <span m=''198390''>objects</span> <span m=''198680''>in
  the</span> <span m=''198880''>scene.</span> <span m=''199200''>There</span> <span
  m=''199410''>is</span> <span m=''199720''>reflection</span> <span m=''200055''>and</span>
  <span m=''200390''>refraction.</span> </p><p><span m=''202390''>For</span> <span
  m=''202510''>example,</span> <span m=''203540''>if</span> <span m=''204080''>this</span>
  <span m=''204380''>ray</span> <span m=''204780''>were to</span> <span m=''204990''>hit</span>
  <span m=''205430''>that</span> <span m=''205730''>object</span> <span m=''206030''>and
  then</span> <span m=''206380''>reflect</span> <span m=''206580''>it,</span> <span
  m=''207440''>then</span> <span m=''207830''>another</span> <span m=''208170''>ray</span>
  <span m=''208360''>is</span> <span m=''208550''>cast</span> <span m=''209000''>from</span>
  <span m=''209180''>that</span> <span m=''209340''>object</span> <span m=''210370''>in</span>
  <span m=''210750''>the</span> <span m=''210930''>reflecting</span> <span m=''211205''>direction.</span>
  <span m=''212160''>And</span> <span m=''212400''>this</span> <span m=''212580''>can</span>
  <span m=''212770''>go</span> <span m=''212940''>on</span> <span m=''213160''>for</span>
  <span m=''214203''>an</span> <span m=''214566''>indefinite</span> <span m=''214930''>number</span>
  <span m=''215420''>of</span> <span m=''215590''>reflections.</span> <span m=''217500''>These</span>
  <span m=''217760''>are</span> <span m=''218060''>normally</span> <span m=''218400''>specified</span>
  <span m=''219070''>in</span> <span m=''220080''>the</span> <span m=''220200''>program.</span>
  </p><p><span m=''224550''>Here is</span> <span m=''224720''>an</span> <span m=''224800''>example</span>
  <span m=''225270''>of the</span> <span m=''225765''>recursion.</span> <span m=''227250''>So</span>
  <span m=''227820''>the</span> <span m=''228090''>three</span> <span m=''230623''>planes</span>
  <span m=''231310''>are</span> <span m=''231480''>reflective.</span> <span m=''232080''>They''re</span>
  <span m=''232580''>like mirrors,</span> <span m=''233080''>and</span> <span m=''233580''>there</span>
  <span m=''234080''>are three</span> <span m=''234580''>spheres</span> <span m=''235080''>running</span>
  <span m=''235580''>between</span> <span m=''236080''>them.</span> <span m=''236580''>With
  no</span> <span m=''237080''>recursion,</span> <span m=''237580''>you can</span>
  <span m=''238080''>see there is</span> <span m=''238580''>no reflection</span> <span
  m=''239080''>at all.</span> <span m=''239580''>With</span> <span m=''240080''>one
  recursion,</span> <span m=''240580''>you</span> <span m=''241080''>can</span> <span
  m=''241580''>see</span> <span m=''242080''>the</span> <span m=''243080''>rays</span>
  <span m=''243580''>are reflecting</span> <span m=''244080''>just</span> <span m=''244580''>off
  the</span> <span m=''245080''>side mirrors.</span> </p><p><span m=''245580''>At
  the</span> <span m=''246080''>end with</span> <span m=''246580''>two</span> <span
  m=''247080''>recursions,</span> <span m=''247580''>there is</span> <span m=''247790''>also</span>
  <span m=''248170''>reflection</span> <span m=''248260''>at the</span> <span m=''248550''>bottom.</span>
  <span m=''249570''>So</span> <span m=''250090''>it</span> <span m=''250210''>is</span>
  <span m=''250350''>a</span> <span m=''250510''>reflection</span> <span m=''251050''>of</span>
  <span m=''251490''>one</span> <span m=''251670''>of</span> <span m=''251750''>the</span>
  <span m=''251840''>reflections.</span> <span m=''257180''>And</span> <span m=''257670''>this</span>
  <span m=''257870''>is</span> <span m=''258430''>very</span> <span m=''258720''>computationally</span>
  <span m=''259430''>intensive</span> <span m=''260550''>because</span> <span m=''262420''>for</span>
  <span m=''262550''>every</span> <span m=''262840''>pixel,</span> <span m=''263590''>you''re</span>
  <span m=''263740''>casting</span> <span m=''264220''>a</span> <span m=''264290''>ray.</span>
  <span m=''265090''>And</span> <span m=''265250''>for</span> <span m=''265370''>every</span>
  <span m=''265990''>object</span> <span m=''266460''>in</span> <span m=''266540''>the</span>
  <span m=''266640''>scene,</span> <span m=''267300''>you''re</span> <span m=''267490''>intersecting</span>
  <span m=''268520''>that</span> <span m=''268750''>ray</span> <span m=''269370''>with</span>
  <span m=''269490''>the</span> <span m=''269570''>object</span> <span m=''270010''>and</span>
  <span m=''270140''>seeing</span> <span m=''270370''>if</span> <span m=''270470''>it''s</span>
  <span m=''270670''>hit.</span> </p><p><span m=''271480''>And</span> <span m=''271610''>then</span>
  <span m=''271760''>if</span> <span m=''271880''>it</span> <span m=''271980''>is</span>
  <span m=''272190''>hit</span> <span m=''272430''>and</span> <span m=''272540''>it</span>
  <span m=''272640''>is</span> <span m=''272810''>reflective</span> <span m=''273410''>or</span>
  <span m=''273570''>refractive--</span> <span m=''275560''>so</span> <span m=''275870''>transparent--</span>
  <span m=''276530''>then</span> <span m=''278390''>another</span> <span m=''278490''>ray</span>
  <span m=''278620''>is</span> <span m=''278920''>cast.</span> <span m=''280300''>This</span>
  <span m=''280630''>scene</span> <span m=''281042''>here</span> <span m=''282280''>is</span>
  <span m=''283450''>a</span> <span m=''283630''>resolution</span> <span m=''284000''>1024</span>
  <span m=''284850''>by</span> <span m=''284980''>1024</span> <span m=''286440''>and</span>
  <span m=''286880''>recursion</span> <span m=''287360''>depth</span> <span m=''287640''>is</span>
  <span m=''287910''>100.</span> <span m=''289490''>And</span> <span m=''289620''>the</span>
  <span m=''289680''>rendering</span> <span m=''290030''>time</span> <span m=''290740''>in</span>
  <span m=''290870''>our</span> <span m=''290960''>program</span> <span m=''291290''>was</span>
  <span m=''291480''>2.6</span> <span m=''292040''>seconds.</span> <span m=''294780''>The</span>
  <span m=''295890''>rendering</span> <span m=''296320''>time</span> <span m=''296650''>for</span>
  <span m=''298130''>20</span> <span m=''298750''>depth</span> <span m=''299020''>recursion</span>
  <span m=''299430''>was</span> <span m=''300200''>600</span> <span m=''300630''>milliseconds,</span>
  <span m=''301910''>and</span> <span m=''302800''>for</span> <span m=''303263''>10</span>
  <span m=''304190''>was</span> <span m=''304920''>300</span> <span m=''305270''>milliseconds.</span>
  </p><p><span m=''306492''>PROFESSOR: [INAUDIBLE]</span> <span m=''308460''>SPU</span>
  <span m=''308952''>[INAUDIBLE].</span> <span m=''310920''>What would</span> <span
  m=''311412''>be the</span> <span m=''311904''>[INAUDIBLE].</span> </p><p><span m=''313872''>R.
  J. RYAN: Many</span> <span m=''314370''>of us</span> <span m=''314410''>have taken</span>
  <span m=''314790''>6A37,</span> <span m=''316250''>and in</span> <span m=''316675''>that</span>
  <span m=''317100''>class,</span> <span m=''317550''>we''re all</span> <span m=''317910''>about</span>
  <span m=''318120''>ray tracers.</span> <span m=''320300''>And</span> <span m=''320800''>a</span>
  <span m=''321300''>typical</span> <span m=''321490''>scene</span> <span m=''321840''>like
  the</span> <span m=''322060''>one</span> <span m=''322460''>that</span> <span m=''322928''>is
  on the</span> <span m=''323396''>PowerPoint</span> <span m=''323864''>right now</span>
  <span m=''324332''>could take</span> <span m=''324800''>up</span> <span m=''325268''>to</span>
  <span m=''325736''>a</span> <span m=''326204''>minute or</span> <span m=''326672''>more.</span>
  <span m=''328550''>Often, if</span> <span m=''328990''>you</span> <span m=''330900''>were
  to</span> <span m=''331350''>do</span> <span m=''331580''>100</span> <span m=''331840''>bounces,</span>
  <span m=''332360''>I</span> <span m=''332470''>think</span> <span m=''333050''>mine</span>
  <span m=''333420''>would</span> <span m=''333900''>probably take</span> <span m=''334280''>over</span>
  <span m=''334660''>10</span> <span m=''335035''>minutes.</span> </p><p><span m=''337398''>PROFESSOR:
  [INAUDIBLE]</span> <span m=''338392''>you</span> <span m=''338889''>just to</span>
  <span m=''339386''>[INAUDIBLE]</span> <span m=''339883''>SPU</span> <span m=''340380''>or</span>
  <span m=''340877''>[? one SPU. ?]</span> </p><p><span m=''342240''>NATALIA CHERNENKO:
  We</span> <span m=''342350''>did</span> <span m=''342570''>try</span> <span m=''343020''>different</span>
  <span m=''343290''>SPUs.</span> <span m=''344110''>This</span> <span m=''344390''>picture,</span>
  <span m=''344730''>we</span> <span m=''344860''>didn''t</span> <span m=''345000''>try
  with</span> <span m=''346120''>different</span> <span m=''346520''>SPUs,</span>
  <span m=''346840''>but</span> <span m=''348220''>we</span> <span m=''348330''>have</span>
  <span m=''348510''>tried</span> <span m=''348750''>other</span> <span m=''348980''>scenes</span>
  <span m=''349550''>with</span> <span m=''349690''>various</span> <span m=''350060''>numbers.</span>
  <span m=''350610''>And</span> <span m=''351370''>we</span> <span m=''351480''>did</span>
  <span m=''351750''>get</span> <span m=''352560''>exact</span> <span m=''352960''>linear</span>
  <span m=''353270''>speed</span> <span m=''353670''>up.</span> <span m=''354290''>So</span>
  <span m=''355840''>if</span> <span m=''356030''>there</span> <span m=''356160''>were</span>
  <span m=''356590''>twice</span> <span m=''356830''>as</span> <span m=''356910''>many</span>
  <span m=''357120''>SPUs,</span> <span m=''357620''>it would</span> <span m=''358540''>be</span>
  <span m=''359160''>twice as</span> <span m=''359530''>fast.</span> </p><p><span
  m=''365540''>R. J. RYAN: OK.</span> <span m=''365790''>So</span> <span m=''366825''>I''m</span>
  <span m=''367290''>going to</span> <span m=''367755''>talk to you</span> <span m=''368220''>about
  optimizations</span> <span m=''368685''>that we</span> <span m=''369150''>did.</span>
  <span m=''370080''>Natalia''s</span> <span m=''370580''>told</span> <span m=''370840''>you</span>
  <span m=''370910''>about</span> <span m=''371110''>ray tracing,</span> <span m=''371600''>and
  that''s</span> <span m=''372090''>only half</span> <span m=''372580''>of our</span>
  <span m=''373070''>project.</span> <span m=''375030''>The part</span> <span m=''375520''>that</span>
  <span m=''376500''>we have</span> <span m=''376990''>to</span> <span m=''377490''>focus
  on</span> <span m=''377790''>is</span> <span m=''378090''>optimizing.</span> <span
  m=''379012''>And</span> <span m=''379473''>meeting</span> <span m=''379934''>that
  goal</span> <span m=''380395''>of</span> <span m=''380856''>being</span> <span m=''381320''>real</span>
  <span m=''381570''>time.</span> </p><p><span m=''382565''>And</span> <span m=''383010''>for</span>
  <span m=''383210''>us,</span> <span m=''383390''>real</span> <span m=''383590''>time,</span>
  <span m=''385400''>you</span> <span m=''385630''>have</span> <span m=''385740''>to</span>
  <span m=''386080''>ask,</span> <span m=''386480''>what</span> <span m=''386680''>is</span>
  <span m=''386820''>real</span> <span m=''387000''>time?</span> <span m=''387745''>If</span>
  <span m=''388040''>we</span> <span m=''388130''>go</span> <span m=''388290''>off</span>
  <span m=''388420''>of</span> <span m=''388610''>like,</span> <span m=''389800''>the</span>
  <span m=''390150''>American</span> <span m=''390770''>video</span> <span m=''391010''>standard</span>
  <span m=''391420''>NTSC,</span> <span m=''392790''>they</span> <span m=''393020''>define</span>
  <span m=''393130''>it</span> <span m=''393300''>to</span> <span m=''393380''>be</span>
  <span m=''393550''>around</span> <span m=''394270''>27,</span> <span m=''394950''>30</span>
  <span m=''395190''>frames</span> <span m=''395470''>a</span> <span m=''395530''>second.</span>
  <span m=''397430''>So</span> <span m=''397880''>that</span> <span m=''398070''>was</span>
  <span m=''398270''>pretty</span> <span m=''398460''>much</span> <span m=''398670''>the</span>
  <span m=''398760''>goal</span> <span m=''399020''>that</span> <span m=''399230''>we
  set when</span> <span m=''399640''>we</span> <span m=''399730''>set</span> <span
  m=''399920''>out</span> <span m=''400020''>to</span> <span m=''400100''>do</span>
  <span m=''400210''>this.</span> </p><p><span m=''400890''>And</span> <span m=''401250''>so</span>
  <span m=''401840''>we</span> <span m=''402000''>took</span> <span m=''402200''>the</span>
  <span m=''402290''>code</span> <span m=''402590''>and</span> <span m=''402740''>we</span>
  <span m=''402850''>think,</span> <span m=''403490''>OK,</span> <span m=''403840''>we</span>
  <span m=''403980''>can</span> <span m=''404120''>split</span> <span m=''404420''>this.</span>
  <span m=''404790''>This</span> <span m=''405160''>task</span> <span m=''405520''>is</span>
  <span m=''405990''>easily</span> <span m=''406410''>parallelizable.</span> <span
  m=''407290''>But</span> <span m=''407570''>we''re</span> <span m=''407680''>going</span>
  <span m=''407760''>to</span> <span m=''407960''>have to do</span> <span m=''408080''>a</span>
  <span m=''408150''>lot</span> <span m=''408400''>more</span> <span m=''408500''>than</span>
  <span m=''408640''>that</span> <span m=''410320''>if</span> <span m=''410660''>we</span>
  <span m=''410720''>want</span> <span m=''410870''>to</span> <span m=''410910''>get</span>
  <span m=''411130''>better</span> <span m=''411350''>rates.</span> <span m=''412010''>So</span>
  <span m=''412880''>we</span> <span m=''413000''>took</span> <span m=''413160''>advantage</span>
  <span m=''413570''>of</span> <span m=''414120''>the</span> <span m=''414360''>hardware</span>
  <span m=''414700''>that we were</span> <span m=''415120''>on.</span> <span m=''415430''>And</span>
  <span m=''416420''>one</span> <span m=''416620''>thing</span> <span m=''416840''>that</span>
  <span m=''420070''>on</span> <span m=''420230''>the ray</span> <span m=''420300''>tracing</span>
  <span m=''420830''>end,</span> <span m=''421570''>we</span> <span m=''421700''>had</span>
  <span m=''421850''>to</span> <span m=''422130''>go</span> <span m=''422320''>crazy</span>
  <span m=''422690''>with,</span> <span m=''422970''>was</span> <span m=''423390''>SIMD.</span>
  </p><p></p><p><span m=''424670''>Pretty</span> <span m=''424860''>much,</span> <span
  m=''426120''>the</span> <span m=''426370''>entire</span> <span m=''426760''>ray
  tracer</span> <span m=''427790''>never</span> <span m=''428300''>deals</span> <span
  m=''428630''>with</span> <span m=''428730''>a</span> <span m=''428830''>scalar</span>
  <span m=''429210''>value.</span> <span m=''431010''>We</span> <span m=''431170''>use</span>
  <span m=''431350''>SIMD</span> <span m=''431690''>for</span> <span m=''431850''>everything.</span>
  <span m=''432660''>And</span> <span m=''433490''>in</span> <span m=''434110''>the</span>
  <span m=''434960''>core</span> <span m=''435300''>of</span> <span m=''435440''>it,</span>
  <span m=''437380''>we</span> <span m=''438040''>do</span> <span m=''438220''>branch</span>
  <span m=''438550''>avoidance.</span> <span m=''439460''>So</span> <span m=''439760''>we</span>
  <span m=''440160''>really</span> <span m=''440420''>try</span> <span m=''440620''>not</span>
  <span m=''441050''>to</span> <span m=''441120''>take</span> <span m=''441430''>branches,</span>
  <span m=''441880''>because</span> <span m=''442620''>branch</span> <span m=''443100''>misses</span>
  <span m=''443230''>are</span> <span m=''443290''>very</span> <span m=''443530''>costly</span>
  <span m=''443920''>on the</span> <span m=''444255''>cell.</span> <span m=''445010''>So</span>
  <span m=''447020''>I</span> <span m=''447110''>believe</span> <span m=''447430''>there''s</span>
  <span m=''447590''>something</span> <span m=''447940''>like</span> <span m=''448440''>three</span>
  <span m=''449490''>if</span> <span m=''449660''>statements</span> <span m=''451510''>spread</span>
  <span m=''451830''>across</span> <span m=''452290''>4,000</span> <span m=''452840''>lines</span>
  <span m=''453050''>of</span> <span m=''453150''>code</span> <span m=''454020''>for</span>
  <span m=''454180''>the</span> <span m=''454280''>ray tracer.</span> </p><p><span
  m=''455520''>We</span> <span m=''455680''>really</span> <span m=''456340''>took</span>
  <span m=''456640''>SIMD</span> <span m=''457020''>to hear</span> <span m=''457740''>in</span>
  <span m=''458100''>this.</span> <span m=''462110''>Using</span> <span m=''462370''>SIMD,</span>
  <span m=''462780''>you</span> <span m=''462890''>can</span> <span m=''464830''>process</span>
  <span m=''465590''>arrays</span> <span m=''466160''>of</span> <span m=''466530''>structures.</span>
  <span m=''467480''>So</span> <span m=''467760''>we</span> <span m=''468930''>took--</span>
  </p><p><span m=''469797''>NATALIA CHERNENKO: [INAUDIBLE]</span> </p><p></p><p><span
  m=''472585''>R. J. RYAN: We</span> <span m=''472840''>would</span> <span m=''473200''>trace</span>
  <span m=''473540''>ray</span> <span m=''473790''>packets</span> <span m=''474350''>of</span>
  <span m=''474860''>four</span> <span m=''475200''>rays</span> <span m=''475620''>at</span>
  <span m=''475790''>a</span> <span m=''475840''>time,</span> <span m=''476510''>and</span>
  <span m=''476790''>from</span> <span m=''476950''>those</span> <span m=''477160''>ray</span>
  <span m=''477515''>packets, we would</span> <span m=''477870''>generate</span> <span
  m=''478310''>hit</span> <span m=''478500''>packets.</span> <span m=''478950''>And</span>
  <span m=''479200''>then</span> <span m=''479350''>similarly,</span> <span m=''480340''>as</span>
  <span m=''480360''>you</span> <span m=''480430''>go</span> <span m=''480570''>down</span>
  <span m=''480670''>the</span> <span m=''480740''>line,</span> <span m=''481120''>we</span>
  <span m=''481220''>would</span> <span m=''481700''>produce</span> <span m=''482020''>an</span>
  <span m=''482140''>RGB</span> <span m=''482550''>packet,</span> <span m=''482920''>which</span>
  <span m=''483090''>is</span> <span m=''484150''>four</span> <span m=''484420''>color</span>
  <span m=''484650''>values</span> <span m=''485430''>tied</span> <span m=''485630''>into</span>
  <span m=''485800''>one.</span> <span m=''486540''>So</span> <span m=''486830''>at</span>
  <span m=''487070''>every</span> <span m=''487260''>step,</span> <span m=''487560''>we</span>
  <span m=''487955''>would</span> <span m=''489140''>use</span> <span m=''489300''>SIMD</span>
  <span m=''489700''>to</span> <span m=''489790''>our</span> <span m=''489880''>advantage.</span>
  <span m=''491160''>Now</span> <span m=''491530''>Brian''s</span> <span m=''491830''>going</span>
  <span m=''492130''>to</span> <span m=''492270''>talk to you</span> <span m=''492520''>about</span>
  <span m=''492840''>pipe lining.</span> </p><p><span m=''497570''>BRIAN SWEATT: So</span>
  <span m=''497905''>of</span> <span m=''498240''>particular</span> <span m=''498480''>importance</span>
  <span m=''498820''>on the</span> <span m=''499075''>cell</span> <span m=''500085''>is</span>
  <span m=''500400''>not</span> <span m=''500680''>only</span> <span m=''501510''>what</span>
  <span m=''501710''>instructions</span> <span m=''502075''>you</span> <span m=''502440''>execute,</span>
  <span m=''502775''>but the</span> <span m=''503110''>order that</span> <span m=''503584''>you
  execute</span> <span m=''504058''>them in,</span> <span m=''504532''>because there</span>
  <span m=''505006''>is no  reorder</span> <span m=''505480''>buffer</span> <span
  m=''505954''>on</span> <span m=''506430''>the</span> <span m=''506730''>cell.</span>
  <span m=''507080''>There is</span> <span m=''507580''>no out   of</span> <span m=''507946''>order</span>
  <span m=''508312''>execution.</span> <span m=''508680''>And</span> <span m=''509920''>despite</span>
  <span m=''510280''>the</span> <span m=''510340''>fact</span> <span m=''510650''>that</span>
  <span m=''510720''>compiler</span> <span m=''510930''>technology</span> <span m=''511400''>is</span>
  <span m=''511490''>very</span> <span m=''511700''>good,</span> <span m=''512179''>hand</span>
  <span m=''512419''>optimization</span> <span m=''513549''>and</span> <span m=''513650''>pipe
  lining</span> <span m=''514030''>instructions</span> <span m=''515909''>is</span>
  <span m=''516409''>still</span> <span m=''516760''>always</span> <span m=''517020''>better.</span>
  </p><p><span m=''517770''>For</span> <span m=''517919''>instance,</span> <span m=''518890''>with</span>
  <span m=''519309''>our</span> <span m=''519500''>triangle</span> <span m=''519990''>intersection</span>
  <span m=''520460''>routine,</span> <span m=''522520''>we</span> <span m=''522620''>gained</span>
  <span m=''524440''>on</span> <span m=''524630''>the</span> <span m=''524730''>order</span>
  <span m=''524970''>of</span> <span m=''525060''>hundreds</span> <span m=''525360''>of</span>
  <span m=''525430''>milliseconds</span> <span m=''527050''>of</span> <span m=''527220''>render</span>
  <span m=''527470''>time.</span> <span m=''529470''>We</span> <span m=''529600''>shaved</span>
  <span m=''529970''>hundreds</span> <span m=''530390''>of</span> <span m=''530490''>milliseconds</span>
  <span m=''530820''>of</span> <span m=''530880''>render</span> <span m=''531020''>time</span>
  <span m=''531300''>off of</span> <span m=''531520''>our render</span> <span m=''531870''>time</span>
  <span m=''532110''>for</span> <span m=''532430''>some</span> <span m=''532640''>scenes</span>
  <span m=''532850''>you will</span> <span m=''533010''>see</span> <span m=''533150''>later,</span>
  <span m=''534010''>just</span> <span m=''534310''>by</span> <span m=''535960''>reordering</span>
  <span m=''536510''>our</span> <span m=''536590''>calculations</span> <span m=''537190''>in</span>
  <span m=''537290''>the</span> <span m=''537380''>intersection</span> <span m=''537830''>code.</span>
  <span m=''538450''>So</span> <span m=''538520''>it''s</span> <span m=''538630''>very</span>
  <span m=''538850''>important,</span> <span m=''539340''>especially</span> <span
  m=''539620''>on</span> <span m=''539690''>the</span> <span m=''539760''>SPEs.</span>
  </p><p><span m=''540750''>And</span> <span m=''541430''>one</span> <span m=''541640''>other</span>
  <span m=''541800''>optimization</span> <span m=''542350''>we</span> <span m=''542440''>made</span>
  <span m=''542720''>was</span> <span m=''543290''>the</span> <span m=''543380''>fact</span>
  <span m=''543590''>that</span> <span m=''543690''>we</span> <span m=''544480''>coded</span>
  <span m=''544870''>basically</span> <span m=''545280''>everything</span> <span m=''546430''>on</span>
  <span m=''546610''>the</span> <span m=''546710''>SPEs.</span> <span m=''547750''>Anything</span>
  <span m=''548020''>running</span> <span m=''548200''>on</span> <span m=''548260''>the</span>
  <span m=''548430''>SPEs</span> <span m=''548660''>is</span> <span m=''548750''>coded</span>
  <span m=''549310''>in</span> <span m=''549500''>C.</span> <span m=''550490''>Not</span>
  <span m=''550985''>in C++.</span> <span m=''551480''>And</span> <span m=''551590''>we''re</span>
  <span m=''551770''>not</span> <span m=''551860''>using</span> <span m=''552130''>inheritance</span>
  <span m=''553100''>when</span> <span m=''553120''>we</span> <span m=''553240''>do</span>
  <span m=''553350''>use</span> <span m=''553540''>C++</span> <span m=''553730''>because</span>
  <span m=''555260''>virtual</span> <span m=''555600''>functions</span> <span m=''556150''>have</span>
  <span m=''556860''>more</span> <span m=''557140''>overhead</span> <span m=''557890''>in</span>
  <span m=''558620''>respect</span> <span m=''558930''>to</span> <span m=''559010''>memory,</span>
  <span m=''560150''>the V</span> <span m=''560250''>table,</span> <span m=''560800''>and</span>
  <span m=''560970''>also</span> <span m=''561220''>looking</span> <span m=''561520''>up</span>
  <span m=''561910''>the</span> <span m=''561990''>function</span> <span m=''562290''>pointers</span>
  <span m=''562640''>from</span> <span m=''562770''>the V</span> <span m=''562980''>table.</span>
  <span m=''563880''>So</span> <span m=''564220''>these</span> <span m=''564420''>are</span>
  <span m=''564490''>just</span> <span m=''564820''>a</span> <span m=''564900''>couple</span>
  <span m=''565130''>of</span> <span m=''565180''>the</span> <span m=''565280''>optimizations</span>
  <span m=''565820''>we</span> <span m=''565920''>made.</span> <span m=''566580''>We''ll</span>
  <span m=''566700''>talk</span> <span m=''566890''>about</span> <span m=''567100''>more</span>
  <span m=''567250''>later.</span> </p><p><span m=''567520''>AUDIENCE: Just a</span>
  <span m=''567820''>quick question.</span> <span m=''568120''>So</span> <span m=''568290''>for</span>
  <span m=''568580''>the pipeline, you</span> <span m=''568990''>actually</span> <span
  m=''569470''>reordered</span> <span m=''569950''>instruction</span> <span m=''570500''>statements?</span>
  <span m=''571630''>The</span> <span m=''571850''>compiler</span> <span m=''572320''>wasn''t</span>
  <span m=''572520''>very</span> <span m=''572770''>helpful</span> <span m=''573055''>in
  that</span> <span m=''573340''>respect?</span> </p><p><span m=''573710''>BRIAN SWEATT:
  Yeah.</span> <span m=''574125''>So</span> <span m=''576516''>on</span> <span m=''577010''>that</span>
  <span m=''577460''>scene,</span> <span m=''577950''>1024</span> <span m=''578470''>by</span>
  <span m=''578580''>1024</span> <span m=''579300''>with</span> <span m=''579490''>the</span>
  <span m=''579950''>spheres,</span> <span m=''580480''>we</span> <span m=''580660''>were</span>
  <span m=''580860''>getting,</span> <span m=''582110''>Natalia</span> <span m=''582310''>mentioned</span>
  <span m=''583460''>with</span> <span m=''583890''>a</span> <span m=''584060''>depth</span>
  <span m=''584320''>of</span> <span m=''584440''>recursion</span> <span m=''585630''>10,</span>
  <span m=''586060''>we</span> <span m=''586160''>were</span> <span m=''586260''>getting</span>
  <span m=''586780''>300</span> <span m=''587190''>milliseconds.</span> <span m=''587800''>That''s</span>
  <span m=''588000''>with</span> <span m=''588140''>optimized.</span> </p><p><span
  m=''588970''>Without</span> <span m=''589250''>the</span> <span m=''589350''>optimizations,</span>
  <span m=''590090''>we</span> <span m=''590230''>were</span> <span m=''590320''>getting</span>
  <span m=''590540''>closer</span> <span m=''590780''>to</span> <span m=''591290''>500</span>
  <span m=''592250''>with</span> <span m=''592370''>a</span> <span m=''592440''>depth</span>
  <span m=''592660''>of</span> <span m=''592720''>recursion</span> <span m=''595100''>of</span>
  <span m=''595180''>10.</span> <span m=''595850''>And</span> <span m=''596970''>we</span>
  <span m=''597170''>gained</span> <span m=''597380''>that</span> <span m=''597520''>extra</span>
  <span m=''597690''>200</span> <span m=''598070''>milliseconds</span> <span m=''598990''>just</span>
  <span m=''599300''>by</span> <span m=''599440''>reordering</span> <span m=''599930''>instructions</span>
  <span m=''600590''>in</span> <span m=''600700''>the</span> <span m=''600770''>intersection</span>
  <span m=''601770''>with</span> <span m=''602210''>optimization</span> <span m=''602860''>level</span>
  <span m=''603370''>03</span> <span m=''603980''>in</span> <span m=''604110''>XLC.</span>
  <span m=''605570''>So</span> <span m=''606270''>hand</span> <span m=''606580''>optimization,</span>
  <span m=''607220''>like</span> <span m=''607440''>Mike</span> <span m=''607640''>Acton</span>
  <span m=''607930''>said</span> <span m=''608210''>in</span> <span m=''608380''>class,</span>
  <span m=''608930''>is</span> <span m=''609130''>still</span> <span m=''609340''>very</span>
  <span m=''609570''>important.</span> <span m=''613460''>And</span> <span m=''613820''>I''m</span>
  <span m=''613890''>going</span> <span m=''613980''>to</span> <span m=''614030''>hand</span>
  <span m=''614240''>you</span> <span m=''614450''>off to</span> <span m=''614640''>Mikey</span>
  <span m=''614740''>now</span> <span m=''615030''>to</span> <span m=''615150''>discuss</span>
  <span m=''615540''>the</span> <span m=''615640''>regular</span> <span m=''615940''>grid.</span>
  </p><p><span m=''621220''>MICHAEL D''AMBROSIO: So</span> <span m=''621535''>one
  of</span> <span m=''621850''>the</span> <span m=''622390''>problems,</span> <span
  m=''622850''>I guess,</span> <span m=''623030''>with ray</span> <span m=''623325''>tracing</span>
  <span m=''624510''>is that</span> <span m=''624760''>intersections</span> <span
  m=''625340''>are</span> <span m=''625350''>very</span> <span m=''625800''>expensive.</span>
  <span m=''626953''>And</span> <span m=''627356''>when</span> <span m=''627760''>you</span>
  <span m=''628115''>have</span> <span m=''628470''>scenes</span> <span m=''628940''>with</span>
  <span m=''629840''>n rays</span> <span m=''630330''>and</span> <span m=''630670''>m</span>
  <span m=''631010''>primitives, well, you</span> <span m=''631150''>have to</span>
  <span m=''631490''>generate</span> <span m=''631820''>n</span> <span m=''632150''>times
  m</span> <span m=''632830''>intersections.</span> <span m=''634200''>So</span> <span
  m=''634630''>one</span> <span m=''635096''>common</span> <span m=''636030''>acceleration</span>
  <span m=''636610''>structure</span> <span m=''637080''>is</span> <span m=''637250''>grid.</span>
  </p><p><span m=''637700''>And</span> <span m=''637950''>the concept</span> <span
  m=''638170''>is very</span> <span m=''638632''>simple,</span> <span m=''639094''>as
  the picture</span> <span m=''639556''>depicts.</span> <span m=''640480''>You</span>
  <span m=''640560''>just</span> <span m=''640870''>take your</span> <span m=''641355''>screen,</span>
  <span m=''641840''>split</span> <span m=''642110''>it up</span> <span m=''642380''>into
  a</span> <span m=''642460''>number</span> <span m=''642720''>of</span> <span m=''642980''>evenly</span>
  <span m=''643370''>size</span> <span m=''643810''>box</span> <span m=''644155''>holes,</span>
  <span m=''644840''>place</span> <span m=''645210''>your</span> <span m=''645330''>primitives</span>
  <span m=''645870''>in</span> <span m=''646210''>them,</span> <span m=''646550''>and</span>
  <span m=''646710''>then</span> <span m=''646850''>you</span> <span m=''646930''>march
  your</span> <span m=''647260''>ray</span> <span m=''647590''>through.</span> <span
  m=''648560''>And</span> <span m=''648930''>you</span> <span m=''649120''>only</span>
  <span m=''649920''>intersect</span> <span m=''650480''>the</span> <span m=''650600''>ray</span>
  <span m=''650910''>with</span> <span m=''652090''>primitives</span> <span m=''652550''>that</span>
  <span m=''652720''>are</span> <span m=''652940''>around</span> <span m=''653470''>the</span>
  <span m=''653590''>area.</span> </p><p><span m=''654660''>And</span> <span m=''655210''>the</span>
  <span m=''655300''>good</span> <span m=''655480''>thing</span> <span m=''655610''>about</span>
  <span m=''655900''>a grid</span> <span m=''656090''>is</span> <span m=''656230''>that</span>
  <span m=''656430''>it''s</span> <span m=''656600''>very</span> <span m=''656930''>easy</span>
  <span m=''657110''>to</span> <span m=''657180''>construct,</span> <span m=''657690''>as</span>
  <span m=''657790''>opposed</span> <span m=''658160''>to,</span> <span m=''658200''>say,</span>
  <span m=''658510''>a k-d</span> <span m=''658880''>tree</span> <span m=''659120''>or
  an</span> <span m=''659230''>octree.</span> <span m=''660130''>Those</span> <span
  m=''660760''>take</span> <span m=''660990''>on</span> <span m=''661090''>the</span>
  <span m=''661150''>order</span> <span m=''661310''>of</span> <span m=''661390''>n</span>
  <span m=''661540''>log</span> <span m=''661850''>n,</span> <span m=''662050''>where</span>
  <span m=''662200''>n</span> <span m=''662310''>is</span> <span m=''662420''>number</span>
  <span m=''662700''>of</span> <span m=''662900''>primitives.</span> <span m=''664350''>Regular</span>
  <span m=''664850''>grid</span> <span m=''665150''>is</span> <span m=''665600''>order</span>
  <span m=''665870''>n,</span> <span m=''666140''>where</span> <span m=''666350''>n</span>
  <span m=''666635''>is the number</span> <span m=''666920''>of primitives.</span>
  <span m=''667480''>And</span> <span m=''667690''>the</span> <span m=''667750''>reason</span>
  <span m=''667980''>why</span> <span m=''668100''>we</span> <span m=''668220''>did</span>
  <span m=''668400''>this</span> <span m=''668550''>is</span> <span m=''668650''>because</span>
  <span m=''668940''>with</span> <span m=''669070''>an</span> <span m=''669170''>interactive</span>
  <span m=''669700''>scene</span> <span m=''671420''>where</span> <span m=''671590''>things</span>
  <span m=''671840''>are</span> <span m=''671880''>moving</span> <span m=''672170''>around,</span>
  <span m=''672680''>you</span> <span m=''672810''>need</span> <span m=''672980''>to</span>
  <span m=''673110''>rebuild</span> <span m=''673570''>the</span> <span m=''673630''>grid</span>
  <span m=''674030''>every</span> <span m=''674600''>frame</span> <span m=''675090''>or</span>
  <span m=''675380''>whenever</span> <span m=''675760''>something</span> <span m=''676070''>moves.</span>
  </p><p><span m=''676930''>So</span> <span m=''677320''>we</span> <span m=''677530''>favored</span>
  <span m=''677980''>this</span> <span m=''679240''>choice</span> <span m=''679470''>of</span>
  <span m=''679530''>acceleration</span> <span m=''680070''>structure</span> <span
  m=''680410''>because</span> <span m=''680740''>it</span> <span m=''680840''>was</span>
  <span m=''681050''>quick</span> <span m=''681600''>to</span> <span m=''681680''>build</span>
  <span m=''682290''>and</span> <span m=''682530''>easy</span> <span m=''682900''>to</span>
  <span m=''683030''>traverse.</span> <span m=''686080''>And</span> <span m=''686470''>now</span>
  <span m=''688141''>Fish</span> <span m=''688628''>is going</span> <span m=''689115''>to
  tell you</span> <span m=''689602''>about the</span> <span m=''690576''>fun</span>
  <span m=''691063''>part of the</span> <span m=''691550''>project.</span> </p><p><span
  m=''697394''>SCOTT FISHER: I</span> <span m=''697881''>was in</span> <span m=''698368''>charge</span>
  <span m=''698855''>of</span> <span m=''699342''>building the</span> <span m=''699829''>actual</span>
  <span m=''700803''>physics</span> <span m=''701290''>engine.</span> <span m=''702270''>Our</span>
  <span m=''702550''>original</span> <span m=''702830''>plan</span> <span m=''703220''>was</span>
  <span m=''703600''>to</span> <span m=''704420''>the</span> <span m=''704770''>6170</span>
  <span m=''706320''>well-known</span> <span m=''707390''>gizmo</span> <span m=''707770''>ball</span>
  <span m=''708910''>in</span> <span m=''709150''>3D</span> <span m=''709820''>and</span>
  <span m=''710150''>ray</span> <span m=''710465''>traced.</span> <span m=''711860''>And</span>
  <span m=''712120''>I</span> <span m=''712380''>guess</span> <span m=''712580''>if
  we</span> <span m=''712740''>want to</span> <span m=''715825''>show</span> <span
  m=''716276''>that?</span> <span m=''717180''>I</span> <span m=''717300''>have</span>
  <span m=''717460''>it</span> <span m=''717650''>running</span> <span m=''717860''>on
  this</span> <span m=''718150''>laptop.</span> <span m=''720790''>We</span> <span
  m=''720900''>didn''t</span> <span m=''721050''>quite</span> <span m=''721300''>get</span>
  <span m=''721450''>it</span> <span m=''721800''>ray</span> <span m=''722250''>traced,</span>
  <span m=''722700''>but</span> <span m=''723670''>I''m</span> <span m=''723790''>just
  going</span> <span m=''723940''>to</span> <span m=''724100''>show</span> <span m=''724260''>you</span>
  <span m=''724890''>a</span> <span m=''725010''>little</span> <span m=''725230''>bit</span>
  <span m=''725490''>of</span> <span m=''725870''>what</span> <span m=''726110''>I</span>
  <span m=''726170''>did</span> <span m=''726520''>as</span> <span m=''726670''>a
  physics</span> <span m=''726930''>engine.</span> <span m=''741910''>Maybe</span>
  <span m=''742130''>not.</span> </p><p></p><p><span m=''753476''>R. J. RYAN: We''ll
  get the demo</span> <span m=''753958''>working and then</span> <span m=''754440''>I
  think we can</span> <span m=''754922''>use it later.</span> </p><p><span m=''755886''>SCOTT
  FISHER: Anyway,</span> <span m=''756380''>it</span> <span m=''756530''>was</span>
  <span m=''756880''>basically</span> <span m=''757070''>a</span> <span m=''757360''>2
  and</span> <span m=''757470''>1/2</span> <span m=''757740''>D</span> <span m=''757910''>version</span>
  <span m=''758410''>of</span> <span m=''758710''>the</span> <span m=''759390''>example</span>
  <span m=''760020''>that</span> <span m=''760120''>was</span> <span m=''760320''>just</span>
  <span m=''760520''>up</span> <span m=''760640''>on</span> <span m=''760740''>the</span>
  <span m=''760810''>screen.</span> <span m=''762170''>Flippers</span> <span m=''762500''>work,</span>
  <span m=''763200''>absorbers</span> <span m=''763500''>work,</span> <span m=''764880''>and</span>
  <span m=''765570''>due</span> <span m=''765690''>to</span> <span m=''765880''>complications,</span>
  <span m=''766440''>we</span> <span m=''766530''>never</span> <span m=''766730''>did</span>
  <span m=''766940''>get</span> <span m=''767060''>it</span> <span m=''767270''>fully
  ray</span> <span m=''767710''>traced.</span> <span m=''768470''>And</span> <span
  m=''769330''>I</span> <span m=''769440''>guess</span> <span m=''772090''>we''ll</span>
  <span m=''772340''>go</span> <span m=''772540''>ahead</span> <span m=''772810''>and</span>
  <span m=''773020''>give</span> <span m=''773190''>you the</span> <span m=''773370''>real</span>
  <span m=''773740''>ray</span> <span m=''774000''>trace</span> <span m=''774120''>demo,</span>
  <span m=''774270''>since</span> <span m=''774480''>we</span> <span m=''774610''>do</span>
  <span m=''774720''>have</span> <span m=''774900''>a</span> <span m=''774940''>couple</span>
  <span m=''775190''>of</span> <span m=''775420''>those.</span> </p><p></p><p><span
  m=''784613''>PROFESSOR: So</span> <span m=''785591''>their actual</span> <span m=''786080''>demo
  will</span> <span m=''786569''>be</span> <span m=''787058''>on a</span> <span m=''787547''>little
  LCD</span> <span m=''788036''>screen here.</span> <span m=''788525''>Hopefully</span>
  <span m=''789014''>everybody</span> <span m=''789503''>can</span> <span m=''789992''>see</span>
  <span m=''790481''>the</span> <span m=''790970''>ray trace.</span> <span m=''791948''>Unfortunately,</span>
  <span m=''792926''>PS3</span> <span m=''793415''>needs</span> <span m=''793904''>a</span>
  <span m=''794393''>specific</span> <span m=''794882''>kind of</span> <span m=''795371''>digital</span>
  <span m=''795860''>connection</span> <span m=''797340''>to display</span> <span
  m=''797640''>things in the</span> <span m=''797870''>right</span> <span m=''798293''>resolution</span>
  <span m=''798716''>when you''re</span> <span m=''799140''>writing through</span>
  <span m=''799560''>Frame</span> <span m=''799690''>Buffer.</span> <span m=''800680''>So
  we</span> <span m=''801175''>can''t project it</span> <span m=''801670''>onto the</span>
  <span m=''802165''>big screen.</span> </p><p><span m=''802660''>PROFESSOR: [INAUDIBLE]</span>
  </p><p><span m=''805135''>PROFESSOR: Can I</span> <span m=''805630''>do it from</span>
  <span m=''806125''>here?</span> </p><p><span m=''807115''>PROFESSOR: Perfect.</span>
  </p><p><span m=''813055''>BRIAN SWEATT: Now you</span> <span m=''813550''>got to
  tell</span> <span m=''814045''>[INAUDIBLE].</span> <span m=''817510''>Oh, no.</span>
  <span m=''818005''>Wrong way.</span> </p><p><span m=''819985''>R. J. RYAN: Really?</span>
  </p><p><span m=''820975''>BRIAN SWEATT: By the</span> <span m=''821470''>way, he''s</span>
  <span m=''821980''>still adjusting</span> <span m=''822240''>it.</span> </p><p><span
  m=''823770''>R. J. RYAN: Whoops.</span> </p><p><span m=''824720''>BRIAN SWEATT:
  Uh oh.</span> <span m=''829000''>Oh,</span> <span m=''829170''>no.</span> </p><p><span
  m=''831140''>R. J. RYAN: OK.</span> <span m=''831340''>We''ve</span> <span m=''831500''>prepared</span>
  <span m=''832610''>a</span> <span m=''832650''>few</span> <span m=''832870''>demos</span>
  <span m=''833270''>for</span> <span m=''833460''>you.</span> <span m=''834480''>And</span>
  <span m=''834640''>these</span> <span m=''834850''>are</span> <span m=''836780''>really</span>
  <span m=''836970''>just</span> <span m=''837140''>going</span> <span m=''837230''>to</span>
  <span m=''837290''>show</span> <span m=''837510''>off</span> <span m=''837710''>the</span>
  <span m=''837800''>ray</span> <span m=''837970''>tracing</span> <span m=''838330''>part</span>
  <span m=''838540''>of</span> <span m=''838650''>it</span> <span m=''839230''>and</span>
  <span m=''839560''>the</span> <span m=''840270''>rates</span> <span m=''840650''>that
  we</span> <span m=''841130''>got</span> <span m=''843320''>after we applied</span>
  <span m=''843800''>our speed</span> <span m=''844070''>ups.</span> <span m=''848160''>Thank</span>
  <span m=''848520''>you.</span> </p><p><span m=''849960''>Here</span> <span m=''850140''>we</span>
  <span m=''850240''>see</span> <span m=''851200''>both</span> <span m=''851600''>the</span>
  <span m=''851690''>camera is</span> <span m=''852130''>moving</span> <span m=''852850''>and</span>
  <span m=''854200''>we</span> <span m=''854340''>implemented</span> <span m=''854860''>full</span>
  <span m=''855030''>scene</span> <span m=''856530''>functional</span> <span m=''856900''>textures,</span>
  <span m=''857450''>so</span> <span m=''857580''>you</span> <span m=''857720''>see
  the</span> <span m=''857900''>checkerboard.</span> <span m=''858900''>It''s</span>
  <span m=''859500''>generated</span> <span m=''859970''>every</span> <span m=''860180''>frame.</span>
  <span m=''861890''>We</span> <span m=''862420''>used</span> <span m=''862600''>no</span>
  <span m=''862720''>texture</span> <span m=''863110''>maps.</span> <span m=''863500''>This
  is</span> <span m=''863770''>completely</span> <span m=''864130''>generated</span>
  <span m=''864710''>functionally.</span> </p><p><span m=''866600''>Bump</span> <span
  m=''866780''>mapping,</span> <span m=''867180''>as</span> <span m=''867520''>you
  can</span> <span m=''867890''>see in</span> <span m=''867970''>the</span> <span
  m=''868245''>large</span> <span m=''868520''>orange</span> <span m=''868970''>sphere,</span>
  <span m=''870110''>is</span> <span m=''870250''>also</span> <span m=''870500''>done
  on the</span> <span m=''870870''>fly,</span> <span m=''871750''>as</span> <span
  m=''871930''>well</span> <span m=''872140''>as</span> <span m=''872690''>blending</span>
  <span m=''873470''>between</span> <span m=''873860''>two</span> <span m=''874370''>textures</span>
  <span m=''874670''>using</span> <span m=''875130''>Perlin</span> <span m=''875520''>noise</span>
  <span m=''876700''>is</span> <span m=''876920''>done</span> <span m=''877230''>on</span>
  <span m=''877390''>the</span> <span m=''877460''>fly</span> <span m=''877700''>also.</span>
  <span m=''878980''>Showcased</span> <span m=''879460''>in</span> <span m=''879550''>the</span>
  <span m=''879630''>center</span> <span m=''879930''>sphere right</span> <span m=''880380''>here,</span>
  <span m=''880970''>you</span> <span m=''881090''>can</span> <span m=''881260''>see</span>
  <span m=''881450''>both</span> <span m=''881770''>reflection</span> <span m=''882390''>and</span>
  <span m=''882590''>refraction.</span> <span m=''883720''>The</span> <span m=''884100''>sphere
  is</span> <span m=''884500''>transparent.</span> <span m=''885130''>It</span> <span
  m=''885230''>acts</span> <span m=''885470''>as</span> <span m=''885590''>a</span>
  <span m=''885660''>glass</span> <span m=''886020''>sphere.</span> </p><p><span m=''886910''>So</span>
  <span m=''886960''>you</span> <span m=''887120''>can</span> <span m=''887240''>see</span>
  <span m=''889580''>the</span> <span m=''889800''>reflection</span> <span m=''890680''>of</span>
  <span m=''891930''>the</span> <span m=''892350''>orange</span> <span m=''892920''>in</span>
  <span m=''893060''>it,</span> <span m=''893490''>but</span> <span m=''893670''>also</span>
  <span m=''894090''>the</span> <span m=''894190''>warping</span> <span m=''894450''>of</span>
  <span m=''894760''>the</span> <span m=''894830''>checkerboard</span> <span m=''895390''>as</span>
  <span m=''895540''>it</span> <span m=''895630''>goes</span> <span m=''895880''>through.</span>
  <span m=''897390''>This</span> <span m=''897550''>is</span> <span m=''897650''>one</span>
  <span m=''897810''>of</span> <span m=''897880''>the</span> <span m=''898020''>advantages</span>
  <span m=''898620''>of--</span> <span m=''899120''>well,</span> <span m=''899250''>spheres</span>
  <span m=''899570''>are</span> <span m=''900110''>one</span> <span m=''900260''>of</span>
  <span m=''900320''>the</span> <span m=''900410''>advantages</span> <span m=''900990''>of</span>
  <span m=''901180''>ray</span> <span m=''901590''>tracing,</span> <span m=''902180''>because</span>
  <span m=''903450''>you</span> <span m=''903560''>can</span> <span m=''903880''>use</span>
  <span m=''904850''>geometrical</span> <span m=''905710''>equations</span> <span
  m=''906850''>to</span> <span m=''908460''>define your</span> <span m=''908920''>geometry</span>
  <span m=''909400''>versus</span> <span m=''910580''>in</span> <span m=''910860''>using</span>
  <span m=''911110''>rasterization</span> <span m=''911750''>methods,</span> <span
  m=''912080''>you</span> <span m=''912170''>have</span> <span m=''912270''>to</span>
  <span m=''912370''>actually</span> <span m=''913130''>define</span> <span m=''913410''>the</span>
  <span m=''913470''>geometry</span> <span m=''913990''>in</span> <span m=''914120''>some</span>
  <span m=''915130''>concrete</span> <span m=''915550''>numerical</span> <span m=''916000''>way.</span>
  </p><p><span m=''917246''>Going to</span> <span m=''917700''>go to</span> <span
  m=''918110''>the</span> <span m=''918210''>next</span> <span m=''918490''>demo.</span>
  <span m=''919370''>This</span> <span m=''920020''>should</span> <span m=''920260''>showcase</span>
  <span m=''920750''>some</span> <span m=''920900''>of</span> <span m=''920960''>the</span>
  <span m=''921030''>lights</span> <span m=''921320''>that</span> <span m=''921410''>we</span>
  <span m=''921490''>implemented.</span> </p><p><span m=''922000''>AUDIENCE: So how</span>
  <span m=''922482''>many frames</span> <span m=''922964''>per second is</span> <span
  m=''923446''>this?</span> </p><p><span m=''924900''>R. J. RYAN: This</span> <span
  m=''925390''>should</span> <span m=''925550''>be</span> <span m=''925690''>15</span>
  <span m=''926160''>frames</span> <span m=''926390''>a</span> <span m=''926440''>second.</span>
  <span m=''927400''>And</span> <span m=''928130''>let</span> <span m=''928380''>me</span>
  <span m=''928480''>reiterate.</span> <span m=''929860''>The</span> <span m=''929990''>refraction</span>
  <span m=''930880''>step</span> <span m=''931420''>requires</span> <span m=''931880''>at</span>
  <span m=''931980''>least</span> <span m=''932230''>two</span> <span m=''932370''>bounces,</span>
  <span m=''933290''>so</span> <span m=''933450''>two</span> <span m=''933740''>steps</span>
  <span m=''934040''>of</span> <span m=''934120''>recursion.</span> <span m=''935840''>If</span>
  <span m=''936000''>we</span> <span m=''936090''>were</span> <span m=''936190''>to</span>
  <span m=''936280''>turn</span> <span m=''939640''>that</span> <span m=''939810''>off,</span>
  <span m=''940360''>we would be</span> <span m=''940690''>achieving,</span> <span
  m=''942540''>I</span> <span m=''942700''>would</span> <span m=''942830''>estimate,</span>
  <span m=''943220''>27</span> <span m=''943680''>frames a</span> <span m=''944140''>second,</span>
  <span m=''945010''>28.</span> <span m=''946340''>But</span> <span m=''946760''>then
  it</span> <span m=''946990''>doesn''t look</span> <span m=''947300''>as</span> <span
  m=''947400''>pretty,</span> <span m=''947680''>so, you know,</span> <span m=''948010''>what''s</span>
  <span m=''948270''>the</span> <span m=''948380''>point.</span> </p><p><span m=''949220''>You</span>
  <span m=''949360''>can</span> <span m=''949490''>see--</span> <span m=''950560''>this</span>
  <span m=''950740''>will</span> <span m=''950840''>be</span> <span m=''951190''>showcased</span>
  <span m=''951690''>later--</span> <span m=''952040''>but</span> <span m=''952490''>you</span>
  <span m=''952600''>can</span> <span m=''952720''>see</span> <span m=''952910''>the</span>
  <span m=''953020''>spotlight.</span> <span m=''954220''>It''s</span> <span m=''954410''>kind</span>
  <span m=''954570''>of</span> <span m=''954610''>moving.</span> <span m=''955000''>It''s</span>
  <span m=''955200''>waving</span> <span m=''955580''>back</span> <span m=''955810''>and</span>
  <span m=''955940''>forth,</span> <span m=''957330''>illuminating</span> <span m=''957830''>parts</span>
  <span m=''958080''>of the</span> <span m=''958180''>scene.</span> <span m=''958430''>There''s</span>
  <span m=''958590''>also</span> <span m=''958850''>a</span> <span m=''958970''>point</span>
  <span m=''959210''>light</span> <span m=''959830''>at</span> <span m=''960050''>some</span>
  <span m=''960210''>distance</span> <span m=''960660''>around</span> <span m=''960900''>here</span>
  <span m=''961490''>that''s</span> <span m=''961670''>illuminating</span> <span m=''961960''>everything.</span>
  <span m=''962970''>But</span> <span m=''963090''>it''s</span> <span m=''963210''>basically</span>
  <span m=''963610''>the</span> <span m=''963710''>same</span> <span m=''963940''>set</span>
  <span m=''964120''>of</span> <span m=''964250''>primitives.</span> </p><p><span
  m=''966340''>If</span> <span m=''966480''>you</span> <span m=''966660''>are</span>
  <span m=''966780''>closer,</span> <span m=''967170''>you could</span> <span m=''967360''>probably</span>
  <span m=''967740''>notice</span> <span m=''968130''>that</span> <span m=''968580''>the</span>
  <span m=''968670''>checkerboard</span> <span m=''969200''>is</span> <span m=''969350''>fully</span>
  <span m=''969600''>reflective.</span> <span m=''971690''>This</span> <span m=''972070''>far</span>
  <span m=''972370''>wall,</span> <span m=''972900''>you</span> <span m=''973020''>can</span>
  <span m=''973200''>view</span> <span m=''973360''>the</span> <span m=''973460''>entire</span>
  <span m=''973860''>scene in</span> <span m=''974360''>it.</span> <span m=''975292''>Going
  to</span> <span m=''975760''>go to the</span> <span m=''976070''>next</span> <span
  m=''976300''>demo.</span> </p><p><span m=''979950''>This</span> <span m=''980160''>is</span>
  <span m=''980560''>with</span> <span m=''980750''>the</span> <span m=''980830''>lights</span>
  <span m=''981100''>off.</span> <span m=''982910''>So</span> <span m=''983100''>you</span>
  <span m=''983250''>can</span> <span m=''983420''>get</span> <span m=''983560''>a</span>
  <span m=''983610''>better</span> <span m=''984190''>sense</span> <span m=''984450''>of</span>
  <span m=''984530''>what</span> <span m=''984680''>the</span> <span m=''984760''>spotlight</span>
  <span m=''985180''>is</span> <span m=''985300''>actually</span> <span m=''985600''>doing.</span>
  <span m=''988910''>If</span> <span m=''989050''>you</span> <span m=''989140''>notice</span>
  <span m=''989460''>on</span> <span m=''989620''>this</span> <span m=''990090''>orange</span>
  <span m=''990420''>sphere,</span> <span m=''990770''>we</span> <span m=''990910''>implemented</span>
  <span m=''992440''>two</span> <span m=''992580''>different</span> <span m=''992840''>forms</span>
  <span m=''993110''>of</span> <span m=''994460''>BRDFs.</span> <span m=''995190''>One</span>
  <span m=''995400''>was</span> <span m=''995730''>generic</span> <span m=''995995''>foam</span>
  <span m=''996260''>shading.</span> <span m=''996920''>And</span> <span m=''997070''>then</span>
  <span m=''997190''>the</span> <span m=''997320''>other</span> <span m=''997480''>was</span>
  <span m=''997930''>Cook-Torrance,</span> <span m=''998990''>which</span> <span m=''1000000''>helps</span>
  <span m=''1001310''>particularly</span> <span m=''1001760''>with</span> <span m=''1001910''>metals</span>
  <span m=''1002165''>and</span> <span m=''1004010''>other</span> <span m=''1004180''>materials</span>
  <span m=''1004610''>like</span> <span m=''1004790''>that.</span> <span m=''1005170''>It</span>
  <span m=''1005270''>helps</span> <span m=''1006690''>have</span> <span m=''1006900''>very</span>
  <span m=''1007130''>bright</span> <span m=''1008040''>specular</span> <span m=''1008580''>highlight.</span>
  </p><p><span m=''1010750''>And</span> <span m=''1011000''>you''ll</span> <span m=''1011160''>notice</span>
  <span m=''1011590''>as</span> <span m=''1012060''>the</span> <span m=''1012150''>camera''s</span>
  <span m=''1012470''>panning</span> <span m=''1012740''>back</span> <span m=''1012970''>and</span>
  <span m=''1013130''>forth,</span> <span m=''1013460''>the</span> <span m=''1013780''>speed</span>
  <span m=''1014030''>ups</span> <span m=''1014420''>that</span> <span m=''1015020''>we</span>
  <span m=''1015480''>get</span> <span m=''1015750''>from--</span> <span m=''1021060''>we</span>
  <span m=''1021360''>used</span> <span m=''1021920''>little</span> <span m=''1022120''>tricks</span>
  <span m=''1022760''>to</span> <span m=''1023450''>glean</span> <span m=''1023760''>speed</span>
  <span m=''1024069''>here</span> <span m=''1024270''>and</span> <span m=''1024380''>there.</span>
  <span m=''1024560''>Like</span> <span m=''1025440''>when</span> <span m=''1026099''>it''s</span>
  <span m=''1026319''>so</span> <span m=''1026470''>dark</span> <span m=''1026910''>or</span>
  <span m=''1027680''>it''s</span> <span m=''1028089''>very</span> <span m=''1028380''>far</span>
  <span m=''1028540''>away,</span> <span m=''1029150''>we</span> <span m=''1029260''>stop</span>
  <span m=''1029560''>recursing.</span> </p><p><span m=''1030704''>BRIAN SWEATT: We''re</span>
  <span m=''1031188''>over, so--</span> </p><p><span m=''1032156''>R. J. RYAN: We
  are?</span> </p><p><span m=''1032640''>BRIAN SWEATT: Yeah.</span> <span m=''1033124''>So
  if there''s</span> <span m=''1033608''>any--</span> </p><p><span m=''1034099''>R.
  J. RYAN: Let''s</span> <span m=''1034374''>see.</span> </p><p><span m=''1035280''>SCOTT
  FISHER: Do</span> <span m=''1035430''>the</span> <span m=''1035835''>SPUs</span>
  <span m=''1036240''>from</span> <span m=''1036640''>one to</span> <span m=''1036976''>six.</span>
  </p><p><span m=''1037650''>R. J. RYAN: I</span> <span m=''1037730''>can</span> <span
  m=''1037900''>demonstrate--</span> <span m=''1039609''>we</span> <span m=''1039740''>actually</span>
  <span m=''1040660''>enabled</span> <span m=''1040930''>it</span> <span m=''1041050''>so
  that</span> <span m=''1041210''>you</span> <span m=''1041339''>can</span> <span
  m=''1041680''>turn</span> <span m=''1042000''>it on</span> <span m=''1042380''>either</span>
  <span m=''1042940''>one</span> <span m=''1043119''>through</span> <span m=''1043180''>six</span>
  <span m=''1043300''>SPEs</span> <span m=''1044630''>using</span> <span m=''1044760''>command</span>
  <span m=''1045010''>line</span> <span m=''1045180''>arguments.</span> <span m=''1048130''>Let''s</span>
  <span m=''1048560''>go</span> <span m=''1048780''>back</span> <span m=''1048960''>to</span>
  <span m=''1049030''>the</span> <span m=''1049090''>first</span> <span m=''1049420''>demo.</span>
  <span m=''1049810''>If I</span> <span m=''1050220''>say</span> <span m=''1050550''>just</span>
  <span m=''1050810''>use</span> <span m=''1050950''>one</span> <span m=''1051150''>SPE,</span>
  <span m=''1052170''>we</span> <span m=''1052280''>can</span> <span m=''1052660''>watch</span>
  <span m=''1052960''>it</span> <span m=''1053340''>slowly</span> <span m=''1054750''>trod</span>
  <span m=''1055050''>along.</span> </p><p><span m=''1056330''>And</span> <span m=''1056820''>if</span>
  <span m=''1056980''>I were</span> <span m=''1057210''>SHH-ed</span> <span m=''1057545''>in,</span>
  <span m=''1057880''>it</span> <span m=''1057930''>would</span> <span m=''1058060''>be</span>
  <span m=''1058160''>giving</span> <span m=''1058420''>me</span> <span m=''1059460''>timing</span>
  <span m=''1059870''>information</span> <span m=''1060380''>so</span> <span m=''1060490''>I</span>
  <span m=''1060540''>could</span> <span m=''1060710''>tell</span> <span m=''1060880''>you</span>
  <span m=''1061080''>exactly.</span> <span m=''1062330''>It''s</span> <span m=''1062670''>really</span>
  <span m=''1062850''>unfortunate</span> <span m=''1063140''>that</span> <span m=''1063430''>it''s
  not,</span> <span m=''1063780''>because</span> <span m=''1064030''>it''s</span>
  <span m=''1064180''>very</span> <span m=''1064500''>linear in</span> <span m=''1064710''>its
  speed</span> <span m=''1065070''>up.</span> <span m=''1065790''>Right</span> <span
  m=''1065950''>now</span> <span m=''1066320''>it</span> <span m=''1066660''>says</span>
  <span m=''1067180''>500</span> <span m=''1067620''>milliseconds.</span> </p><p><span
  m=''1069690''>But</span> <span m=''1069880''>if</span> <span m=''1070000''>I</span>
  <span m=''1070070''>turn</span> <span m=''1070420''>it on</span> <span m=''1070760''>two,</span>
  <span m=''1071470''>it</span> <span m=''1071910''>drops</span> <span m=''1072380''>literally</span>
  <span m=''1072810''>in half to</span> <span m=''1073140''>250.</span> <span m=''1074770''>You</span>
  <span m=''1074900''>can</span> <span m=''1075700''>get</span> <span m=''1075850''>a</span>
  <span m=''1075910''>sense</span> <span m=''1076180''>of</span> <span m=''1076240''>that,</span>
  <span m=''1076840''>that</span> <span m=''1077170''>it''s moving</span> <span m=''1077440''>like</span>
  <span m=''1077770''>tick,</span> <span m=''1078160''>tick,</span> <span m=''1078440''>tick,</span>
  <span m=''1078690''>tick</span> <span m=''1079000''>versus</span> <span m=''1079320''>tick,</span>
  <span m=''1079920''>tick,</span> <span m=''1080490''>tick.</span> <span m=''1082760''>And</span>
  <span m=''1083200''>then</span> <span m=''1083640''>three,</span> <span m=''1085980''>it''s</span>
  <span m=''1086060''>a</span> <span m=''1086110''>similar</span> <span m=''1086500''>speedup.</span>
  <span m=''1088420''>And</span> <span m=''1088570''>then</span> <span m=''1089200''>I''ll</span>
  <span m=''1089640''>jump to</span> <span m=''1089980''>five.</span> <span m=''1091420''>It''s</span>
  <span m=''1091540''>getting</span> <span m=''1091740''>closer.</span> <span m=''1093200''>And</span>
  <span m=''1093360''>then</span> <span m=''1093560''>when we</span> <span m=''1093790''>turn</span>
  <span m=''1094000''>on</span> <span m=''1094110''>the</span> <span m=''1094180''>sixth,</span>
  <span m=''1099750''>this</span> <span m=''1100460''>should</span> <span m=''1100730''>be</span>
  <span m=''1100900''>about</span> <span m=''1101530''>12,</span> <span m=''1102130''>15</span>
  <span m=''1102590''>frames a</span> <span m=''1103075''>second.</span> </p><p><span
  m=''1106090''>AUDIENCE: So</span> <span m=''1106200''>you estimate</span> <span
  m=''1106310''>if you</span> <span m=''1106766''>had</span> <span m=''1107222''>a</span>
  <span m=''1107680''>dozen</span> <span m=''1108000''>SPUs,</span> <span m=''1108060''>you</span>
  <span m=''1108170''>could go--</span> </p><p><span m=''1109731''>R. J. RYAN: Actually,</span>
  <span m=''1110210''>it''s funny</span> <span m=''1110360''>you</span> <span m=''1110690''>mentioned</span>
  <span m=''1111020''>that.</span> <span m=''1111190''>I</span> <span m=''1111540''>think</span>
  <span m=''1111740''>it</span> <span m=''1112130''>was</span> <span m=''1112340''>the</span>
  <span m=''1112620''>Julia</span> <span m=''1112900''>re-tracer</span> <span m=''1113255''>or</span>
  <span m=''1113740''>the</span> <span m=''1113990''>IRT.</span> </p><p><span m=''1114470''>BRIAN
  SWEATT: Both</span> <span m=''1114770''>of them.</span> </p><p><span m=''1115290''>R.
  J. RYAN: Both</span> <span m=''1115550''>of</span> <span m=''1115630''>them</span>
  <span m=''1115980''>use</span> <span m=''1116230''>two</span> <span m=''1116660''>cell</span>
  <span m=''1116990''>blades,</span> <span m=''1117485''>which</span> <span m=''1117980''>is</span>
  <span m=''1118450''>a full</span> <span m=''1119385''>eight?</span> </p><p><span
  m=''1120035''>MICHAEL D''AMBROSIO: It''s a</span> <span m=''1120330''>full</span>
  <span m=''1120570''>eight times--</span> </p><p><span m=''1121000''>R. J. RYAN:
  Eight cores</span> <span m=''1121720''>times</span> <span m=''1122040''>two.</span>
  <span m=''1122320''>So they</span> <span m=''1122790''>use</span> <span m=''1122950''>16</span>
  <span m=''1123660''>SPUs.</span> <span m=''1124760''>The</span> <span m=''1124850''>PlayStation</span>
  <span m=''1125360''>3</span> <span m=''1126490''>do</span> <span m=''1126620''>have</span>
  <span m=''1126720''>certain</span> <span m=''1127040''>factors.</span> <span m=''1127560''>We''re</span>
  <span m=''1127740''>only</span> <span m=''1127920''>limited</span> <span m=''1128260''>to</span>
  <span m=''1128320''>six.</span> </p><p><span m=''1133340''>AUDIENCE: The</span>
  <span m=''1133490''>way</span> <span m=''1133660''>you''re</span> <span m=''1133930''>dividing</span>
  <span m=''1134410''>up the</span> <span m=''1134490''>work,</span> <span m=''1135390''>each</span>
  <span m=''1135500''>SPU</span> <span m=''1135810''>taking</span> <span m=''1137490''>every</span>
  <span m=''1137740''>sixth</span> <span m=''1138040''>raster</span> <span m=''1138340''>line,</span>
  <span m=''1139470''>that</span> <span m=''1139920''>sounds</span> <span m=''1140400''>like--</span>
  <span m=''1141140''>could</span> <span m=''1141320''>you</span> <span m=''1141490''>improve</span>
  <span m=''1141950''>on</span> <span m=''1142260''>the</span> <span m=''1142570''>performance</span>
  <span m=''1143260''>by</span> <span m=''1145110''>allocating</span> <span m=''1145640''>the</span>
  <span m=''1145750''>rays--</span> </p><p><span m=''1146980''>R. J. RYAN: The</span>
  <span m=''1147240''>issue</span> <span m=''1147600''>there</span> <span m=''1147880''>is</span>
  <span m=''1147990''>one</span> <span m=''1148190''>of</span> <span m=''1148770''>granularity</span>
  <span m=''1149420''>of</span> <span m=''1149520''>our</span> <span m=''1150090''>distribution.</span>
  <span m=''1151500''>And</span> <span m=''1151980''>also</span> <span m=''1152250''>communication</span>
  <span m=''1152525''>time</span> <span m=''1152800''>on the</span> <span m=''1153200''>bus.</span>
  <span m=''1155630''>We''ve</span> <span m=''1156450''>designed</span> <span m=''1156810''>it</span>
  <span m=''1156910''>such that</span> <span m=''1157130''>we</span> <span m=''1157240''>can
  fine</span> <span m=''1157650''>tune it</span> <span m=''1158150''>in any</span>
  <span m=''1158440''>way we</span> <span m=''1158630''>want.</span> </p><p><span
  m=''1159410''>AUDIENCE: But</span> <span m=''1159600''>it</span> <span m=''1159690''>seems</span>
  <span m=''1159910''>to</span> <span m=''1160000''>me</span> <span m=''1160310''>if
  you</span> <span m=''1160706''>had</span> <span m=''1161860''>a</span> <span m=''1161950''>localized</span>
  <span m=''1162690''>bundle</span> <span m=''1162945''>of</span> <span m=''1163200''>rays</span>
  <span m=''1165670''>on</span> <span m=''1165890''>a</span> <span m=''1165950''>single</span>
  <span m=''1166320''>SPU,</span> <span m=''1166490''>you</span> <span m=''1166960''>might</span>
  <span m=''1167170''>be</span> <span m=''1167250''>able</span> <span m=''1167470''>to</span>
  <span m=''1167560''>do some</span> <span m=''1167950''>optimizations,</span> <span
  m=''1168680''>like</span> <span m=''1169170''>treat them</span> <span m=''1169530''>as
  fat</span> <span m=''1169825''>rays.</span> <span m=''1170810''>Nearby</span> <span
  m=''1171530''>rays</span> <span m=''1171970''>are</span> <span m=''1172040''>likely</span>
  <span m=''1172390''>to</span> <span m=''1172450''>intersect</span> <span m=''1172740''>the</span>
  <span m=''1173030''>same</span> <span m=''1173250''>triangles.</span> </p><p><span
  m=''1173670''>MICHAEL D''AMBROSIO: Choosing</span> <span m=''1174067''>the frosting</span>
  <span m=''1174464''>variety.</span> </p><p><span m=''1175260''>R. J. RYAN: The</span>
  <span m=''1175940''>entire</span> <span m=''1176250''>material</span> <span m=''1176690''>system</span>
  <span m=''1177090''>works</span> <span m=''1177360''>very</span> <span m=''1177620''>much</span>
  <span m=''1177860''>like</span> <span m=''1178020''>that.</span> <span m=''1178390''>It</span>
  <span m=''1179350''>actually</span> <span m=''1179710''>saves on</span> <span m=''1180120''>computations</span>
  <span m=''1180790''>based</span> <span m=''1181130''>on</span> <span m=''1182610''>which</span>
  <span m=''1182870''>rays</span> <span m=''1184660''>in a</span> <span m=''1185110''>packet
  of four</span> <span m=''1185780''>have</span> <span m=''1185910''>collided with</span>
  <span m=''1186410''>the</span> <span m=''1186480''>same</span> <span m=''1186910''>element.</span>
  <span m=''1188210''>And</span> <span m=''1188740''>if</span> <span m=''1189080''>it</span>
  <span m=''1189220''>does, then</span> <span m=''1189530''>it</span> <span m=''1189840''>takes</span>
  <span m=''1190090''>full</span> <span m=''1190270''>advantage of</span> <span m=''1190520''>SIMD</span>
  <span m=''1191130''>to</span> <span m=''1191690''>quickly</span> <span m=''1192870''>chug</span>
  <span m=''1193320''>through</span> <span m=''1193800''>those</span> <span m=''1194020''>rays
  that</span> <span m=''1194290''>are the</span> <span m=''1194560''>same</span> <span
  m=''1194933''>and then</span> <span m=''1195306''>never</span> <span m=''1195680''>call</span>
  <span m=''1196210''>that</span> <span m=''1196430''>particular</span> <span m=''1196790''>shader</span>
  <span m=''1197190''>again,</span> <span m=''1197590''>because</span> <span m=''1197750''>it''s</span>
  <span m=''1197890''>already done the</span> <span m=''1198260''>work</span> <span
  m=''1198550''>for them.</span> </p><p><span m=''1199050''>MICHAEL D''AMBROSIO: Another</span>
  <span m=''1199550''>issue,</span> <span m=''1200050''>I think,</span> <span m=''1200550''>is--</span>
  </p><p><span m=''1201260''>PROFESSOR: Sorry,</span> <span m=''1201700''>we should
  try</span> <span m=''1202140''>to wrap</span> <span m=''1203020''>so</span> <span
  m=''1203220''>we</span> <span m=''1203320''>can</span> <span m=''1203440''>get</span>
  <span m=''1203670''>through</span> <span m=''1203790''>the</span> <span m=''1204170''>others.</span>
  <span m=''1204580''>Any</span> <span m=''1205010''>more</span> <span m=''1205280''>very
  short</span> <span m=''1205630''>questions?</span> <span m=''1207290''>Did</span>
  <span m=''1207720''>you</span> <span m=''1208150''>guys</span> <span m=''1208230''>have
  any</span> <span m=''1208460''>last</span> <span m=''1208790''>concluding</span>
  <span m=''1209160''>statements?</span> </p><p><span m=''1210760''>NATALIA CHERNENKO:
  Maybe</span> <span m=''1211543''>we go</span> <span m=''1211886''>through</span>
  <span m=''1212230''>this</span> <span m=''1212510''>like</span> <span m=''1212630''>really</span>
  <span m=''1213080''>fast?</span> </p><p><span m=''1213560''>[INTERPOSING VOICES]</span>
  </p><p><span m=''1216240''>BRIAN SWEATT: Point is</span> <span m=''1216300''>we
  had</span> <span m=''1216790''>two pieces.</span> </p><p><span m=''1217160''>PROFESSOR:
  Thank the</span> <span m=''1217410''>speaker.</span> </p><p><span m=''1218010''>R.
  J. RYAN: Thank</span> <span m=''1218310''>you.</span> </p><p><span m=''1218610''>[APPLAUSE]</span>
  </p><p></p>'
type: course
uid: f6e6349d29b5857ef6c74beac6628d42

---
None