---
about_this_resource_text: <p><strong>Topics covered:</strong> Parallel programming
  concepts</p><p><strong>Instructor:</strong> Rodric Rabbah, IBM</p><p>Subtitles are
  provided through the generous assistance of Rohan Pai.</p>
course_id: 6-189-multicore-programming-primer-january-iap-2007
embedded_media:
- id: l5.jpg
  parent_uid: 04604da55928006293eaa04aecd3925f
  technical_location: https://ocw.mit.edu/courses/electrical-engineering-and-computer-science/6-189-multicore-programming-primer-january-iap-2007/lecture-notes-and-video/l5-parallel-programming-concepts/l5.jpg
  title: 'L5: Parallel Programming Concepts'
  type: null
  uid: 95b1303d1a52baf2545282d1633bee8c
- id: Video-YouTube-Stream
  media_location: Y1mrnc1hz9g
  parent_uid: 04604da55928006293eaa04aecd3925f
  title: Video-YouTube-Stream
  type: Video
  uid: 0c01129cedd0838b1d5498f2c9559c1f
- id: Thumbnail-YouTube-JPG
  media_location: https://img.youtube.com/vi/Y1mrnc1hz9g/default.jpg
  parent_uid: 04604da55928006293eaa04aecd3925f
  title: Thumbnail-YouTube-JPG
  type: Thumbnail
  uid: b0387d96ff4bf70524105fc27a282f53
- id: Video-iTunesU-MP4
  media_location: https://itunes.apple.com/us/itunes-u/id341597759
  parent_uid: 04604da55928006293eaa04aecd3925f
  title: Video-iTunes U-MP4
  type: Video
  uid: 71ef6a23268544647102eaf7918848b6
- id: Video-InternetArchive-MP4
  media_location: http://www.archive.org/download/MIT6.189IAP07/ocw-6.189-iap07-lec05_300k.mp4
  parent_uid: 04604da55928006293eaa04aecd3925f
  title: Video-Internet Archive-MP4
  type: Video
  uid: 76a251bbae152e48ebd10bec692b4d0d
- id: Thumbnail-OCW-JPG
  parent_uid: 04604da55928006293eaa04aecd3925f
  title: Thumbnail-OCW-JPG
  type: Thumbnail
  uid: 8f98b15ca5c407ad5c2dd62cf82a955d
- id: 3Play-3PlayYouTubeid-MP4
  media_location: Y1mrnc1hz9g
  parent_uid: 04604da55928006293eaa04aecd3925f
  title: 3Play-3Play YouTube id
  type: 3Play
  uid: da1fd765d2299b514cf297f1246feeb2
- id: Y1mrnc1hz9g.srt
  parent_uid: 04604da55928006293eaa04aecd3925f
  technical_location: https://ocw.mit.edu/courses/electrical-engineering-and-computer-science/6-189-multicore-programming-primer-january-iap-2007/lecture-notes-and-video/l5-parallel-programming-concepts/Y1mrnc1hz9g.srt
  title: 3play caption file
  type: null
  uid: cfa9bfb8842a821ea37c3ae23cc2518d
- id: Y1mrnc1hz9g.pdf
  parent_uid: 04604da55928006293eaa04aecd3925f
  technical_location: https://ocw.mit.edu/courses/electrical-engineering-and-computer-science/6-189-multicore-programming-primer-january-iap-2007/lecture-notes-and-video/l5-parallel-programming-concepts/Y1mrnc1hz9g.pdf
  title: 3play pdf file
  type: null
  uid: e3c146574aeab7d5c6619dbc8e9fb12e
- id: Caption-3Play YouTube id-SRT
  parent_uid: 04604da55928006293eaa04aecd3925f
  title: Caption-3Play YouTube id-SRT-English - US
  type: Caption
  uid: a766230321b484cfc7b7aede46fbd132
- id: Transcript-3Play YouTube id-PDF
  parent_uid: 04604da55928006293eaa04aecd3925f
  title: Transcript-3Play YouTube id-PDF-English - US
  type: Transcript
  uid: 1ba7db34279d54d97690f40af833848c
inline_embed_id: 5558009l5:parallelprogrammingconcepts80208795
layout: video
order_index: null
parent_uid: 69885f30bae5c69316fc5492e4404278
related_resources_text: <p>Lecture Notes (<a target="_blank" title="Open in a new
  window." href="./resolveuid/d06bb54c931d47ee8d8f6ab447fb0034">PDF</a>)</p>
short_url: l5-parallel-programming-concepts
technical_location: https://ocw.mit.edu/courses/electrical-engineering-and-computer-science/6-189-multicore-programming-primer-january-iap-2007/lecture-notes-and-video/l5-parallel-programming-concepts
template_type: Tabbed
title: 'L5: Parallel Programming Concepts'
transcript: '<p><span m=''0''>The</span> <span m=''40''>following</span> <span m=''540''>content</span>
  <span m=''1130''>is</span> <span m=''1240''>provided</span> <span m=''1710''>under</span>
  <span m=''2010''>a Creative</span> <span m=''2430''>Commons license.</span> <span
  m=''3880''>Your</span> <span m=''4110''>support</span> <span m=''4660''>will</span>
  <span m=''4790''>help</span> <span m=''5030''>MIT</span> <span m=''5680''>OpenCourseWare</span>
  <span m=''6300''>continue</span> <span m=''6790''>to</span> <span m=''6950''>offer</span>
  <span m=''7530''>high-quality</span> <span m=''8050''>educational</span> <span m=''8660''>resources</span>
  <span m=''9440''>for free.</span> <span m=''10550''>To</span> <span m=''10660''>make</span>
  <span m=''10860''>a</span> <span m=''10920''>donation</span> <span m=''11660''>or</span>
  <span m=''11840''>view</span> <span m=''12340''>additional</span> <span m=''12740''>materials</span>
  <span m=''13450''>from hundreds</span> <span m=''13930''>of</span> <span m=''14070''>MIT</span>
  <span m=''14290''>courses,</span> <span m=''15370''>visit</span> <span m=''15730''>MIT</span>
  <span m=''16210''>OpenCourseWare</span> <span m=''17210''>at</span> <span m=''17620''>ocw.
  mit.edu.</span> </p><p><span m=''22890''>PROFESSOR: So</span> <span m=''23310''>last</span>
  <span m=''23620''>week,</span> <span m=''25610''>last</span> <span m=''25970''>few</span>
  <span m=''26130''>lectures,</span> <span m=''26970''>you</span> <span m=''27150''>heard</span>
  <span m=''27340''>about</span> <span m=''28070''>parallel</span> <span m=''28380''>architectures</span>
  <span m=''29560''>and</span> <span m=''30730''>started</span> <span m=''31210''>with</span>
  <span m=''31840''>lecture</span> <span m=''32110''>four</span> <span m=''32490''>on</span>
  <span m=''32760''>discussions</span> <span m=''33330''>of</span> <span m=''33470''>concurrency.</span>
  <span m=''34290''>How</span> <span m=''34420''>do you</span> <span m=''34540''>take</span>
  <span m=''34770''>applications</span> <span m=''35620''>or</span> <span m=''36470''>independent</span>
  <span m=''37050''>actors</span> <span m=''37600''>that</span> <span m=''37730''>want</span>
  <span m=''38030''>to</span> <span m=''38130''>operate</span> <span m=''38510''>on</span>
  <span m=''38670''>the same</span> <span m=''38950''>data</span> <span m=''39610''>and</span>
  <span m=''40070''>make</span> <span m=''40260''>them</span> <span m=''40470''>run</span>
  <span m=''40730''>safely</span> <span m=''41250''>together?</span> <span m=''42790''>And</span>
  <span m=''42920''>so</span> <span m=''43010''>just</span> <span m=''43260''>recapping</span>
  <span m=''44290''>the</span> <span m=''44380''>last</span> <span m=''44680''>two</span>
  <span m=''44810''>lectures,</span> <span m=''45650''>you</span> <span m=''45930''>saw</span>
  <span m=''46420''>really</span> <span m=''46930''>two</span> <span m=''47230''>primary</span>
  <span m=''47770''>classes</span> <span m=''48390''>of</span> <span m=''48620''>architectures.</span>
  <span m=''49330''>Although</span> <span m=''49630''>Saman</span> <span m=''49880''>talked</span>
  <span m=''50140''>about</span> <span m=''50350''>a</span> <span m=''50400''>few</span>
  <span m=''50580''>more.</span> </p><p><span m=''51800''>There</span> <span m=''52000''>was</span>
  <span m=''52600''>the</span> <span m=''52690''>class</span> <span m=''53060''>of</span>
  <span m=''53470''>shared</span> <span m=''53830''>memory</span> <span m=''54120''>processors,</span>
  <span m=''55480''>you</span> <span m=''55570''>know,</span> <span m=''55630''>the</span>
  <span m=''55720''>multicores</span> <span m=''56470''>that</span> <span m=''57010''>Intel,</span>
  <span m=''57580''>AMD,</span> <span m=''58130''>and</span> <span m=''58400''>PowerPC,</span>
  <span m=''59040''>for</span> <span m=''59170''>example,</span> <span m=''59500''>have</span>
  <span m=''59680''>today,</span> <span m=''61430''>where</span> <span m=''61650''>you</span>
  <span m=''61800''>have</span> <span m=''62470''>one</span> <span m=''62670''>copy</span>
  <span m=''63090''>of the</span> <span m=''63240''>data.</span> <span m=''63970''>And</span>
  <span m=''64330''>that''s</span> <span m=''64480''>really</span> <span m=''64720''>shared</span>
  <span m=''65110''>among</span> <span m=''65550''>all</span> <span m=''65760''>the</span>
  <span m=''65830''>different</span> <span m=''66110''>processors</span> <span m=''66660''>because</span>
  <span m=''67020''>they</span> <span m=''67210''>essentially</span> <span m=''67710''>share
  the</span> <span m=''68020''>same</span> <span m=''68300''>memory.</span> <span
  m=''69770''>And</span> <span m=''71900''>you</span> <span m=''71990''>need</span>
  <span m=''72200''>things</span> <span m=''72440''>like</span> <span m=''72980''>atomicity</span>
  <span m=''73240''>and</span> <span m=''73400''>synchronization</span> <span m=''74460''>to</span>
  <span m=''74580''>be</span> <span m=''74670''>able</span> <span m=''74840''>to</span>
  <span m=''74960''>make</span> <span m=''75130''>sure</span> <span m=''75350''>that</span>
  <span m=''75470''>the</span> <span m=''75560''>sharing</span> <span m=''76760''>is</span>
  <span m=''77050''>done</span> <span m=''77320''>properly</span> <span m=''77770''>so</span>
  <span m=''77950''>that</span> <span m=''78140''>you</span> <span m=''78250''>don''t</span>
  <span m=''78460''>get</span> <span m=''78570''>into</span> <span m=''79880''>data
  race</span> <span m=''80260''>situations</span> <span m=''81610''>where</span> <span
  m=''82230''>multiple</span> <span m=''82680''>processors</span> <span m=''83230''>try</span>
  <span m=''83380''>to</span> <span m=''83520''>update</span> <span m=''83800''>the</span>
  <span m=''83880''>same</span> <span m=''84090''>data</span> <span m=''84300''>element</span>
  <span m=''84790''>and</span> <span m=''84900''>you</span> <span m=''84980''>end</span>
  <span m=''85130''>up</span> <span m=''85260''>with</span> <span m=''85430''>erroneous</span>
  <span m=''85850''>results.</span> </p><p><span m=''88260''>You</span> <span m=''88370''>also</span>
  <span m=''88590''>heard</span> <span m=''88800''>about</span> <span m=''88990''>distributed</span>
  <span m=''89450''>memory</span> <span m=''89690''>processors.</span> <span m=''90530''>So
  an example of</span> <span m=''91200''>that</span> <span m=''91500''>might</span>
  <span m=''91690''>be</span> <span m=''92900''>the</span> <span m=''93030''>Cell,</span>
  <span m=''94370''>loosely</span> <span m=''94740''>said,</span> <span m=''95540''>where</span>
  <span m=''95780''>you</span> <span m=''95900''>have</span> <span m=''96450''>cores</span>
  <span m=''96830''>that</span> <span m=''97020''>primarily</span> <span m=''97530''>access</span>
  <span m=''98070''>their</span> <span m=''98240''>own</span> <span m=''98510''>local</span>
  <span m=''98840''>memory.</span> <span m=''99710''>And</span> <span m=''101090''>while</span>
  <span m=''101280''>you</span> <span m=''101390''>can</span> <span m=''101500''>have</span>
  <span m=''102340''>a</span> <span m=''102670''>single</span> <span m=''103000''>global</span>
  <span m=''103290''>memory</span> <span m=''103570''>address</span> <span m=''103940''>space,</span>
  <span m=''104590''>to</span> <span m=''104720''>get</span> <span m=''104970''>data</span>
  <span m=''105210''>from</span> <span m=''105380''>memory</span> <span m=''105690''>you
  essentially</span> <span m=''106130''>have</span> <span m=''106290''>to</span> <span
  m=''106410''>communicate</span> <span m=''107350''>with the</span> <span m=''107680''>different</span>
  <span m=''107990''>processors</span> <span m=''108630''>to</span> <span m=''108750''>explicitly</span>
  <span m=''109340''>fetch</span> <span m=''109720''>data</span> <span m=''110010''>in</span>
  <span m=''110150''>and</span> <span m=''110180''>out.</span> <span m=''111340''>So</span>
  <span m=''111650''>things</span> <span m=''111940''>like</span> <span m=''112420''>data</span>
  <span m=''112680''>distribution,</span> <span m=''113960''>where</span> <span m=''114240''>the</span>
  <span m=''114380''>data</span> <span m=''114640''>is,</span> <span m=''114870''>and</span>
  <span m=''115110''>what</span> <span m=''115310''>your</span> <span m=''115420''>communication</span>
  <span m=''116010''>pattern is</span> <span m=''116410''>like</span> <span m=''116730''>affect</span>
  <span m=''117060''>your</span> <span m=''117160''>performance.</span> </p><p><span
  m=''121270''>So what</span> <span m=''121440''>I''m</span> <span m=''121600''>going</span>
  <span m=''121730''>to</span> <span m=''121790''>talk</span> <span m=''122020''>about</span>
  <span m=''122750''>in</span> <span m=''122990''>today''s</span> <span m=''123320''>lecture</span>
  <span m=''124650''>is</span> <span m=''125340''>programming</span> <span m=''125970''>these</span>
  <span m=''126190''>two</span> <span m=''126310''>different</span> <span m=''126630''>kinds</span>
  <span m=''126880''>of</span> <span m=''126940''>architectures,</span> <span m=''127730''>shared</span>
  <span m=''128050''>memory</span> <span m=''128250''>processors</span> <span m=''128810''>and</span>
  <span m=''128910''>distributed</span> <span m=''129260''>memory</span> <span m=''129520''>processors,</span>
  <span m=''131080''>and</span> <span m=''131520''>present</span> <span m=''131630''>you</span>
  <span m=''131690''>with</span> <span m=''131890''>some</span> <span m=''132100''>concepts</span>
  <span m=''133750''>for</span> <span m=''134570''>commonly</span> <span m=''135040''>programming</span>
  <span m=''135510''>these</span> <span m=''135680''>machines.</span> <span m=''136890''>So
  in</span> <span m=''137260''>shared</span> <span m=''137520''>memory</span> <span
  m=''137750''>processors,</span> <span m=''138490''>you</span> <span m=''138660''>have,</span>
  <span m=''139240''>say,</span> <span m=''139420''>n</span> <span m=''139620''>processors,</span>
  <span m=''140170''>1 to n.</span> <span m=''141070''>And</span> <span m=''141330''>they''re</span>
  <span m=''141430''>connected</span> <span m=''141900''>to</span> <span m=''142150''>a</span>
  <span m=''142230''>single</span> <span m=''142490''>memory.</span> <span m=''143890''>And</span>
  <span m=''144130''>if</span> <span m=''144420''>one</span> <span m=''144640''>processor</span>
  <span m=''145090''>asks</span> <span m=''145300''>for</span> <span m=''145530''>the</span>
  <span m=''145610''>value</span> <span m=''146350''>stored at</span> <span m=''146750''>address
  X,</span> <span m=''147810''>everybody</span> <span m=''148180''>knows</span> <span
  m=''148410''>where</span> <span m=''148530''>it''ll</span> <span m=''148670''>go</span>
  <span m=''148810''>look.</span> <span m=''149270''>Because</span> <span m=''149510''>there''s</span>
  <span m=''149650''>only</span> <span m=''149850''>one</span> <span m=''150010''>address</span>
  <span m=''150200''>X.</span> <span m=''151620''>And</span> <span m=''151780''>so</span>
  <span m=''153190''>different</span> <span m=''153480''>processors</span> <span m=''153790''>can</span>
  <span m=''154130''>communicate</span> <span m=''154760''>through</span> <span m=''154880''>shared</span>
  <span m=''155190''>variables.</span> <span m=''156000''>And you need</span> <span
  m=''156360''>things</span> <span m=''156710''>like</span> <span m=''157290''>locking,</span>
  <span m=''157630''>as</span> <span m=''157740''>I</span> <span m=''157800''>mentioned,</span>
  <span m=''158440''>to</span> <span m=''158620''>avoid</span> <span m=''159380''>race</span>
  <span m=''159630''>conditions</span> <span m=''160210''>or</span> <span m=''160490''>erroneous</span>
  <span m=''160850''>computation.</span> </p><p><span m=''163900''>So as an</span>
  <span m=''164140''>example of</span> <span m=''164570''>parallelization,</span>
  <span m=''165550''>you</span> <span m=''165650''>know,</span> <span m=''165860''>straightforward</span>
  <span m=''166460''>parallelization</span> <span m=''167720''>in</span> <span m=''167880''>a</span>
  <span m=''167920''>shared</span> <span m=''168220''>memory</span> <span m=''168460''>machine,</span>
  <span m=''169640''>would</span> <span m=''169860''>be</span> <span m=''170340''>you</span>
  <span m=''170460''>have</span> <span m=''170730''>the</span> <span m=''170890''>simple</span>
  <span m=''171050''>loop</span> <span m=''171770''>that''s</span> <span m=''172000''>just</span>
  <span m=''172270''>running</span> <span m=''172530''>through</span> <span m=''173760''>an</span>
  <span m=''173880''>array.</span> <span m=''174610''>And</span> <span m=''175000''>you''re</span>
  <span m=''175120''>adding</span> <span m=''175950''>elements</span> <span m=''176440''>of</span>
  <span m=''176540''>array</span> <span m=''176910''>A</span> <span m=''177170''>to</span>
  <span m=''177340''>elements</span> <span m=''177780''>of</span> <span m=''177850''>array</span>
  <span m=''178140''>B.</span> <span m=''179330''>And</span> <span m=''179570''>you''re</span>
  <span m=''179650''>going</span> <span m=''179830''>to</span> <span m=''179910''>write</span>
  <span m=''180130''>them</span> <span m=''180320''>to</span> <span m=''180920''>some</span>
  <span m=''181260''>new</span> <span m=''181390''>array, C.</span> <span m=''182480''>Well,</span>
  <span m=''182900''>if</span> <span m=''183050''>I</span> <span m=''183130''>gave</span>
  <span m=''183370''>you</span> <span m=''183450''>this</span> <span m=''183680''>loop</span>
  <span m=''183880''>you</span> <span m=''183980''>can</span> <span m=''184080''>probably</span>
  <span m=''184420''>recognize</span> <span m=''184880''>that</span> <span m=''184980''>there''s</span>
  <span m=''185140''>really</span> <span m=''185370''>no</span> <span m=''185520''>data</span>
  <span m=''185760''>dependencies</span> <span m=''186370''>here.</span> <span m=''187370''>I</span>
  <span m=''187480''>can</span> <span m=''187670''>split</span> <span m=''187980''>up</span>
  <span m=''188100''>this</span> <span m=''188310''>loop into</span> <span m=''188790''>three</span>
  <span m=''188920''>chunks --</span> <span m=''189450''>let''s</span> <span m=''189640''>say</span>
  <span m=''189800''>I</span> <span m=''189860''>have</span> <span m=''190040''>three</span>
  <span m=''190220''>processors --</span> <span m=''191180''>where</span> <span m=''191570''>one</span>
  <span m=''191820''>processor</span> <span m=''192400''>does</span> <span m=''192760''>all</span>
  <span m=''192930''>the</span> <span m=''193010''>computations</span> <span m=''193650''>for</span>
  <span m=''193800''>iterations</span> <span m=''194980''>zero</span> <span m=''195550''>through</span>
  <span m=''195750''>three,</span> <span m=''196130''>so</span> <span m=''196240''>the</span>
  <span m=''196310''>first</span> <span m=''196520''>four</span> <span m=''196690''>iterations.</span>
  <span m=''197470''>Second</span> <span m=''197720''>processor</span> <span m=''198150''>does
  the</span> <span m=''198530''>next</span> <span m=''198630''>four</span> <span m=''198830''>iterations.</span>
  <span m=''199530''>And</span> <span m=''199680''>the third</span> <span m=''199900''>processor</span>
  <span m=''200340''>does</span> <span m=''200640''>the</span> <span m=''200700''>last</span>
  <span m=''200940''>four</span> <span m=''201130''>iterations.</span> </p><p><span
  m=''201600''>And</span> <span m=''202520''>so</span> <span m=''202640''>that''s</span>
  <span m=''202830''>shown</span> <span m=''204370''>with</span> <span m=''204520''>the</span>
  <span m=''205240''>little --</span> <span m=''205540''>should have</span> <span
  m=''206330''>brought a laser</span> <span m=''206760''>pointer.</span> <span m=''207680''>So
  that''s</span> <span m=''207910''>showing</span> <span m=''208190''>here.</span>
  <span m=''209500''>And</span> <span m=''209920''>what</span> <span m=''210070''>you</span>
  <span m=''210150''>might</span> <span m=''210330''>need</span> <span m=''210480''>to</span>
  <span m=''210570''>do</span> <span m=''210750''>is</span> <span m=''210920''>some</span>
  <span m=''211140''>mechanism to</span> <span m=''211980''>essentially</span> <span
  m=''212610''>tell</span> <span m=''212910''>the</span> <span m=''213000''>different</span>
  <span m=''213270''>processors,</span> <span m=''213980''>here''s</span> <span m=''214390''>the</span>
  <span m=''214460''>code</span> <span m=''214840''>that</span> <span m=''214980''>you</span>
  <span m=''215090''>need</span> <span m=''215240''>to</span> <span m=''215330''>run</span>
  <span m=''215940''>and</span> <span m=''216470''>maybe</span> <span m=''216690''>where</span>
  <span m=''216910''>to</span> <span m=''217020''>start.</span> <span m=''218110''>And</span>
  <span m=''218310''>then</span> <span m=''218650''>you</span> <span m=''218820''>may</span>
  <span m=''218970''>need</span> <span m=''219180''>some</span> <span m=''219380''>way</span>
  <span m=''219620''>of</span> <span m=''219740''>sort</span> <span m=''219940''>of</span>
  <span m=''220030''>synchronizing</span> <span m=''220860''>these</span> <span m=''221070''>different</span>
  <span m=''221420''>processors</span> <span m=''221900''>that</span> <span m=''222070''>say,</span>
  <span m=''222510''>I''m</span> <span m=''222750''>done,</span> <span m=''223010''>I</span>
  <span m=''223110''>can</span> <span m=''223270''>move</span> <span m=''223440''>on
  to</span> <span m=''223590''>the next</span> <span m=''223940''>computation</span>
  <span m=''224480''>steps.</span> </p><p><span m=''226490''>So</span> <span m=''226680''>this
  is</span> <span m=''226840''>an</span> <span m=''226960''>example</span> <span m=''227440''>of</span>
  <span m=''227520''>a</span> <span m=''227590''>data</span> <span m=''227770''>parallel</span>
  <span m=''228160''>computation.</span> <span m=''228950''>The loop</span> <span
  m=''229260''>has</span> <span m=''229550''>no</span> <span m=''229660''>real</span>
  <span m=''229860''>dependencies</span> <span m=''230620''>and,</span> <span m=''231290''>you</span>
  <span m=''231430''>know,</span> <span m=''231720''>each</span> <span m=''231990''>processor</span>
  <span m=''232400''>can</span> <span m=''232580''>operate</span> <span m=''233330''>on</span>
  <span m=''233600''>different</span> <span m=''233930''>data</span> <span m=''234130''>sets.</span>
  <span m=''235840''>And</span> <span m=''236110''>what</span> <span m=''236220''>you</span>
  <span m=''236310''>could</span> <span m=''236420''>do</span> <span m=''236610''>is</span>
  <span m=''236740''>you</span> <span m=''236830''>can</span> <span m=''236960''>have</span>
  <span m=''237180''>a</span> <span m=''237240''>process --</span> <span m=''238540''>this</span>
  <span m=''238690''>is</span> <span m=''238810''>a</span> <span m=''238870''>single</span>
  <span m=''239130''>application</span> <span m=''241490''>that</span> <span m=''241660''>forks
  off</span> <span m=''241940''>or</span> <span m=''242320''>creates</span> <span
  m=''243210''>what are</span> <span m=''243510''>commonly called</span> <span m=''244040''>the</span>
  <span m=''244300''>threads.</span> <span m=''244840''>And</span> <span m=''245640''>each</span>
  <span m=''245840''>thread</span> <span m=''246320''>goes</span> <span m=''246600''>on
  and</span> <span m=''246900''>executes</span> <span m=''247440''>in</span> <span
  m=''247540''>this</span> <span m=''247690''>case</span> <span m=''247970''>the</span>
  <span m=''248090''>same</span> <span m=''248230''>computation.</span> <span m=''249860''>So
  a</span> <span m=''250050''>single</span> <span m=''250340''>process</span> <span
  m=''251020''>can</span> <span m=''251180''>create</span> <span m=''251480''>multiple</span>
  <span m=''251870''>concurrent</span> <span m=''252310''>threads.</span> <span m=''252970''>And</span>
  <span m=''253300''>really</span> <span m=''253530''>each thread</span> <span m=''253840''>is</span>
  <span m=''254090''>just</span> <span m=''254280''>a</span> <span m=''254330''>mechanism</span>
  <span m=''254790''>for</span> <span m=''255140''>encapsulating</span> <span m=''257290''>some</span>
  <span m=''257590''>trace</span> <span m=''257850''>of</span> <span m=''257940''>execution,</span>
  <span m=''258440''>some</span> <span m=''258670''>execution</span> <span m=''259200''>path.</span>
  </p><p><span m=''260060''>So</span> <span m=''260310''>in</span> <span m=''260440''>this</span>
  <span m=''260590''>case</span> <span m=''260910''>you''re</span> <span m=''261240''>essentially</span>
  <span m=''262100''>encapsulating</span> <span m=''262830''>this</span> <span m=''262980''>particular</span>
  <span m=''263430''>loop</span> <span m=''263650''>here.</span> <span m=''264860''>And</span>
  <span m=''265050''>maybe</span> <span m=''265270''>you</span> <span m=''265360''>parameterize</span>
  <span m=''266120''>your</span> <span m=''266730''>start</span> <span m=''267100''>index</span>
  <span m=''268160''>and</span> <span m=''268410''>your</span> <span m=''268670''>ending</span>
  <span m=''268930''>index</span> <span m=''269340''>or</span> <span m=''269520''>maybe</span>
  <span m=''271270''>your</span> <span m=''271380''>loop</span> <span m=''271590''>bounds.</span>
  <span m=''272990''>And</span> <span m=''273420''>in</span> <span m=''273530''>a</span>
  <span m=''273560''>shared</span> <span m=''273810''>memory</span> <span m=''274040''>processor,</span>
  <span m=''274960''>since</span> <span m=''275220''>you''re</span> <span m=''275420''>communicating
  --</span> <span m=''277470''>since</span> <span m=''277630''>there''s</span> <span
  m=''277930''>only a</span> <span m=''278210''>single</span> <span m=''278460''>memory,</span>
  <span m=''279480''>really</span> <span m=''280310''>you</span> <span m=''280480''>don''t</span>
  <span m=''280620''>need</span> <span m=''280760''>to</span> <span m=''280860''>do</span>
  <span m=''281000''>anything</span> <span m=''281620''>special</span> <span m=''282110''>about</span>
  <span m=''282370''>the</span> <span m=''282470''>data</span> <span m=''283180''>in</span>
  <span m=''283360''>this</span> <span m=''283510''>particular</span> <span m=''283900''>example,</span>
  <span m=''284660''>because</span> <span m=''284950''>everybody</span> <span m=''285320''>knows</span>
  <span m=''285540''>where</span> <span m=''285650''>to</span> <span m=''285720''>go</span>
  <span m=''285840''>look</span> <span m=''286030''>for it.</span> <span m=''286270''>Everybody</span>
  <span m=''286630''>can</span> <span m=''286750''>access</span> <span m=''287060''>it.</span>
  <span m=''287240''>Everything''s</span> <span m=''287710''>independent.</span> <span
  m=''288330''>There''s</span> <span m=''288630''>no</span> <span m=''288790''>real</span>
  <span m=''289010''>issues</span> <span m=''289400''>with</span> <span m=''289930''>races</span>
  <span m=''290390''>or</span> <span m=''290520''>deadlocks.</span> </p><p><span m=''292850''>So</span>
  <span m=''292980''>I</span> <span m=''293050''>just</span> <span m=''293340''>wrote</span>
  <span m=''293650''>down</span> <span m=''294020''>some</span> <span m=''294610''>actual</span>
  <span m=''294990''>code</span> <span m=''296120''>for</span> <span m=''296320''>that</span>
  <span m=''296510''>loop</span> <span m=''296740''>that</span> <span m=''296930''>parallelize</span>
  <span m=''297420''>it</span> <span m=''297540''>using</span> <span m=''298310''>Pthreads,</span>
  <span m=''298760''>a</span> <span m=''299010''>commonly used</span> <span m=''299620''>threading</span>
  <span m=''299980''>mechanism.</span> <span m=''301530''>Just</span> <span m=''301730''>to</span>
  <span m=''301860''>give</span> <span m=''302070''>you</span> <span m=''302150''>a</span>
  <span m=''302190''>little</span> <span m=''302390''>bit of</span> <span m=''302530''>flavor</span>
  <span m=''302990''>for,</span> <span m=''303880''>you</span> <span m=''304010''>know,</span>
  <span m=''304110''>the</span> <span m=''304200''>complexity</span> <span m=''304730''>of
  --</span> <span m=''305200''>the</span> <span m=''305350''>simple</span> <span m=''305420''>loop</span>
  <span m=''305760''>that</span> <span m=''305900''>we</span> <span m=''306010''>had</span>
  <span m=''306720''>expands</span> <span m=''307190''>to</span> <span m=''307370''>a</span>
  <span m=''307580''>lot</span> <span m=''307760''>more</span> <span m=''307950''>code</span>
  <span m=''308210''>in</span> <span m=''308300''>this</span> <span m=''308410''>case.</span>
  <span m=''309840''>So</span> <span m=''309980''>you</span> <span m=''310090''>have</span>
  <span m=''310340''>your</span> <span m=''310630''>array.</span> <span m=''311300''>It
  has</span> <span m=''311620''>12</span> <span m=''311870''>elements.</span> <span
  m=''313050''>A,</span> <span m=''313290''>B,</span> <span m=''313420''>and</span>
  <span m=''313580''>C.</span> <span m=''314250''>And</span> <span m=''314870''>you</span>
  <span m=''314980''>have</span> <span m=''315470''>the</span> <span m=''315740''>basic</span>
  <span m=''316210''>functions.</span> <span m=''316930''>So</span> <span m=''317040''>this
  is</span> <span m=''317240''>the</span> <span m=''317300''>actual</span> <span m=''317610''>code</span>
  <span m=''317960''>or</span> <span m=''318050''>computation</span> <span m=''318520''>that</span>
  <span m=''318610''>we</span> <span m=''318710''>want</span> <span m=''318880''>to</span>
  <span m=''318950''>carry</span> <span m=''319270''>out.</span> <span m=''320010''>And</span>
  <span m=''320210''>what</span> <span m=''320330''>I''ve</span> <span m=''320460''>done</span>
  <span m=''320690''>here</span> <span m=''320850''>is</span> <span m=''320940''>I''ve</span>
  <span m=''321130''>parameterized</span> <span m=''321830''>where</span> <span m=''322190''>you''re</span>
  <span m=''322490''>essentially</span> <span m=''322920''>starting</span> <span m=''323510''>in
  the</span> <span m=''323760''>array.</span> <span m=''324790''>So</span> <span m=''324940''>you</span>
  <span m=''325090''>get</span> <span m=''325220''>this</span> <span m=''325360''>parameter.</span>
  <span m=''326090''>And</span> <span m=''326260''>then</span> <span m=''326400''>you</span>
  <span m=''326590''>calculate</span> <span m=''327080''>four</span> <span m=''327310''>iterations''</span>
  <span m=''327810''>worth.</span> <span m=''329210''>And</span> <span m=''329550''>this</span>
  <span m=''329670''>is</span> <span m=''329980''>essentially</span> <span m=''330370''>the
  computation</span> <span m=''330980''>that we''re carrying</span> <span m=''331480''>out.</span>
  </p><p><span m=''331870''>And</span> <span m=''332110''>now</span> <span m=''332360''>in</span>
  <span m=''332460''>my</span> <span m=''332600''>main</span> <span m=''333150''>program</span>
  <span m=''333600''>or</span> <span m=''333820''>in</span> <span m=''333910''>my</span>
  <span m=''334020''>main</span> <span m=''334230''>function,</span> <span m=''334610''>rather,</span>
  <span m=''335500''>what</span> <span m=''335660''>I</span> <span m=''335730''>do</span>
  <span m=''335900''>is</span> <span m=''336150''>I</span> <span m=''336290''>have</span>
  <span m=''336820''>this</span> <span m=''337030''>concept</span> <span m=''337490''>of</span>
  <span m=''338250''>threads</span> <span m=''339180''>that I''m</span> <span m=''339320''>going</span>
  <span m=''339500''>to</span> <span m=''339590''>create.</span> <span m=''340140''>In</span>
  <span m=''340430''>this</span> <span m=''340550''>case</span> <span m=''340760''>I''m
  going</span> <span m=''341040''>to</span> <span m=''341110''>create</span> <span
  m=''341460''>three</span> <span m=''341620''>of</span> <span m=''341730''>them.</span>
  <span m=''344140''>There are</span> <span m=''344370''>some</span> <span m=''344520''>parameters</span>
  <span m=''344870''>that</span> <span m=''345270''>I have to pass in,</span> <span
  m=''345710''>so</span> <span m=''345840''>some</span> <span m=''346040''>attributes</span>
  <span m=''347110''>which</span> <span m=''347280''>are</span> <span m=''347350''>now</span>
  <span m=''347510''>going</span> <span m=''347630''>to</span> <span m=''347690''>get</span>
  <span m=''347830''>into</span> <span m=''348020''>here.</span> <span m=''348670''>But</span>
  <span m=''348880''>then</span> <span m=''349030''>I</span> <span m=''349150''>pass
  in</span> <span m=''349550''>the</span> <span m=''349640''>function</span> <span
  m=''349990''>pointer.</span> <span m=''350470''>This</span> <span m=''350590''>is</span>
  <span m=''350690''>essentially a</span> <span m=''351540''>mechanism</span> <span
  m=''352050''>that</span> <span m=''352230''>says</span> <span m=''352730''>once</span>
  <span m=''352960''>I''ve created</span> <span m=''353480''>this</span> <span m=''353570''>thread,</span>
  <span m=''354490''>I</span> <span m=''354570''>go</span> <span m=''354730''>to</span>
  <span m=''354850''>this</span> <span m=''355000''>function</span> <span m=''355460''>and
  execute</span> <span m=''355890''>this</span> <span m=''356030''>particular</span>
  <span m=''356460''>code.</span> <span m=''357920''>And</span> <span m=''358080''>then</span>
  <span m=''358190''>some</span> <span m=''358400''>arguments</span> <span m=''358840''>that</span>
  <span m=''358920''>are</span> <span m=''358980''>functions.</span> <span m=''359320''>So</span>
  <span m=''359440''>here</span> <span m=''359660''>I''m</span> <span m=''359750''>just</span>
  <span m=''359930''>passing</span> <span m=''360250''>in an</span> <span m=''360360''>index</span>
  <span m=''360790''>at</span> <span m=''360890''>which</span> <span m=''361390''>each
  loop</span> <span m=''361850''>switch</span> <span m=''362160''>starts with.</span>
  <span m=''363400''>And</span> <span m=''363690''>after</span> <span m=''363770''>I''ve</span>
  <span m=''364040''>created</span> <span m=''364400''>each</span> <span m=''364520''>thread</span>
  <span m=''365140''>here,</span> <span m=''365780''>implicitly</span> <span m=''366290''>in
  the</span> <span m=''366790''>thread creation,</span> <span m=''367440''>the</span>
  <span m=''367530''>code</span> <span m=''367820''>can</span> <span m=''367950''>just</span>
  <span m=''368140''>immediately</span> <span m=''368550''>start</span> <span m=''368860''>running.</span>
  <span m=''370210''>And</span> <span m=''370400''>then</span> <span m=''370730''>once</span>
  <span m=''371010''>all</span> <span m=''371150''>the</span> <span m=''371250''>threads</span>
  <span m=''371530''>have</span> <span m=''371600''>started</span> <span m=''371930''>running,</span>
  <span m=''372470''>I</span> <span m=''372630''>can</span> <span m=''372800''>essentially</span>
  <span m=''373270''>just</span> <span m=''374430''>exit</span> <span m=''375000''>the</span>
  <span m=''375110''>program</span> <span m=''375470''>because</span> <span m=''375620''>I''ve</span>
  <span m=''375820''>completed.</span> </p><p><span m=''379070''>So</span> <span m=''379490''>what
  I''ve shown</span> <span m=''379930''>you</span> <span m=''380040''>with</span>
  <span m=''380650''>that</span> <span m=''380850''>first</span> <span m=''381070''>example</span>
  <span m=''381520''>was</span> <span m=''382010''>the</span> <span m=''382100''>concept</span>
  <span m=''382540''>of,</span> <span m=''383100''>or</span> <span m=''383320''>example</span>
  <span m=''383710''>of,</span> <span m=''383840''>data</span> <span m=''384110''>parallelism.</span>
  <span m=''384670''>So you''re</span> <span m=''384970''>performing</span> <span
  m=''385140''>the</span> <span m=''385270''>same</span> <span m=''385510''>computation,</span>
  <span m=''386330''>but</span> <span m=''387250''>instead</span> <span m=''387600''>of</span>
  <span m=''387790''>operating</span> <span m=''388320''>on</span> <span m=''388760''>one</span>
  <span m=''389110''>big</span> <span m=''389340''>chunk</span> <span m=''389650''>of</span>
  <span m=''389900''>data,</span> <span m=''390460''>I''ve</span> <span m=''390590''>partitioned</span>
  <span m=''391010''>the data</span> <span m=''391270''>into</span> <span m=''391480''>smaller</span>
  <span m=''391760''>chunks</span> <span m=''392400''>and</span> <span m=''392700''>I''ve</span>
  <span m=''394510''>replicated the</span> <span m=''395020''>computation</span> <span
  m=''395760''>so</span> <span m=''395880''>that I</span> <span m=''396000''>can</span>
  <span m=''396160''>get</span> <span m=''396300''>that</span> <span m=''396450''>kind</span>
  <span m=''396630''>of</span> <span m=''396690''>parallelism.</span> <span m=''398190''>But</span>
  <span m=''398760''>there''s</span> <span m=''399030''>another</span> <span m=''399290''>form</span>
  <span m=''399560''>of</span> <span m=''399670''>parallelism</span> <span m=''400110''>called</span>
  <span m=''400370''>control</span> <span m=''400700''>parallelism,</span> <span m=''402340''>which</span>
  <span m=''403240''>essentially</span> <span m=''403670''>uses</span> <span m=''403800''>the</span>
  <span m=''403900''>same</span> <span m=''404170''>model</span> <span m=''404510''>of</span>
  <span m=''404630''>threading</span> <span m=''405690''>but</span> <span m=''406130''>doesn''t</span>
  <span m=''406500''>necessarily</span> <span m=''406920''>have</span> <span m=''407050''>to</span>
  <span m=''407900''>run</span> <span m=''408220''>the</span> <span m=''408330''>same</span>
  <span m=''408610''>function</span> <span m=''409360''>or</span> <span m=''409640''>run</span>
  <span m=''409780''>the</span> <span m=''409870''>same</span> <span m=''410040''>computation</span>
  <span m=''410650''>each</span> <span m=''410780''>thread.</span> <span m=''411380''>So
  I''ve</span> <span m=''411600''>sort</span> <span m=''411750''>of</span> <span m=''411850''>illustrated</span>
  <span m=''412350''>that</span> <span m=''412550''>in</span> <span m=''412630''>the</span>
  <span m=''412790''>illustration</span> <span m=''413400''>there,</span> <span m=''414300''>where</span>
  <span m=''415290''>these are</span> <span m=''415590''>your</span> <span m=''416100''>data</span>
  <span m=''416250''>parallel</span> <span m=''416620''>computations</span> <span
  m=''417740''>and</span> <span m=''418050''>these</span> <span m=''418230''>are</span>
  <span m=''418320''>some</span> <span m=''418700''>other</span> <span m=''419450''>computations</span>
  <span m=''420060''>in</span> <span m=''420150''>your</span> <span m=''420290''>code.</span>
  </p><p><span m=''426390''>So</span> <span m=''426760''>there</span> <span m=''426970''>is</span>
  <span m=''427490''>sort of a</span> <span m=''427810''>programming</span> <span
  m=''428320''>model</span> <span m=''428860''>that</span> <span m=''428990''>allows</span>
  <span m=''429370''>you</span> <span m=''429440''>to</span> <span m=''429590''>do</span>
  <span m=''429760''>this</span> <span m=''429930''>kind</span> <span m=''430180''>of</span>
  <span m=''430270''>parallelism</span> <span m=''432440''>and</span> <span m=''432810''>tries</span>
  <span m=''433140''>to</span> <span m=''433420''>sort</span> <span m=''433580''>of</span>
  <span m=''433700''>help</span> <span m=''434530''>the</span> <span m=''434670''>programmer</span>
  <span m=''435600''>by</span> <span m=''436180''>taking</span> <span m=''436590''>their</span>
  <span m=''436730''>sequential</span> <span m=''437190''>code</span> <span m=''437840''>and</span>
  <span m=''438050''>then</span> <span m=''438390''>adding</span> <span m=''438740''>annotations</span>
  <span m=''439440''>that</span> <span m=''439610''>say,</span> <span m=''440040''>this</span>
  <span m=''440300''>loop</span> <span m=''440670''>is data</span> <span m=''440770''>parallel</span>
  <span m=''441430''>or</span> <span m=''441890''>this</span> <span m=''442320''>set
  of</span> <span m=''442420''>code</span> <span m=''443340''>is</span> <span m=''444470''>has</span>
  <span m=''444700''>this</span> <span m=''444850''>kind</span> <span m=''445120''>of</span>
  <span m=''447020''>control</span> <span m=''447500''>parallelism</span> <span m=''447950''>in</span>
  <span m=''448070''>it.</span> <span m=''449000''>So you</span> <span m=''449430''>start</span>
  <span m=''449710''>with</span> <span m=''449900''>your</span> <span m=''450840''>parallel</span>
  <span m=''451190''>code.</span> <span m=''451760''>This</span> <span m=''451890''>is</span>
  <span m=''452000''>the</span> <span m=''452090''>same</span> <span m=''452330''>program,</span>
  <span m=''452800''>multiple</span> <span m=''453330''>data</span> <span m=''453900''>kind</span>
  <span m=''454190''>of</span> <span m=''454900''>parallelization.</span> <span m=''455870''>So</span>
  <span m=''455970''>you</span> <span m=''456040''>might</span> <span m=''456190''>have</span>
  <span m=''456280''>seen</span> <span m=''456550''>in the</span> <span m=''456660''>previous</span>
  <span m=''457030''>talk</span> <span m=''457450''>and</span> <span m=''457680''>the
  previous</span> <span m=''458020''>lecture,</span> <span m=''458350''>it was</span>
  <span m=''458490''>SIMD,</span> <span m=''459190''>single</span> <span m=''459750''>instruction
  or</span> <span m=''460230''>same</span> <span m=''460390''>instruction,</span>
  <span m=''461110''>multiple</span> <span m=''461510''>data,</span> <span m=''461880''>which</span>
  <span m=''462100''>allowed</span> <span m=''462420''>you</span> <span m=''462510''>to</span>
  <span m=''462640''>execute</span> <span m=''463130''>the</span> <span m=''463220''>same</span>
  <span m=''463610''>operation,</span> <span m=''464790''>you</span> <span m=''464900''>know,</span>
  <span m=''465150''>and add</span> <span m=''465660''>over</span> <span m=''465950''>multiple</span>
  <span m=''466370''>data</span> <span m=''466570''>elements.</span> </p><p><span
  m=''467490''>So</span> <span m=''467650''>here</span> <span m=''468190''>it''s a</span>
  <span m=''468740''>similar</span> <span m=''469130''>kind</span> <span m=''469420''>of</span>
  <span m=''469560''>terminology.</span> <span m=''470630''>There''s</span> <span
  m=''471160''>same</span> <span m=''471560''>program,</span> <span m=''472010''>multiple</span>
  <span m=''472420''>data,</span> <span m=''473070''>and</span> <span m=''473420''>multiple</span>
  <span m=''473760''>program,</span> <span m=''474510''>multiple data.</span> <span
  m=''474920''>This</span> <span m=''475110''>talk</span> <span m=''475370''>is</span>
  <span m=''475650''>largely</span> <span m=''475740''>focused</span> <span m=''476140''>on</span>
  <span m=''476700''>the</span> <span m=''476990''>SPMD</span> <span m=''477510''>model,</span>
  <span m=''479190''>where</span> <span m=''479430''>you</span> <span m=''479600''>essentially</span>
  <span m=''479850''>have</span> <span m=''480170''>one</span> <span m=''480570''>central</span>
  <span m=''480950''>decision</span> <span m=''481330''>maker</span> <span m=''482280''>or</span>
  <span m=''482700''>you''re</span> <span m=''482860''>trying</span> <span m=''483080''>to</span>
  <span m=''483180''>solve</span> <span m=''483460''>one</span> <span m=''483680''>central</span>
  <span m=''483960''>computation.</span> <span m=''485670''>And</span> <span m=''485810''>you''re</span>
  <span m=''485920''>trying to</span> <span m=''486160''>parallelize</span> <span
  m=''486740''>that</span> <span m=''486900''>over</span> <span m=''487100''>your</span>
  <span m=''487190''>architecture</span> <span m=''487780''>to</span> <span m=''487910''>get</span>
  <span m=''488050''>the</span> <span m=''488130''>best</span> <span m=''488330''>performance.</span>
  <span m=''489470''>So</span> <span m=''490060''>you</span> <span m=''490360''>start</span>
  <span m=''490620''>off</span> <span m=''490840''>with</span> <span m=''491350''>your</span>
  <span m=''491890''>program</span> <span m=''492260''>and</span> <span m=''492340''>then
  you</span> <span m=''492500''>annotate</span> <span m=''492990''>the</span> <span
  m=''493070''>code</span> <span m=''493420''>with</span> <span m=''493700''>what''s</span>
  <span m=''493910''>parallel</span> <span m=''494320''>and what''s</span> <span m=''494570''>not</span>
  <span m=''494780''>parallel.</span> <span m=''496200''>And</span> <span m=''496340''>you</span>
  <span m=''496400''>might</span> <span m=''496620''>add</span> <span m=''496810''>in</span>
  <span m=''496910''>some</span> <span m=''497080''>synchronization</span> <span m=''497740''>directives</span>
  <span m=''498820''>so</span> <span m=''498990''>that if</span> <span m=''499230''>you</span>
  <span m=''499330''>do</span> <span m=''499520''>in</span> <span m=''499680''>fact</span>
  <span m=''499960''>have</span> <span m=''500100''>sharing,</span> <span m=''500900''>you
  might</span> <span m=''501100''>want</span> <span m=''501260''>to</span> <span m=''501340''>use
  the</span> <span m=''501560''>right</span> <span m=''501780''>locking</span> <span
  m=''502120''>mechanism</span> <span m=''503200''>to</span> <span m=''503770''>guarantee</span>
  <span m=''504170''>safety.</span> </p><p><span m=''505320''>Now,</span> <span m=''505770''>in</span>
  <span m=''505980''>OpenMP,</span> <span m=''507800''>there are</span> <span m=''508050''>some</span>
  <span m=''508300''>limitations</span> <span m=''508890''>as</span> <span m=''508990''>to</span>
  <span m=''509080''>what</span> <span m=''509180''>it</span> <span m=''509250''>can</span>
  <span m=''509390''>do.</span> <span m=''509840''>So</span> <span m=''510260''>it</span>
  <span m=''510560''>in</span> <span m=''510750''>fact</span> <span m=''511020''>assumes</span>
  <span m=''511480''>that the</span> <span m=''511760''>programmer</span> <span m=''512130''>knows</span>
  <span m=''512330''>what</span> <span m=''512430''>he''s</span> <span m=''512570''>doing.</span>
  <span m=''513260''>And</span> <span m=''513600''>the</span> <span m=''513640''>programmer</span>
  <span m=''514130''>is</span> <span m=''514300''>largely</span> <span m=''514620''>responsible</span>
  <span m=''515220''>for</span> <span m=''515350''>getting the</span> <span m=''515670''>synchronization</span>
  <span m=''516400''>right,</span> <span m=''516790''>or</span> <span m=''517490''>that</span>
  <span m=''517650''>if</span> <span m=''517780''>they''re</span> <span m=''518000''>sharing</span>
  <span m=''518430''>that</span> <span m=''518550''>they</span> <span m=''518680''>get</span>
  <span m=''518840''>those</span> <span m=''519040''>dependencies</span> <span m=''520050''>protected</span>
  <span m=''520690''>correctly.</span> <span m=''522900''>So</span> <span m=''523060''>you</span>
  <span m=''523160''>can</span> <span m=''523270''>take</span> <span m=''523460''>your</span>
  <span m=''523570''>program,</span> <span m=''524180''>insert</span> <span m=''524630''>these</span>
  <span m=''524830''>annotations,</span> <span m=''525730''>and</span> <span m=''525850''>then</span>
  <span m=''525950''>you</span> <span m=''526430''>go</span> <span m=''526590''>on</span>
  <span m=''526830''>and</span> <span m=''526930''>test</span> <span m=''527150''>and</span>
  <span m=''527340''>debug.</span> </p><p><span m=''529950''>So a</span> <span m=''530080''>simple</span>
  <span m=''530510''>OpenMP</span> <span m=''531030''>example,</span> <span m=''531710''>again</span>
  <span m=''531960''>using</span> <span m=''532460''>the</span> <span m=''532560''>simple</span>
  <span m=''532870''>loop --</span> <span m=''534730''>now,</span> <span m=''534940''>I''ve
  thrown</span> <span m=''535260''>away</span> <span m=''535500''>some</span> <span
  m=''535660''>of the</span> <span m=''535820''>extra</span> <span m=''536120''>code
  --</span> <span m=''536780''>you''re</span> <span m=''536930''>adding</span> <span
  m=''537260''>these</span> <span m=''537470''>two</span> <span m=''537620''>extra</span>
  <span m=''537880''>pragmas</span> <span m=''538360''>in</span> <span m=''538440''>this</span>
  <span m=''538570''>case.</span> <span m=''540190''>The</span> <span m=''540320''>first</span>
  <span m=''540630''>one,</span> <span m=''542060''>your</span> <span m=''542220''>parallel</span>
  <span m=''542940''>pragma,</span> <span m=''544320''>I</span> <span m=''544630''>call</span>
  <span m=''545050''>the</span> <span m=''545140''>data</span> <span m=''545370''>parallel</span>
  <span m=''545930''>pragma,</span> <span m=''546430''>really</span> <span m=''546650''>says</span>
  <span m=''546860''>that</span> <span m=''546960''>you</span> <span m=''547060''>can</span>
  <span m=''547180''>execute</span> <span m=''547770''>as</span> <span m=''548000''>many</span>
  <span m=''548450''>of</span> <span m=''549920''>the</span> <span m=''550000''>following</span>
  <span m=''550540''>code</span> <span m=''550960''>block</span> <span m=''551580''>as</span>
  <span m=''551860''>there</span> <span m=''551960''>are</span> <span m=''552060''>processors</span>
  <span m=''552730''>or</span> <span m=''552990''>as</span> <span m=''553120''>many</span>
  <span m=''553310''>as</span> <span m=''553420''>you have</span> <span m=''553660''>thread</span>
  <span m=''553860''>contexts.</span> <span m=''555250''>So</span> <span m=''555490''>in</span>
  <span m=''555640''>this</span> <span m=''555770''>case</span> <span m=''556040''>I</span>
  <span m=''557090''>implicitly</span> <span m=''557460''>made</span> <span m=''557640''>the</span>
  <span m=''557710''>assumption</span> <span m=''558140''>that I</span> <span m=''558260''>have</span>
  <span m=''558420''>three</span> <span m=''558600''>processors,</span> <span m=''559440''>so</span>
  <span m=''559570''>I</span> <span m=''559600''>can</span> <span m=''559750''>automatically</span>
  <span m=''560240''>partition</span> <span m=''560730''>my</span> <span m=''560840''>code</span>
  <span m=''561670''>into</span> <span m=''562420''>three sets.</span> <span m=''563060''>And
  this</span> <span m=''563230''>transformation</span> <span m=''564200''>can sort</span>
  <span m=''564380''>of</span> <span m=''564450''>be</span> <span m=''564570''>done</span>
  <span m=''564780''>automatically</span> <span m=''565380''>by</span> <span m=''565570''>the</span>
  <span m=''565660''>compiler.</span> </p><p><span m=''567810''>And</span> <span m=''567970''>then</span>
  <span m=''568090''>there''s</span> <span m=''568280''>a</span> <span m=''568330''>for</span>
  <span m=''568650''>pragma</span> <span m=''569410''>that</span> <span m=''569590''>says</span>
  <span m=''571070''>this</span> <span m=''571370''>loop is</span> <span m=''571750''>parallel</span>
  <span m=''572290''>and</span> <span m=''572420''>you</span> <span m=''572490''>can</span>
  <span m=''572610''>divide</span> <span m=''572990''>up</span> <span m=''573110''>the</span>
  <span m=''573190''>work</span> <span m=''575850''>in</span> <span m=''575950''>the</span>
  <span m=''576010''>mechanism</span> <span m=''576430''>that''s</span> <span m=''576590''>work</span>
  <span m=''576780''>sharing.</span> <span m=''577230''>So</span> <span m=''577490''>multiple</span>
  <span m=''577860''>threads can</span> <span m=''578260''>collaborate</span> <span
  m=''578760''>to</span> <span m=''578940''>solve</span> <span m=''579120''>the</span>
  <span m=''579220''>same</span> <span m=''579430''>computation,</span> <span m=''580690''>but</span>
  <span m=''580830''>each</span> <span m=''581000''>one</span> <span m=''581300''>does</span>
  <span m=''581500''>a</span> <span m=''581570''>smaller</span> <span m=''581950''>amount</span>
  <span m=''582200''>of</span> <span m=''582290''>work.</span> <span m=''582540''>So</span>
  <span m=''586600''>this</span> <span m=''586850''>is</span> <span m=''586960''>in</span>
  <span m=''587090''>contrast</span> <span m=''587770''>to</span> <span m=''588580''>what</span>
  <span m=''588690''>I''m</span> <span m=''588780''>going</span> <span m=''588930''>to</span>
  <span m=''589020''>focus</span> <span m=''589360''>on</span> <span m=''589530''>a</span>
  <span m=''589580''>lot</span> <span m=''589760''>more</span> <span m=''590120''>in
  the</span> <span m=''590420''>rest of our</span> <span m=''590520''>talk,</span>
  <span m=''591120''>which</span> <span m=''591350''>is</span> <span m=''591510''>distributed</span>
  <span m=''591940''>memory</span> <span m=''592190''>processors</span> <span m=''592870''>and</span>
  <span m=''593190''>programming</span> <span m=''593730''>for</span> <span m=''594000''>distributed</span>
  <span m=''594430''>memories.</span> <span m=''595080''>And</span> <span m=''595560''>this</span>
  <span m=''595720''>will</span> <span m=''595870''>feel</span> <span m=''596150''>a</span>
  <span m=''596210''>lot</span> <span m=''596430''>more</span> <span m=''597490''>like</span>
  <span m=''597760''>programming</span> <span m=''598180''>for</span> <span m=''598310''>the</span>
  <span m=''598390''>Cell</span> <span m=''598760''>as</span> <span m=''598970''>you</span>
  <span m=''599060''>get</span> <span m=''599210''>more</span> <span m=''599450''>and</span>
  <span m=''599540''>more</span> <span m=''599740''>involved</span> <span m=''600160''>in</span>
  <span m=''600260''>that</span> <span m=''600490''>and</span> <span m=''600660''>your</span>
  <span m=''600780''>projects</span> <span m=''601170''>get</span> <span m=''602110''>more</span>
  <span m=''602330''>intense.</span> </p><p><span m=''603930''>So</span> <span m=''604260''>in</span>
  <span m=''604510''>distributed</span> <span m=''604820''>memory</span> <span m=''605060''>processors,</span>
  <span m=''607060''>to</span> <span m=''607380''>recap</span> <span m=''608070''>the</span>
  <span m=''608220''>previous</span> <span m=''608600''>lectures,</span> <span m=''609480''>you</span>
  <span m=''609600''>have</span> <span m=''610010''>n</span> <span m=''610200''>processors.</span>
  <span m=''611020''>Each</span> <span m=''611250''>processor</span> <span m=''611760''>has</span>
  <span m=''611940''>its</span> <span m=''612090''>own</span> <span m=''612290''>memory.</span>
  <span m=''613070''>And</span> <span m=''613940''>they</span> <span m=''614170''>essentially</span>
  <span m=''614570''>share</span> <span m=''614990''>the</span> <span m=''615230''>interconnection</span>
  <span m=''615770''>network.</span> <span m=''619030''>Each</span> <span m=''619250''>processor</span>
  <span m=''619620''>has</span> <span m=''619810''>its</span> <span m=''619970''>own</span>
  <span m=''620200''>address,</span> <span m=''620610''>X.</span> <span m=''621340''>So</span>
  <span m=''621510''>when</span> <span m=''621630''>a</span> <span m=''621670''>processor,</span>
  <span m=''622180''>P1,</span> <span m=''622780''>asks</span> <span m=''623080''>for</span>
  <span m=''623550''>X</span> <span m=''623980''>it knows</span> <span m=''624240''>where</span>
  <span m=''624440''>to go</span> <span m=''624880''>look.</span> <span m=''625440''>It''s</span>
  <span m=''625680''>going</span> <span m=''625910''>to</span> <span m=''626000''>look</span>
  <span m=''626290''>in</span> <span m=''626430''>its</span> <span m=''626550''>own</span>
  <span m=''626730''>local</span> <span m=''626970''>memory.</span> <span m=''627810''>So</span>
  <span m=''628020''>if</span> <span m=''628210''>all</span> <span m=''628470''>processors</span>
  <span m=''629050''>are</span> <span m=''629120''>asking</span> <span m=''630630''>for
  the</span> <span m=''630830''>same</span> <span m=''631070''>value</span> <span
  m=''631380''>as</span> <span m=''631490''>sort</span> <span m=''631680''>of</span>
  <span m=''631740''>address</span> <span m=''631910''>X,</span> <span m=''632590''>then
  each</span> <span m=''632860''>one</span> <span m=''633070''>goes and</span> <span
  m=''633270''>looks</span> <span m=''633610''>in a</span> <span m=''633670''>different</span>
  <span m=''633960''>place.</span> <span m=''635280''>So there</span> <span m=''635460''>are
  n</span> <span m=''635780''>places</span> <span m=''636130''>to</span> <span m=''636240''>look,</span>
  <span m=''636480''>really.</span> </p><p><span m=''637620''>And</span> <span m=''637910''>what''s</span>
  <span m=''638060''>stored</span> <span m=''638370''>in those</span> <span m=''638580''>addresses</span>
  <span m=''638990''>will</span> <span m=''639130''>vary</span> <span m=''639470''>because</span>
  <span m=''639830''>it''s</span> <span m=''640110''>everybody''s</span> <span m=''640620''>local</span>
  <span m=''640930''>memory.</span> <span m=''642200''>So</span> <span m=''642480''>if</span>
  <span m=''642680''>one</span> <span m=''642890''>processor,</span> <span m=''643670''>say</span>
  <span m=''644060''>P1,</span> <span m=''644410''>wants</span> <span m=''644680''>to</span>
  <span m=''644770''>look</span> <span m=''644960''>at</span> <span m=''645650''>the</span>
  <span m=''645770''>value</span> <span m=''646150''>stored</span> <span m=''646760''>in</span>
  <span m=''647030''>processor</span> <span m=''647490''>two''s</span> <span m=''648090''>address,</span>
  <span m=''648670''>it actually</span> <span m=''649110''>has</span> <span m=''649340''>to</span>
  <span m=''649480''>explicitly</span> <span m=''650050''>request</span> <span m=''650610''>it.</span>
  <span m=''651120''>The</span> <span m=''651380''>processor</span> <span m=''651870''>two</span>
  <span m=''652050''>has</span> <span m=''652250''>to</span> <span m=''652350''>send</span>
  <span m=''652610''>it</span> <span m=''652840''>data.</span> <span m=''653320''>And</span>
  <span m=''653640''>processor</span> <span m=''654000''>one</span> <span m=''654190''>has</span>
  <span m=''654420''>to</span> <span m=''654610''>figure</span> <span m=''654890''>out,</span>
  <span m=''655160''>you</span> <span m=''655380''>know,</span> <span m=''655620''>what</span>
  <span m=''655800''>to</span> <span m=''655880''>do</span> <span m=''656000''>with</span>
  <span m=''656090''>that</span> <span m=''656260''>copy.</span> <span m=''656720''>So
  it has</span> <span m=''656990''>to</span> <span m=''657080''>store it</span> <span
  m=''657420''>somewhere.</span> </p><p><span m=''660720''>So</span> <span m=''661040''>this</span>
  <span m=''661290''>message</span> <span m=''661670''>passing</span> <span m=''662990''>really</span>
  <span m=''664620''>exposes</span> <span m=''665120''>explicit</span> <span m=''665660''>communication</span>
  <span m=''666400''>to exchange</span> <span m=''666890''>data.</span> <span m=''668300''>And</span>
  <span m=''668980''>you''ll</span> <span m=''669200''>see</span> <span m=''669350''>that</span>
  <span m=''669510''>there</span> <span m=''669810''>are</span> <span m=''670450''>different</span>
  <span m=''670740''>kinds</span> <span m=''671130''>of</span> <span m=''671370''>data</span>
  <span m=''671620''>communications.</span> <span m=''672800''>But</span> <span m=''673170''>really</span>
  <span m=''673410''>the</span> <span m=''673490''>concept</span> <span m=''674120''>of</span>
  <span m=''674560''>what</span> <span m=''674750''>you</span> <span m=''675020''>exchange</span>
  <span m=''675630''>has</span> <span m=''676020''>three</span> <span m=''676240''>different
  --</span> <span m=''676900''>or</span> <span m=''677230''>four</span> <span m=''677500''>different,</span>
  <span m=''677830''>rather --</span> <span m=''679030''>things</span> <span m=''679350''>you</span>
  <span m=''679530''>need to</span> <span m=''679690''>address.</span> <span m=''680300''>One</span>
  <span m=''680530''>is</span> <span m=''681710''>how is</span> <span m=''681940''>the</span>
  <span m=''682000''>data</span> <span m=''682230''>described</span> <span m=''682640''>and</span>
  <span m=''682760''>what</span> <span m=''682940''>does</span> <span m=''683030''>it</span>
  <span m=''683150''>describe?</span> <span m=''684530''>How are</span> <span m=''684770''>the</span>
  <span m=''684840''>processes</span> <span m=''685390''>identified?</span> <span
  m=''685970''>So</span> <span m=''686070''>how</span> <span m=''686200''>do</span>
  <span m=''686290''>I</span> <span m=''686420''>identify</span> <span m=''686640''>that</span>
  <span m=''687170''>processor</span> <span m=''687530''>one</span> <span m=''687780''>is</span>
  <span m=''687870''>sending</span> <span m=''688130''>me</span> <span m=''688220''>this</span>
  <span m=''688400''>data?</span> <span m=''688990''>And</span> <span m=''689130''>if</span>
  <span m=''689220''>I''m</span> <span m=''689300''>receiving</span> <span m=''689730''>data</span>
  <span m=''689930''>how</span> <span m=''690060''>do</span> <span m=''690170''>I</span>
  <span m=''690280''>know</span> <span m=''690490''>who</span> <span m=''690640''>I''m</span>
  <span m=''690760''>receiving</span> <span m=''691200''>it from?</span> </p><p><span
  m=''694210''>Are</span> <span m=''694430''>all</span> <span m=''694620''>messages</span>
  <span m=''695110''>the</span> <span m=''695210''>same?</span> <span m=''695570''>Well,</span>
  <span m=''695870''>you</span> <span m=''696000''>know,</span> <span m=''696090''>if</span>
  <span m=''696200''>I</span> <span m=''696260''>send</span> <span m=''696530''>a</span>
  <span m=''696570''>message to</span> <span m=''696920''>somebody,</span> <span m=''697770''>do</span>
  <span m=''697880''>I</span> <span m=''697930''>have</span> <span m=''698100''>any</span>
  <span m=''698240''>guarantee</span> <span m=''698680''>that</span> <span m=''698840''>it''s</span>
  <span m=''698970''>received</span> <span m=''699420''>or</span> <span m=''699500''>not?</span>
  <span m=''700770''>And</span> <span m=''700890''>what</span> <span m=''701030''>does</span>
  <span m=''701140''>it</span> <span m=''701290''>mean</span> <span m=''701620''>for
  a</span> <span m=''702040''>send</span> <span m=''702420''>operation</span> <span
  m=''702970''>or a</span> <span m=''703070''>receive</span> <span m=''703450''>operation</span>
  <span m=''703930''>to</span> <span m=''704070''>be</span> <span m=''704180''>completed?</span>
  <span m=''704720''>You</span> <span m=''704800''>know,</span> <span m=''704900''>is
  there</span> <span m=''705140''>some</span> <span m=''705260''>sort</span> <span
  m=''705460''>of</span> <span m=''705620''>acknowledgment</span> <span m=''706990''>process?</span>
  </p><p><span m=''710440''>So</span> <span m=''710820''>an example</span> <span m=''711030''>of</span>
  <span m=''711260''>a</span> <span m=''711310''>message</span> <span m=''711700''>passing</span>
  <span m=''712110''>program --</span> <span m=''712740''>and</span> <span m=''713190''>if</span>
  <span m=''713380''>you''ve</span> <span m=''713500''>started</span> <span m=''713890''>to</span>
  <span m=''713980''>look</span> <span m=''714120''>at</span> <span m=''714210''>the</span>
  <span m=''714290''>lab</span> <span m=''714640''>you''ll</span> <span m=''714790''>see</span>
  <span m=''715100''>that</span> <span m=''715280''>this</span> <span m=''715410''>is</span>
  <span m=''715580''>essentially</span> <span m=''717390''>where</span> <span m=''717520''>the</span>
  <span m=''717600''>lab</span> <span m=''717820''>came</span> <span m=''718010''>from.</span>
  <span m=''719770''>It''s</span> <span m=''720100''>the</span> <span m=''720230''>same</span>
  <span m=''720500''>idea.</span> <span m=''720920''>I''ve</span> <span m=''722020''>created
  --</span> <span m=''722990''>here</span> <span m=''723220''>I</span> <span m=''723260''>have</span>
  <span m=''723460''>some</span> <span m=''723840''>two-dimensional</span> <span m=''724410''>space.</span>
  <span m=''725050''>And</span> <span m=''725460''>I</span> <span m=''725490''>have</span>
  <span m=''725690''>points</span> <span m=''726000''>in</span> <span m=''726070''>this</span>
  <span m=''726160''>two-dimensional</span> <span m=''726690''>space.</span> <span
  m=''727380''>I</span> <span m=''727540''>have</span> <span m=''727860''>points</span>
  <span m=''728230''>B,</span> <span m=''728410''>which</span> <span m=''728560''>are</span>
  <span m=''728830''>these</span> <span m=''729030''>blue</span> <span m=''729250''>circles,</span>
  <span m=''730150''>and</span> <span m=''730450''>I</span> <span m=''730490''>have</span>
  <span m=''730920''>points</span> <span m=''731340''>A</span> <span m=''731570''>which</span>
  <span m=''731730''>I''ve</span> <span m=''731790''>represented</span> <span m=''732370''>as</span>
  <span m=''732610''>these</span> <span m=''733570''>yellow</span> <span m=''734030''>or</span>
  <span m=''734160''>golden</span> <span m=''734510''>squares.</span> </p><p><span
  m=''737040''>And</span> <span m=''737230''>what</span> <span m=''737330''>I</span>
  <span m=''737380''>want</span> <span m=''737570''>to</span> <span m=''737640''>do</span>
  <span m=''737820''>is</span> <span m=''738040''>for</span> <span m=''738150''>every</span>
  <span m=''738400''>point</span> <span m=''739050''>in</span> <span m=''739230''>A</span>
  <span m=''739580''>I want to</span> <span m=''739740''>calculate the</span> <span
  m=''740260''>distance</span> <span m=''741010''>to all</span> <span m=''741240''>of</span>
  <span m=''741330''>the</span> <span m=''741400''>points</span> <span m=''741690''>B.</span>
  <span m=''742320''>So there''s</span> <span m=''742820''>sort of a</span> <span
  m=''743080''>pair</span> <span m=''743360''>wise</span> <span m=''743660''>interaction</span>
  <span m=''744190''>between</span> <span m=''744460''>the</span> <span m=''744530''>two</span>
  <span m=''744690''>arrays.</span> <span m=''746880''>So a</span> <span m=''747240''>simple</span>
  <span m=''747590''>loop</span> <span m=''747890''>that</span> <span m=''748100''>essentially</span>
  <span m=''748520''>does</span> <span m=''748760''>this --</span> <span m=''749710''>and</span>
  <span m=''750020''>there</span> <span m=''750310''>are</span> <span m=''751130''>n</span>
  <span m=''751920''>squared</span> <span m=''753060''>interactions,</span> <span
  m=''754270''>you</span> <span m=''754400''>have,</span> <span m=''754870''>you</span>
  <span m=''754980''>know,</span> <span m=''755090''>a</span> <span m=''755230''>loop</span>
  <span m=''755510''>that</span> <span m=''755680''>loops</span> <span m=''755920''>over</span>
  <span m=''756150''>all</span> <span m=''756340''>the A</span> <span m=''756540''>elements,</span>
  <span m=''757110''>a loop</span> <span m=''757410''>that</span> <span m=''758380''>loops</span>
  <span m=''758660''>over</span> <span m=''758840''>all</span> <span m=''759010''>the</span>
  <span m=''759120''>B</span> <span m=''759280''>elements.</span> <span m=''759920''>And</span>
  <span m=''760400''>you</span> <span m=''760500''>essentially</span> <span m=''760810''>calculate</span>
  <span m=''761310''>in</span> <span m=''761420''>this</span> <span m=''761510''>case</span>
  <span m=''761780''>Euclidean</span> <span m=''762350''>distance</span> <span m=''762560''>which</span>
  <span m=''762720''>I''m</span> <span m=''762820''>not</span> <span m=''762960''>showing.</span>
  <span m=''763500''>And</span> <span m=''763640''>you</span> <span m=''763710''>store
  it</span> <span m=''763960''>into</span> <span m=''764250''>some</span> <span m=''764530''>new</span>
  <span m=''764750''>array.</span> </p><p><span m=''767890''>So</span> <span m=''768350''>if</span>
  <span m=''768460''>I</span> <span m=''768530''>give</span> <span m=''768710''>you</span>
  <span m=''768800''>two</span> <span m=''768980''>processors</span> <span m=''769590''>to</span>
  <span m=''769720''>do</span> <span m=''769860''>this</span> <span m=''770080''>work,</span>
  <span m=''771800''>processor</span> <span m=''772270''>one and</span> <span m=''772760''>processor</span>
  <span m=''773250''>two,</span> <span m=''773470''>and</span> <span m=''773630''>I</span>
  <span m=''773700''>give</span> <span m=''773870''>you</span> <span m=''773960''>some</span>
  <span m=''774180''>mechanism</span> <span m=''774710''>to</span> <span m=''774860''>share</span>
  <span m=''775100''>between</span> <span m=''775400''>the</span> <span m=''775490''>two
  --</span> <span m=''776780''>so</span> <span m=''776910''>here''s</span> <span m=''777150''>my</span>
  <span m=''777280''>CPU.</span> <span m=''778270''>Each</span> <span m=''778550''>processor
  has</span> <span m=''779040''>local</span> <span m=''779270''>memory.</span> <span
  m=''779940''>What</span> <span m=''780090''>would be</span> <span m=''780220''>some</span>
  <span m=''780400''>approach</span> <span m=''780780''>for</span> <span m=''780890''>actually</span>
  <span m=''781300''>parallelizing</span> <span m=''781590''>this?</span> <span m=''782360''>Anybody</span>
  <span m=''782720''>look</span> <span m=''782860''>at</span> <span m=''782930''>the</span>
  <span m=''783000''>lab</span> <span m=''783230''>yet?</span> <span m=''785240''>OK,</span>
  <span m=''785390''>so</span> <span m=''785640''>what</span> <span m=''785760''>would</span>
  <span m=''785890''>you</span> <span m=''785970''>do</span> <span m=''787950''>with</span>
  <span m=''788120''>two</span> <span m=''788230''>processors?</span> </p><p><span
  m=''794734''>AUDIENCE:</span> <span m=''795224''>One has</span> <span m=''796203''>half</span>
  <span m=''796693''>memory</span> <span m=''797182''>[INAUDIBLE]</span> </p><p><span
  m=''799630''>PROFESSOR: Right.</span> <span m=''801120''>So</span> <span m=''801530''>what</span>
  <span m=''801660''>was</span> <span m=''801770''>said</span> <span m=''801950''>was</span>
  <span m=''802080''>that you</span> <span m=''802410''>split</span> <span m=''803230''>one</span>
  <span m=''803390''>of</span> <span m=''803490''>the</span> <span m=''803670''>arrays
  in</span> <span m=''804080''>two</span> <span m=''804360''>and</span> <span m=''804570''>you</span>
  <span m=''804640''>can</span> <span m=''804890''>actually</span> <span m=''805250''>get</span>
  <span m=''805390''>that</span> <span m=''805520''>kind</span> <span m=''805700''>of</span>
  <span m=''805770''>concurrency.</span> <span m=''806590''>So,</span> <span m=''807380''>you</span>
  <span m=''807470''>know,</span> <span m=''807570''>let''s</span> <span m=''807710''>say</span>
  <span m=''807820''>processor</span> <span m=''808260''>one</span> <span m=''809080''>already</span>
  <span m=''809320''>has the</span> <span m=''809630''>data.</span> <span m=''810470''>And</span>
  <span m=''811160''>it</span> <span m=''811330''>has</span> <span m=''811570''>some</span>
  <span m=''811790''>place that it''s</span> <span m=''812380''>already</span> <span
  m=''812640''>allocated</span> <span m=''813160''>where</span> <span m=''813320''>it''s</span>
  <span m=''813480''>going</span> <span m=''813650''>to</span> <span m=''813740''>write</span>
  <span m=''813990''>C,</span> <span m=''815160''>the</span> <span m=''815480''>results
  of</span> <span m=''815750''>the</span> <span m=''815840''>computation,</span> <span
  m=''817270''>then</span> <span m=''817540''>I</span> <span m=''817610''>can</span>
  <span m=''817770''>break</span> <span m=''818020''>up</span> <span m=''818120''>the</span>
  <span m=''818210''>work</span> <span m=''818520''>just</span> <span m=''818700''>like</span>
  <span m=''818930''>it</span> <span m=''819050''>was</span> <span m=''819260''>suggested.</span>
  <span m=''819860''>So</span> <span m=''820380''>what</span> <span m=''820710''>P1</span>
  <span m=''820920''>has</span> <span m=''821140''>to</span> <span m=''821220''>do</span>
  <span m=''821430''>is</span> <span m=''821660''>send</span> <span m=''822060''>data</span>
  <span m=''822280''>to</span> <span m=''822600''>P2.</span> <span m=''823550''>It</span>
  <span m=''823650''>says</span> <span m=''823910''>here''s</span> <span m=''824160''>the</span>
  <span m=''824260''>data.</span> <span m=''824650''>Here''s</span> <span m=''825170''>the</span>
  <span m=''825270''>computation.</span> <span m=''826190''>Go</span> <span m=''826310''>ahead</span>
  <span m=''826570''>and</span> <span m=''826830''>help</span> <span m=''827060''>me</span>
  <span m=''827160''>out.</span> </p><p><span m=''828250''>So I</span> <span m=''828440''>send</span>
  <span m=''829450''>the</span> <span m=''829580''>first</span> <span m=''830620''>array</span>
  <span m=''830950''>elements,</span> <span m=''832210''>and</span> <span m=''832380''>then</span>
  <span m=''832540''>I</span> <span m=''832630''>send</span> <span m=''832980''>half</span>
  <span m=''833340''>of</span> <span m=''833540''>the</span> <span m=''833630''>other</span>
  <span m=''833880''>elements</span> <span m=''834250''>that</span> <span m=''834370''>I</span>
  <span m=''834400''>want</span> <span m=''835020''>the</span> <span m=''835580''>calculations</span>
  <span m=''836360''>done</span> <span m=''836550''>for.</span> <span m=''837630''>And</span>
  <span m=''837810''>then</span> <span m=''838260''>P1</span> <span m=''838360''>and</span>
  <span m=''838650''>P2</span> <span m=''838970''>can</span> <span m=''839110''>now</span>
  <span m=''839950''>sort</span> <span m=''840170''>of</span> <span m=''840260''>start</span>
  <span m=''840760''>computing</span> <span m=''841190''>in parallel.</span> </p><p><span
  m=''841670''>But</span> <span m=''843260''>notice</span> <span m=''843590''>that</span>
  <span m=''844200''>P2</span> <span m=''844870''>has</span> <span m=''845100''>its</span>
  <span m=''845260''>own</span> <span m=''845680''>array</span> <span m=''845890''>that
  it''s</span> <span m=''846040''>going</span> <span m=''846200''>to</span> <span
  m=''846370''>store</span> <span m=''846650''>results</span> <span m=''847120''>in.</span>
  <span m=''848210''>And</span> <span m=''848370''>so</span> <span m=''848580''>as</span>
  <span m=''848880''>these</span> <span m=''849570''>compute</span> <span m=''850050''>they
  actually</span> <span m=''850440''>fill</span> <span m=''850670''>in</span> <span
  m=''850860''>different</span> <span m=''852210''>logical</span> <span m=''852940''>places</span>
  <span m=''853710''>or</span> <span m=''853900''>logical</span> <span m=''854410''>parts</span>
  <span m=''854980''>of the</span> <span m=''855360''>overall</span> <span m=''855740''>matrix.</span>
  <span m=''856570''>So</span> <span m=''856900''>what</span> <span m=''857100''>has</span>
  <span m=''857350''>to</span> <span m=''857440''>be</span> <span m=''857580''>done</span>
  <span m=''857830''>is</span> <span m=''858010''>at</span> <span m=''858100''>the</span>
  <span m=''858230''>end</span> <span m=''858570''>for</span> <span m=''858890''>P1</span>
  <span m=''859160''>to</span> <span m=''859240''>have</span> <span m=''859510''>all</span>
  <span m=''859630''>the</span> <span m=''859720''>results,</span> <span m=''860810''>P2</span>
  <span m=''860910''>has</span> <span m=''861080''>to</span> <span m=''861170''>send</span>
  <span m=''861550''>it</span> <span m=''862440''>sort of</span> <span m=''863130''>the</span>
  <span m=''863210''>rest</span> <span m=''863400''>of</span> <span m=''863460''>the</span>
  <span m=''863520''>matrix</span> <span m=''863880''>to</span> <span m=''863980''>complete</span>
  <span m=''864290''>it.</span> <span m=''864400''>And</span> <span m=''864950''>so</span>
  <span m=''865100''>now</span> <span m=''866010''>P1</span> <span m=''866240''>has</span>
  <span m=''866550''>all</span> <span m=''866690''>the</span> <span m=''866790''>results.</span>
  <span m=''867200''>The computation</span> <span m=''867770''>is</span> <span m=''867910''>done</span>
  <span m=''868400''>and</span> <span m=''868630''>you can</span> <span m=''868740''>move</span>
  <span m=''868910''>on.</span> <span m=''869480''>Does that</span> <span m=''869610''>make</span>
  <span m=''869720''>sense?</span> <span m=''871690''>OK.</span> <span m=''871870''>So</span>
  <span m=''872500''>you''ll</span> <span m=''872680''>get</span> <span m=''872860''>to</span>
  <span m=''872950''>actually</span> <span m=''873290''>do</span> <span m=''873420''>this</span>
  <span m=''873590''>as</span> <span m=''873680''>part</span> <span m=''873920''>of</span>
  <span m=''873990''>your</span> <span m=''874120''>labs.</span> </p><p><span m=''876490''>So</span>
  <span m=''877580''>in</span> <span m=''877700''>this</span> <span m=''877830''>example</span>
  <span m=''878210''>messaging</span> <span m=''878610''>program,</span> <span m=''879000''>you
  have</span> <span m=''879160''>started</span> <span m=''879480''>out</span> <span
  m=''879600''>with</span> <span m=''879710''>a</span> <span m=''879760''>sequential</span>
  <span m=''880230''>code.</span> <span m=''881170''>And</span> <span m=''881620''>we</span>
  <span m=''881730''>had</span> <span m=''881860''>two</span> <span m=''882010''>processors.</span>
  <span m=''883330''>So</span> <span m=''883800''>processor</span> <span m=''884220''>one</span>
  <span m=''884440''>actually</span> <span m=''884810''>sends</span> <span m=''885220''>the
  code.</span> <span m=''885570''>So</span> <span m=''885760''>it</span> <span m=''885890''>is</span>
  <span m=''885990''>essentially</span> <span m=''886400''>a template</span> <span
  m=''886840''>for</span> <span m=''886950''>the</span> <span m=''887030''>code</span>
  <span m=''887330''>you''ll</span> <span m=''887410''>end up</span> <span m=''887630''>writing.</span>
  <span m=''889350''>And</span> <span m=''890230''>it does</span> <span m=''890440''>have</span>
  <span m=''890720''>to</span> <span m=''890810''>work</span> <span m=''891440''>in
  the</span> <span m=''891660''>outer</span> <span m=''891900''>loop.</span> <span
  m=''892330''>So</span> <span m=''892800''>this</span> <span m=''893030''>n</span>
  <span m=''893250''>array</span> <span m=''893820''>over</span> <span m=''894060''>which</span>
  <span m=''894290''>it is</span> <span m=''894580''>iterating</span> <span m=''896310''>the</span>
  <span m=''896450''>A</span> <span m=''896690''>array,</span> <span m=''897170''>is</span>
  <span m=''897480''>it''s</span> <span m=''897710''>only</span> <span m=''897940''>doing</span>
  <span m=''898230''>half</span> <span m=''898480''>as</span> <span m=''898610''>many.</span>
  </p><p><span m=''901910''>And</span> <span m=''903730''>processor</span> <span m=''904100''>two</span>
  <span m=''904410''>has to</span> <span m=''904680''>actually</span> <span m=''905080''>receive</span>
  <span m=''905490''>the</span> <span m=''905580''>data.</span> <span m=''906170''>And</span>
  <span m=''906420''>it</span> <span m=''906490''>specifies</span> <span m=''907140''>where</span>
  <span m=''907410''>to</span> <span m=''907520''>receive</span> <span m=''907830''>the</span>
  <span m=''907910''>data</span> <span m=''908150''>into.</span> <span m=''909140''>So
  I''ve omitted</span> <span m=''909710''>some things,</span> <span m=''910180''>for</span>
  <span m=''910330''>example,</span> <span m=''912490''>extra</span> <span m=''912630''>information</span>
  <span m=''913110''>sort</span> <span m=''913280''>of</span> <span m=''913390''>hidden</span>
  <span m=''913600''>in</span> <span m=''913780''>these</span> <span m=''913950''>parameters.</span>
  <span m=''915260''>So here</span> <span m=''915600''>you''re</span> <span m=''915750''>sending</span>
  <span m=''916240''>all</span> <span m=''916410''>of A,</span> <span m=''916520''>all
  of</span> <span m=''917050''>B.</span> <span m=''917900''>Whereas,</span> <span
  m=''918500''>you</span> <span m=''918650''>know,</span> <span m=''918720''>you</span>
  <span m=''918810''>could have</span> <span m=''919510''>specified</span> <span m=''919990''>extra</span>
  <span m=''920240''>parameters</span> <span m=''920740''>that</span> <span m=''920900''>says,</span>
  <span m=''921600''>you know,</span> <span m=''922360''>I''m</span> <span m=''922520''>sending</span>
  <span m=''922780''>you</span> <span m=''922890''>A.</span> <span m=''923380''>Here''s</span>
  <span m=''923770''>n</span> <span m=''923980''>elements</span> <span m=''924320''>to</span>
  <span m=''924430''>read</span> <span m=''924650''>from</span> <span m=''924740''>A.</span>
  <span m=''925590''>Here''s</span> <span m=''925920''>B.</span> <span m=''926160''>Here''s</span>
  <span m=''926960''>n</span> <span m=''927150''>by</span> <span m=''927260''>two</span>
  <span m=''927440''>elements</span> <span m=''927950''>to read</span> <span m=''928110''>from
  B.</span> <span m=''928340''>And</span> <span m=''928480''>so on.</span> </p><p><span
  m=''931040''>But the</span> <span m=''931320''>computation is</span> <span m=''932090''>essentially</span>
  <span m=''932500''>the</span> <span m=''932570''>same</span> <span m=''932880''>except</span>
  <span m=''933650''>for</span> <span m=''934060''>the index</span> <span m=''934410''>at</span>
  <span m=''934510''>which</span> <span m=''934690''>you</span> <span m=''934800''>start,</span>
  <span m=''935460''>in</span> <span m=''935630''>this</span> <span m=''935890''>case</span>
  <span m=''937500''>changed</span> <span m=''938140''>for</span> <span m=''938310''>processor</span>
  <span m=''938850''>two.</span> <span m=''940370''>And</span> <span m=''940500''>now,</span>
  <span m=''941140''>when</span> <span m=''941340''>the</span> <span m=''941410''>computation
  is</span> <span m=''942070''>done,</span> <span m=''942390''>this</span> <span m=''942540''>guy</span>
  <span m=''943150''>essentially</span> <span m=''943610''>waits</span> <span m=''944290''>until</span>
  <span m=''944570''>the</span> <span m=''944670''>data</span> <span m=''944940''>is</span>
  <span m=''945060''>received.</span> <span m=''947180''>Processor</span> <span m=''947630''>two</span>
  <span m=''947770''>eventually</span> <span m=''948170''>sends</span> <span m=''948380''>it</span>
  <span m=''948470''>that</span> <span m=''948650''>data</span> <span m=''949200''>and</span>
  <span m=''949330''>now</span> <span m=''949410''>you</span> <span m=''949550''>can</span>
  <span m=''949730''>move</span> <span m=''949900''>on.</span> </p><p><span m=''950050''>AUDIENCE:
  I have a question.</span> </p><p><span m=''952450''>PROFESSOR: Yeah?</span> </p><p><span
  m=''953215''>AUDIENCE: So</span> <span m=''955156''>would</span> <span m=''955642''>processor
  two</span> <span m=''956127''>have to</span> <span m=''956613''>wait for the data</span>
  <span m=''957583''>from</span> <span m=''958069''>processor one?</span> </p><p><span
  m=''958554''>PROFESSOR: Yeah,</span> <span m=''959320''>so</span> <span m=''959410''>there''s</span>
  <span m=''959600''>a --</span> <span m=''959790''>I''ll</span> <span m=''960170''>get</span>
  <span m=''960310''>into</span> <span m=''960370''>that</span> <span m=''960670''>later.</span>
  <span m=''961760''>So</span> <span m=''962920''>what</span> <span m=''963050''>does</span>
  <span m=''963160''>it</span> <span m=''963250''>mean</span> <span m=''963490''>to</span>
  <span m=''963580''>receive?</span> <span m=''966660''>To do</span> <span m=''966860''>this</span>
  <span m=''967010''>computation,</span> <span m=''967640''>I actually</span> <span
  m=''968060''>need</span> <span m=''968880''>this</span> <span m=''969230''>instruction</span>
  <span m=''969670''>to</span> <span m=''969760''>complete.</span> <span m=''970420''>So</span>
  <span m=''970720''>what</span> <span m=''970870''>does</span> <span m=''970940''>it</span>
  <span m=''971020''>need</span> <span m=''971210''>for that</span> <span m=''971420''>instruction</span>
  <span m=''971810''>to</span> <span m=''971910''>complete?</span> <span m=''973250''>I</span>
  <span m=''973350''>do</span> <span m=''973510''>have</span> <span m=''973730''>to</span>
  <span m=''973820''>get</span> <span m=''973940''>the</span> <span m=''974020''>data</span>
  <span m=''974280''>because</span> <span m=''974550''>otherwise</span> <span m=''974940''>I</span>
  <span m=''975010''>don''t</span> <span m=''975260''>know</span> <span m=''975370''>what</span>
  <span m=''975500''>to</span> <span m=''975580''>compute</span> <span m=''975940''>on.</span>
  <span m=''976360''>So</span> <span m=''976600''>there is</span> <span m=''976860''>some</span>
  <span m=''978090''>implicit</span> <span m=''978480''>synchronization</span> <span
  m=''979140''>that</span> <span m=''979250''>you</span> <span m=''979320''>have</span>
  <span m=''979500''>to</span> <span m=''979610''>do.</span> <span m=''980100''>And
  in</span> <span m=''980270''>some</span> <span m=''980430''>cases</span> <span m=''980980''>it''s</span>
  <span m=''981180''>explicit.</span> <span m=''981490''>So</span> <span m=''981860''>I''ll</span>
  <span m=''982020''>get</span> <span m=''982160''>into</span> <span m=''982260''>that</span>
  <span m=''982530''>a</span> <span m=''982560''>little</span> <span m=''982780''>bit</span>
  <span m=''982900''>later.</span> <span m=''984770''>Does</span> <span m=''984860''>that</span>
  <span m=''985110''>sort</span> <span m=''985730''>of</span> <span m=''985800''>hint
  at</span> <span m=''986050''>the</span> <span m=''986150''>answer?</span> <span
  m=''987400''>Are you</span> <span m=''987590''>still</span> <span m=''987740''>confused?</span>
  </p><p><span m=''988140''>AUDIENCE:</span> <span m=''989687''>So</span> <span m=''990203''>processor</span>
  <span m=''990719''>one</span> <span m=''991235''>doesn''t</span> <span m=''991750''>do
  the</span> <span m=''992266''>computation</span> <span m=''992782''>but it</span>
  <span m=''993298''>still sends</span> <span m=''993814''>the data --</span> </p><p><span
  m=''994330''>PROFESSOR: So</span> <span m=''995340''>in</span> <span m=''995500''>terms</span>
  <span m=''995740''>of</span> <span m=''995840''>tracing,</span> <span m=''1000620''>processor</span>
  <span m=''1001010''>one</span> <span m=''1001240''>sends</span> <span m=''1001470''>the</span>
  <span m=''1001540''>data</span> <span m=''1001940''>and</span> <span m=''1002070''>then</span>
  <span m=''1002180''>can</span> <span m=''1002310''>immediately</span> <span m=''1002790''>start</span>
  <span m=''1003400''>executing</span> <span m=''1003940''>its</span> <span m=''1004060''>code,</span>
  <span m=''1004680''>right?</span> <span m=''1005380''>Processor</span> <span m=''1005800''>two,</span>
  <span m=''1007700''>in</span> <span m=''1007830''>this</span> <span m=''1008060''>particular</span>
  <span m=''1008430''>example,</span> <span m=''1008730''>has</span> <span m=''1008880''>to</span>
  <span m=''1008960''>wait</span> <span m=''1009120''>until</span> <span m=''1009340''>it</span>
  <span m=''1009440''>receives</span> <span m=''1009790''>the</span> <span m=''1009860''>data.</span>
  <span m=''1010500''>So</span> <span m=''1010670''>once</span> <span m=''1010970''>this</span>
  <span m=''1011120''>receive</span> <span m=''1011530''>completes,</span> <span m=''1012470''>then</span>
  <span m=''1012640''>you</span> <span m=''1012710''>can</span> <span m=''1012810''>actually</span>
  <span m=''1013180''>go</span> <span m=''1013520''>and</span> <span m=''1013990''>start</span>
  <span m=''1014340''>executing</span> <span m=''1014770''>the</span> <span m=''1014830''>rest</span>
  <span m=''1015010''>of</span> <span m=''1015080''>the</span> <span m=''1015180''>code.</span>
  <span m=''1016070''>So</span> <span m=''1016180''>imagine</span> <span m=''1016570''>that</span>
  <span m=''1017010''>it</span> <span m=''1017470''>essentially</span> <span m=''1017780''>says,</span>
  <span m=''1018030''>wait</span> <span m=''1018250''>until</span> <span m=''1018470''>I</span>
  <span m=''1018540''>have</span> <span m=''1018760''>data.</span> <span m=''1018930''>Wait
  until I</span> <span m=''1019420''>have something</span> <span m=''1019680''>to</span>
  <span m=''1019760''>do.</span> <span m=''1019950''>Does that</span> <span m=''1021320''>help?</span>
  </p><p><span m=''1021720''>AUDIENCE:</span> <span m=''1022211''>Can</span> <span
  m=''1022703''>the</span> <span m=''1023195''>main</span> <span m=''1023686''>processor</span>
  <span m=''1024670''>[UNINTELLIGIBLE PHRASE]</span> </p><p><span m=''1026080''>PROFESSOR:
  Can</span> <span m=''1026320''>the</span> <span m=''1026360''>main</span> <span
  m=''1026570''>processor --</span> </p><p><span m=''1026920''>AUDIENCE:</span> <span
  m=''1027110''>I mean,</span> <span m=''1028780''>in Cell,</span> <span m=''1029190''>everybody</span>
  <span m=''1029645''>is</span> <span m=''1030100''>not</span> <span m=''1031010''>peers.</span>
  <span m=''1031196''>There is a</span> <span m=''1031383''>master</span> <span m=''1031570''>there.</span>
  <span m=''1033360''>And</span> <span m=''1034030''>what master</span> <span m=''1034882''>can
  do instead</span> <span m=''1035308''>of</span> <span m=''1036587''>doing computation,</span>
  <span m=''1037440''>master</span> <span m=''1037760''>can be</span> <span m=''1038110''>basically</span>
  <span m=''1038770''>the</span> <span m=''1039870''>quarterback,</span> <span m=''1041020''>sending</span>
  <span m=''1041540''>data, receiving data.</span> <span m=''1042061''>And</span>
  <span m=''1042582''>SPEs</span> <span m=''1043103''>can</span> <span m=''1043624''>be</span>
  <span m=''1044145''>basically</span> <span m=''1044666''>waiting</span> <span m=''1044839''>for</span>
  <span m=''1045013''>data,</span> <span m=''1045187''>get</span> <span m=''1045360''>the</span>
  <span m=''1045534''>computation,</span> <span m=''1045708''>send it back.</span>
  <span m=''1046750''>So</span> <span m=''1047070''>in</span> <span m=''1047320''>some
  sense in Cell</span> <span m=''1049280''>you probably</span> <span m=''1049807''>don''t
  want</span> <span m=''1050335''>to do the computation</span> <span m=''1051390''>on
  the master.</span> <span m=''1052498''>Because that means</span> <span m=''1052960''>the
  master</span> <span m=''1053300''>slows</span> <span m=''1053570''>down.</span>
  <span m=''1054140''>The master</span> <span m=''1054520''>will do</span> <span m=''1054580''>only</span>
  <span m=''1055180''>the</span> <span m=''1055656''>data</span> <span m=''1056132''>management.</span>
  <span m=''1056608''>So</span> <span m=''1057085''>that</span> <span m=''1057561''>might</span>
  <span m=''1058037''>be</span> <span m=''1058513''>one</span> <span m=''1058990''>symmetrical</span>
  <span m=''1059535''>[UNINTELLIGIBLE]</span> </p><p><span m=''1061730''>PROFESSOR:
  And</span> <span m=''1062300''>you''ll</span> <span m=''1062420''>see</span> <span
  m=''1062590''>that in</span> <span m=''1062790''>the</span> <span m=''1062880''>example.</span>
  <span m=''1063280''>Because</span> <span m=''1063980''>the</span> <span m=''1064160''>PPE</span>
  <span m=''1064660''>in</span> <span m=''1064750''>that</span> <span m=''1064890''>case</span>
  <span m=''1065110''>has to</span> <span m=''1065280''>send the</span> <span m=''1065680''>data</span>
  <span m=''1066260''>to</span> <span m=''1066380''>two</span> <span m=''1066500''>different</span>
  <span m=''1066920''>SPEs.</span> <span m=''1069390''>Yup?</span> </p><p><span m=''1069580''>AUDIENCE:
  In</span> <span m=''1070098''>some sense</span> <span m=''1070617''>[UNINTELLIGIBLE
  PHRASE]</span> <span m=''1074250''>at</span> <span m=''1074420''>points seems to
  be</span> <span m=''1075520''>[UNINTELLIGIBLE]</span> <span m=''1075920''>sense</span>
  <span m=''1076380''>that</span> <span m=''1076550''>if --</span> <span m=''1077460''>so</span>
  <span m=''1077920''>have a huge array</span> <span m=''1079500''>and you want</span>
  <span m=''1079910''>to</span> <span m=''1080368''>[UNINTELLIGIBLE PHRASE]</span>
  <span m=''1080826''>the data</span> <span m=''1081742''>to receive</span> <span
  m=''1082200''>the whole</span> <span m=''1083090''>array, then</span> <span m=''1083310''>you</span>
  <span m=''1083836''>have</span> <span m=''1084362''>to</span> <span m=''1084888''>[UNINTELLIGIBLE]</span>
  </p><p><span m=''1085940''>PROFESSOR: Yeah,</span> <span m=''1086260''>we''ll</span>
  <span m=''1086600''>get</span> <span m=''1086740''>into</span> <span m=''1086930''>that</span>
  <span m=''1087080''>later.</span> <span m=''1088600''>Yeah,</span> <span m=''1088740''>I</span>
  <span m=''1088790''>mean,</span> <span m=''1088940''>that''s</span> <span m=''1089280''>a</span>
  <span m=''1089340''>good</span> <span m=''1089470''>point.</span> <span m=''1089840''>You</span>
  <span m=''1089940''>know,</span> <span m=''1090010''>communication</span> <span
  m=''1090570''>is</span> <span m=''1090670''>not</span> <span m=''1090840''>cheap.</span>
  <span m=''1091450''>And</span> <span m=''1091760''>if</span> <span m=''1091920''>you</span>
  <span m=''1092940''>sort</span> <span m=''1093110''>of</span> <span m=''1093350''>don''t</span>
  <span m=''1093600''>take</span> <span m=''1093880''>that</span> <span m=''1094050''>into</span>
  <span m=''1094210''>consideration,</span> <span m=''1095010''>you</span> <span m=''1095140''>end</span>
  <span m=''1095260''>up</span> <span m=''1095390''>paying</span> <span m=''1095640''>a</span>
  <span m=''1095730''>lot</span> <span m=''1096060''>for</span> <span m=''1096320''>overhead</span>
  <span m=''1096730''>for</span> <span m=''1096920''>parallelizing</span> <span m=''1097420''>things.</span>
  </p><p><span m=''1097640''>AUDIENCE:</span> <span m=''1098136''>[INAUDIBLE]</span>
  </p><p><span m=''1100120''>PROFESSOR: Well,</span> <span m=''1100660''>you</span>
  <span m=''1100830''>can</span> <span m=''1100950''>do</span> <span m=''1101080''>things</span>
  <span m=''1101310''>in</span> <span m=''1101390''>software</span> <span m=''1101760''>as</span>
  <span m=''1101870''>well.</span> <span m=''1102250''>We''ll</span> <span m=''1102870''>get</span>
  <span m=''1103000''>into</span> <span m=''1103230''>that.</span> </p><p><span m=''1104210''>OK,</span>
  <span m=''1104430''>so</span> <span m=''1105090''>some</span> <span m=''1105430''>crude</span>
  <span m=''1105660''>performance</span> <span m=''1106090''>analysis.</span> <span
  m=''1107850''>So</span> <span m=''1108290''>I</span> <span m=''1108470''>have</span>
  <span m=''1108700''>to</span> <span m=''1108810''>calculate</span> <span m=''1109260''>this</span>
  <span m=''1109420''>distance.</span> <span m=''1109960''>And</span> <span m=''1110340''>given</span>
  <span m=''1110560''>two</span> <span m=''1110680''>processors,</span> <span m=''1111400''>I</span>
  <span m=''1111470''>can</span> <span m=''1111610''>effectively</span> <span m=''1112100''>get</span>
  <span m=''1112440''>a</span> <span m=''1112620''>2x</span> <span m=''1113010''>speedup.</span>
  <span m=''1114020''>By</span> <span m=''1114160''>dividing</span> <span m=''1114600''>up</span>
  <span m=''1114700''>the</span> <span m=''1114780''>work</span> <span m=''1115070''>I</span>
  <span m=''1115140''>can</span> <span m=''1115380''>get</span> <span m=''1115560''>done</span>
  <span m=''1116430''>in</span> <span m=''1116690''>half the</span> <span m=''1116990''>time.</span>
  <span m=''1117620''>Well,</span> <span m=''1117820''>if</span> <span m=''1117920''>you</span>
  <span m=''1117990''>gave</span> <span m=''1118130''>me</span> <span m=''1118210''>four</span>
  <span m=''1118450''>processors,</span> <span m=''1119420''>I</span> <span m=''1119590''>can</span>
  <span m=''1119850''>maybe</span> <span m=''1120070''>get</span> <span m=''1120250''>done</span>
  <span m=''1121130''>four</span> <span m=''1121360''>times</span> <span m=''1121590''>as</span>
  <span m=''1121650''>fast.</span> <span m=''1123380''>And</span> <span m=''1123760''>in</span>
  <span m=''1123980''>my</span> <span m=''1124090''>communication</span> <span m=''1124670''>model</span>
  <span m=''1124980''>here,</span> <span m=''1125700''>I</span> <span m=''1125830''>have</span>
  <span m=''1126550''>one</span> <span m=''1126730''>copy</span> <span m=''1127100''>of</span>
  <span m=''1127210''>one</span> <span m=''1127510''>array</span> <span m=''1127730''>that''s</span>
  <span m=''1128280''>essentially</span> <span m=''1128690''>sending</span> <span
  m=''1128990''>to</span> <span m=''1129060''>every</span> <span m=''1129280''>processor.</span>
  <span m=''1130540''>And</span> <span m=''1131120''>there''s</span> <span m=''1131340''>some</span>
  <span m=''1131560''>subset</span> <span m=''1131940''>of</span> <span m=''1132090''>A.</span>
  <span m=''1132260''>So I''m</span> <span m=''1132470''>partitioning</span> <span
  m=''1133510''>my</span> <span m=''1133720''>other</span> <span m=''1134060''>array</span>
  <span m=''1134570''>into</span> <span m=''1134750''>smaller</span> <span m=''1135040''>subsets.</span>
  <span m=''1135580''>And</span> <span m=''1135680''>I''m</span> <span m=''1135750''>sending</span>
  <span m=''1136070''>those</span> <span m=''1136330''>to each</span> <span m=''1136540''>of</span>
  <span m=''1136600''>the</span> <span m=''1136660''>different</span> <span m=''1136930''>processors.</span>
  </p><p><span m=''1138320''>So</span> <span m=''1138710''>we''ll get</span> <span
  m=''1138920''>into</span> <span m=''1139040''>terminology</span> <span m=''1139710''>for</span>
  <span m=''1140680''>how to</span> <span m=''1140840''>actually</span> <span m=''1141240''>name</span>
  <span m=''1141450''>these</span> <span m=''1141610''>communications</span> <span
  m=''1142300''>later.</span> <span m=''1143820''>But</span> <span m=''1144080''>really</span>
  <span m=''1144400''>the thing to</span> <span m=''1144630''>take</span> <span m=''1144810''>away</span>
  <span m=''1144970''>here</span> <span m=''1145280''>is</span> <span m=''1145390''>that</span>
  <span m=''1145540''>this</span> <span m=''1145930''>granularity --</span> <span
  m=''1146310''>how I''m partitioning</span> <span m=''1147310''>A --</span> <span
  m=''1147930''>affects</span> <span m=''1148330''>my</span> <span m=''1149000''>performance</span>
  <span m=''1149870''>and</span> <span m=''1150060''>communication</span> <span m=''1150620''>almost</span>
  <span m=''1150840''>directly.</span> <span m=''1152580''>And,</span> <span m=''1153000''>you</span>
  <span m=''1153180''>know,</span> <span m=''1153290''>the</span> <span m=''1153520''>comment</span>
  <span m=''1153800''>that</span> <span m=''1153900''>was</span> <span m=''1154010''>just</span>
  <span m=''1154170''>made</span> <span m=''1154390''>is</span> <span m=''1154500''>that,</span>
  <span m=''1154690''>you</span> <span m=''1154790''>know,</span> <span m=''1154890''>what</span>
  <span m=''1155010''>do</span> <span m=''1155070''>you</span> <span m=''1155170''>do</span>
  <span m=''1155350''>about</span> <span m=''1155440''>communication?</span> <span
  m=''1156090''>It''s</span> <span m=''1156220''>not</span> <span m=''1156460''>free.</span>
  <span m=''1157040''>So</span> <span m=''1157390''>all of</span> <span m=''1157670''>those</span>
  <span m=''1157890''>will</span> <span m=''1158030''>be</span> <span m=''1158130''>addressed.</span>
  </p><p><span m=''1159270''>So to</span> <span m=''1159450''>understand</span> <span
  m=''1159900''>performance,</span> <span m=''1160990''>we</span> <span m=''1161090''>sort</span>
  <span m=''1161250''>of</span> <span m=''1161320''>summarize</span> <span m=''1161890''>three</span>
  <span m=''1162150''>main</span> <span m=''1162420''>concepts</span> <span m=''1163220''>that
  you essentially</span> <span m=''1163870''>need to</span> <span m=''1163950''>understand.</span>
  <span m=''1164890''>One</span> <span m=''1165110''>is</span> <span m=''1165460''>coverage,</span>
  <span m=''1166930''>or</span> <span m=''1167360''>in</span> <span m=''1167550''>other</span>
  <span m=''1167710''>words,</span> <span m=''1168030''>how</span> <span m=''1168280''>much</span>
  <span m=''1168460''>parallelism</span> <span m=''1168880''>do I</span> <span m=''1169010''>actually</span>
  <span m=''1169400''>have in</span> <span m=''1169740''>my</span> <span m=''1169880''>application?</span>
  <span m=''1172880''>And</span> <span m=''1173040''>this</span> <span m=''1173190''>can</span>
  <span m=''1173970''>actually</span> <span m=''1174450''>affect,</span> <span m=''1174930''>you</span>
  <span m=''1175060''>know,</span> <span m=''1175140''>how</span> <span m=''1175270''>much</span>
  <span m=''1175460''>work</span> <span m=''1175770''>is</span> <span m=''1175870''>it</span>
  <span m=''1175980''>worth</span> <span m=''1176260''>spending</span> <span m=''1176600''>on</span>
  <span m=''1176950''>this particular</span> <span m=''1177390''>application?</span>
  <span m=''1178730''>Granularity --</span> <span m=''1179910''>you</span> <span m=''1180040''>know,</span>
  <span m=''1180140''>how</span> <span m=''1180250''>do</span> <span m=''1180340''>you</span>
  <span m=''1180400''>partition</span> <span m=''1180810''>your</span> <span m=''1180950''>data</span>
  <span m=''1181240''>among</span> <span m=''1181510''>your</span> <span m=''1181560''>different</span>
  <span m=''1181860''>processors</span> <span m=''1182400''>so</span> <span m=''1182580''>that
  you</span> <span m=''1182730''>can</span> <span m=''1182860''>keep</span> <span
  m=''1183080''>communication</span> <span m=''1183700''>down,</span> <span m=''1183860''>so</span>
  <span m=''1183980''>you</span> <span m=''1184060''>can</span> <span m=''1184190''>keep</span>
  <span m=''1184390''>synchronization</span> <span m=''1185030''>down,</span> <span
  m=''1185540''>and</span> <span m=''1185650''>so</span> <span m=''1185770''>on.</span>
  <span m=''1186970''>Locality --</span> <span m=''1188130''>so</span> <span m=''1188350''>while</span>
  <span m=''1188500''>not</span> <span m=''1188670''>shown</span> <span m=''1189190''>in</span>
  <span m=''1189430''>the</span> <span m=''1189510''>particular</span> <span m=''1189890''>example,</span>
  <span m=''1190640''>if</span> <span m=''1190850''>two</span> <span m=''1190990''>processors</span>
  <span m=''1191530''>are</span> <span m=''1191650''>communicating,</span> <span m=''1192970''>if</span>
  <span m=''1193140''>they are</span> <span m=''1193440''>close</span> <span m=''1193800''>in</span>
  <span m=''1193990''>space</span> <span m=''1194590''>or</span> <span m=''1194840''>far
  in</span> <span m=''1195220''>space,</span> <span m=''1195620''>or</span> <span
  m=''1196510''>if</span> <span m=''1196650''>the</span> <span m=''1196720''>communication</span>
  <span m=''1197260''>between</span> <span m=''1197430''>two</span> <span m=''1197570''>processors</span>
  <span m=''1198460''>is</span> <span m=''1198640''>far</span> <span m=''1198880''>cheaper</span>
  <span m=''1199280''>than</span> <span m=''1199880''>two other</span> <span m=''1200160''>processors,</span>
  <span m=''1201030''>can I</span> <span m=''1201400''>exploit</span> <span m=''1201820''>that</span>
  <span m=''1201940''>in</span> <span m=''1202060''>some</span> <span m=''1202220''>way?</span>
  <span m=''1202540''>And</span> <span m=''1203540''>so</span> <span m=''1203900''>we''ll</span>
  <span m=''1204070''>talk</span> <span m=''1204290''>about</span> <span m=''1204500''>that</span>
  <span m=''1204650''>as</span> <span m=''1204770''>well.</span> </p><p><span m=''1207370''>So
  an example</span> <span m=''1207960''>of</span> <span m=''1208470''>sort of</span>
  <span m=''1208760''>parallelism</span> <span m=''1209330''>in</span> <span m=''1209410''>an</span>
  <span m=''1209500''>application,</span> <span m=''1211170''>there</span> <span m=''1211350''>are
  two</span> <span m=''1211880''>essentially</span> <span m=''1212260''>projects</span>
  <span m=''1213300''>that are</span> <span m=''1213540''>doing</span> <span m=''1213800''>ray</span>
  <span m=''1214030''>tracing,</span> <span m=''1214410''>so</span> <span m=''1214550''>I</span>
  <span m=''1214600''>thought</span> <span m=''1214820''>I''d</span> <span m=''1214960''>have</span>
  <span m=''1215180''>this</span> <span m=''1215340''>slide</span> <span m=''1215580''>here.</span>
  <span m=''1217030''>You</span> <span m=''1217120''>know,</span> <span m=''1217260''>how</span>
  <span m=''1217360''>much</span> <span m=''1217530''>parallelism</span> <span m=''1217960''>do</span>
  <span m=''1218030''>you</span> <span m=''1218140''>have</span> <span m=''1220760''>in</span>
  <span m=''1220890''>a</span> <span m=''1220940''>ray</span> <span m=''1221130''>tracing</span>
  <span m=''1221890''>program.</span> <span m=''1223490''>In ray tracing</span> <span
  m=''1223910''>what</span> <span m=''1224020''>you</span> <span m=''1224120''>do</span>
  <span m=''1224330''>is</span> <span m=''1225060''>you</span> <span m=''1225270''>essentially</span>
  <span m=''1225540''>have</span> <span m=''1225860''>some</span> <span m=''1226170''>camera</span>
  <span m=''1226530''>source,</span> <span m=''1228930''>some</span> <span m=''1229360''>observer.</span>
  <span m=''1230080''>And</span> <span m=''1230230''>you''re</span> <span m=''1230320''>trying</span>
  <span m=''1230570''>to</span> <span m=''1230680''>figure</span> <span m=''1230950''>out,</span>
  <span m=''1231130''>you</span> <span m=''1231240''>know,</span> <span m=''1231320''>how</span>
  <span m=''1231490''>to</span> <span m=''1231570''>color</span> <span m=''1232610''>or</span>
  <span m=''1233060''>how</span> <span m=''1233200''>to shade</span> <span m=''1233700''>different</span>
  <span m=''1234120''>pixels</span> <span m=''1234550''>in</span> <span m=''1234680''>your</span>
  <span m=''1234810''>screen.</span> <span m=''1235180''>So what you do</span> <span
  m=''1235820''>is you</span> <span m=''1235940''>shoot rays</span> <span m=''1236180''>from</span>
  <span m=''1236730''>a</span> <span m=''1236830''>particular</span> <span m=''1237190''>source</span>
  <span m=''1238160''>through</span> <span m=''1238410''>your</span> <span m=''1238480''>plane.</span>
  <span m=''1238850''>And</span> <span m=''1238980''>then</span> <span m=''1239070''>you</span>
  <span m=''1239180''>see</span> <span m=''1239340''>how</span> <span m=''1239500''>the</span>
  <span m=''1239580''>rays</span> <span m=''1239940''>bounce</span> <span m=''1240200''>off</span>
  <span m=''1240380''>of</span> <span m=''1240600''>other</span> <span m=''1240710''>objects.</span>
  <span m=''1241270''>And</span> <span m=''1241500''>that</span> <span m=''1241620''>allows</span>
  <span m=''1241870''>you</span> <span m=''1241950''>to</span> <span m=''1242080''>render</span>
  <span m=''1242340''>scenes</span> <span m=''1243320''>in</span> <span m=''1243480''>various</span>
  <span m=''1243810''>ways.</span> </p><p><span m=''1244310''>So you have</span> <span
  m=''1244760''>different</span> <span m=''1245050''>kinds</span> <span m=''1245300''>of</span>
  <span m=''1245370''>parallelisms.</span> <span m=''1246390''>You</span> <span m=''1246570''>have</span>
  <span m=''1246740''>your</span> <span m=''1247580''>primary</span> <span m=''1248190''>ray</span>
  <span m=''1248620''>that''s</span> <span m=''1248750''>shot</span> <span m=''1249070''>in.</span>
  <span m=''1250190''>And</span> <span m=''1250370''>if</span> <span m=''1250610''>you''re</span>
  <span m=''1250790''>shooting</span> <span m=''1251130''>into</span> <span m=''1251470''>something</span>
  <span m=''1251770''>like</span> <span m=''1252050''>water</span> <span m=''1252430''>or</span>
  <span m=''1252580''>some</span> <span m=''1252750''>very</span> <span m=''1252960''>reflective</span>
  <span m=''1253390''>surface,</span> <span m=''1254760''>or</span> <span m=''1255050''>some</span>
  <span m=''1255190''>surface</span> <span m=''1255550''>that</span> <span m=''1255710''>can</span>
  <span m=''1256320''>actually</span> <span m=''1257440''>reflect,</span> <span m=''1258060''>transmit,</span>
  <span m=''1261940''>you</span> <span m=''1262190''>can</span> <span m=''1262380''>essentially</span>
  <span m=''1262780''>end</span> <span m=''1262940''>up</span> <span m=''1263060''>with</span>
  <span m=''1263190''>a</span> <span m=''1263240''>lot</span> <span m=''1263410''>more</span>
  <span m=''1263640''>rays</span> <span m=''1264000''>that</span> <span m=''1264090''>are</span>
  <span m=''1264150''>created</span> <span m=''1265730''>at</span> <span m=''1266070''>run</span>
  <span m=''1266270''>time.</span> <span m=''1266980''>So</span> <span m=''1267380''>there''s</span>
  <span m=''1267700''>dynamic</span> <span m=''1268200''>parallelism</span> <span
  m=''1268700''>in</span> <span m=''1268760''>this</span> <span m=''1268880''>particular
  example.</span> <span m=''1270040''>And</span> <span m=''1270220''>you</span> <span
  m=''1270300''>can</span> <span m=''1270410''>shoot</span> <span m=''1270650''>a</span>
  <span m=''1270710''>lot</span> <span m=''1270920''>of</span> <span m=''1271060''>rays</span>
  <span m=''1271370''>from</span> <span m=''1271520''>here.</span> <span m=''1271800''>So</span>
  <span m=''1271970''>there''s</span> <span m=''1272490''>different</span> <span m=''1272830''>kinds</span>
  <span m=''1273070''>of</span> <span m=''1273130''>parallelism</span> <span m=''1273620''>you
  can</span> <span m=''1273750''>exploit.</span> </p><p><span m=''1277500''>Not</span>
  <span m=''1277740''>all</span> <span m=''1277900''>prior</span> <span m=''1278550''>programs</span>
  <span m=''1279120''>have</span> <span m=''1279380''>this</span> <span m=''1279540''>kind</span>
  <span m=''1279820''>of,</span> <span m=''1280470''>sort</span> <span m=''1280640''>of,</span>
  <span m=''1280780''>a</span> <span m=''1280870''>lot</span> <span m=''1281080''>of</span>
  <span m=''1281150''>parallelism,</span> <span m=''1281630''>or</span> <span m=''1281730''>embarrassingly</span>
  <span m=''1282580''>parallel</span> <span m=''1283450''>computation.</span> <span
  m=''1285180''>You</span> <span m=''1285280''>know,</span> <span m=''1285770''>you</span>
  <span m=''1285880''>saw</span> <span m=''1286210''>some</span> <span m=''1286520''>basic</span>
  <span m=''1287270''>code</span> <span m=''1287490''>sequences</span> <span m=''1287810''>in</span>
  <span m=''1288100''>earlier</span> <span m=''1288380''>lectures.</span> <span m=''1289090''>So</span>
  <span m=''1289780''>there''s</span> <span m=''1290090''>a</span> <span m=''1290150''>sequential</span>
  <span m=''1290560''>part.</span> <span m=''1291020''>And</span> <span m=''1291240''>the
  reason</span> <span m=''1291470''>this</span> <span m=''1291610''>is</span> <span
  m=''1291710''>sequential is</span> <span m=''1292330''>because</span> <span m=''1292620''>there
  are</span> <span m=''1292800''>data</span> <span m=''1293060''>flow</span> <span
  m=''1293230''>dependencies</span> <span m=''1294110''>between</span> <span m=''1294460''>each</span>
  <span m=''1294640''>of the</span> <span m=''1294750''>different</span> <span m=''1295020''>computations.</span>
  <span m=''1296090''>So</span> <span m=''1296200''>here</span> <span m=''1296410''>I</span>
  <span m=''1296470''>calculate</span> <span m=''1297020''>a,</span> <span m=''1297240''>but</span>
  <span m=''1297380''>I</span> <span m=''1297430''>need</span> <span m=''1297600''>the</span>
  <span m=''1297680''>result</span> <span m=''1298010''>of</span> <span m=''1298170''>a</span>
  <span m=''1298390''>to</span> <span m=''1298470''>do</span> <span m=''1298600''>this</span>
  <span m=''1298760''>instruction.</span> <span m=''1299660''>I</span> <span m=''1299810''>calculate</span>
  <span m=''1300280''>d</span> <span m=''1300480''>here</span> <span m=''1300840''>and</span>
  <span m=''1301000''>I</span> <span m=''1301050''>need</span> <span m=''1301340''>that</span>
  <span m=''1301490''>result</span> <span m=''1301870''>to calculate</span> <span
  m=''1303120''>e.</span> <span m=''1303300''>But</span> <span m=''1303480''>then</span>
  <span m=''1303680''>this</span> <span m=''1303920''>loop</span> <span m=''1304220''>really</span>
  <span m=''1304420''>here</span> <span m=''1304700''>is just</span> <span m=''1304890''>assigning</span>
  <span m=''1305370''>or it''s initializing</span> <span m=''1306200''>some big</span>
  <span m=''1306510''>array.</span> <span m=''1306860''>And I</span> <span m=''1306910''>can</span>
  <span m=''1307050''>really</span> <span m=''1307240''>do</span> <span m=''1307360''>that</span>
  <span m=''1307750''>in</span> <span m=''1307940''>parallel.</span> </p><p><span
  m=''1309940''>So</span> <span m=''1310130''>I</span> <span m=''1310200''>have</span>
  <span m=''1310540''>sequential</span> <span m=''1310860''>parts</span> <span m=''1311280''>and</span>
  <span m=''1311530''>parallel</span> <span m=''1311730''>parts.</span> <span m=''1312520''>So</span>
  <span m=''1312740''>how</span> <span m=''1312870''>does</span> <span m=''1313010''>that</span>
  <span m=''1313160''>affect</span> <span m=''1313430''>my</span> <span m=''1313580''>overall</span>
  <span m=''1315660''>speedups?</span> <span m=''1316590''>And</span> <span m=''1316740''>so</span>
  <span m=''1317310''>there''s</span> <span m=''1317580''>this</span> <span m=''1318430''>law</span>
  <span m=''1318700''>which</span> <span m=''1318870''>is</span> <span m=''1318950''>really</span>
  <span m=''1319230''>a</span> <span m=''1319500''>demonstration</span> <span m=''1320250''>of</span>
  <span m=''1320460''>diminishing</span> <span m=''1320910''>returns,</span> <span
  m=''1322400''>Amdahl''s</span> <span m=''1322740''>Law.</span> <span m=''1323550''>It</span>
  <span m=''1323670''>says</span> <span m=''1323890''>that</span> <span m=''1324080''>if,</span>
  <span m=''1324480''>you</span> <span m=''1324610''>know,</span> <span m=''1324680''>you</span>
  <span m=''1324790''>have</span> <span m=''1325510''>a</span> <span m=''1325920''>really</span>
  <span m=''1326210''>fast</span> <span m=''1326510''>car,</span> <span m=''1327650''>it''s</span>
  <span m=''1327850''>only</span> <span m=''1328070''>as</span> <span m=''1328170''>good</span>
  <span m=''1328320''>to</span> <span m=''1328420''>you</span> <span m=''1328590''>as</span>
  <span m=''1328720''>fast</span> <span m=''1328960''>as</span> <span m=''1329030''>you</span>
  <span m=''1329120''>can</span> <span m=''1329230''>drive</span> <span m=''1329410''>it.</span>
  <span m=''1330310''>So</span> <span m=''1330450''>if</span> <span m=''1330560''>there''s</span>
  <span m=''1330720''>a</span> <span m=''1330750''>lot</span> <span m=''1330910''>of</span>
  <span m=''1330980''>congestion</span> <span m=''1331400''>on</span> <span m=''1331510''>your</span>
  <span m=''1331640''>road</span> <span m=''1332110''>or,</span> <span m=''1332880''>you</span>
  <span m=''1333010''>know,</span> <span m=''1333090''>there</span> <span m=''1333300''>are
  posted</span> <span m=''1333700''>speed</span> <span m=''1333940''>limits</span>
  <span m=''1334500''>or</span> <span m=''1334930''>some</span> <span m=''1335120''>other</span>
  <span m=''1335320''>mechanism,</span> <span m=''1335950''>you</span> <span m=''1336070''>really</span>
  <span m=''1336280''>can''t</span> <span m=''1336550''>exploit</span> <span m=''1337210''>all</span>
  <span m=''1337580''>the</span> <span m=''1337700''>speed</span> <span m=''1337840''>of</span>
  <span m=''1337930''>your car.</span> <span m=''1338670''>Or</span> <span m=''1338960''>in</span>
  <span m=''1339030''>other</span> <span m=''1339210''>words,</span> <span m=''1339860''>you''re</span>
  <span m=''1339970''>only</span> <span m=''1340210''>as</span> <span m=''1340350''>fast</span>
  <span m=''1340790''>as</span> <span m=''1341800''>the fastest</span> <span m=''1342440''>mechanisms</span>
  <span m=''1342910''>of</span> <span m=''1343030''>the computation</span> <span m=''1343570''>that</span>
  <span m=''1343660''>you</span> <span m=''1343770''>can</span> <span m=''1343890''>have.</span>
  </p><p><span m=''1345940''>So</span> <span m=''1346860''>to</span> <span m=''1347000''>look</span>
  <span m=''1347160''>at</span> <span m=''1347220''>this</span> <span m=''1347370''>in</span>
  <span m=''1348350''>more</span> <span m=''1348540''>detail,</span> <span m=''1350500''>your</span>
  <span m=''1350650''>potential</span> <span m=''1351100''>speedup</span> <span m=''1351530''>is</span>
  <span m=''1351660''>really</span> <span m=''1352430''>proportional</span> <span
  m=''1353130''>to</span> <span m=''1353950''>the</span> <span m=''1354070''>fraction</span>
  <span m=''1354480''>of</span> <span m=''1354580''>the</span> <span m=''1354660''>code</span>
  <span m=''1354990''>that</span> <span m=''1355100''>can</span> <span m=''1355210''>be</span>
  <span m=''1355290''>parallelized.</span> <span m=''1356420''>So if</span> <span
  m=''1356610''>I</span> <span m=''1356690''>have</span> <span m=''1357040''>some</span>
  <span m=''1357520''>computation --</span> <span m=''1357940''>let''s say</span>
  <span m=''1358140''>it</span> <span m=''1358350''>has</span> <span m=''1358560''>three</span>
  <span m=''1358730''>parts:</span> <span m=''1359370''>a</span> <span m=''1359550''>sequential</span>
  <span m=''1359970''>part</span> <span m=''1360300''>that</span> <span m=''1360470''>takes</span>
  <span m=''1360690''>25</span> <span m=''1361120''>seconds,</span> <span m=''1362050''>a</span>
  <span m=''1362140''>parallel part</span> <span m=''1362570''>that takes</span> <span
  m=''1363150''>50</span> <span m=''1363420''>seconds,</span> <span m=''1364080''>and
  a</span> <span m=''1364250''>sequential</span> <span m=''1364700''>part</span> <span
  m=''1364960''>that</span> <span m=''1365120''>runs in</span> <span m=''1365940''>25</span>
  <span m=''1366150''>seconds.</span> <span m=''1367250''>So the total</span> <span
  m=''1367710''>execution</span> <span m=''1368170''>time</span> <span m=''1368530''>is</span>
  <span m=''1368680''>100</span> <span m=''1368770''>seconds.</span> <span m=''1369680''>And
  if</span> <span m=''1369840''>I</span> <span m=''1369920''>have</span> <span m=''1370090''>one</span>
  <span m=''1370330''>processor,</span> <span m=''1371490''>that''s</span> <span m=''1371700''>really</span>
  <span m=''1372060''>all</span> <span m=''1372260''>I</span> <span m=''1372310''>can</span>
  <span m=''1372460''>do.</span> <span m=''1373390''>And if</span> <span m=''1373500''>she</span>
  <span m=''1373650''>gave</span> <span m=''1373820''>me</span> <span m=''1373950''>more</span>
  <span m=''1374180''>than</span> <span m=''1374290''>one</span> <span m=''1374450''>processor
  --</span> <span m=''1374970''>so</span> <span m=''1375120''>let''s</span> <span
  m=''1375220''>say</span> <span m=''1375350''>I have</span> <span m=''1375510''>five</span>
  <span m=''1375840''>processors.</span> <span m=''1377010''>Well,</span> <span m=''1377540''>I</span>
  <span m=''1377640''>can''t</span> <span m=''1377900''>do</span> <span m=''1377990''>anything</span>
  <span m=''1378280''>about the</span> <span m=''1378490''>sequential</span> <span
  m=''1378900''>work.</span> <span m=''1379390''>So</span> <span m=''1379720''>that''s</span>
  <span m=''1379910''>still</span> <span m=''1380080''>going to</span> <span m=''1380210''>take</span>
  <span m=''1380480''>25</span> <span m=''1381010''>seconds.</span> <span m=''1381920''>And</span>
  <span m=''1382200''>I</span> <span m=''1382240''>can''t</span> <span m=''1382480''>do</span>
  <span m=''1382590''>anything</span> <span m=''1382830''>about</span> <span m=''1382950''>this</span>
  <span m=''1383070''>sequential</span> <span m=''1383470''>work</span> <span m=''1383650''>either.</span>
  <span m=''1384120''>That</span> <span m=''1384320''>still</span> <span m=''1384510''>takes</span>
  <span m=''1384890''>25</span> <span m=''1385100''>seconds.</span> <span m=''1385850''>But</span>
  <span m=''1385980''>this</span> <span m=''1386480''>parallel</span> <span m=''1386860''>part</span>
  <span m=''1387190''>I</span> <span m=''1387240''>can</span> <span m=''1387360''>essentially</span>
  <span m=''1387810''>break up</span> <span m=''1388670''>among</span> <span m=''1389000''>the</span>
  <span m=''1389080''>different</span> <span m=''1389420''>processors.</span> <span
  m=''1390060''>So</span> <span m=''1390260''>five</span> <span m=''1390600''>in</span>
  <span m=''1390670''>this</span> <span m=''1390800''>case.</span> <span m=''1391470''>And</span>
  <span m=''1391650''>that</span> <span m=''1391790''>gets</span> <span m=''1392020''>me,</span>
  <span m=''1392320''>you</span> <span m=''1392420''>know,</span> <span m=''1392870''>five-way</span>
  <span m=''1393070''>parallelism.</span> <span m=''1393680''>So</span> <span m=''1394280''>the
  50</span> <span m=''1394620''>seconds</span> <span m=''1395290''>now</span> <span
  m=''1395460''>is</span> <span m=''1395570''>reduced</span> <span m=''1395930''>to
  10</span> <span m=''1396110''>seconds.</span> <span m=''1396970''>Is that</span>
  <span m=''1397150''>clear so</span> <span m=''1397640''>far?</span> </p><p><span
  m=''1398990''>So</span> <span m=''1399190''>the</span> <span m=''1399260''>overall</span>
  <span m=''1399680''>running</span> <span m=''1399970''>time</span> <span m=''1400420''>in</span>
  <span m=''1400520''>that</span> <span m=''1400680''>case</span> <span m=''1400980''>is</span>
  <span m=''1401090''>60</span> <span m=''1401400''>seconds.</span> <span m=''1402330''>So</span>
  <span m=''1402640''>what</span> <span m=''1402820''>would</span> <span m=''1402960''>be</span>
  <span m=''1403110''>my</span> <span m=''1403270''>speedup?</span> <span m=''1404690''>Well,</span>
  <span m=''1405210''>you</span> <span m=''1405390''>calculate</span> <span m=''1405800''>speedup,</span>
  <span m=''1407880''>old</span> <span m=''1408460''>running</span> <span m=''1408700''>time</span>
  <span m=''1409040''>divided</span> <span m=''1409420''>by</span> <span m=''1409580''>the</span>
  <span m=''1409660''>new</span> <span m=''1409810''>running</span> <span m=''1410080''>time.</span>
  <span m=''1410790''>So</span> <span m=''1411010''>100</span> <span m=''1411320''>seconds</span>
  <span m=''1411740''>divided</span> <span m=''1411950''>by</span> <span m=''1412050''>60</span>
  <span m=''1412370''>seconds.</span> <span m=''1412820''>Or</span> <span m=''1413130''>my</span>
  <span m=''1413250''>parallel</span> <span m=''1413660''>version</span> <span m=''1414130''>is</span>
  <span m=''1414310''>1.67</span> <span m=''1415360''>times</span> <span m=''1415690''>faster.</span>
  <span m=''1417020''>So</span> <span m=''1417260''>this is</span> <span m=''1417370''>great.</span>
  </p><p><span m=''1418660''>If</span> <span m=''1418810''>I</span> <span m=''1418910''>increase</span>
  <span m=''1419240''>the</span> <span m=''1419300''>number of</span> <span m=''1419530''>processors,</span>
  <span m=''1420190''>then</span> <span m=''1420390''>I</span> <span m=''1420490''>should</span>
  <span m=''1420610''>be</span> <span m=''1420690''>able to</span> <span m=''1420830''>get</span>
  <span m=''1421000''>more</span> <span m=''1421210''>and more</span> <span m=''1421390''>parallelism.</span>
  <span m=''1421980''>But</span> <span m=''1423650''>it also</span> <span m=''1424080''>means</span>
  <span m=''1424340''>that</span> <span m=''1425430''>there''s</span> <span m=''1425850''>sort
  of</span> <span m=''1426070''>an</span> <span m=''1426260''>upper</span> <span m=''1426490''>bound</span>
  <span m=''1427130''>on</span> <span m=''1427410''>how</span> <span m=''1427530''>much</span>
  <span m=''1427850''>speedup</span> <span m=''1428010''>you</span> <span m=''1428110''>can</span>
  <span m=''1428250''>get.</span> <span m=''1429160''>So</span> <span m=''1429300''>if</span>
  <span m=''1429420''>you</span> <span m=''1429500''>look</span> <span m=''1429680''>at</span>
  <span m=''1429780''>the</span> <span m=''1429890''>fraction</span> <span m=''1430370''>of</span>
  <span m=''1430480''>work</span> <span m=''1431090''>in</span> <span m=''1431250''>your</span>
  <span m=''1431460''>application</span> <span m=''1432450''>that''s</span> <span
  m=''1432790''>parallel,</span> <span m=''1433760''>that''s</span> <span m=''1433950''>p.</span>
  <span m=''1434840''>And</span> <span m=''1435070''>your</span> <span m=''1435170''>number</span>
  <span m=''1435490''>of processors,</span> <span m=''1436300''>well,</span> <span
  m=''1437110''>your</span> <span m=''1437250''>speedup</span> <span m=''1437750''>is
  --</span> <span m=''1438530''>let''s</span> <span m=''1438690''>say</span> <span
  m=''1438800''>the</span> <span m=''1438890''>old</span> <span m=''1439080''>running</span>
  <span m=''1439310''>time</span> <span m=''1439550''>is just</span> <span m=''1439790''>one</span>
  <span m=''1439920''>unit</span> <span m=''1440170''>of</span> <span m=''1440250''>work.</span>
  <span m=''1441270''>If</span> <span m=''1441560''>the</span> <span m=''1441970''>time</span>
  <span m=''1442310''>it</span> <span m=''1442420''>takes</span> <span m=''1442660''>for
  the</span> <span m=''1442820''>sequential</span> <span m=''1443270''>work --</span>
  <span m=''1443850''>so</span> <span m=''1443970''>that''s</span> <span m=''1444120''>1</span>
  <span m=''1444340''>minus</span> <span m=''1444630''>p,</span> <span m=''1445600''>since</span>
  <span m=''1445830''>p is the</span> <span m=''1446280''>fraction</span> <span m=''1446690''>of</span>
  <span m=''1446910''>the</span> <span m=''1447490''>parallel</span> <span m=''1447820''>work.</span>
  <span m=''1448720''>And</span> <span m=''1449090''>it''s</span> <span m=''1449350''>the</span>
  <span m=''1449440''>time</span> <span m=''1449790''>to</span> <span m=''1449930''>do</span>
  <span m=''1450060''>the</span> <span m=''1450140''>parallel work.</span> <span m=''1451120''>And</span>
  <span m=''1451250''>since</span> <span m=''1451440''>I</span> <span m=''1451500''>can</span>
  <span m=''1451660''>parallelize</span> <span m=''1453150''>that</span> <span m=''1453380''>fraction</span>
  <span m=''1454070''>over</span> <span m=''1454290''>n</span> <span m=''1454480''>processors,</span>
  <span m=''1455390''>I</span> <span m=''1455510''>can</span> <span m=''1455670''>sort</span>
  <span m=''1455840''>of</span> <span m=''1455960''>reduce</span> <span m=''1456360''>that</span>
  <span m=''1456550''>to</span> <span m=''1458020''>really</span> <span m=''1458270''>small</span>
  <span m=''1458500''>amounts</span> <span m=''1458830''>in</span> <span m=''1458910''>the</span>
  <span m=''1458990''>limit.</span> <span m=''1459640''>Does that</span> <span m=''1459760''>make</span>
  <span m=''1459900''>sense</span> <span m=''1460070''>so</span> <span m=''1460160''>far?</span>
  </p><p><span m=''1463290''>So</span> <span m=''1463430''>the</span> <span m=''1463530''>speedup</span>
  <span m=''1463850''>can</span> <span m=''1464010''>tend</span> <span m=''1464280''>to</span>
  <span m=''1464470''>1</span> <span m=''1464710''>over</span> <span m=''1464910''>1</span>
  <span m=''1465100''>minus</span> <span m=''1465300''>p</span> <span m=''1465420''>in
  the</span> <span m=''1465760''>limit.</span> <span m=''1466260''>If I</span> <span
  m=''1466600''>increase</span> <span m=''1466980''>the number of</span> <span m=''1467260''>processors</span>
  <span m=''1467990''>or</span> <span m=''1468300''>that</span> <span m=''1468370''>gets</span>
  <span m=''1469280''>really</span> <span m=''1469560''>large,</span> <span m=''1471390''>that''s</span>
  <span m=''1471600''>essentially</span> <span m=''1472020''>my</span> <span m=''1472140''>upper</span>
  <span m=''1472350''>bound</span> <span m=''1472910''>on</span> <span m=''1473060''>how</span>
  <span m=''1473260''>fast</span> <span m=''1473820''>programs</span> <span m=''1474230''>can</span>
  <span m=''1474360''>work.</span> <span m=''1476110''>You</span> <span m=''1476470''>know,</span>
  <span m=''1476670''>how</span> <span m=''1476800''>much</span> <span m=''1477050''>can
  I</span> <span m=''1477210''>exploit</span> <span m=''1477610''>out</span> <span
  m=''1477750''>of</span> <span m=''1478220''>my</span> <span m=''1478420''>program?</span>
  <span m=''1479550''>So</span> <span m=''1479790''>this</span> <span m=''1479920''>is</span>
  <span m=''1480090''>great.</span> <span m=''1480370''>What</span> <span m=''1480530''>this</span>
  <span m=''1480730''>law</span> <span m=''1481070''>says --</span> <span m=''1481570''>the</span>
  <span m=''1481810''>implication</span> <span m=''1482330''>here</span> <span m=''1482570''>is</span>
  <span m=''1482930''>if</span> <span m=''1483280''>your</span> <span m=''1483540''>program</span>
  <span m=''1484000''>has</span> <span m=''1484140''>a</span> <span m=''1484200''>lot</span>
  <span m=''1484420''>of</span> <span m=''1484540''>inherent</span> <span m=''1484910''>parallelism,</span>
  <span m=''1485670''>you</span> <span m=''1485790''>can</span> <span m=''1485920''>do</span>
  <span m=''1486070''>really</span> <span m=''1486310''>well.</span> <span m=''1487010''>But</span>
  <span m=''1487120''>if</span> <span m=''1487220''>your</span> <span m=''1487290''>program</span>
  <span m=''1487680''>doesn''t</span> <span m=''1487930''>have</span> <span m=''1488090''>any</span>
  <span m=''1488220''>parallelism,</span> <span m=''1488910''>well,</span> <span m=''1489090''>there''s</span>
  <span m=''1489280''>really</span> <span m=''1489480''>nothing</span> <span m=''1489740''>you</span>
  <span m=''1489830''>can</span> <span m=''1489950''>do.</span> <span m=''1490450''>So</span>
  <span m=''1490660''>parallel</span> <span m=''1490980''>architectures</span> <span
  m=''1491590''>won''t</span> <span m=''1491740''>really</span> <span m=''1491960''>help</span>
  <span m=''1492170''>you.</span> <span m=''1492680''>And</span> <span m=''1492800''>there''s</span>
  <span m=''1492930''>some</span> <span m=''1493050''>interesting</span> <span m=''1493640''>trade-offs,</span>
  <span m=''1494070''>for</span> <span m=''1494160''>example,</span> <span m=''1494540''>that</span>
  <span m=''1494660''>you</span> <span m=''1494740''>might</span> <span m=''1494910''>consider</span>
  <span m=''1495340''>if</span> <span m=''1495580''>you''re</span> <span m=''1496590''>designing</span>
  <span m=''1497080''>a</span> <span m=''1497120''>chip</span> <span m=''1497380''>or
  if</span> <span m=''1497960''>you''re</span> <span m=''1498850''>looking</span>
  <span m=''1499160''>at</span> <span m=''1499260''>an</span> <span m=''1499360''>application</span>
  <span m=''1500020''>or</span> <span m=''1500570''>domain</span> <span m=''1500880''>of</span>
  <span m=''1500950''>applications,</span> <span m=''1501670''>figuring</span> <span
  m=''1502020''>out</span> <span m=''1502170''>what</span> <span m=''1502310''>is</span>
  <span m=''1502420''>the</span> <span m=''1502500''>best</span> <span m=''1502700''>architecture</span>
  <span m=''1503040''>to</span> <span m=''1503170''>run</span> <span m=''1503450''>them</span>
  <span m=''1503520''>on.</span> </p><p><span m=''1506080''>So in</span> <span m=''1506240''>terms</span>
  <span m=''1506510''>of</span> <span m=''1506870''>performance</span> <span m=''1507370''>scalability,</span>
  <span m=''1509840''>as</span> <span m=''1510050''>I increase</span> <span m=''1510330''>the</span>
  <span m=''1510510''>number of</span> <span m=''1510770''>processors,</span> <span
  m=''1512180''>I</span> <span m=''1512270''>have</span> <span m=''1512470''>speedup.</span>
  <span m=''1512890''>You</span> <span m=''1513020''>can</span> <span m=''1513280''>define,</span>
  <span m=''1513820''>sort</span> <span m=''1513990''>of,</span> <span m=''1514260''>an</span>
  <span m=''1514430''>efficiency</span> <span m=''1515010''>to</span> <span m=''1515230''>be</span>
  <span m=''1515570''>linear</span> <span m=''1516140''>at</span> <span m=''1516290''>100%.</span>
  <span m=''1516570''>But</span> <span m=''1517380''>typically</span> <span m=''1517880''>you</span>
  <span m=''1518000''>end</span> <span m=''1518180''>up</span> <span m=''1518350''>in</span>
  <span m=''1519270''>sort</span> <span m=''1519490''>of</span> <span m=''1519570''>the</span>
  <span m=''1520030''>sublinear</span> <span m=''1520210''>domain.</span> <span m=''1520590''>That''s</span>
  <span m=''1520730''>because</span> <span m=''1521030''>communication</span> <span
  m=''1522520''>is</span> <span m=''1522790''>not</span> <span m=''1522990''>often</span>
  <span m=''1523220''>free.</span> </p><p><span m=''1525800''>But</span> <span m=''1525970''>you</span>
  <span m=''1526370''>can</span> <span m=''1526700''>get</span> <span m=''1526880''>super</span>
  <span m=''1527150''>linear</span> <span m=''1527460''>speedups</span> <span m=''1527770''>ups</span>
  <span m=''1527970''>on</span> <span m=''1528230''>real</span> <span m=''1528350''>architectures</span>
  <span m=''1529070''>because</span> <span m=''1529450''>of</span> <span m=''1529560''>secondary</span>
  <span m=''1530370''>and</span> <span m=''1530750''>tertiary</span> <span m=''1530940''>effects</span>
  <span m=''1531450''>that</span> <span m=''1531520''>come</span> <span m=''1531840''>from</span>
  <span m=''1532140''>register</span> <span m=''1532470''>allocation</span> <span
  m=''1533340''>or</span> <span m=''1533720''>caching</span> <span m=''1534120''>effects.</span>
  <span m=''1534770''>So</span> <span m=''1535020''>they</span> <span m=''1535120''>can</span>
  <span m=''1535300''>hide</span> <span m=''1535610''>a</span> <span m=''1535650''>lot</span>
  <span m=''1535820''>of</span> <span m=''1535920''>latency</span> <span m=''1536370''>or</span>
  <span m=''1537470''>you</span> <span m=''1537750''>can</span> <span m=''1537910''>take</span>
  <span m=''1538120''>advantage</span> <span m=''1538450''>of a</span> <span m=''1538520''>lot</span>
  <span m=''1538800''>of</span> <span m=''1539470''>pipelining</span> <span m=''1539960''>mechanisms</span>
  <span m=''1540850''>in the</span> <span m=''1541090''>architecture</span> <span
  m=''1542220''>to</span> <span m=''1542310''>get</span> <span m=''1542570''>super</span>
  <span m=''1542770''>linear</span> <span m=''1542990''>speedups.</span> <span m=''1543330''>So</span>
  <span m=''1543780''>you</span> <span m=''1543880''>can</span> <span m=''1544030''>end</span>
  <span m=''1544220''>up</span> <span m=''1544410''>in</span> <span m=''1545550''>two</span>
  <span m=''1545950''>different</span> <span m=''1546350''>domains.</span> </p><p><span
  m=''1549860''>So</span> <span m=''1550460''>a small,</span> <span m=''1551940''>you</span>
  <span m=''1552030''>know,</span> <span m=''1552130''>overview</span> <span m=''1552780''>of</span>
  <span m=''1553910''>the</span> <span m=''1554060''>extent of</span> <span m=''1554610''>parallelism</span>
  <span m=''1555000''>in</span> <span m=''1555100''>your</span> <span m=''1555260''>program</span>
  <span m=''1555700''>and</span> <span m=''1555810''>how</span> <span m=''1556010''>that</span>
  <span m=''1556120''>affects</span> <span m=''1556440''>your</span> <span m=''1557030''>overall</span>
  <span m=''1557480''>execution.</span> <span m=''1559280''>And</span> <span m=''1559880''>the</span>
  <span m=''1559950''>other</span> <span m=''1560140''>concept</span> <span m=''1560620''>is</span>
  <span m=''1560840''>granularity.</span> <span m=''1561620''>So</span> <span m=''1561910''>given</span>
  <span m=''1562230''>that</span> <span m=''1562350''>I</span> <span m=''1562400''>have</span>
  <span m=''1562640''>this</span> <span m=''1562740''>much</span> <span m=''1562930''>parallelism,</span>
  <span m=''1563380''>how</span> <span m=''1563520''>do</span> <span m=''1563610''>I</span>
  <span m=''1563700''>exploit</span> <span m=''1564130''>it?</span> <span m=''1564590''>There
  are</span> <span m=''1564740''>different</span> <span m=''1565130''>ways</span>
  <span m=''1565410''>of</span> <span m=''1565500''>exploiting</span> <span m=''1566020''>it,</span>
  <span m=''1566210''>and</span> <span m=''1566370''>that</span> <span m=''1566520''>comes</span>
  <span m=''1566810''>down</span> <span m=''1567050''>to,</span> <span m=''1567390''>well,</span>
  <span m=''1567680''>how</span> <span m=''1567810''>do</span> <span m=''1567930''>I</span>
  <span m=''1568210''>subdivide</span> <span m=''1568730''>my</span> <span m=''1568860''>problem?</span>
  <span m=''1569440''>What is the</span> <span m=''1569920''>granularity</span> <span
  m=''1570580''>of</span> <span m=''1570720''>the</span> <span m=''1570820''>sub-problems</span>
  <span m=''1571400''>I''m</span> <span m=''1571540''>going</span> <span m=''1571720''>to</span>
  <span m=''1572410''>calculate</span> <span m=''1572790''>on?</span> <span m=''1575320''>And,</span>
  <span m=''1575770''>really,</span> <span m=''1576030''>granularity</span> <span
  m=''1577660''>from</span> <span m=''1577870''>my</span> <span m=''1577980''>perspective,</span>
  <span m=''1578600''>is</span> <span m=''1578730''>just</span> <span m=''1578920''>a</span>
  <span m=''1579130''>qualitative</span> <span m=''1579800''>measure</span> <span
  m=''1580160''>of</span> <span m=''1580900''>what</span> <span m=''1581070''>is</span>
  <span m=''1581210''>the</span> <span m=''1581280''>ratio</span> <span m=''1581710''>of</span>
  <span m=''1581780''>your</span> <span m=''1581890''>computation</span> <span m=''1582760''>to
  your</span> <span m=''1583050''>communication?</span> <span m=''1584950''>So</span>
  <span m=''1585190''>if</span> <span m=''1585370''>you''re</span> <span m=''1585540''>doing</span>
  <span m=''1585800''>a</span> <span m=''1585850''>lot</span> <span m=''1586040''>of</span>
  <span m=''1586130''>computation,</span> <span m=''1586730''>very</span> <span m=''1586920''>little</span>
  <span m=''1587130''>communication,</span> <span m=''1588460''>you</span> <span m=''1588640''>could</span>
  <span m=''1588790''>be</span> <span m=''1588910''>doing</span> <span m=''1589160''>really</span>
  <span m=''1589400''>well</span> <span m=''1589800''>or</span> <span m=''1589950''>vice</span>
  <span m=''1590230''>versa.</span> <span m=''1590580''>Then</span> <span m=''1590710''>you</span>
  <span m=''1590790''>could</span> <span m=''1590910''>be</span> <span m=''1591040''>computation</span>
  <span m=''1591590''>limited,</span> <span m=''1592130''>and</span> <span m=''1592550''>so
  you</span> <span m=''1592760''>need</span> <span m=''1592940''>a</span> <span m=''1593020''>lot</span>
  <span m=''1593240''>of</span> <span m=''1593330''>bandwidth</span> <span m=''1593680''>for</span>
  <span m=''1593780''>example</span> <span m=''1594130''>in</span> <span m=''1594220''>your</span>
  <span m=''1595040''>architecture.</span> </p><p><span m=''1595450''>AUDIENCE:  Like</span>
  <span m=''1595943''>before,</span> <span m=''1596437''>you really</span> <span m=''1596930''>didn''t
  have to give every single</span> <span m=''1597424''>processor</span> <span m=''1598905''>an
  entire</span> <span m=''1599399''>copy</span> <span m=''1599892''>of B.</span> </p><p><span
  m=''1600880''>PROFESSOR: Right.</span> <span m=''1601850''>Yeah.</span> <span m=''1602010''>Good
  point.</span> <span m=''1608190''>And as</span> <span m=''1608410''>you</span> <span
  m=''1608560''>saw</span> <span m=''1609090''>in</span> <span m=''1609270''>the</span>
  <span m=''1609350''>previous</span> <span m=''1609730''>slides,</span> <span m=''1610260''>you</span>
  <span m=''1610470''>have --</span> <span m=''1610960''>computation</span> <span
  m=''1611530''>stages</span> <span m=''1612090''>are</span> <span m=''1612720''>separated</span>
  <span m=''1613250''>by</span> <span m=''1613380''>communication</span> <span m=''1614000''>stages.</span>
  <span m=''1614790''>And your</span> <span m=''1614980''>communication</span> <span
  m=''1615850''>in</span> <span m=''1615990''>a</span> <span m=''1616050''>lot</span>
  <span m=''1616230''>of</span> <span m=''1616310''>cases</span> <span m=''1616680''>essentially</span>
  <span m=''1617070''>serves</span> <span m=''1617380''>as</span> <span m=''1617440''>synchronization.</span>
  <span m=''1619060''>I</span> <span m=''1619130''>need</span> <span m=''1619320''>everybody</span>
  <span m=''1619830''>to</span> <span m=''1619930''>get</span> <span m=''1620070''>to</span>
  <span m=''1620140''>the</span> <span m=''1620210''>same</span> <span m=''1620450''>point</span>
  <span m=''1620730''>before</span> <span m=''1621080''>I</span> <span m=''1621120''>can</span>
  <span m=''1621310''>move</span> <span m=''1621560''>on</span> <span m=''1621780''>logically</span>
  <span m=''1622280''>in my</span> <span m=''1622450''>computation.</span> </p><p><span
  m=''1624780''>So</span> <span m=''1624910''>there</span> <span m=''1625090''>are</span>
  <span m=''1625210''>two</span> <span m=''1625430''>kinds</span> <span m=''1625850''>of</span>
  <span m=''1626090''>sort</span> <span m=''1626350''>of</span> <span m=''1626540''>classes</span>
  <span m=''1627010''>of</span> <span m=''1627140''>granularity.</span> <span m=''1627830''>There''s</span>
  <span m=''1628400''>fine</span> <span m=''1628700''>grain</span> <span m=''1629080''>and,</span>
  <span m=''1629410''>as</span> <span m=''1629530''>you''ll</span> <span m=''1629650''>see,</span>
  <span m=''1629830''>coarse</span> <span m=''1630050''>grain.</span> <span m=''1630840''>So
  in</span> <span m=''1631090''>fine-grain</span> <span m=''1631870''>parallelism,</span>
  <span m=''1632550''>you</span> <span m=''1632700''>have</span> <span m=''1633050''>low</span>
  <span m=''1633240''>computation to</span> <span m=''1634010''>communication</span>
  <span m=''1634620''>ratio.</span> <span m=''1635460''>And</span> <span m=''1635620''>that</span>
  <span m=''1635750''>has</span> <span m=''1636080''>good</span> <span m=''1636280''>properties</span>
  <span m=''1636820''>in</span> <span m=''1636930''>that</span> <span m=''1637570''>you</span>
  <span m=''1637700''>have a</span> <span m=''1637880''>small</span> <span m=''1638150''>amount</span>
  <span m=''1638420''>of</span> <span m=''1638510''>work</span> <span m=''1638810''>done</span>
  <span m=''1639610''>between</span> <span m=''1639870''>communication</span> <span
  m=''1640450''>stages.</span> <span m=''1644410''>And</span> <span m=''1645860''>it</span>
  <span m=''1646010''>has</span> <span m=''1646210''>bad</span> <span m=''1646410''>properties</span>
  <span m=''1647040''>in</span> <span m=''1647190''>that</span> <span m=''1647370''>it
  gives</span> <span m=''1647570''>you</span> <span m=''1647670''>less</span> <span
  m=''1647910''>performance</span> <span m=''1648330''>opportunity.</span> <span m=''1652190''>It</span>
  <span m=''1653040''>should</span> <span m=''1653240''>be</span> <span m=''1653300''>more,
  right?</span> <span m=''1653850''>More</span> <span m=''1654100''>opportunity for
  --</span> </p><p><span m=''1655100''>AUDIENCE: No.</span> <span m=''1655600''>Less.</span>
  </p><p><span m=''1656100''>PROFESSOR: Sorry.</span> <span m=''1656480''>Yeah, yeah,</span>
  <span m=''1656790''>sorry.</span> <span m=''1657120''>I</span> <span m=''1657200''>didn''t</span>
  <span m=''1657380''>get</span> <span m=''1657470''>enough</span> <span m=''1657640''>sleep.</span>
  <span m=''1661670''>So</span> <span m=''1661980''>less</span> <span m=''1662170''>opportunities</span>
  <span m=''1662870''>for</span> <span m=''1663190''>performance</span> <span m=''1663640''>enhancement,</span>
  <span m=''1664110''>but</span> <span m=''1664470''>you</span> <span m=''1664580''>have</span>
  <span m=''1665480''>high</span> <span m=''1665670''>communication</span> <span m=''1666650''>ratio</span>
  <span m=''1667050''>because</span> <span m=''1668320''>essentially</span> <span
  m=''1668870''>you''re</span> <span m=''1668970''>communicating</span> <span m=''1669750''>very</span>
  <span m=''1669980''>often.</span> <span m=''1670800''>So</span> <span m=''1671090''>these</span>
  <span m=''1671290''>are</span> <span m=''1671410''>the</span> <span m=''1671500''>computations</span>
  <span m=''1672180''>here</span> <span m=''1672860''>and</span> <span m=''1673170''>these</span>
  <span m=''1673340''>yellow</span> <span m=''1673550''>bars</span> <span m=''1674930''>are</span>
  <span m=''1675120''>the</span> <span m=''1675180''>synchronization</span> <span
  m=''1676190''>points.</span> <span m=''1676850''>So I</span> <span m=''1676990''>have</span>
  <span m=''1677130''>to</span> <span m=''1677230''>distribute</span> <span m=''1677680''>data
  or</span> <span m=''1678000''>communicate.</span> <span m=''1679640''>I</span> <span
  m=''1679770''>do</span> <span m=''1680010''>computations</span> <span m=''1680710''>but,</span>
  <span m=''1681370''>you</span> <span m=''1681460''>know,</span> <span m=''1681540''>computation</span>
  <span m=''1682000''>doesn''t</span> <span m=''1682230''>last</span> <span m=''1682470''>very</span>
  <span m=''1682660''>long.</span> <span m=''1682990''>And</span> <span m=''1683130''>I</span>
  <span m=''1683190''>do</span> <span m=''1684180''>more</span> <span m=''1684430''>communication</span>
  <span m=''1685110''>or more</span> <span m=''1685280''>synchronization,</span> <span
  m=''1686170''>and</span> <span m=''1686320''>I</span> <span m=''1686410''>repeat</span>
  <span m=''1686650''>the</span> <span m=''1686740''>process.</span> <span m=''1687750''>So</span>
  <span m=''1688570''>naturally</span> <span m=''1689080''>you</span> <span m=''1689190''>can</span>
  <span m=''1689480''>adjust this</span> <span m=''1690020''>granularity</span> <span
  m=''1690770''>to</span> <span m=''1690860''>sort of</span> <span m=''1691370''>reduce</span>
  <span m=''1691480''>the</span> <span m=''1691540''>communication</span> <span m=''1692240''>overhead.</span>
  </p><p><span m=''1692530''>AUDIENCE:</span> <span m=''1693980''>[UNINTELLIGIBLE
  PHRASE]</span> <span m=''1694510''>two things</span> <span m=''1695050''>in</span>
  <span m=''1695350''>that</span> <span m=''1695680''>overhead</span> <span m=''1696000''>part.</span>
  <span m=''1697010''>One</span> <span m=''1697380''>is the volume.</span> <span m=''1698120''>So</span>
  <span m=''1698490''>one, communication.</span> <span m=''1701380''>Also</span> <span
  m=''1701800''>there''s</span> <span m=''1702110''>a large part of</span> <span m=''1702530''>synchronization</span>
  <span m=''1703007''>cost.</span> <span m=''1703484''>Basically</span> <span m=''1703961''>you</span>
  <span m=''1704438''>get</span> <span m=''1704915''>a</span> <span m=''1705392''>communication
  goal</span> <span m=''1705870''>and you have to go start</span> <span m=''1706890''>the</span>
  <span m=''1707160''>messages</span> <span m=''1707540''>and</span> <span m=''1708670''>wait</span>
  <span m=''1708960''>until everybody is done.</span> <span m=''1709210''>So</span>
  <span m=''1710100''>that</span> <span m=''1710870''>overhead also can go.</span>
  <span m=''1712250''>Even if</span> <span m=''1712810''>you don''t send that much
  data, just the fact</span> <span m=''1715290''>that you are communicating,</span>
  <span m=''1716700''>that means you have to do</span> <span m=''1717960''>a lot of
  this</span> <span m=''1718360''>additional</span> <span m=''1718790''>bookkeeping</span>
  <span m=''1720060''>stuff,</span> <span m=''1720770''>that</span> <span m=''1721440''>especially</span>
  <span m=''1722190''>in</span> <span m=''1722633''>the</span> <span m=''1723076''>distributed</span>
  <span m=''1723520''>[? memory ?]</span> <span m=''1723679''>[? machine is ?]</span>
  <span m=''1723838''>pretty</span> <span m=''1723998''>expensive.</span> </p><p><span
  m=''1724954''>PROFESSOR: Yeah.</span> <span m=''1725910''>Thanks.</span> <span m=''1728780''>So</span>
  <span m=''1729420''>in</span> <span m=''1729880''>coarse-grain</span> <span m=''1730340''>parallelism,</span>
  <span m=''1731490''>you</span> <span m=''1731580''>sort</span> <span m=''1731790''>of</span>
  <span m=''1732210''>make</span> <span m=''1732490''>the</span> <span m=''1732650''>work</span>
  <span m=''1732910''>chunks</span> <span m=''1733230''>more</span> <span m=''1733530''>and
  more</span> <span m=''1734060''>so</span> <span m=''1734210''>that</span> <span
  m=''1734360''>you</span> <span m=''1734640''>do the</span> <span m=''1735070''>communication</span>
  <span m=''1735700''>synchronization</span> <span m=''1736380''>less</span> <span
  m=''1736630''>and less.</span> <span m=''1737440''>And so</span> <span m=''1737690''>that''s</span>
  <span m=''1737890''>shown</span> <span m=''1738040''>here.</span> <span m=''1738440''>You</span>
  <span m=''1738570''>do</span> <span m=''1738740''>longer</span> <span m=''1739100''>pieces</span>
  <span m=''1739400''>of</span> <span m=''1739480''>work</span> <span m=''1740020''>and</span>
  <span m=''1740240''>have</span> <span m=''1740450''>fewer</span> <span m=''1740750''>synchronization</span>
  <span m=''1741960''>stages.</span> </p><p><span m=''1744370''>So</span> <span m=''1745700''>in</span>
  <span m=''1745860''>that</span> <span m=''1746070''>regime,</span> <span m=''1747850''>you</span>
  <span m=''1747980''>can</span> <span m=''1748130''>have</span> <span m=''1748590''>more</span>
  <span m=''1748800''>opportunities</span> <span m=''1749280''>for</span> <span m=''1749690''>performance</span>
  <span m=''1750120''>improvements,</span> <span m=''1750810''>but</span> <span m=''1751440''>the</span>
  <span m=''1751720''>tricky</span> <span m=''1752060''>thing</span> <span m=''1752230''>that</span>
  <span m=''1752330''>you</span> <span m=''1752440''>get</span> <span m=''1752590''>into</span>
  <span m=''1752880''>is</span> <span m=''1753960''>what''s</span> <span m=''1754250''>called</span>
  <span m=''1754500''>load</span> <span m=''1754710''>balancing.</span> <span m=''1755730''>So</span>
  <span m=''1755860''>if</span> <span m=''1756050''>each</span> <span m=''1756400''>of</span>
  <span m=''1756590''>these</span> <span m=''1756820''>different</span> <span m=''1757380''>computations</span>
  <span m=''1758130''>takes</span> <span m=''1758750''>differing</span> <span m=''1759090''>amounts</span>
  <span m=''1759350''>of</span> <span m=''1759450''>time</span> <span m=''1760220''>to</span>
  <span m=''1760480''>complete,</span> <span m=''1761300''>then</span> <span m=''1761490''>what</span>
  <span m=''1761620''>you</span> <span m=''1761690''>might</span> <span m=''1761860''>end</span>
  <span m=''1762000''>up</span> <span m=''1762130''>doing</span> <span m=''1762390''>is</span>
  <span m=''1762490''>a</span> <span m=''1762550''>lot</span> <span m=''1762770''>of</span>
  <span m=''1762850''>people</span> <span m=''1763290''>might</span> <span m=''1763480''>end
  up</span> <span m=''1763790''>idle</span> <span m=''1764110''>as</span> <span m=''1764280''>they</span>
  <span m=''1764390''>wait</span> <span m=''1764920''>until</span> <span m=''1765380''>everybody''s</span>
  <span m=''1765920''>essentially</span> <span m=''1766270''>reached</span> <span
  m=''1766760''>their</span> <span m=''1766910''>finish</span> <span m=''1767210''>line.</span>
  <span m=''1767690''>Yep?</span> </p><p><span m=''1767960''>AUDIENCE:</span> <span
  m=''1768215''>If</span> <span m=''1768470''>you don''t have to acknowledge</span>
  <span m=''1769490''>that something''s</span> <span m=''1770000''>done</span> <span
  m=''1770510''>can''t you just</span> <span m=''1771020''>say,</span> <span m=''1771530''>[?
  OK, I''m done with your salt ?].</span> <span m=''1772040''>Hand it to the</span>
  <span m=''1772550''>initial</span> <span m=''1773060''>processor</span> <span m=''1773570''>and
  keep doing whatever?</span> </p><p><span m=''1775100''>PROFESSOR: So,</span> <span
  m=''1775690''>you</span> <span m=''1775900''>can</span> <span m=''1776150''>do</span>
  <span m=''1776300''>that</span> <span m=''1776520''>in</span> <span m=''1776610''>cases</span>
  <span m=''1776990''>where</span> <span m=''1777290''>that</span> <span m=''1777470''>essentially</span>
  <span m=''1778780''>there is a</span> <span m=''1779100''>mechanism --</span> <span
  m=''1780250''>or the</span> <span m=''1780430''>application</span> <span m=''1781000''>allows</span>
  <span m=''1781380''>for</span> <span m=''1781600''>it.</span> <span m=''1782340''>But</span>
  <span m=''1782500''>as</span> <span m=''1782670''>I''ll</span> <span m=''1782790''>show
  --</span> <span m=''1783520''>well, you</span> <span m=''1783930''>won''t see</span>
  <span m=''1784070''>until the</span> <span m=''1784300''>next lecture --</span>
  <span m=''1784820''>there</span> <span m=''1784970''>are</span> <span m=''1785060''>dependencies,</span>
  <span m=''1785820''>for</span> <span m=''1785930''>example,</span> <span m=''1786340''>that</span>
  <span m=''1786520''>might</span> <span m=''1786900''>preclude</span> <span m=''1787330''>you</span>
  <span m=''1787430''>from</span> <span m=''1787630''>doing</span> <span m=''1787860''>that.</span>
  <span m=''1788420''>If</span> <span m=''1788740''>everybody</span> <span m=''1789120''>needs</span>
  <span m=''1789310''>to</span> <span m=''1789400''>reach</span> <span m=''1789590''>the</span>
  <span m=''1789670''>same</span> <span m=''1789920''>point</span> <span m=''1790760''>because</span>
  <span m=''1791070''>you''re</span> <span m=''1791170''>updating</span> <span m=''1791510''>a</span>
  <span m=''1791570''>large</span> <span m=''1791780''>data</span> <span m=''1791980''>structure</span>
  <span m=''1792810''>before</span> <span m=''1793090''>you</span> <span m=''1793170''>can</span>
  <span m=''1793390''>go</span> <span m=''1793550''>on,</span> <span m=''1794140''>then</span>
  <span m=''1794330''>you</span> <span m=''1794430''>might</span> <span m=''1794560''>not</span>
  <span m=''1794670''>be</span> <span m=''1794750''>able</span> <span m=''1794880''>to</span>
  <span m=''1795000''>do</span> <span m=''1795090''>that.</span> <span m=''1795290''>So</span>
  <span m=''1795480''>think</span> <span m=''1795710''>of</span> <span m=''1796810''>doing</span>
  <span m=''1797030''>molecular</span> <span m=''1797370''>dynamics</span> <span m=''1797810''>simulations.</span>
  <span m=''1798810''>You</span> <span m=''1798950''>need</span> <span m=''1799130''>everybody</span>
  <span m=''1799590''>to</span> <span m=''1799720''>calculate</span> <span m=''1800040''>a</span>
  <span m=''1800090''>new</span> <span m=''1800210''>position</span> <span m=''1800970''>before</span>
  <span m=''1801290''>you</span> <span m=''1801380''>can</span> <span m=''1801480''>go</span>
  <span m=''1801590''>on</span> <span m=''1801740''>and</span> <span m=''1801800''>calculate</span>
  <span m=''1802350''>new</span> <span m=''1802460''>kinds</span> <span m=''1802690''>of</span>
  <span m=''1802760''>coarse interactions.</span> </p><p><span m=''1803030''>AUDIENCE:</span>
  <span m=''1803268''>[UNINTELLIGIBLE]</span> <span m=''1803507''>nothing</span> <span
  m=''1803745''>else</span> <span m=''1803984''>to</span> <span m=''1804222''>calculate</span>
  <span m=''1804461''>yet.</span> </p><p><span m=''1804700''>PROFESSOR: Right.</span>
  </p><p><span m=''1805700''>AUDIENCE: But also</span> <span m=''1805950''>there is
  pipelining.</span> <span m=''1806410''>So</span> <span m=''1806658''>what</span>
  <span m=''1806907''>do you</span> <span m=''1807156''>talk</span> <span m=''1807405''>about</span>
  <span m=''1807653''>[UNINTELLIGIBLE]</span> <span m=''1807902''>because</span> <span
  m=''1808151''>you</span> <span m=''1808400''>might</span> <span m=''1808656''>want</span>
  <span m=''1808913''>to</span> <span m=''1809170''>get</span> <span m=''1809315''>the</span>
  <span m=''1809460''>next</span> <span m=''1809605''>data</span> <span m=''1809750''>while</span>
  <span m=''1810095''>you''re</span> <span m=''1810440''>computing</span> <span m=''1810785''>now</span>
  <span m=''1811130''>so</span> <span m=''1811508''>that</span> <span m=''1811886''>when</span>
  <span m=''1812264''>I''m</span> <span m=''1812642''>done</span> <span m=''1813020''>I</span>
  <span m=''1813222''>can</span> <span m=''1813425''>start</span> <span m=''1813627''>sending.</span>
  <span m=''1813830''>[UNINTELLIGIBLE</span> <span m=''1814144''>PHRASE]</span> <span
  m=''1814458''>you</span> <span m=''1814773''>can</span> <span m=''1815087''>all</span>
  <span m=''1815402''>have</span> <span m=''1815716''>some</span> <span m=''1816031''>of</span>
  <span m=''1816345''>that.</span> </p><p><span m=''1816660''>PROFESSOR: Yep.</span>
  <span m=''1817970''>Yeah,</span> <span m=''1818090''>because</span> <span m=''1818410''>communication</span>
  <span m=''1819040''>is such</span> <span m=''1819310''>an</span> <span m=''1819650''>intensive</span>
  <span m=''1820070''>part,</span> <span m=''1821840''>there are</span> <span m=''1822030''>different</span>
  <span m=''1822270''>ways</span> <span m=''1822440''>of</span> <span m=''1822520''>dealing</span>
  <span m=''1822780''>with it.</span> <span m=''1822920''>And</span> <span m=''1823220''>that
  will</span> <span m=''1823410''>be</span> <span m=''1823780''>right</span> <span
  m=''1823950''>after</span> <span m=''1824240''>load</span> <span m=''1824400''>balancing.</span>
  <span m=''1826000''>So the</span> <span m=''1826200''>load</span> <span m=''1826410''>balancing</span>
  <span m=''1826800''>problem</span> <span m=''1827130''>is just</span> <span m=''1827310''>an</span>
  <span m=''1827430''>illustration.</span> <span m=''1828880''>And</span> <span m=''1829130''>things</span>
  <span m=''1829340''>that</span> <span m=''1829440''>appear</span> <span m=''1829780''>in</span>
  <span m=''1830050''>sort of</span> <span m=''1830440''>this</span> <span m=''1830630''>lightish</span>
  <span m=''1831040''>pink</span> <span m=''1833480''>will</span> <span m=''1833610''>serve
  as</span> <span m=''1834020''>sort</span> <span m=''1834150''>of</span> <span m=''1834230''>visual</span>
  <span m=''1834620''>cues.</span> <span m=''1834900''>This</span> <span m=''1835020''>is</span>
  <span m=''1835110''>the</span> <span m=''1835180''>same</span> <span m=''1835360''>color</span>
  <span m=''1835590''>coding</span> <span m=''1835840''>scheme</span> <span m=''1836070''>that</span>
  <span m=''1836140''>David''s</span> <span m=''1836480''>using</span> <span m=''1836820''>in
  the</span> <span m=''1837150''>recitations.</span> <span m=''1837780''>So</span>
  <span m=''1837980''>this</span> <span m=''1838120''>is</span> <span m=''1838280''>PPU</span>
  <span m=''1838680''>code.</span> <span m=''1839620''>Things</span> <span m=''1839940''>that</span>
  <span m=''1840080''>appear</span> <span m=''1840400''>in</span> <span m=''1840540''>yellow</span>
  <span m=''1840840''>will</span> <span m=''1840960''>be</span> <span m=''1841100''>SPU</span>
  <span m=''1841500''>code.</span> <span m=''1842180''>And</span> <span m=''1842490''>these</span>
  <span m=''1842650''>are</span> <span m=''1842780''>just</span> <span m=''1843040''>meant</span>
  <span m=''1843230''>to</span> <span m=''1843580''>essentially</span> <span m=''1843820''>show</span>
  <span m=''1844090''>you</span> <span m=''1844230''>how</span> <span m=''1844380''>you</span>
  <span m=''1844490''>might</span> <span m=''1844670''>do</span> <span m=''1844790''>things</span>
  <span m=''1845070''>like</span> <span m=''1845210''>this</span> <span m=''1845380''>on</span>
  <span m=''1845540''>Cell,</span> <span m=''1846630''>just</span> <span m=''1846950''>to</span>
  <span m=''1847080''>help</span> <span m=''1847330''>you</span> <span m=''1847430''>along</span>
  <span m=''1847780''>in</span> <span m=''1848170''>picking</span> <span m=''1848470''>up</span>
  <span m=''1848630''>more</span> <span m=''1848860''>of</span> <span m=''1848980''>the</span>
  <span m=''1849250''>syntax</span> <span m=''1849960''>and</span> <span m=''1850300''>functionality</span>
  <span m=''1850820''>you</span> <span m=''1850930''>need</span> <span m=''1851280''>for
  your</span> <span m=''1851520''>programs.</span> </p><p><span m=''1853190''>So</span>
  <span m=''1854200''>in</span> <span m=''1854360''>the</span> <span m=''1854430''>load</span>
  <span m=''1854590''>balancing</span> <span m=''1855020''>problem,</span> <span m=''1855810''>you</span>
  <span m=''1857230''>essentially</span> <span m=''1857720''>have,</span> <span m=''1858090''>let''s</span>
  <span m=''1858260''>say,</span> <span m=''1861400''>three</span> <span m=''1861630''>different</span>
  <span m=''1862290''>threads</span> <span m=''1862790''>of</span> <span m=''1862990''>computation.</span>
  <span m=''1863930''>And so</span> <span m=''1864160''>that''s</span> <span m=''1864280''>shown</span>
  <span m=''1864520''>here:</span> <span m=''1865370''>red,</span> <span m=''1865670''>blue,</span>
  <span m=''1865860''>and</span> <span m=''1866020''>orange.</span> <span m=''1866880''>And</span>
  <span m=''1867180''>you''ve</span> <span m=''1867380''>reached</span> <span m=''1867540''>some</span>
  <span m=''1867760''>communication</span> <span m=''1868330''>stage.</span> <span
  m=''1868650''>So</span> <span m=''1869580''>the</span> <span m=''1869680''>PPU</span>
  <span m=''1870070''>program</span> <span m=''1870540''>in</span> <span m=''1870610''>this</span>
  <span m=''1870770''>case</span> <span m=''1871110''>is</span> <span m=''1871230''>saying,</span>
  <span m=''1872280''>send</span> <span m=''1872520''>a</span> <span m=''1872570''>message</span>
  <span m=''1873560''>to</span> <span m=''1873670''>each</span> <span m=''1873920''>of</span>
  <span m=''1874030''>my</span> <span m=''1874180''>SPEs,</span> <span m=''1874480''>to</span>
  <span m=''1874840''>each of</span> <span m=''1875050''>my</span> <span m=''1875150''>different</span>
  <span m=''1875420''>processors,</span> <span m=''1876200''>that</span> <span m=''1876340''>you''re</span>
  <span m=''1876460''>ready</span> <span m=''1876690''>to</span> <span m=''1876800''>start.</span>
  </p><p><span m=''1878210''>And</span> <span m=''1878390''>so</span> <span m=''1878500''>now</span>
  <span m=''1878880''>once</span> <span m=''1879510''>every</span> <span m=''1879720''>processor</span>
  <span m=''1880140''>gets</span> <span m=''1880320''>that</span> <span m=''1880460''>message,</span>
  <span m=''1881150''>they</span> <span m=''1881300''>can</span> <span m=''1881550''>start</span>
  <span m=''1881870''>computing.</span> <span m=''1882370''>And let''s</span> <span
  m=''1882490''>assume</span> <span m=''1882790''>they</span> <span m=''1882880''>have</span>
  <span m=''1883120''>data</span> <span m=''1883430''>and</span> <span m=''1883660''>so</span>
  <span m=''1883810''>on</span> <span m=''1884690''>ready</span> <span m=''1884920''>to</span>
  <span m=''1885050''>go.</span> <span m=''1885970''>And</span> <span m=''1886390''>what''s</span>
  <span m=''1886610''>going to</span> <span m=''1886830''>happen</span> <span m=''1887150''>is</span>
  <span m=''1887540''>each</span> <span m=''1888010''>processor</span> <span m=''1888650''>is</span>
  <span m=''1888790''>going</span> <span m=''1889030''>to</span> <span m=''1889650''>run</span>
  <span m=''1889880''>through</span> <span m=''1890110''>the computation at</span>
  <span m=''1890760''>different</span> <span m=''1891030''>rates.</span> <span m=''1891710''>Now</span>
  <span m=''1891910''>this</span> <span m=''1892080''>could</span> <span m=''1892230''>be</span>
  <span m=''1892910''>because</span> <span m=''1893370''>one</span> <span m=''1893550''>processor</span>
  <span m=''1893980''>is</span> <span m=''1894060''>faster</span> <span m=''1894440''>than</span>
  <span m=''1894660''>another.</span> <span m=''1895100''>Or</span> <span m=''1895510''>it</span>
  <span m=''1895580''>could</span> <span m=''1895720''>be</span> <span m=''1895810''>because</span>
  <span m=''1896090''>one</span> <span m=''1896230''>processor</span> <span m=''1896850''>is
  more</span> <span m=''1897070''>loaded</span> <span m=''1897400''>than</span> <span
  m=''1897490''>another.</span> <span m=''1897930''>Or</span> <span m=''1898270''>it</span>
  <span m=''1898350''>could</span> <span m=''1898490''>be</span> <span m=''1898640''>just</span>
  <span m=''1898840''>because</span> <span m=''1899100''>each</span> <span m=''1899290''>processor</span>
  <span m=''1899810''>is assigned</span> <span m=''1900550''>sort</span> <span m=''1900780''>of</span>
  <span m=''1901890''>differing</span> <span m=''1902260''>amounts</span> <span m=''1902490''>of</span>
  <span m=''1902580''>work.</span> <span m=''1903090''>So</span> <span m=''1903210''>one</span>
  <span m=''1903400''>has</span> <span m=''1903560''>a</span> <span m=''1903600''>short</span>
  <span m=''1903880''>loop.</span> <span m=''1904090''>One</span> <span m=''1904240''>has
  a</span> <span m=''1904380''>longer</span> <span m=''1904720''>loop.</span> </p><p><span
  m=''1906240''>And</span> <span m=''1906390''>so</span> <span m=''1906760''>as the</span>
  <span m=''1907000''>animation</span> <span m=''1907440''>shows,</span> <span m=''1908170''>sort
  of,</span> <span m=''1908370''>execution</span> <span m=''1908920''>proceeds</span>
  <span m=''1909400''>and</span> <span m=''1909660''>everybody''s</span> <span m=''1910140''>waiting</span>
  <span m=''1910480''>until</span> <span m=''1910750''>the</span> <span m=''1910830''>orange</span>
  <span m=''1911150''>guy</span> <span m=''1911350''>has</span> <span m=''1911490''>completed.</span>
  <span m=''1912930''>But</span> <span m=''1913060''>nobody</span> <span m=''1913350''>could</span>
  <span m=''1913510''>have</span> <span m=''1913600''>made</span> <span m=''1913800''>progress</span>
  <span m=''1914500''>until</span> <span m=''1915700''>everybody''s</span> <span m=''1916200''>reached</span>
  <span m=''1916350''>synchronization</span> <span m=''1917190''>point</span> <span
  m=''1917780''>because,</span> <span m=''1919520''>you</span> <span m=''1919620''>know,</span>
  <span m=''1919750''>there''s</span> <span m=''1920070''>a</span> <span m=''1920130''>strict</span>
  <span m=''1920420''>dependence</span> <span m=''1920850''>that''s</span> <span m=''1920970''>being</span>
  <span m=''1921210''>enforced</span> <span m=''1921700''>here</span> <span m=''1922310''>that</span>
  <span m=''1922460''>says,</span> <span m=''1922970''>I''m</span> <span m=''1923160''>going</span>
  <span m=''1923380''>to</span> <span m=''1923500''>wait</span> <span m=''1923700''>until</span>
  <span m=''1923940''>everybody''s</span> <span m=''1924390''>told</span> <span m=''1924590''>me</span>
  <span m=''1924680''>they''re</span> <span m=''1924820''>done</span> <span m=''1925300''>before</span>
  <span m=''1925620''>I</span> <span m=''1925700''>go</span> <span m=''1925850''>on
  to</span> <span m=''1925970''>the</span> <span m=''1926090''>next</span> <span m=''1926360''>step</span>
  <span m=''1926480''>of</span> <span m=''1926560''>computation.</span> <span m=''1928130''>And</span>
  <span m=''1928360''>so</span> <span m=''1929040''>you</span> <span m=''1929190''>know,</span>
  <span m=''1929270''>in Cell</span> <span m=''1929610''>you</span> <span m=''1929750''>do</span>
  <span m=''1929870''>that</span> <span m=''1930100''>using</span> <span m=''1930500''>mailboxes</span>
  <span m=''1931030''>in this case.</span> <span m=''1932360''>That</span> <span m=''1932500''>clear</span>
  <span m=''1932730''>so</span> <span m=''1932820''>far?</span> </p><p><span m=''1936380''>So</span>
  <span m=''1936500''>how</span> <span m=''1936580''>do</span> <span m=''1936650''>you</span>
  <span m=''1936720''>get</span> <span m=''1936850''>around</span> <span m=''1937120''>this</span>
  <span m=''1937320''>load</span> <span m=''1937510''>balancing</span> <span m=''1937880''>problem?</span>
  <span m=''1939160''>Well,</span> <span m=''1939910''>there</span> <span m=''1940040''>are</span>
  <span m=''1940130''>two</span> <span m=''1940290''>different</span> <span m=''1940550''>ways.</span>
  <span m=''1940800''>There''s</span> <span m=''1941000''>static</span> <span m=''1941380''>load</span>
  <span m=''1941870''>balancing.</span> <span m=''1942430''>I</span> <span m=''1942540''>know</span>
  <span m=''1942670''>my</span> <span m=''1942790''>application</span> <span m=''1943350''>really,</span>
  <span m=''1943600''>really</span> <span m=''1943830''>well.</span> <span m=''1944540''>And</span>
  <span m=''1945100''>I</span> <span m=''1945230''>understand</span> <span m=''1945690''>sort
  of</span> <span m=''1945950''>different</span> <span m=''1946240''>computations.</span>
  <span m=''1947280''>So</span> <span m=''1947460''>what I</span> <span m=''1947550''>can</span>
  <span m=''1947750''>do</span> <span m=''1947980''>is</span> <span m=''1948180''>I</span>
  <span m=''1948250''>can</span> <span m=''1948390''>divide</span> <span m=''1948720''>up</span>
  <span m=''1948830''>the</span> <span m=''1948910''>work</span> <span m=''1949390''>and</span>
  <span m=''1949680''>have</span> <span m=''1949860''>a</span> <span m=''1949920''>static</span>
  <span m=''1950300''>mapping</span> <span m=''1950810''>of</span> <span m=''1951010''>the</span>
  <span m=''1951100''>work</span> <span m=''1951400''>to</span> <span m=''1951490''>my</span>
  <span m=''1951610''>processors.</span> <span m=''1953320''>And</span> <span m=''1953540''>static</span>
  <span m=''1953810''>mapping</span> <span m=''1954110''>just</span> <span m=''1954310''>means,</span>
  <span m=''1956020''>you</span> <span m=''1956230''>know,</span> <span m=''1956330''>in</span>
  <span m=''1956430''>this</span> <span m=''1956540''>particular</span> <span m=''1956890''>example,</span>
  <span m=''1957700''>that</span> <span m=''1959010''>I''m</span> <span m=''1959140''>going</span>
  <span m=''1959330''>to</span> <span m=''1959450''>assign</span> <span m=''1960030''>the</span>
  <span m=''1960120''>work to</span> <span m=''1960390''>different</span> <span m=''1960680''>processors</span>
  <span m=''1961580''>and</span> <span m=''1962140''>that''s</span> <span m=''1962350''>what</span>
  <span m=''1962500''>the</span> <span m=''1962580''>processors</span> <span m=''1963080''>will</span>
  <span m=''1963220''>do.</span> <span m=''1963820''>Work</span> <span m=''1964090''>can''t</span>
  <span m=''1964350''>shift</span> <span m=''1964490''>around</span> <span m=''1964760''>between</span>
  <span m=''1964960''>processors.</span> </p><p><span m=''1967410''>And</span> <span
  m=''1967550''>so</span> <span m=''1967750''>in</span> <span m=''1967830''>this</span>
  <span m=''1967970''>case</span> <span m=''1968230''>I</span> <span m=''1968290''>have</span>
  <span m=''1968490''>a work</span> <span m=''1968830''>queue.</span> <span m=''1969330''>Each</span>
  <span m=''1969530''>of</span> <span m=''1969590''>those</span> <span m=''1969820''>bars</span>
  <span m=''1970220''>is</span> <span m=''1970390''>some</span> <span m=''1970660''>computation.</span>
  <span m=''1971750''>You know,</span> <span m=''1971880''>I</span> <span m=''1971930''>can</span>
  <span m=''1972100''>assign</span> <span m=''1973160''>some</span> <span m=''1973440''>chunk</span>
  <span m=''1973700''>to</span> <span m=''1973990''>P1,</span> <span m=''1974250''>processor</span>
  <span m=''1974740''>one,</span> <span m=''1975590''>some</span> <span m=''1975830''>chunk</span>
  <span m=''1976060''>to</span> <span m=''1976140''>processor</span> <span m=''1976630''>two.</span>
  <span m=''1977400''>And</span> <span m=''1977550''>then</span> <span m=''1977670''>computation</span>
  <span m=''1978230''>can</span> <span m=''1978370''>go</span> <span m=''1978500''>on.</span>
  <span m=''1979060''>Those</span> <span m=''1980030''>allocations</span> <span m=''1980570''>don''t</span>
  <span m=''1980770''>change.</span> <span m=''1983320''>So</span> <span m=''1983460''>this</span>
  <span m=''1983620''>works</span> <span m=''1983910''>well</span> <span m=''1984220''>if</span>
  <span m=''1984360''>I</span> <span m=''1984480''>understand</span> <span m=''1984860''>the</span>
  <span m=''1984930''>application,</span> <span m=''1985430''>well and</span> <span
  m=''1985670''>I</span> <span m=''1985770''>know</span> <span m=''1985960''>the</span>
  <span m=''1986110''>computation,</span> <span m=''1987090''>and</span> <span m=''1987540''>my</span>
  <span m=''1987740''>cores</span> <span m=''1988110''>are</span> <span m=''1988760''>relatively</span>
  <span m=''1989190''>homogeneous</span> <span m=''1989960''>and,</span> <span m=''1990550''>you</span>
  <span m=''1990690''>know,</span> <span m=''1991150''>there''s</span> <span m=''1991360''>not</span>
  <span m=''1991540''>a</span> <span m=''1991570''>lot</span> <span m=''1991700''>of</span>
  <span m=''1991780''>contention</span> <span m=''1992190''>for</span> <span m=''1992320''>them.</span>
  <span m=''1993540''>So</span> <span m=''1993790''>if</span> <span m=''1993920''>all</span>
  <span m=''1994110''>the</span> <span m=''1994170''>cores</span> <span m=''1994420''>are</span>
  <span m=''1994510''>the</span> <span m=''1994590''>same,</span> <span m=''1995610''>each</span>
  <span m=''1995810''>core</span> <span m=''1995990''>has an</span> <span m=''1996440''>equal</span>
  <span m=''1996690''>amount</span> <span m=''1996940''>of</span> <span m=''1997040''>work
  --</span> <span m=''1997370''>the</span> <span m=''1997450''>total</span> <span
  m=''1997750''>amount</span> <span m=''1997930''>of</span> <span m=''1998010''>work
  --</span> <span m=''1998320''>this</span> <span m=''1998470''>works</span> <span
  m=''1998710''>really</span> <span m=''1998930''>well</span> <span m=''1999120''>because</span>
  <span m=''1999370''>nobody</span> <span m=''1999690''>is sitting</span> <span m=''2000030''>too</span>
  <span m=''2000440''>idle.</span> </p><p><span m=''2001470''>It doesn''t</span> <span
  m=''2001700''>work</span> <span m=''2001850''>so</span> <span m=''2001990''>well</span>
  <span m=''2002250''>for</span> <span m=''2002410''>heterogeneous</span> <span m=''2003090''>architectures</span>
  <span m=''2003760''>or</span> <span m=''2004140''>multicores.</span> <span m=''2004590''>Because</span>
  <span m=''2005430''>one</span> <span m=''2005610''>might</span> <span m=''2005760''>be</span>
  <span m=''2005860''>faster</span> <span m=''2006200''>than</span> <span m=''2006320''>the</span>
  <span m=''2006440''>other.</span> <span m=''2006690''>It</span> <span m=''2006860''>increases</span>
  <span m=''2007230''>the</span> <span m=''2007300''>complexity</span> <span m=''2007860''>of
  the</span> <span m=''2008070''>allocation</span> <span m=''2008870''>I need to do.</span>
  <span m=''2009470''>If</span> <span m=''2009840''>there''s</span> <span m=''2010180''>a</span>
  <span m=''2010240''>lot</span> <span m=''2010400''>of</span> <span m=''2010490''>contention</span>
  <span m=''2010970''>for</span> <span m=''2011290''>some</span> <span m=''2011490''>resources,</span>
  <span m=''2012400''>then</span> <span m=''2012930''>that</span> <span m=''2013170''>can</span>
  <span m=''2013310''>affect</span> <span m=''2014620''>the</span> <span m=''2014770''>static</span>
  <span m=''2015120''>load</span> <span m=''2015400''>balancing.</span> <span m=''2016470''>So</span>
  <span m=''2016890''>work</span> <span m=''2017390''>distribution</span> <span m=''2017920''>might</span>
  <span m=''2018050''>end</span> <span m=''2018230''>up</span> <span m=''2018340''>being</span>
  <span m=''2018570''>uneven.</span> <span m=''2021180''>So</span> <span m=''2021810''>the</span>
  <span m=''2021920''>alternative</span> <span m=''2022580''>is</span> <span m=''2022730''>dynamic</span>
  <span m=''2023160''>load</span> <span m=''2023330''>balancing.</span> <span m=''2023740''>And</span>
  <span m=''2024020''>you</span> <span m=''2024280''>certainly</span> <span m=''2024570''>could</span>
  <span m=''2024730''>do</span> <span m=''2025150''>sort</span> <span m=''2025380''>of
  a</span> <span m=''2025460''>hybrid</span> <span m=''2025840''>load</span> <span
  m=''2026040''>balancing,</span> <span m=''2026310''>static</span> <span m=''2026900''>plus</span>
  <span m=''2027210''>dynamic</span> <span m=''2028150''>mechanism.</span> <span m=''2028860''>Although</span>
  <span m=''2028960''>I</span> <span m=''2029040''>don''t</span> <span m=''2029240''>have</span>
  <span m=''2029390''>that</span> <span m=''2029560''>in</span> <span m=''2029620''>the</span>
  <span m=''2029740''>slides.</span> </p><p><span m=''2031360''>So</span> <span m=''2032060''>in</span>
  <span m=''2032360''>the</span> <span m=''2032440''>dynamic</span> <span m=''2032890''>load</span>
  <span m=''2033090''>balancing</span> <span m=''2033470''>scheme,</span> <span m=''2036860''>two</span>
  <span m=''2037020''>different</span> <span m=''2038160''>mechanisms</span> <span
  m=''2038690''>I''m</span> <span m=''2038790''>going</span> <span m=''2038950''>to</span>
  <span m=''2039020''>illustrate.</span> <span m=''2039860''>So in the</span> <span
  m=''2040020''>first</span> <span m=''2040300''>scheme,</span> <span m=''2040610''>you
  start</span> <span m=''2040880''>with</span> <span m=''2040990''>something</span>
  <span m=''2041320''>like</span> <span m=''2041530''>the</span> <span m=''2041620''>static</span>
  <span m=''2042780''>mechanism.</span> <span m=''2043610''>So</span> <span m=''2043810''>I</span>
  <span m=''2043890''>have</span> <span m=''2044820''>some</span> <span m=''2045010''>work</span>
  <span m=''2045210''>going</span> <span m=''2045400''>to</span> <span m=''2045490''>processor</span>
  <span m=''2045900''>one.</span> <span m=''2047090''>And</span> <span m=''2047380''>I</span>
  <span m=''2047440''>have</span> <span m=''2048120''>some work</span> <span m=''2048520''>going</span>
  <span m=''2048710''>to</span> <span m=''2048870''>processor</span> <span m=''2049320''>two.</span>
  <span m=''2050080''>But</span> <span m=''2050200''>then</span> <span m=''2050380''>as</span>
  <span m=''2050670''>processor</span> <span m=''2051130''>two</span> <span m=''2051300''>executes</span>
  <span m=''2052420''>and</span> <span m=''2053430''>completes</span> <span m=''2054630''>faster
  than</span> <span m=''2055050''>processor</span> <span m=''2055470''>one,</span>
  <span m=''2056330''>it</span> <span m=''2056430''>takes</span> <span m=''2056670''>on</span>
  <span m=''2056840''>some of the</span> <span m=''2057180''>additional</span> <span
  m=''2057490''>work</span> <span m=''2057610''>from</span> <span m=''2057720''>processor</span>
  <span m=''2058130''>one.</span> <span m=''2058520''>So</span> <span m=''2058880''>the</span>
  <span m=''2059020''>work</span> <span m=''2059220''>that</span> <span m=''2059330''>was</span>
  <span m=''2059460''>here is</span> <span m=''2059860''>now</span> <span m=''2059970''>shifted.</span>
  <span m=''2060650''>And</span> <span m=''2060810''>so</span> <span m=''2060900''>you</span>
  <span m=''2061030''>can</span> <span m=''2062500''>keep</span> <span m=''2062810''>helping</span>
  <span m=''2063140''>out,</span> <span m=''2063620''>you</span> <span m=''2063740''>know,</span>
  <span m=''2063840''>your</span> <span m=''2063980''>other</span> <span m=''2064160''>processors</span>
  <span m=''2065110''>to</span> <span m=''2065250''>compute</span> <span m=''2065560''>things</span>
  <span m=''2065780''>faster.</span> </p><p><span m=''2067040''>In</span> <span m=''2067360''>the</span>
  <span m=''2067440''>other</span> <span m=''2067650''>scheme,</span> <span m=''2068220''>you</span>
  <span m=''2068420''>have a</span> <span m=''2068730''>work</span> <span m=''2069090''>queue</span>
  <span m=''2069220''>where</span> <span m=''2069470''>you</span> <span m=''2069630''>essentially</span>
  <span m=''2070010''>are</span> <span m=''2070550''>distributing</span> <span m=''2071290''>work</span>
  <span m=''2071900''>on</span> <span m=''2072090''>the</span> <span m=''2072160''>fly.</span>
  <span m=''2072780''>So</span> <span m=''2072950''>as</span> <span m=''2073030''>things</span>
  <span m=''2073300''>complete,</span> <span m=''2073880''>you''re</span> <span m=''2074010''>just</span>
  <span m=''2075040''>sending</span> <span m=''2075390''>them</span> <span m=''2075740''>more</span>
  <span m=''2075950''>work</span> <span m=''2076180''>to</span> <span m=''2076270''>do.</span>
  <span m=''2077240''>So</span> <span m=''2077520''>in</span> <span m=''2077600''>this</span>
  <span m=''2077740''>animation</span> <span m=''2078270''>here,</span> <span m=''2078470''>I</span>
  <span m=''2078510''>start</span> <span m=''2078800''>off.</span> <span m=''2079610''>I
  send</span> <span m=''2079730''>work</span> <span m=''2080070''>to</span> <span
  m=''2080170''>two</span> <span m=''2080330''>different</span> <span m=''2080690''>processors.</span>
  <span m=''2081820''>P2</span> <span m=''2082240''>is really</span> <span m=''2082460''>fast</span>
  <span m=''2082890''>so</span> <span m=''2083370''>it''s just</span> <span m=''2083600''>zipping</span>
  <span m=''2083890''>through</span> <span m=''2084060''>things.</span> <span m=''2084780''>And</span>
  <span m=''2084980''>then</span> <span m=''2085470''>P1</span> <span m=''2085930''>eventually</span>
  <span m=''2086410''>finishes</span> <span m=''2087670''>and</span> <span m=''2087870''>new</span>
  <span m=''2087930''>work</span> <span m=''2088180''>is</span> <span m=''2088360''>allocated</span>
  <span m=''2088540''>to</span> <span m=''2088620''>the</span> <span m=''2089430''>two</span>
  <span m=''2089580''>different</span> <span m=''2089860''>schemes.</span> <span m=''2090570''>So</span>
  <span m=''2090820''>dynamic</span> <span m=''2091260''>load</span> <span m=''2091420''>balancing</span>
  <span m=''2091820''>is</span> <span m=''2091980''>intended</span> <span m=''2092390''>to</span>
  <span m=''2093060''>sort</span> <span m=''2093230''>of</span> <span m=''2093550''>give</span>
  <span m=''2093840''>equal</span> <span m=''2094120''>amounts</span> <span m=''2094420''>of</span>
  <span m=''2094520''>work</span> <span m=''2094840''>in</span> <span m=''2095000''>a</span>
  <span m=''2095160''>different</span> <span m=''2095490''>scheme</span> <span m=''2096410''>for</span>
  <span m=''2096720''>processors.</span> <span m=''2097250''>So</span> <span m=''2097810''>it</span>
  <span m=''2098000''>really</span> <span m=''2098260''>increased</span> <span m=''2098560''>utilization
  and</span> <span m=''2099340''>spent</span> <span m=''2099620''>less</span> <span
  m=''2099790''>and</span> <span m=''2099880''>less</span> <span m=''2100040''>time</span>
  <span m=''2100290''>being</span> <span m=''2100510''>idle.</span> </p><p><span m=''2103310''>OK.</span>
  <span m=''2103500''>So</span> <span m=''2103960''>load</span> <span m=''2104160''>balancing</span>
  <span m=''2104880''>was</span> <span m=''2105170''>one</span> <span m=''2105360''>part</span>
  <span m=''2105880''>of</span> <span m=''2106590''>sort of</span> <span m=''2106860''>how</span>
  <span m=''2107030''>granularity</span> <span m=''2108160''>can</span> <span m=''2108480''>have</span>
  <span m=''2108770''>a</span> <span m=''2108840''>performance</span> <span m=''2109370''>trade-off.</span>
  <span m=''2110270''>The</span> <span m=''2110370''>other is</span> <span m=''2110690''>synchronization.</span>
  <span m=''2111660''>So</span> <span m=''2111890''>there</span> <span m=''2112000''>were</span>
  <span m=''2112120''>already</span> <span m=''2112330''>some</span> <span m=''2112510''>good</span>
  <span m=''2112630''>questions</span> <span m=''2113040''>as</span> <span m=''2113240''>to,</span>
  <span m=''2113460''>well,</span> <span m=''2114520''>you</span> <span m=''2114600''>know,</span>
  <span m=''2114670''>how</span> <span m=''2114810''>does</span> <span m=''2114980''>this</span>
  <span m=''2115110''>play</span> <span m=''2115320''>into</span> <span m=''2115520''>overall</span>
  <span m=''2115770''>execution?</span> <span m=''2116350''>When</span> <span m=''2116520''>can</span>
  <span m=''2116680''>I</span> <span m=''2116750''>wait?</span> <span m=''2117000''>When</span>
  <span m=''2117200''>can''t</span> <span m=''2117430''>I</span> <span m=''2117500''>wait?</span>
  <span m=''2118810''>So</span> <span m=''2119080''>I''m</span> <span m=''2119190''>going
  to</span> <span m=''2119360''>illustrate</span> <span m=''2119910''>it with</span>
  <span m=''2120370''>just</span> <span m=''2120660''>a</span> <span m=''2121110''>simple</span>
  <span m=''2121730''>data</span> <span m=''2121930''>dependence</span> <span m=''2122350''>graph.</span>
  <span m=''2122960''>Although</span> <span m=''2123210''>you</span> <span m=''2123330''>can</span>
  <span m=''2123470''>imagine</span> <span m=''2123930''>that in</span> <span m=''2124110''>each</span>
  <span m=''2124470''>one</span> <span m=''2124620''>of</span> <span m=''2124690''>these</span>
  <span m=''2124840''>circles</span> <span m=''2125600''>there''s</span> <span m=''2125800''>some</span>
  <span m=''2125970''>really</span> <span m=''2126230''>heavy</span> <span m=''2126490''>load</span>
  <span m=''2126710''>computation.</span> <span m=''2127550''>And</span> <span m=''2127780''>you''ll</span>
  <span m=''2127880''>see</span> <span m=''2128050''>that</span> <span m=''2128160''>in</span>
  <span m=''2128260''>the</span> <span m=''2128340''>next</span> <span m=''2128600''>lecture,</span>
  <span m=''2129000''>in fact.</span> </p><p><span m=''2129340''>So</span> <span m=''2130670''>if</span>
  <span m=''2130830''>I</span> <span m=''2130910''>have</span> <span m=''2131090''>some</span>
  <span m=''2131240''>simple</span> <span m=''2131520''>computation</span> <span m=''2132230''>here
  --</span> <span m=''2132540''>I</span> <span m=''2132720''>have</span> <span m=''2132870''>some</span>
  <span m=''2133040''>operands.</span> <span m=''2133930''>I''m doing an</span> <span
  m=''2134290''>addition.</span> <span m=''2135800''>Here</span> <span m=''2135980''>I</span>
  <span m=''2136080''>do</span> <span m=''2136260''>another</span> <span m=''2136500''>addition.</span>
  <span m=''2136910''>I</span> <span m=''2136970''>need</span> <span m=''2137180''>both</span>
  <span m=''2137420''>of</span> <span m=''2137490''>these</span> <span m=''2137660''>results</span>
  <span m=''2138010''>before</span> <span m=''2138270''>I</span> <span m=''2138310''>can</span>
  <span m=''2138430''>do this</span> <span m=''2138690''>multiplication.</span> <span
  m=''2140140''>Here</span> <span m=''2140450''>I</span> <span m=''2140580''>have,</span>
  <span m=''2141020''>you</span> <span m=''2141150''>know,</span> <span m=''2141270''>some</span>
  <span m=''2141550''>loop</span> <span m=''2141810''>that''s</span> <span m=''2142110''>adding</span>
  <span m=''2142350''>through</span> <span m=''2143070''>some</span> <span m=''2143250''>array</span>
  <span m=''2143440''>elements.</span> <span m=''2144200''>I</span> <span m=''2144310''>need</span>
  <span m=''2144480''>all</span> <span m=''2144650''>those</span> <span m=''2144840''>results</span>
  <span m=''2145180''>before</span> <span m=''2145500''>I</span> <span m=''2145570''>do</span>
  <span m=''2145720''>final</span> <span m=''2146080''>substraction</span> <span m=''2146870''>and
  produce</span> <span m=''2147210''>my</span> <span m=''2147330''>final</span> <span
  m=''2147640''>result.</span> </p><p><span m=''2149580''>So</span> <span m=''2149840''>what</span>
  <span m=''2150000''>are</span> <span m=''2150070''>some</span> <span m=''2150330''>synchronization</span>
  <span m=''2150970''>points</span> <span m=''2151920''>here?</span> <span m=''2152330''>Well,</span>
  <span m=''2153240''>it really</span> <span m=''2153500''>depends</span> <span m=''2153920''>on</span>
  <span m=''2154330''>how</span> <span m=''2154610''>I</span> <span m=''2154710''>allocate
  the</span> <span m=''2155290''>different</span> <span m=''2155630''>instructions</span>
  <span m=''2156080''>to</span> <span m=''2156180''>processors.</span> <span m=''2159090''>So</span>
  <span m=''2159800''>if</span> <span m=''2159960''>I</span> <span m=''2160050''>have</span>
  <span m=''2160740''>an</span> <span m=''2160940''>allocation</span> <span m=''2161390''>that</span>
  <span m=''2161520''>just</span> <span m=''2161660''>says,</span> <span m=''2161980''>well,</span>
  <span m=''2162440''>let''s</span> <span m=''2162580''>put</span> <span m=''2162750''>all</span>
  <span m=''2162920''>these</span> <span m=''2163100''>chains</span> <span m=''2163480''>on</span>
  <span m=''2164080''>one</span> <span m=''2164260''>processor,</span> <span m=''2165750''>put</span>
  <span m=''2165930''>these</span> <span m=''2166120''>two</span> <span m=''2166240''>chains</span>
  <span m=''2166570''>on</span> <span m=''2166720''>two</span> <span m=''2166870''>different</span>
  <span m=''2167160''>processors,</span> <span m=''2167860''>well,</span> <span m=''2168110''>where</span>
  <span m=''2168330''>are my</span> <span m=''2168470''>synchronization</span> <span
  m=''2169100''>points?</span> <span m=''2169890''>Well,</span> <span m=''2170040''>it
  depends</span> <span m=''2170340''>on</span> <span m=''2170470''>where</span> <span
  m=''2170640''>this</span> <span m=''2170780''>guy</span> <span m=''2171540''>is
  and</span> <span m=''2171660''>where</span> <span m=''2171780''>this</span> <span
  m=''2171970''>guy</span> <span m=''2172150''>is.</span> <span m=''2173120''>Because</span>
  <span m=''2173670''>for this</span> <span m=''2174090''>instruction</span> <span
  m=''2174630''>to execute,</span> <span m=''2175460''>it</span> <span m=''2175610''>needs</span>
  <span m=''2175800''>to</span> <span m=''2175880''>receive</span> <span m=''2176220''>data</span>
  <span m=''2176440''>from</span> <span m=''2176640''>P1</span> <span m=''2177000''>and</span>
  <span m=''2177300''>P2.</span> <span m=''2177910''>So</span> <span m=''2178360''>if</span>
  <span m=''2178710''>P1</span> <span m=''2179030''>and</span> <span m=''2179800''>P2</span>
  <span m=''2180460''>are</span> <span m=''2180620''>different</span> <span m=''2181000''>from</span>
  <span m=''2181820''>what''s</span> <span m=''2182040''>in</span> <span m=''2182120''>that</span>
  <span m=''2182280''>box,</span> <span m=''2183260''>somebody</span> <span m=''2183560''>has</span>
  <span m=''2183760''>to</span> <span m=''2183840''>wait.</span> <span m=''2184100''>And
  so</span> <span m=''2184210''>there''s</span> <span m=''2184390''>a</span> <span
  m=''2184460''>synchronization</span> <span m=''2185780''>that</span> <span m=''2185940''>has
  to</span> <span m=''2186190''>happen.</span> </p><p><span m=''2192200''>So</span>
  <span m=''2192360''>essentially at</span> <span m=''2192930''>all</span> <span m=''2193130''>join</span>
  <span m=''2193380''>points</span> <span m=''2193800''>there''s</span> <span m=''2193990''>potential</span>
  <span m=''2194350''>for</span> <span m=''2194520''>synchronization.</span> <span
  m=''2195510''>But</span> <span m=''2195640''>I</span> <span m=''2195680''>can</span>
  <span m=''2195840''>adjust</span> <span m=''2196200''>the</span> <span m=''2196290''>granularity</span>
  <span m=''2197270''>so</span> <span m=''2197410''>that</span> <span m=''2197550''>I</span>
  <span m=''2197590''>can</span> <span m=''2197810''>remove</span> <span m=''2198390''>more
  and</span> <span m=''2198710''>more</span> <span m=''2198940''>synchronization</span>
  <span m=''2199600''>points.</span> <span m=''2206920''>So</span> <span m=''2207040''>if</span>
  <span m=''2207160''>I</span> <span m=''2207260''>had</span> <span m=''2208050''>assigned</span>
  <span m=''2208680''>all</span> <span m=''2209500''>this</span> <span m=''2209780''>entire</span>
  <span m=''2210110''>sub-graph</span> <span m=''2210610''>to the</span> <span m=''2210740''>same</span>
  <span m=''2210950''>processor,</span> <span m=''2211750''>I</span> <span m=''2211830''>really</span>
  <span m=''2212040''>get</span> <span m=''2212200''>rid</span> <span m=''2212320''>of</span>
  <span m=''2212410''>the</span> <span m=''2212490''>synchronization</span> <span
  m=''2213200''>because</span> <span m=''2213530''>it is</span> <span m=''2213630''>essentially</span>
  <span m=''2214250''>local</span> <span m=''2215270''>to</span> <span m=''2215400''>that</span>
  <span m=''2215560''>particular</span> <span m=''2216030''>processor.</span> <span
  m=''2216910''>And</span> <span m=''2217080''>there''s</span> <span m=''2217270''>no</span>
  <span m=''2217440''>extra</span> <span m=''2217720''>messaging</span> <span m=''2218140''>that
  would</span> <span m=''2218240''>have</span> <span m=''2218440''>to</span> <span
  m=''2218530''>happen</span> <span m=''2218820''>across</span> <span m=''2219170''>processors</span>
  <span m=''2219660''>that</span> <span m=''2219870''>says,</span> <span m=''2220290''>I''m</span>
  <span m=''2220470''>ready,</span> <span m=''2220720''>or</span> <span m=''2220930''>I''m</span>
  <span m=''2221090''>ready</span> <span m=''2221310''>to send</span> <span m=''2221520''>you</span>
  <span m=''2221620''>data,</span> <span m=''2221930''>or</span> <span m=''2222680''>you</span>
  <span m=''2222840''>can</span> <span m=''2222990''>move</span> <span m=''2223160''>on</span>
  <span m=''2223320''>to</span> <span m=''2223410''>the</span> <span m=''2223480''>next</span>
  <span m=''2223690''>step.</span> <span m=''2224330''>And</span> <span m=''2224490''>so</span>
  <span m=''2224630''>in</span> <span m=''2224710''>this</span> <span m=''2224880''>case</span>
  <span m=''2225190''>the</span> <span m=''2225240''>last</span> <span m=''2225470''>synchronization</span>
  <span m=''2226060''>point</span> <span m=''2226310''>would</span> <span m=''2226440''>be</span>
  <span m=''2226650''>at this</span> <span m=''2226830''>join</span> <span m=''2227120''>point.</span>
  <span m=''2227890''>Let''s</span> <span m=''2228060''>say</span> <span m=''2228200''>if</span>
  <span m=''2228700''>it''s</span> <span m=''2228890''>allocated</span> <span m=''2229460''>on</span>
  <span m=''2229650''>P1</span> <span m=''2230100''>or on</span> <span m=''2230400''>some</span>
  <span m=''2230560''>other</span> <span m=''2230700''>processor.</span> <span m=''2232470''>So</span>
  <span m=''2232640''>how</span> <span m=''2232780''>would</span> <span m=''2232890''>I</span>
  <span m=''2232940''>get</span> <span m=''2233110''>rid</span> <span m=''2233310''>of</span>
  <span m=''2233400''>this</span> <span m=''2233510''>synchronization</span> <span
  m=''2234130''>point?</span> </p><p><span m=''2234420''>AUDIENCE:</span> <span m=''2238044''>Do
  the</span> <span m=''2238562''>whole thing.</span> </p><p><span m=''2239080''>PROFESSOR:
  Right.</span> <span m=''2239390''>You</span> <span m=''2239870''>put</span> <span
  m=''2240050''>the</span> <span m=''2240130''>entire</span> <span m=''2240500''>thing</span>
  <span m=''2240800''>on a</span> <span m=''2241120''>single</span> <span m=''2241420''>processor.</span>
  <span m=''2242160''>But</span> <span m=''2242360''>you</span> <span m=''2242450''>get</span>
  <span m=''2242600''>no</span> <span m=''2242700''>parallelism</span> <span m=''2243250''>in
  this</span> <span m=''2243770''>case.</span> <span m=''2243940''>So</span> <span
  m=''2244510''>the</span> <span m=''2244790''>coarse-grain,</span> <span m=''2245290''>fine-grain</span>
  <span m=''2245550''>grain</span> <span m=''2245810''>parallelism</span> <span m=''2246360''>granularity</span>
  <span m=''2246950''>issue</span> <span m=''2248020''>comes</span> <span m=''2248250''>to</span>
  <span m=''2248330''>play.</span> </p><p><span m=''2250410''>So</span> <span m=''2250630''>the</span>
  <span m=''2250710''>last</span> <span m=''2251830''>sort</span> <span m=''2252070''>of</span>
  <span m=''2252160''>thing</span> <span m=''2252350''>I''m</span> <span m=''2252430''>going
  to</span> <span m=''2252600''>talk</span> <span m=''2252820''>about</span> <span
  m=''2253040''>in</span> <span m=''2253110''>terms</span> <span m=''2253410''>of</span>
  <span m=''2253590''>how</span> <span m=''2253890''>granularity</span> <span m=''2255360''>impacts</span>
  <span m=''2255920''>performance --</span> <span m=''2256900''>and</span> <span m=''2257120''>this</span>
  <span m=''2257240''>was</span> <span m=''2257440''>already</span> <span m=''2257720''>touched</span>
  <span m=''2258010''>on --</span> <span m=''2258150''>is</span> <span m=''2258210''>that</span>
  <span m=''2258450''>communication</span> <span m=''2259150''>is really</span> <span
  m=''2259360''>not</span> <span m=''2259570''>cheap</span> <span m=''2260250''>and</span>
  <span m=''2261190''>can</span> <span m=''2261320''>be</span> <span m=''2261460''>quite</span>
  <span m=''2261710''>overwhelming</span> <span m=''2262290''>on a</span> <span m=''2262460''>lot</span>
  <span m=''2262680''>of</span> <span m=''2262760''>architectures.</span> <span m=''2263820''>And</span>
  <span m=''2264040''>what''s</span> <span m=''2264220''>interesting</span> <span
  m=''2264720''>about</span> <span m=''2264950''>multicores</span> <span m=''2265990''>is</span>
  <span m=''2266170''>that</span> <span m=''2266400''>they''re</span> <span m=''2266600''>essentially</span>
  <span m=''2267010''>putting</span> <span m=''2267320''>a</span> <span m=''2267390''>lot</span>
  <span m=''2267610''>more</span> <span m=''2267800''>resources</span> <span m=''2268490''>closer</span>
  <span m=''2268840''>together</span> <span m=''2269560''>on</span> <span m=''2269780''>a</span>
  <span m=''2269830''>chip.</span> <span m=''2270470''>So</span> <span m=''2270780''>it</span>
  <span m=''2270890''>essentially</span> <span m=''2271740''>is</span> <span m=''2272080''>changing</span>
  <span m=''2272420''>the</span> <span m=''2272500''>factors</span> <span m=''2273150''>for</span>
  <span m=''2273390''>communication.</span> <span m=''2275010''>So</span> <span m=''2275180''>rather</span>
  <span m=''2275510''>than</span> <span m=''2275740''>having,</span> <span m=''2276130''>you</span>
  <span m=''2276220''>know,</span> <span m=''2276320''>your</span> <span m=''2276560''>parallel</span>
  <span m=''2277120''>cluster</span> <span m=''2277910''>now</span> <span m=''2278370''>which</span>
  <span m=''2278750''>is</span> <span m=''2278900''>connected,</span> <span m=''2279280''>say,</span>
  <span m=''2279450''>by</span> <span m=''2279580''>ethernet</span> <span m=''2280080''>or</span>
  <span m=''2280200''>some</span> <span m=''2280460''>other</span> <span m=''2280700''>high-speed</span>
  <span m=''2281600''>link,</span> <span m=''2282090''>now</span> <span m=''2282220''>you</span>
  <span m=''2282360''>essentially</span> <span m=''2282670''>have</span> <span m=''2283380''>large</span>
  <span m=''2283690''>clusters</span> <span m=''2284080''>or</span> <span m=''2284160''>will</span>
  <span m=''2284370''>have</span> <span m=''2284560''>large</span> <span m=''2284820''>clusters</span>
  <span m=''2285140''>on</span> <span m=''2285240''>a</span> <span m=''2285330''>chip.</span>
  <span m=''2285920''>So</span> <span m=''2286030''>communication</span> <span m=''2286830''>factors</span>
  <span m=''2287330''>really</span> <span m=''2287550''>change.</span> </p><p><span
  m=''2289250''>But</span> <span m=''2289360''>the</span> <span m=''2289440''>cost</span>
  <span m=''2289770''>model</span> <span m=''2290160''>is</span> <span m=''2290410''>relatively</span>
  <span m=''2292200''>captured</span> <span m=''2294990''>by</span> <span m=''2295190''>these</span>
  <span m=''2295310''>different</span> <span m=''2295950''>parameters.</span> <span
  m=''2299730''>So</span> <span m=''2300120''>what</span> <span m=''2300470''>is</span>
  <span m=''2300580''>the</span> <span m=''2300660''>cost</span> <span m=''2301040''>of</span>
  <span m=''2301100''>my</span> <span m=''2301200''>communication?</span> <span m=''2302450''>Well,</span>
  <span m=''2303040''>it''s</span> <span m=''2304060''>equal</span> <span m=''2304420''>to,</span>
  <span m=''2304650''>well,</span> <span m=''2305160''>how</span> <span m=''2305340''>many</span>
  <span m=''2305870''>messages</span> <span m=''2306250''>am</span> <span m=''2306320''>I</span>
  <span m=''2306410''>sending</span> <span m=''2306790''>and what</span> <span m=''2307040''>is</span>
  <span m=''2307240''>the</span> <span m=''2307310''>frequency</span> <span m=''2307780''>with</span>
  <span m=''2307920''>which</span> <span m=''2308110''>I''m</span> <span m=''2308210''>sending</span>
  <span m=''2308490''>them?</span> <span m=''2310130''>There''s</span> <span m=''2310380''>some</span>
  <span m=''2310660''>overhead</span> <span m=''2311410''>for</span> <span m=''2311760''>message.</span>
  <span m=''2312130''>So</span> <span m=''2312320''>I</span> <span m=''2312380''>have</span>
  <span m=''2312560''>to</span> <span m=''2312640''>actually</span> <span m=''2312970''>package</span>
  <span m=''2313500''>data</span> <span m=''2313750''>together.</span> <span m=''2314140''>I</span>
  <span m=''2314180''>have</span> <span m=''2314380''>to</span> <span m=''2314500''>stick</span>
  <span m=''2314740''>in</span> <span m=''2314830''>a</span> <span m=''2314900''>control</span>
  <span m=''2315480''>header</span> <span m=''2317020''>and</span> <span m=''2317160''>then
  send</span> <span m=''2317360''>it</span> <span m=''2317440''>out.</span> <span
  m=''2317920''>So</span> <span m=''2318310''>that</span> <span m=''2318500''>takes</span>
  <span m=''2318740''>me</span> <span m=''2318830''>some work</span> <span m=''2319290''>on</span>
  <span m=''2319520''>the</span> <span m=''2319580''>receiver</span> <span m=''2320000''>side.</span>
  <span m=''2320360''>I have</span> <span m=''2320490''>to</span> <span m=''2320580''>take</span>
  <span m=''2320820''>the</span> <span m=''2320910''>message.</span> <span m=''2321450''>I</span>
  <span m=''2321510''>maybe</span> <span m=''2321850''>have</span> <span m=''2322010''>to</span>
  <span m=''2322280''>decode</span> <span m=''2322530''>the</span> <span m=''2322620''>header,</span>
  <span m=''2323850''>figure</span> <span m=''2324090''>out</span> <span m=''2325880''>where</span>
  <span m=''2326240''>to</span> <span m=''2326390''>store the</span> <span m=''2326740''>data</span>
  <span m=''2327040''>that''s coming</span> <span m=''2327330''>in</span> <span m=''2327460''>on</span>
  <span m=''2327580''>the</span> <span m=''2327650''>message.</span> <span m=''2328470''>So</span>
  <span m=''2328640''>there''s</span> <span m=''2328850''>some</span> <span m=''2329050''>overhead</span>
  <span m=''2329400''>associated</span> <span m=''2329850''>with</span> <span m=''2329970''>that</span>
  <span m=''2330150''>as</span> <span m=''2330260''>well.</span> </p><p><span m=''2331700''>There''s</span>
  <span m=''2331880''>a</span> <span m=''2331930''>network</span> <span m=''2332300''>delay</span>
  <span m=''2332950''>for</span> <span m=''2333340''>sending</span> <span m=''2333640''>a</span>
  <span m=''2333690''>message,</span> <span m=''2334040''>so</span> <span m=''2334470''>putting</span>
  <span m=''2335420''>a</span> <span m=''2335470''>message</span> <span m=''2335790''>on</span>
  <span m=''2335910''>the</span> <span m=''2335980''>network</span> <span m=''2337250''>so
  that</span> <span m=''2337350''>it</span> <span m=''2337450''>can</span> <span m=''2337560''>be</span>
  <span m=''2337660''>transmitted,</span> <span m=''2338200''>or picking</span> <span
  m=''2338550''>things</span> <span m=''2338770''>up</span> <span m=''2338920''>off</span>
  <span m=''2339110''>the</span> <span m=''2339190''>network.</span> <span m=''2339880''>So</span>
  <span m=''2341330''>there''s</span> <span m=''2341900''>a latency</span> <span m=''2342160''>also</span>
  <span m=''2342520''>associated</span> <span m=''2343080''>with</span> <span m=''2343630''>how</span>
  <span m=''2343760''>long does</span> <span m=''2344050''>it</span> <span m=''2344160''>take</span>
  <span m=''2344430''>for a</span> <span m=''2344660''>message</span> <span m=''2345000''>to</span>
  <span m=''2345090''>get</span> <span m=''2345260''>from</span> <span m=''2345400''>point</span>
  <span m=''2345650''>A</span> <span m=''2345850''>to point</span> <span m=''2346130''>B.</span>
  <span m=''2347640''>What is</span> <span m=''2347890''>the</span> <span m=''2347990''>bandwidth</span>
  <span m=''2348390''>that</span> <span m=''2348510''>I</span> <span m=''2348580''>have</span>
  <span m=''2349680''>across</span> <span m=''2350160''>a</span> <span m=''2350240''>link?</span>
  <span m=''2351020''>So</span> <span m=''2351570''>if</span> <span m=''2351690''>I</span>
  <span m=''2351740''>have</span> <span m=''2351930''>a</span> <span m=''2351990''>lot</span>
  <span m=''2352190''>of</span> <span m=''2352250''>bandwidth</span> <span m=''2352690''>then</span>
  <span m=''2352820''>that</span> <span m=''2352900''>can</span> <span m=''2353060''>really</span>
  <span m=''2353350''>lower</span> <span m=''2354250''>my</span> <span m=''2354390''>communication</span>
  <span m=''2354940''>cost.</span> <span m=''2355360''>But</span> <span m=''2355460''>if</span>
  <span m=''2355590''>I</span> <span m=''2355690''>have</span> <span m=''2356060''>little</span>
  <span m=''2356310''>bandwidth</span> <span m=''2356670''>then</span> <span m=''2356770''>that</span>
  <span m=''2356840''>can</span> <span m=''2356980''>really</span> <span m=''2357190''>create</span>
  <span m=''2357490''>contention.</span> </p><p><span m=''2359450''>How</span> <span
  m=''2359570''>much</span> <span m=''2359800''>data</span> <span m=''2360080''>am</span>
  <span m=''2360170''>I</span> <span m=''2360260''>sending?</span> <span m=''2360940''>And,</span>
  <span m=''2361820''>you</span> <span m=''2361900''>know,</span> <span m=''2361960''>number
  of</span> <span m=''2362290''>messages.</span> <span m=''2362780''>So</span> <span
  m=''2362910''>this</span> <span m=''2363190''>numerator</span> <span m=''2363510''>here</span>
  <span m=''2363740''>is</span> <span m=''2363840''>really</span> <span m=''2364080''>an</span>
  <span m=''2364220''>average</span> <span m=''2365070''>of</span> <span m=''2365480''>the</span>
  <span m=''2365590''>data</span> <span m=''2365730''>that</span> <span m=''2365890''>you''re</span>
  <span m=''2366040''>sending</span> <span m=''2366360''>per</span> <span m=''2366590''>communication.</span>
  <span m=''2369590''>There''s</span> <span m=''2369820''>a</span> <span m=''2369950''>cost</span>
  <span m=''2370410''>induced</span> <span m=''2370790''>per</span> <span m=''2371130''>contention.</span>
  <span m=''2372100''>And</span> <span m=''2372230''>then</span> <span m=''2372350''>finally</span>
  <span m=''2372760''>there''s --</span> <span m=''2373550''>so all of</span> <span
  m=''2373880''>these</span> <span m=''2374080''>are</span> <span m=''2374360''>added</span>
  <span m=''2374480''>factors.</span> <span m=''2375580''>The</span> <span m=''2375690''>higher</span>
  <span m=''2375990''>they</span> <span m=''2376110''>are,</span> <span m=''2376340''>except</span>
  <span m=''2376530''>for</span> <span m=''2376820''>bandwidth,</span> <span m=''2377110''>because</span>
  <span m=''2377550''>it''s</span> <span m=''2377670''>in</span> <span m=''2377830''>the
  denominator</span> <span m=''2377980''>here,</span> <span m=''2378510''>the</span>
  <span m=''2378610''>worse</span> <span m=''2378920''>your</span> <span m=''2379020''>communication</span>
  <span m=''2379580''>cost</span> <span m=''2379870''>becomes.</span> </p><p><span
  m=''2380800''>So</span> <span m=''2380920''>you</span> <span m=''2381110''>can</span>
  <span m=''2381320''>try</span> <span m=''2381600''>to</span> <span m=''2381700''>reduce</span>
  <span m=''2382370''>the</span> <span m=''2382510''>communication</span> <span m=''2383080''>cost</span>
  <span m=''2383450''>by</span> <span m=''2385010''>communicating</span> <span m=''2385510''>less.</span>
  <span m=''2386220''>So</span> <span m=''2386380''>you</span> <span m=''2386560''>adjust</span>
  <span m=''2386780''>your</span> <span m=''2386860''>granularity.</span> <span m=''2387100''>And</span>
  <span m=''2387830''>that</span> <span m=''2388120''>can</span> <span m=''2388250''>impact</span>
  <span m=''2388830''>your</span> <span m=''2389060''>synchronization</span> <span
  m=''2389900''>or</span> <span m=''2390110''>what</span> <span m=''2390240''>kind</span>
  <span m=''2390460''>of</span> <span m=''2390550''>data</span> <span m=''2390800''>you''re</span>
  <span m=''2390950''>shipping</span> <span m=''2391240''>around.</span> <span m=''2392960''>You</span>
  <span m=''2393080''>can</span> <span m=''2393230''>do</span> <span m=''2393330''>some</span>
  <span m=''2393540''>architectural</span> <span m=''2394130''>tweaks</span> <span
  m=''2394480''>or</span> <span m=''2394740''>maybe</span> <span m=''2394950''>some</span>
  <span m=''2395090''>software</span> <span m=''2395450''>tweaks</span> <span m=''2396170''>to</span>
  <span m=''2396280''>really</span> <span m=''2396570''>get</span> <span m=''2396850''>the</span>
  <span m=''2397120''>network</span> <span m=''2397440''>latency</span> <span m=''2397800''>down</span>
  <span m=''2398410''>and</span> <span m=''2398710''>the</span> <span m=''2398800''>overhead</span>
  <span m=''2399190''>per</span> <span m=''2399330''>message</span> <span m=''2399700''>down.</span>
  <span m=''2400190''>So</span> <span m=''2400620''>on</span> <span m=''2400810''>something</span>
  <span m=''2401120''>like</span> <span m=''2401270''>raw</span> <span m=''2401490''>architecture,</span>
  <span m=''2402080''>which</span> <span m=''2402240''>we</span> <span m=''2402380''>saw</span>
  <span m=''2403580''>in</span> <span m=''2403880''>Saman''s</span> <span m=''2404110''>lecture,</span>
  <span m=''2404820''>there''s</span> <span m=''2405020''>a really</span> <span m=''2405330''>fast</span>
  <span m=''2405650''>mechanism</span> <span m=''2406110''>to</span> <span m=''2406230''>communicate</span>
  <span m=''2406770''>your nearest</span> <span m=''2407050''>neighbor</span> <span
  m=''2407480''>in three cycles.</span> <span m=''2408900''>So</span> <span m=''2409090''>one</span>
  <span m=''2409270''>processor</span> <span m=''2409790''>can</span> <span m=''2410030''>send</span>
  <span m=''2410300''>a</span> <span m=''2410350''>single</span> <span m=''2410710''>operand</span>
  <span m=''2411110''>to another</span> <span m=''2412580''>reasonably</span> <span
  m=''2412970''>fast.</span> <span m=''2414920''>You</span> <span m=''2415090''>know,</span>
  <span m=''2415180''>you</span> <span m=''2415250''>can</span> <span m=''2415380''>improve</span>
  <span m=''2415730''>the</span> <span m=''2416010''>bandwidth</span> <span m=''2416310''>again
  in</span> <span m=''2416680''>architectural</span> <span m=''2417250''>mechanism.</span>
  <span m=''2419010''>You</span> <span m=''2419140''>can</span> <span m=''2419320''>do</span>
  <span m=''2419440''>some</span> <span m=''2419610''>tricks</span> <span m=''2419870''>as</span>
  <span m=''2420010''>to</span> <span m=''2420120''>how</span> <span m=''2420290''>you</span>
  <span m=''2420420''>package</span> <span m=''2420830''>your</span> <span m=''2420980''>data</span>
  <span m=''2421580''>in</span> <span m=''2421720''>each</span> <span m=''2421960''>message.</span>
  </p><p><span m=''2424490''>And lastly,</span> <span m=''2424990''>what</span> <span
  m=''2425130''>I''m</span> <span m=''2425190''>going to</span> <span m=''2425350''>talk</span>
  <span m=''2425600''>about</span> <span m=''2426240''>in</span> <span m=''2426680''>a</span>
  <span m=''2426880''>couple</span> <span m=''2427160''>of slides is,</span> <span
  m=''2427820''>well,</span> <span m=''2428440''>I</span> <span m=''2428530''>can</span>
  <span m=''2428650''>also</span> <span m=''2428910''>improve</span> <span m=''2429270''>it</span>
  <span m=''2429700''>using</span> <span m=''2430130''>some</span> <span m=''2430320''>mechanisms</span>
  <span m=''2430890''>that</span> <span m=''2430950''>try</span> <span m=''2431150''>to</span>
  <span m=''2431280''>increase</span> <span m=''2431720''>the overlap</span> <span
  m=''2432210''>between</span> <span m=''2432510''>messages.</span> <span m=''2433390''>And</span>
  <span m=''2433840''>what</span> <span m=''2433970''>does</span> <span m=''2434120''>this</span>
  <span m=''2434250''>really</span> <span m=''2434550''>mean?</span> <span m=''2435160''>What</span>
  <span m=''2435280''>am</span> <span m=''2435340''>I</span> <span m=''2435450''>overlapping</span>
  <span m=''2436000''>it</span> <span m=''2436080''>with?</span> <span m=''2437070''>And</span>
  <span m=''2437650''>it''s</span> <span m=''2437800''>really</span> <span m=''2438370''>the</span>
  <span m=''2438510''>communication</span> <span m=''2439390''>and</span> <span m=''2439600''>computation</span>
  <span m=''2440100''>stages</span> <span m=''2440700''>are</span> <span m=''2440850''>going</span>
  <span m=''2441050''>to</span> <span m=''2441170''>somehow</span> <span m=''2441550''>get</span>
  <span m=''2441710''>aligned.</span> </p><p><span m=''2443590''>So</span> <span m=''2444160''>before</span>
  <span m=''2444470''>I actually</span> <span m=''2444860''>show you that,</span>
  <span m=''2445440''>I</span> <span m=''2445650''>just</span> <span m=''2445840''>want
  to</span> <span m=''2445980''>point</span> <span m=''2446200''>out</span> <span
  m=''2446300''>that</span> <span m=''2446420''>there</span> <span m=''2446600''>are</span>
  <span m=''2446690''>two</span> <span m=''2446930''>kinds</span> <span m=''2447220''>of</span>
  <span m=''2447300''>messages.</span> <span m=''2448220''>There''s</span> <span m=''2448760''>data</span>
  <span m=''2448870''>messages,</span> <span m=''2449760''>and</span> <span m=''2449950''>these
  are,</span> <span m=''2450190''>for</span> <span m=''2450310''>example,</span> <span
  m=''2450900''>the</span> <span m=''2451020''>arrays</span> <span m=''2451300''>that</span>
  <span m=''2451400''>I''m</span> <span m=''2451500''>sending</span> <span m=''2451750''>around</span>
  <span m=''2451960''>to</span> <span m=''2452050''>different</span> <span m=''2452320''>processors</span>
  <span m=''2454060''>for</span> <span m=''2454240''>the</span> <span m=''2455110''>distance</span>
  <span m=''2455510''>calculations</span> <span m=''2456080''>between</span> <span
  m=''2456370''>points</span> <span m=''2456630''>in</span> <span m=''2456760''>space.</span>
  <span m=''2457760''>But</span> <span m=''2457870''>there are</span> <span m=''2457960''>also</span>
  <span m=''2458250''>control</span> <span m=''2458610''>messages.</span> <span m=''2459650''>So</span>
  <span m=''2459730''>control</span> <span m=''2460000''>messages</span> <span m=''2460460''>essentially</span>
  <span m=''2460810''>say,</span> <span m=''2461320''>I''m</span> <span m=''2461460''>done,</span>
  <span m=''2461890''>or</span> <span m=''2462460''>I''m</span> <span m=''2462620''>ready</span>
  <span m=''2462820''>to</span> <span m=''2462900''>go,</span> <span m=''2463170''>or</span>
  <span m=''2464390''>is</span> <span m=''2464490''>there</span> <span m=''2464970''>any</span>
  <span m=''2465060''>work</span> <span m=''2465250''>for</span> <span m=''2465350''>me</span>
  <span m=''2465470''>to</span> <span m=''2465570''>do?</span> <span m=''2466900''>So</span>
  <span m=''2467340''>on</span> <span m=''2467540''>Cell,</span> <span m=''2468030''>control</span>
  <span m=''2468310''>messages,</span> <span m=''2468780''>you</span> <span m=''2468890''>know,</span>
  <span m=''2468970''>you</span> <span m=''2469040''>can</span> <span m=''2469180''>think</span>
  <span m=''2469370''>of</span> <span m=''2469700''>using</span> <span m=''2470050''>Mailboxes</span>
  <span m=''2470580''>for</span> <span m=''2470690''>those</span> <span m=''2471080''>and
  the</span> <span m=''2471460''>DMAs</span> <span m=''2471830''>for</span> <span
  m=''2471940''>doing</span> <span m=''2472220''>the</span> <span m=''2472330''>data</span>
  <span m=''2472560''>communication.</span> <span m=''2473590''>So</span> <span m=''2473830''>data</span>
  <span m=''2474130''>messages are</span> <span m=''2474750''>relatively</span> <span
  m=''2475330''>much</span> <span m=''2475580''>larger --</span> <span m=''2476170''>you''re</span>
  <span m=''2476290''>sending</span> <span m=''2476730''>a</span> <span m=''2476800''>lot</span>
  <span m=''2477020''>of</span> <span m=''2477120''>data --</span> <span m=''2477870''>versus</span>
  <span m=''2478150''>control</span> <span m=''2478430''>messages</span> <span m=''2479150''>that</span>
  <span m=''2479320''>are</span> <span m=''2479650''>really</span> <span m=''2479930''>much</span>
  <span m=''2480160''>shorter,</span> <span m=''2480510''>just</span> <span m=''2480780''>essentially</span>
  <span m=''2481270''>just</span> <span m=''2481480''>sending</span> <span m=''2482190''>you</span>
  <span m=''2482720''>very</span> <span m=''2483100''>brief</span> <span m=''2483370''>information.</span>
  </p><p><span m=''2487640''>So</span> <span m=''2488310''>in</span> <span m=''2488440''>order</span>
  <span m=''2488720''>to</span> <span m=''2489280''>get</span> <span m=''2489560''>that</span>
  <span m=''2489750''>overlap,</span> <span m=''2490330''>what you</span> <span m=''2490450''>can</span>
  <span m=''2490610''>do</span> <span m=''2490790''>is</span> <span m=''2490980''>essentially</span>
  <span m=''2491720''>use</span> <span m=''2491880''>this</span> <span m=''2492020''>concept</span>
  <span m=''2492430''>of</span> <span m=''2492780''>pipelining.</span> <span m=''2493610''>So</span>
  <span m=''2493740''>you''ve</span> <span m=''2493910''>seen</span> <span m=''2494110''>pipelining</span>
  <span m=''2494450''>in</span> <span m=''2494660''>superscalar.</span> <span m=''2495250''>Someone</span>
  <span m=''2495580''>talked</span> <span m=''2495840''>about</span> <span m=''2496050''>that.</span>
  <span m=''2497620''>And</span> <span m=''2498070''>what</span> <span m=''2498210''>you
  are</span> <span m=''2498330''>essentially</span> <span m=''2498720''>trying</span>
  <span m=''2498940''>to</span> <span m=''2499030''>do</span> <span m=''2499210''>is</span>
  <span m=''2499450''>break up</span> <span m=''2499970''>the</span> <span m=''2500130''>communication</span>
  <span m=''2501230''>and</span> <span m=''2501560''>computation</span> <span m=''2502290''>into</span>
  <span m=''2502540''>different</span> <span m=''2502850''>stages</span> <span m=''2503630''>and</span>
  <span m=''2503810''>then</span> <span m=''2503950''>figure</span> <span m=''2504030''>out</span>
  <span m=''2504220''>a</span> <span m=''2504310''>way to</span> <span m=''2504550''>overlap</span>
  <span m=''2505090''>them</span> <span m=''2505330''>so</span> <span m=''2505470''>that</span>
  <span m=''2505570''>you</span> <span m=''2505660''>can</span> <span m=''2505860''>essentially</span>
  <span m=''2506160''>hide</span> <span m=''2506490''>the</span> <span m=''2506580''>latency</span>
  <span m=''2507740''>for</span> <span m=''2507890''>the</span> <span m=''2507970''>sends</span>
  <span m=''2509630''>and</span> <span m=''2510030''>the</span> <span m=''2510120''>receives.</span>
  </p><p><span m=''2511090''>So</span> <span m=''2511980''>let''s</span> <span m=''2512210''>say</span>
  <span m=''2512390''>you</span> <span m=''2512550''>have</span> <span m=''2513080''>some</span>
  <span m=''2513290''>work</span> <span m=''2513490''>that</span> <span m=''2513600''>you''re</span>
  <span m=''2513730''>doing,</span> <span m=''2514440''>and it</span> <span m=''2514830''>really</span>
  <span m=''2515080''>requires</span> <span m=''2515560''>you</span> <span m=''2515660''>to</span>
  <span m=''2515840''>send</span> <span m=''2516000''>the</span> <span m=''2516060''>data
  --</span> <span m=''2517570''>somebody</span> <span m=''2517880''>has</span> <span
  m=''2518030''>to</span> <span m=''2518110''>send</span> <span m=''2518260''>you</span>
  <span m=''2518410''>the data</span> <span m=''2518590''>or</span> <span m=''2518770''>you</span>
  <span m=''2519650''>essentially</span> <span m=''2520050''>have</span> <span m=''2520200''>to</span>
  <span m=''2521190''>wait</span> <span m=''2521410''>until</span> <span m=''2521620''>you</span>
  <span m=''2521730''>get</span> <span m=''2521910''>it.</span> <span m=''2522440''>And</span>
  <span m=''2522590''>then</span> <span m=''2522800''>after</span> <span m=''2523100''>you''ve</span>
  <span m=''2523350''>waited</span> <span m=''2523750''>and</span> <span m=''2524030''>the</span>
  <span m=''2524110''>data</span> <span m=''2524250''>is</span> <span m=''2524480''>there,</span>
  <span m=''2524650''>you</span> <span m=''2524750''>can</span> <span m=''2524850''>actually</span>
  <span m=''2525160''>go</span> <span m=''2525300''>on</span> <span m=''2525580''>and
  do</span> <span m=''2525710''>your</span> <span m=''2525810''>work.</span> <span
  m=''2526470''>So</span> <span m=''2526770''>these</span> <span m=''2526890''>are</span>
  <span m=''2527100''>color</span> <span m=''2527340''>coded.</span> <span m=''2527670''>So</span>
  <span m=''2527780''>this</span> <span m=''2527920''>is</span> <span m=''2528100''>essentially</span>
  <span m=''2528400''>one</span> <span m=''2528610''>iteration</span> <span m=''2530670''>of</span>
  <span m=''2530820''>the</span> <span m=''2530920''>work.</span> </p><p><span m=''2531540''>And</span>
  <span m=''2531870''>so you</span> <span m=''2531990''>could</span> <span m=''2532350''>overlap</span>
  <span m=''2532590''>them</span> <span m=''2532750''>by</span> <span m=''2532910''>breaking</span>
  <span m=''2533260''>up</span> <span m=''2533360''>the</span> <span m=''2533440''>work</span>
  <span m=''2533770''>into</span> <span m=''2535220''>send,</span> <span m=''2535720''>wait,</span>
  <span m=''2536190''>work stages,</span> <span m=''2537510''>where</span> <span m=''2537840''>each</span>
  <span m=''2538100''>iteration</span> <span m=''2539460''>trying</span> <span m=''2539730''>to</span>
  <span m=''2540430''>send</span> <span m=''2541050''>or</span> <span m=''2541230''>request
  the</span> <span m=''2541760''>data</span> <span m=''2542050''>for</span> <span
  m=''2542360''>the</span> <span m=''2542430''>next</span> <span m=''2542650''>iteration,</span>
  <span m=''2543730''>I</span> <span m=''2543880''>wait</span> <span m=''2544170''>on</span>
  <span m=''2544260''>the</span> <span m=''2544340''>data</span> <span m=''2544560''>from
  a</span> <span m=''2544800''>previous</span> <span m=''2545120''>iteration</span>
  <span m=''2546060''>and</span> <span m=''2546220''>then</span> <span m=''2546520''>I</span>
  <span m=''2546610''>do</span> <span m=''2546790''>my</span> <span m=''2546900''>work.</span>
  <span m=''2547420''>So</span> <span m=''2547680''>depending</span> <span m=''2548070''>on</span>
  <span m=''2548220''>how</span> <span m=''2548430''>I</span> <span m=''2548490''>partition,</span>
  <span m=''2549060''>I</span> <span m=''2549130''>can</span> <span m=''2549300''>really</span>
  <span m=''2549540''>get</span> <span m=''2549910''>really</span> <span m=''2550160''>good</span>
  <span m=''2550300''>overlap.</span> <span m=''2552280''>And</span> <span m=''2552530''>so</span>
  <span m=''2552650''>what</span> <span m=''2552790''>you</span> <span m=''2552860''>want</span>
  <span m=''2553040''>to</span> <span m=''2553100''>get</span> <span m=''2553270''>to</span>
  <span m=''2553460''>is</span> <span m=''2554040''>the</span> <span m=''2554130''>concept</span>
  <span m=''2554560''>of</span> <span m=''2554670''>the</span> <span m=''2554760''>steady</span>
  <span m=''2555320''>state,</span> <span m=''2555790''>where</span> <span m=''2556440''>in</span>
  <span m=''2556590''>your</span> <span m=''2556680''>main</span> <span m=''2557190''>loop</span>
  <span m=''2557380''>body,</span> <span m=''2557910''>all</span> <span m=''2558120''>you''re</span>
  <span m=''2558280''>doing</span> <span m=''2558630''>is</span> <span m=''2560130''>essentially</span>
  <span m=''2560790''>pre-fetching</span> <span m=''2562170''>or</span> <span m=''2562570''>requesting</span>
  <span m=''2563110''>data</span> <span m=''2563270''>that''s</span> <span m=''2563410''>going</span>
  <span m=''2563590''>to</span> <span m=''2563680''>be</span> <span m=''2563760''>used
  in</span> <span m=''2564040''>future</span> <span m=''2564430''>iterations</span>
  <span m=''2564810''>for</span> <span m=''2564910''>future</span> <span m=''2565490''>work.</span>
  <span m=''2566030''>And</span> <span m=''2566450''>then</span> <span m=''2567300''>you''re</span>
  <span m=''2567460''>waiting</span> <span m=''2568280''>on --</span> <span m=''2569890''>yeah.</span>
  <span m=''2571490''>I think my color</span> <span m=''2571790''>coding is a little</span>
  <span m=''2571900''>bogus.</span> <span m=''2574100''>That''s good.</span> </p><p><span
  m=''2575860''>So</span> <span m=''2576350''>here''s</span> <span m=''2576640''>an</span>
  <span m=''2576720''>example</span> <span m=''2577080''>of</span> <span m=''2577180''>how</span>
  <span m=''2577320''>you</span> <span m=''2577430''>might</span> <span m=''2577630''>do</span>
  <span m=''2577780''>this</span> <span m=''2577900''>kind</span> <span m=''2578140''>of</span>
  <span m=''2578360''>buffer</span> <span m=''2578610''>pipelining</span> <span m=''2579060''>in
  Cell.</span> <span m=''2581700''>So</span> <span m=''2582120''>I</span> <span m=''2583270''>have</span>
  <span m=''2583610''>some</span> <span m=''2583930''>main</span> <span m=''2584090''>loop</span>
  <span m=''2584360''>that''s</span> <span m=''2584530''>going</span> <span m=''2584710''>to</span>
  <span m=''2584810''>do</span> <span m=''2584990''>some</span> <span m=''2585280''>work,</span>
  <span m=''2585710''>that''s</span> <span m=''2586090''>encapsulating</span> <span
  m=''2586700''>this process</span> <span m=''2587040''>data.</span> <span m=''2587670''>And</span>
  <span m=''2588220''>what</span> <span m=''2588320''>I''m</span> <span m=''2588410''>going</span>
  <span m=''2588550''>to</span> <span m=''2588620''>use</span> <span m=''2588880''>is</span>
  <span m=''2589080''>two</span> <span m=''2589230''>buffers.</span> <span m=''2589780''>So
  the</span> <span m=''2589940''>scheme is</span> <span m=''2590270''>also</span>
  <span m=''2590500''>called</span> <span m=''2590790''>double</span> <span m=''2591050''>buffering.</span>
  <span m=''2592750''>I''m</span> <span m=''2593000''>going</span> <span m=''2593190''>to</span>
  <span m=''2593290''>use</span> <span m=''2593500''>this</span> <span m=''2593780''>ID
  to</span> <span m=''2594070''>represent</span> <span m=''2594540''>which</span>
  <span m=''2594750''>buffer</span> <span m=''2595100''>I''m</span> <span m=''2595200''>going</span>
  <span m=''2595400''>to</span> <span m=''2595510''>use.</span> <span m=''2595700''>So</span>
  <span m=''2595970''>it''s either</span> <span m=''2596730''>buffer</span> <span
  m=''2597070''>zero</span> <span m=''2597380''>or</span> <span m=''2597550''>buffer</span>
  <span m=''2597650''>one.</span> <span m=''2598910''>And</span> <span m=''2599100''>this</span>
  <span m=''2599250''>instruction</span> <span m=''2599720''>here</span> <span m=''2599970''>essentially</span>
  <span m=''2600320''>flips</span> <span m=''2600630''>the</span> <span m=''2600690''>bit.</span>
  <span m=''2601230''>So</span> <span m=''2601430''>it''s</span> <span m=''2601530''>either</span>
  <span m=''2601710''>zero</span> <span m=''2601840''>or</span> <span m=''2602170''>one.</span>
  </p><p><span m=''2603700''>So</span> <span m=''2603890''>I</span> <span m=''2603950''>fetch</span>
  <span m=''2604280''>data</span> <span m=''2604530''>into</span> <span m=''2604790''>buffer</span>
  <span m=''2605050''>zero</span> <span m=''2606300''>and</span> <span m=''2606510''>then</span>
  <span m=''2606660''>I</span> <span m=''2606800''>enter</span> <span m=''2607050''>my</span>
  <span m=''2607170''>loop.</span> <span m=''2607620''>So</span> <span m=''2607880''>this</span>
  <span m=''2608060''>is</span> <span m=''2608170''>essentially</span> <span m=''2609010''>the</span>
  <span m=''2609110''>first</span> <span m=''2609490''>send,</span> <span m=''2609670''>which</span>
  <span m=''2609840''>is</span> <span m=''2610120''>trying</span> <span m=''2610410''>to</span>
  <span m=''2610680''>get</span> <span m=''2610830''>me</span> <span m=''2610940''>one</span>
  <span m=''2611240''>iteration</span> <span m=''2611710''>ahead.</span> <span m=''2613330''>So</span>
  <span m=''2613500''>I enter</span> <span m=''2613980''>this</span> <span m=''2614110''>mail</span>
  <span m=''2614180''>loop</span> <span m=''2614630''>and</span> <span m=''2615030''>I</span>
  <span m=''2615150''>do</span> <span m=''2615330''>some</span> <span m=''2617200''>calculation
  to</span> <span m=''2617760''>figure</span> <span m=''2618010''>out</span> <span
  m=''2618570''>where</span> <span m=''2618840''>to</span> <span m=''2619610''>write</span>
  <span m=''2619800''>the next</span> <span m=''2620090''>data.</span> <span m=''2620380''>And</span>
  <span m=''2620500''>then</span> <span m=''2620610''>I</span> <span m=''2620720''>do</span>
  <span m=''2621250''>another</span> <span m=''2621600''>request</span> <span m=''2622280''>for</span>
  <span m=''2622510''>the</span> <span m=''2622580''>next</span> <span m=''2622820''>data</span>
  <span m=''2622980''>item</span> <span m=''2623640''>that I''m</span> <span m=''2623830''>going
  to --</span> <span m=''2624180''>sorry,</span> <span m=''2624530''>there''s</span>
  <span m=''2624690''>an</span> <span m=''2624790''>m</span> <span m=''2624950''>missing
  here --</span> <span m=''2627800''>I''m</span> <span m=''2627990''>going</span>
  <span m=''2628170''>to</span> <span m=''2628280''>fetch</span> <span m=''2628520''>data</span>
  <span m=''2628890''>into</span> <span m=''2629710''>a</span> <span m=''2629810''>different</span>
  <span m=''2630140''>buffer,</span> <span m=''2630570''>right.</span> <span m=''2630900''>This</span>
  <span m=''2631060''>is</span> <span m=''2631250''>ID</span> <span m=''2632070''>where</span>
  <span m=''2632340''>I''ve</span> <span m=''2632500''>already</span> <span m=''2632740''>flipped</span>
  <span m=''2633020''>the</span> <span m=''2633110''>bit</span> <span m=''2633290''>once.</span>
  </p><p><span m=''2634360''>So</span> <span m=''2635120''>this get</span> <span m=''2635820''>is</span>
  <span m=''2636150''>going</span> <span m=''2636360''>to</span> <span m=''2636440''>write</span>
  <span m=''2636670''>data into</span> <span m=''2637070''>buffer</span> <span m=''2637320''>zero.</span>
  <span m=''2638160''>And</span> <span m=''2638370''>this get</span> <span m=''2638770''>is</span>
  <span m=''2638890''>going</span> <span m=''2639070''>to</span> <span m=''2639160''>write</span>
  <span m=''2639490''>data</span> <span m=''2639610''>into</span> <span m=''2639800''>buffer</span>
  <span m=''2640120''>one.</span> <span m=''2641730''>I</span> <span m=''2641850''>flip</span>
  <span m=''2642090''>the</span> <span m=''2642170''>bit</span> <span m=''2642310''>again.</span>
  <span m=''2642770''>So</span> <span m=''2642930''>now</span> <span m=''2643320''>I''m</span>
  <span m=''2643530''>going</span> <span m=''2643740''>to</span> <span m=''2644400''>issue</span>
  <span m=''2644900''>a</span> <span m=''2645000''>wait</span> <span m=''2645360''>instruction</span>
  <span m=''2645780''>that</span> <span m=''2645890''>says</span> <span m=''2648550''>is</span>
  <span m=''2648720''>the</span> <span m=''2648790''>data</span> <span m=''2648980''>from</span>
  <span m=''2649120''>buffer</span> <span m=''2649410''>zero</span> <span m=''2649610''>ready?</span>
  <span m=''2650380''>And</span> <span m=''2650540''>if</span> <span m=''2650620''>it</span>
  <span m=''2650730''>is</span> <span m=''2650950''>then</span> <span m=''2651090''>I</span>
  <span m=''2651140''>can</span> <span m=''2651310''>go</span> <span m=''2651450''>on</span>
  <span m=''2651820''>and</span> <span m=''2652090''>actually</span> <span m=''2652440''>do</span>
  <span m=''2652560''>my</span> <span m=''2652700''>work.</span> <span m=''2653260''>Does
  that</span> <span m=''2653370''>make</span> <span m=''2653490''>sense?</span> <span
  m=''2655590''>People are</span> <span m=''2655760''>confused?</span> <span m=''2656150''>Should
  I go</span> <span m=''2656400''>over it</span> <span m=''2656590''>again?</span>
  </p><p><span m=''2659772''>AUDIENCE:</span> <span m=''2660259''>[INAUDIBLE]</span>
  </p><p><span m=''2661720''>PROFESSOR: So</span> <span m=''2662000''>this</span>
  <span m=''2662260''>is</span> <span m=''2662590''>an</span> <span m=''2662710''>[?
  x or. ?]</span> <span m=''2664260''>So</span> <span m=''2664940''>I</span> <span
  m=''2665190''>could</span> <span m=''2665350''>have</span> <span m=''2666170''>just</span>
  <span m=''2666350''>said</span> <span m=''2666540''>buffer</span> <span m=''2666800''>equals</span>
  <span m=''2667100''>zero</span> <span m=''2667420''>or buffer</span> <span m=''2667710''>equals</span>
  <span m=''2668000''>one.</span> <span m=''2673220''>Oh,</span> <span m=''2673790''>sorry.</span>
  <span m=''2674410''>This is one. Yeah.</span> <span m=''2674690''>Yeah.</span> <span
  m=''2676980''>So</span> <span m=''2677500''>this</span> <span m=''2677880''>is</span>
  <span m=''2677970''>a</span> <span m=''2678050''>one</span> <span m=''2678220''>here.</span>
  <span m=''2680950''>Last-minute</span> <span m=''2681260''>editing.</span> <span
  m=''2681440''>It''s</span> <span m=''2681850''>right there.</span> <span m=''2683430''>Did
  that</span> <span m=''2683770''>confuse</span> <span m=''2683870''>you?</span> </p><p><span
  m=''2684672''>AUDIENCE: No.</span> <span m=''2685195''>But, like,</span> <span m=''2685718''>I
  don''t see</span> <span m=''2686241''>[INAUDIBLE]</span> </p><p><span m=''2687810''>PROFESSOR:
  Oh.</span> <span m=''2688140''>OK.</span> <span m=''2688410''>So I''ll</span> <span
  m=''2689090''>go over it</span> <span m=''2689730''>again.</span> <span m=''2690190''>So</span>
  <span m=''2690370''>this</span> <span m=''2690500''>get</span> <span m=''2690750''>here</span>
  <span m=''2691750''>is</span> <span m=''2691950''>going</span> <span m=''2692160''>to</span>
  <span m=''2692260''>write</span> <span m=''2692470''>into</span> <span m=''2692630''>ID</span>
  <span m=''2692930''>zero.</span> <span m=''2693600''>So</span> <span m=''2694020''>that''s</span>
  <span m=''2694870''>buffer</span> <span m=''2695300''>zero.</span> <span m=''2696500''>And</span>
  <span m=''2696690''>then</span> <span m=''2696920''>I''m</span> <span m=''2697010''>going</span>
  <span m=''2697170''>to</span> <span m=''2697250''>change</span> <span m=''2697560''>the</span>
  <span m=''2697660''>ID.</span> <span m=''2697930''>So</span> <span m=''2698250''>imagine</span>
  <span m=''2698620''>there''s</span> <span m=''2698780''>a one</span> <span m=''2699020''>here.</span>
  <span m=''2699400''>So</span> <span m=''2699550''>now</span> <span m=''2700230''>the</span>
  <span m=''2701410''>next</span> <span m=''2701700''>time</span> <span m=''2701840''>I</span>
  <span m=''2701910''>use</span> <span m=''2702140''>ID,</span> <span m=''2702450''>which</span>
  <span m=''2702670''>is</span> <span m=''2702770''>here,</span> <span m=''2703640''>I''m</span>
  <span m=''2703810''>trying</span> <span m=''2704080''>to</span> <span m=''2704190''>get</span>
  <span m=''2704380''>the</span> <span m=''2704460''>data.</span> <span m=''2704950''>And</span>
  <span m=''2705750''>I''m</span> <span m=''2705940''>going</span> <span m=''2706110''>to</span>
  <span m=''2706180''>write</span> <span m=''2706350''>it to</span> <span m=''2706460''>buffer</span>
  <span m=''2706790''>one.</span> </p><p><span m=''2707920''>The</span> <span m=''2708010''>DMA</span>
  <span m=''2708580''>on</span> <span m=''2708740''>the</span> <span m=''2708820''>Cell</span>
  <span m=''2709030''>processor</span> <span m=''2709510''>essentially</span> <span
  m=''2710160''>says</span> <span m=''2710480''>I</span> <span m=''2710570''>can</span>
  <span m=''2710940''>send</span> <span m=''2711270''>this</span> <span m=''2711390''>request</span>
  <span m=''2711780''>off</span> <span m=''2712170''>and</span> <span m=''2712560''>I</span>
  <span m=''2712680''>can</span> <span m=''2712930''>check</span> <span m=''2713220''>later</span>
  <span m=''2713800''>to</span> <span m=''2713880''>see</span> <span m=''2714020''>when</span>
  <span m=''2714340''>that</span> <span m=''2714450''>data is</span> <span m=''2714610''>available.</span>
  <span m=''2715710''>But</span> <span m=''2715920''>that</span> <span m=''2716110''>data</span>
  <span m=''2716370''>is</span> <span m=''2716470''>going</span> <span m=''2716660''>to</span>
  <span m=''2716820''>go</span> <span m=''2716990''>into a</span> <span m=''2717220''>different</span>
  <span m=''2717510''>buffer,</span> <span m=''2717940''>essentially</span> <span
  m=''2718300''>B1.</span> <span m=''2719420''>Whereas</span> <span m=''2719910''>I''m</span>
  <span m=''2720060''>going</span> <span m=''2720230''>to</span> <span m=''2720310''>work</span>
  <span m=''2720530''>on</span> <span m=''2720680''>buffer</span> <span m=''2720940''>zero.</span>
  <span m=''2722450''>Because</span> <span m=''2722800''>I</span> <span m=''2722940''>changed</span>
  <span m=''2723350''>the</span> <span m=''2723440''>ID</span> <span m=''2723590''>back</span>
  <span m=''2723840''>here.</span> <span m=''2725920''>Now</span> <span m=''2726070''>you</span>
  <span m=''2726200''>get it?</span> <span m=''2727610''>So</span> <span m=''2728120''>I</span>
  <span m=''2728260''>fetch</span> <span m=''2728580''>data</span> <span m=''2728870''>into</span>
  <span m=''2729060''>buffer</span> <span m=''2729340''>zero</span> <span m=''2730380''>initially</span>
  <span m=''2730790''>before</span> <span m=''2731040''>I</span> <span m=''2731080''>start
  to loop.</span> <span m=''2731540''>And</span> <span m=''2731690''>then</span> <span
  m=''2731800''>I</span> <span m=''2731880''>start</span> <span m=''2732160''>working.</span>
  <span m=''2734110''>I</span> <span m=''2734350''>probably</span> <span m=''2734620''>should</span>
  <span m=''2734780''>have</span> <span m=''2735030''>had an animation</span> <span
  m=''2735290''>in here.</span> </p><p><span m=''2736380''>So</span> <span m=''2736530''>then</span>
  <span m=''2736740''>you</span> <span m=''2736860''>go</span> <span m=''2737080''>into</span>
  <span m=''2738290''>your</span> <span m=''2738360''>main</span> <span m=''2738530''>loop.</span>
  <span m=''2739430''>You</span> <span m=''2739780''>try</span> <span m=''2739990''>to</span>
  <span m=''2740060''>start</span> <span m=''2740330''>fetching</span> <span m=''2740850''>into</span>
  <span m=''2741070''>buffet</span> <span m=''2741330''>one</span> <span m=''2742170''>and</span>
  <span m=''2742360''>then</span> <span m=''2742490''>you</span> <span m=''2742580''>try</span>
  <span m=''2742800''>to</span> <span m=''2742880''>compute</span> <span m=''2743300''>out</span>
  <span m=''2743450''>of</span> <span m=''2743550''>buffer</span> <span m=''2743790''>zero.</span>
  <span m=''2744280''>But</span> <span m=''2744480''>before</span> <span m=''2744740''>you</span>
  <span m=''2744830''>can</span> <span m=''2744960''>start</span> <span m=''2745170''>computing</span>
  <span m=''2745490''>out of</span> <span m=''2745780''>buffer</span> <span m=''2745890''>zero,</span>
  <span m=''2746130''>you</span> <span m=''2746280''>just</span> <span m=''2746460''>have
  to</span> <span m=''2746550''>make</span> <span m=''2746680''>sure</span> <span
  m=''2746840''>that your</span> <span m=''2747050''>data</span> <span m=''2747270''>is</span>
  <span m=''2747380''>there.</span> <span m=''2748250''>And</span> <span m=''2748390''>so</span>
  <span m=''2748510''>that''s</span> <span m=''2748700''>what</span> <span m=''2748860''>the</span>
  <span m=''2748960''>synchronization is doing</span> <span m=''2749730''>here.</span>
  <span m=''2752790''>Hope</span> <span m=''2752940''>that</span> <span m=''2753050''>was</span>
  <span m=''2753170''>clear.</span> <span m=''2755180''>OK,</span> <span m=''2755360''>so</span>
  <span m=''2755470''>this</span> <span m=''2755790''>kind</span> <span m=''2756080''>of</span>
  <span m=''2756840''>computation</span> <span m=''2757900''>and</span> <span m=''2758100''>communication</span>
  <span m=''2758710''>overlap</span> <span m=''2759730''>really</span> <span m=''2760010''>helps</span>
  <span m=''2760290''>in</span> <span m=''2760420''>hiding</span> <span m=''2760810''>the</span>
  <span m=''2760890''>latency.</span> <span m=''2761680''>And</span> <span m=''2762530''>it</span>
  <span m=''2762640''>can</span> <span m=''2762760''>be</span> <span m=''2763240''>real</span>
  <span m=''2763470''>useful</span> <span m=''2763890''>in</span> <span m=''2764100''>terms</span>
  <span m=''2764360''>of</span> <span m=''2764470''>improving</span> <span m=''2764990''>performance.</span>
  </p><p><span m=''2769720''>And</span> <span m=''2769980''>there are</span> <span
  m=''2770140''>different</span> <span m=''2770380''>kinds</span> <span m=''2770700''>of</span>
  <span m=''2770910''>communication</span> <span m=''2771480''>patterns.</span> <span
  m=''2773450''>So</span> <span m=''2773610''>there''s</span> <span m=''2773940''>point</span>
  <span m=''2774170''>to</span> <span m=''2774230''>point.</span> <span m=''2774720''>And</span>
  <span m=''2774940''>you</span> <span m=''2775040''>can</span> <span m=''2775190''>use</span>
  <span m=''2775440''>these</span> <span m=''2775690''>both</span> <span m=''2775990''>for</span>
  <span m=''2776250''>data</span> <span m=''2776900''>communication</span> <span m=''2777520''>or</span>
  <span m=''2777730''>control</span> <span m=''2778080''>communication.</span> <span
  m=''2779060''>And</span> <span m=''2779280''>it just</span> <span m=''2779480''>means</span>
  <span m=''2779730''>that,</span> <span m=''2779920''>you</span> <span m=''2780000''>know,</span>
  <span m=''2780080''>one</span> <span m=''2780290''>processor</span> <span m=''2780640''>can</span>
  <span m=''2780880''>explicitly</span> <span m=''2781340''>send</span> <span m=''2781550''>a</span>
  <span m=''2781590''>message</span> <span m=''2781960''>to</span> <span m=''2782070''>another</span>
  <span m=''2782330''>processor.</span> <span m=''2783580''>There''s</span> <span
  m=''2783780''>also</span> <span m=''2784100''>broadcast</span> <span m=''2784850''>that</span>
  <span m=''2785000''>says,</span> <span m=''2785670''>hey,</span> <span m=''2785810''>I</span>
  <span m=''2785920''>have</span> <span m=''2786100''>some</span> <span m=''2786240''>data
  that</span> <span m=''2786450''>everybody''s</span> <span m=''2786880''>interested</span>
  <span m=''2787260''>in,</span> <span m=''2787340''>so</span> <span m=''2787440''>I</span>
  <span m=''2787480''>can</span> <span m=''2787620''>just</span> <span m=''2787850''>broadcast</span>
  <span m=''2788460''>it to everybody</span> <span m=''2788890''>on</span> <span m=''2789000''>the</span>
  <span m=''2789080''>network.</span> <span m=''2791000''>Or a</span> <span m=''2791250''>reduce,</span>
  <span m=''2791670''>which</span> <span m=''2791890''>is</span> <span m=''2792260''>the</span>
  <span m=''2792320''>opposite.</span> <span m=''2792930''>It</span> <span m=''2793030''>says</span>
  <span m=''2793720''>everybody</span> <span m=''2794190''>on</span> <span m=''2794310''>the</span>
  <span m=''2794370''>network</span> <span m=''2794980''>has</span> <span m=''2795280''>data</span>
  <span m=''2795410''>that</span> <span m=''2795660''>I</span> <span m=''2795750''>need</span>
  <span m=''2796350''>to</span> <span m=''2796600''>compute,</span> <span m=''2797340''>so</span>
  <span m=''2797550''>everybody</span> <span m=''2797920''>send</span> <span m=''2798140''>me</span>
  <span m=''2798240''>their</span> <span m=''2798410''>data.</span> </p><p><span m=''2799840''>There''s</span>
  <span m=''2800010''>an</span> <span m=''2800100''>all to</span> <span m=''2800410''>all,</span>
  <span m=''2801270''>which</span> <span m=''2801450''>says</span> <span m=''2801940''>all</span>
  <span m=''2802110''>processors</span> <span m=''2802560''>should</span> <span m=''2802790''>just</span>
  <span m=''2803030''>do a</span> <span m=''2803230''>global</span> <span m=''2803570''>exchange</span>
  <span m=''2804060''>of</span> <span m=''2804690''>data</span> <span m=''2805180''>that</span>
  <span m=''2805280''>they</span> <span m=''2805390''>have.</span> <span m=''2806030''>And</span>
  <span m=''2806290''>then</span> <span m=''2806410''>there''s</span> <span m=''2806580''>a</span>
  <span m=''2806630''>scatter</span> <span m=''2807200''>and</span> <span m=''2807380''>a</span>
  <span m=''2807440''>gather.</span> <span m=''2808100''>So</span> <span m=''2808260''>a
  scatter</span> <span m=''2808710''>and a gather</span> <span m=''2809170''>are really</span>
  <span m=''2809800''>different</span> <span m=''2810150''>types</span> <span m=''2810520''>of</span>
  <span m=''2810810''>broadcast.</span> <span m=''2811400''>So</span> <span m=''2811530''>it''s</span>
  <span m=''2812700''>one</span> <span m=''2812930''>to</span> <span m=''2812990''>several</span>
  <span m=''2813580''>or</span> <span m=''2813720''>one</span> <span m=''2813930''>to</span>
  <span m=''2814060''>many.</span> <span m=''2814770''>And</span> <span m=''2815190''>gather,</span>
  <span m=''2815520''>which</span> <span m=''2815760''>is</span> <span m=''2816200''>many</span>
  <span m=''2816340''>to</span> <span m=''2816470''>one.</span> <span m=''2817340''>So</span>
  <span m=''2817580''>this</span> <span m=''2817780''>is</span> <span m=''2817910''>useful</span>
  <span m=''2818280''>when</span> <span m=''2818460''>you''re</span> <span m=''2818620''>doing</span>
  <span m=''2819200''>a</span> <span m=''2819530''>computation</span> <span m=''2820230''>that</span>
  <span m=''2820370''>really</span> <span m=''2820620''>is</span> <span m=''2820750''>trying</span>
  <span m=''2821010''>to</span> <span m=''2822980''>pull</span> <span m=''2823220''>data
  in</span> <span m=''2823590''>together</span> <span m=''2824020''>but</span> <span
  m=''2824230''>only</span> <span m=''2824460''>from a</span> <span m=''2824670''>subset</span>
  <span m=''2825010''>of</span> <span m=''2825130''>all</span> <span m=''2825260''>processors.</span>
  <span m=''2826260''>So</span> <span m=''2826400''>it</span> <span m=''2826490''>depends</span>
  <span m=''2826860''>on</span> <span m=''2827100''>how</span> <span m=''2827320''>you''ve</span>
  <span m=''2827470''>partitioned</span> <span m=''2828980''>your</span> <span m=''2829600''>problems.</span>
  </p><p><span m=''2832250''>So</span> <span m=''2833090''>there''s</span> <span m=''2833370''>a</span>
  <span m=''2834150''>well-known</span> <span m=''2834980''>sort</span> <span m=''2835170''>of</span>
  <span m=''2835290''>message</span> <span m=''2835620''>passing</span> <span m=''2836060''>library</span>
  <span m=''2836430''>specification</span> <span m=''2837140''>called</span> <span
  m=''2837500''>MPI</span> <span m=''2841760''>that</span> <span m=''2842090''>tries</span>
  <span m=''2842390''>to</span> <span m=''2842520''>specify</span> <span m=''2844270''>all</span>
  <span m=''2844570''>of</span> <span m=''2844720''>these</span> <span m=''2844950''>different</span>
  <span m=''2845230''>communications</span> <span m=''2847730''>in</span> <span m=''2847880''>order</span>
  <span m=''2848140''>to</span> <span m=''2848310''>sort</span> <span m=''2848460''>of</span>
  <span m=''2848530''>facilitate</span> <span m=''2849120''>parallel</span> <span
  m=''2849430''>programming.</span> <span m=''2850310''>Its</span> <span m=''2850500''>full</span>
  <span m=''2850700''>featured</span> <span m=''2851120''>actually</span> <span m=''2851490''>has</span>
  <span m=''2851730''>more</span> <span m=''2852490''>types</span> <span m=''2852790''>of</span>
  <span m=''2852910''>communications</span> <span m=''2854590''>and</span> <span m=''2855050''>more</span>
  <span m=''2855170''>kinds</span> <span m=''2855460''>of</span> <span m=''2855520''>functionality</span>
  <span m=''2856140''>than I</span> <span m=''2856290''>showed on</span> <span m=''2856660''>the</span>
  <span m=''2856810''>previous</span> <span m=''2857020''>slides.</span> <span m=''2858870''>But</span>
  <span m=''2859040''>it''s</span> <span m=''2859130''>not</span> <span m=''2859290''>a</span>
  <span m=''2859350''>language</span> <span m=''2859800''>or a</span> <span m=''2860060''>compiler</span>
  <span m=''2860470''>specification.</span> <span m=''2861360''>It''s</span> <span
  m=''2861460''>really</span> <span m=''2861750''>just</span> <span m=''2861960''>a</span>
  <span m=''2862040''>library</span> <span m=''2862560''>that</span> <span m=''2862690''>you</span>
  <span m=''2862790''>can</span> <span m=''2862940''>implement</span> <span m=''2863370''>in</span>
  <span m=''2863470''>various</span> <span m=''2863840''>ways</span> <span m=''2864110''>on</span>
  <span m=''2864240''>different</span> <span m=''2864500''>architectures.</span> </p><p><span
  m=''2865750''>Again,</span> <span m=''2866330''>it''s</span> <span m=''2866970''>same</span>
  <span m=''2867210''>program,</span> <span m=''2867620''>multiple</span> <span m=''2867990''>data,</span>
  <span m=''2869770''>or</span> <span m=''2870090''>supports</span> <span m=''2870480''>the</span>
  <span m=''2870720''>SPMD</span> <span m=''2871090''>model.</span> <span m=''2873080''>And</span>
  <span m=''2873410''>it</span> <span m=''2873490''>works</span> <span m=''2873710''>reasonably</span>
  <span m=''2874180''>well</span> <span m=''2874450''>for</span> <span m=''2874660''>parallel</span>
  <span m=''2875020''>architectures</span> <span m=''2875820''>for</span> <span m=''2875990''>clusters,</span>
  <span m=''2877300''>heterogeneous</span> <span m=''2878070''>multicores,</span>
  <span m=''2879580''>homogeneous</span> <span m=''2879760''>multicores.</span> <span
  m=''2881830''>Because</span> <span m=''2881990''>really</span> <span m=''2882270''>all</span>
  <span m=''2882410''>it''s</span> <span m=''2882580''>doing</span> <span m=''2882900''>is</span>
  <span m=''2883020''>just</span> <span m=''2883240''>abstracting</span> <span m=''2883780''>out
  --</span> <span m=''2885240''>it''s</span> <span m=''2885450''>giving</span> <span
  m=''2885680''>you a</span> <span m=''2885790''>mechanism</span> <span m=''2886260''>to</span>
  <span m=''2886370''>abstract</span> <span m=''2886820''>out</span> <span m=''2887890''>all</span>
  <span m=''2888050''>the</span> <span m=''2888130''>communication</span> <span m=''2888640''>that</span>
  <span m=''2888730''>you</span> <span m=''2888840''>would</span> <span m=''2888970''>need</span>
  <span m=''2889340''>in</span> <span m=''2889500''>your</span> <span m=''2889620''>computation.</span>
  <span m=''2891540''>So</span> <span m=''2891700''>you</span> <span m=''2891790''>can</span>
  <span m=''2891920''>have</span> <span m=''2893270''>additional</span> <span m=''2893680''>things</span>
  <span m=''2894020''>like</span> <span m=''2894600''>precise</span> <span m=''2895070''>buffer</span>
  <span m=''2895280''>management.</span> <span m=''2896370''>You</span> <span m=''2896570''>can</span>
  <span m=''2896680''>have</span> <span m=''2897350''>some</span> <span m=''2897800''>collective</span>
  <span m=''2898280''>operations.</span> <span m=''2899250''>I''ll show</span> <span
  m=''2899370''>an</span> <span m=''2899540''>example</span> <span m=''2900120''>of</span>
  <span m=''2901800''>for</span> <span m=''2901950''>doing</span> <span m=''2902400''>things</span>
  <span m=''2902690''>things in</span> <span m=''2902830''>a scalable</span> <span
  m=''2903140''>manner</span> <span m=''2905850''>when</span> <span m=''2905940''>a</span>
  <span m=''2906030''>lot</span> <span m=''2906210''>of</span> <span m=''2906290''>things
  need</span> <span m=''2906580''>to</span> <span m=''2906980''>communicate</span>
  <span m=''2907370''>with</span> <span m=''2907470''>each</span> <span m=''2907650''>other.</span>
  </p><p><span m=''2909140''>So just</span> <span m=''2909480''>a</span> <span m=''2909620''>brief</span>
  <span m=''2909990''>history</span> <span m=''2910500''>of</span> <span m=''2911130''>where</span>
  <span m=''2911580''>MPI</span> <span m=''2912000''>came</span> <span m=''2912270''>from.</span>
  <span m=''2912840''>And,</span> <span m=''2913390''>you</span> <span m=''2913570''>know,</span>
  <span m=''2913640''>very</span> <span m=''2913990''>early</span> <span m=''2914260''>when,</span>
  <span m=''2914710''>you</span> <span m=''2914790''>know,</span> <span m=''2914850''>parallel</span>
  <span m=''2915270''>computers</span> <span m=''2915760''>started</span> <span m=''2915990''>becoming</span>
  <span m=''2917020''>more and</span> <span m=''2917270''>more</span> <span m=''2917510''>widespread</span>
  <span m=''2918100''>and</span> <span m=''2918260''>there</span> <span m=''2918340''>were</span>
  <span m=''2918600''>these</span> <span m=''2918810''>networks</span> <span m=''2919230''>and</span>
  <span m=''2919370''>people</span> <span m=''2919630''>had</span> <span m=''2919850''>problems</span>
  <span m=''2920340''>porting</span> <span m=''2920720''>their</span> <span m=''2920800''>applications</span>
  <span m=''2922450''>or</span> <span m=''2922680''>writing</span> <span m=''2922960''>applications</span>
  <span m=''2923530''>for</span> <span m=''2923660''>these</span> <span m=''2923840''>[?
  came, ?]</span> <span m=''2924030''>just</span> <span m=''2924230''>because</span>
  <span m=''2924380''>it</span> <span m=''2924440''>was</span> <span m=''2924600''>difficult,</span>
  <span m=''2925340''>as</span> <span m=''2925540''>you</span> <span m=''2925610''>might</span>
  <span m=''2925770''>be</span> <span m=''2925860''>finding</span> <span m=''2926690''>in</span>
  <span m=''2926800''>terms</span> <span m=''2927040''>of</span> <span m=''2927160''>programming</span>
  <span m=''2927710''>things</span> <span m=''2928000''>with</span> <span m=''2928120''>the</span>
  <span m=''2928200''>Cell</span> <span m=''2928390''>processor.</span> <span m=''2930540''>You</span>
  <span m=''2930650''>know,</span> <span m=''2930740''>there</span> <span m=''2931050''>needed</span>
  <span m=''2931330''>to</span> <span m=''2931420''>be</span> <span m=''2931520''>ways
  to</span> <span m=''2931920''>sort</span> <span m=''2932060''>of</span> <span m=''2932170''>address</span>
  <span m=''2932680''>the</span> <span m=''2932800''>spectrum</span> <span m=''2933280''>of</span>
  <span m=''2933430''>communication.</span> <span m=''2934860''>And</span> <span m=''2935260''>it</span>
  <span m=''2935540''>often</span> <span m=''2935810''>helps</span> <span m=''2936040''>to</span>
  <span m=''2936130''>have</span> <span m=''2936310''>a</span> <span m=''2936370''>standard</span>
  <span m=''2936790''>because</span> <span m=''2937760''>if</span> <span m=''2937900''>everybody</span>
  <span m=''2938330''>implements</span> <span m=''2938740''>the</span> <span m=''2938840''>same</span>
  <span m=''2939100''>standard</span> <span m=''2940260''>specification,</span> <span
  m=''2941260''>that</span> <span m=''2941380''>allows</span> <span m=''2941680''>your</span>
  <span m=''2941750''>code</span> <span m=''2941980''>to</span> <span m=''2942080''>be</span>
  <span m=''2942180''>ported</span> <span m=''2942720''>around</span> <span m=''2943040''>from</span>
  <span m=''2943210''>one</span> <span m=''2943370''>architecture</span> <span m=''2943870''>to
  the other.</span> </p><p><span m=''2944710''>And</span> <span m=''2944940''>so</span>
  <span m=''2946290''>MPI</span> <span m=''2946630''>came</span> <span m=''2946890''>around.</span>
  <span m=''2948090''>The</span> <span m=''2948450''>forum</span> <span m=''2948920''>was</span>
  <span m=''2949890''>organized in</span> <span m=''2950310''>1992.</span> <span m=''2951130''>And</span>
  <span m=''2951350''>that</span> <span m=''2951380''>had</span> <span m=''2951860''>a</span>
  <span m=''2951940''>lot</span> <span m=''2952130''>of</span> <span m=''2952210''>people</span>
  <span m=''2952490''>participating</span> <span m=''2953160''>in</span> <span m=''2953260''>it</span>
  <span m=''2953360''>from</span> <span m=''2953980''>vendors,</span> <span m=''2954560''>you
  know,</span> <span m=''2954780''>people like</span> <span m=''2954990''>IBM,</span>
  <span m=''2955860''>a company</span> <span m=''2956110''>like</span> <span m=''2956310''>IBM,</span>
  <span m=''2957000''>Intel,</span> <span m=''2958780''>and</span> <span m=''2959840''>people</span>
  <span m=''2961320''>who</span> <span m=''2961690''>had</span> <span m=''2962000''>expertise</span>
  <span m=''2962570''>in</span> <span m=''2962780''>writing</span> <span m=''2963030''>libraries,</span>
  <span m=''2964640''>users</span> <span m=''2966270''>who</span> <span m=''2966370''>were</span>
  <span m=''2966480''>interested</span> <span m=''2966930''>in</span> <span m=''2967020''>using</span>
  <span m=''2967360''>these</span> <span m=''2967550''>kinds</span> <span m=''2967800''>of</span>
  <span m=''2968900''>specifications</span> <span m=''2970420''>to</span> <span m=''2970550''>do</span>
  <span m=''2970710''>their</span> <span m=''2970860''>computations,</span> <span
  m=''2971390''>so</span> <span m=''2971910''>scientific</span> <span m=''2974000''>people</span>
  <span m=''2974240''>who</span> <span m=''2974400''>were</span> <span m=''2974580''>in</span>
  <span m=''2974750''>the</span> <span m=''2975100''>scientific</span> <span m=''2975180''>domain.</span>
  <span m=''2976010''>And</span> <span m=''2976360''>it was</span> <span m=''2976800''>finished</span>
  <span m=''2977190''>in about</span> <span m=''2977450''>18</span> <span m=''2977840''>months.</span>
  <span m=''2978050''>I</span> <span m=''2978160''>don''t</span> <span m=''2978350''>know</span>
  <span m=''2978500''>if</span> <span m=''2978650''>that''s a</span> <span m=''2979220''>reasonably</span>
  <span m=''2979850''>long</span> <span m=''2980090''>time</span> <span m=''2980370''>or
  a short</span> <span m=''2980690''>time.</span> <span m=''2980950''>But</span> <span
  m=''2981080''>considering,</span> <span m=''2981820''>you know,</span> <span m=''2981970''>I</span>
  <span m=''2982060''>think</span> <span m=''2982310''>the</span> <span m=''2982370''>MPEG-4</span>
  <span m=''2983100''>standard</span> <span m=''2983430''>took</span> <span m=''2984340''>a</span>
  <span m=''2984520''>bit</span> <span m=''2984700''>longer</span> <span m=''2985010''>to</span>
  <span m=''2985140''>do,</span> <span m=''2987210''>as</span> <span m=''2987330''>a</span>
  <span m=''2987500''>comparison</span> <span m=''2987900''>point.</span> <span m=''2988170''>I</span>
  <span m=''2988220''>don''t</span> <span m=''2988390''>have</span> <span m=''2988510''>the</span>
  <span m=''2988580''>actual</span> <span m=''2989120''>data.</span> </p><p><span
  m=''2989880''>So</span> <span m=''2990660''>point-to-point</span> <span m=''2991190''>communication
  --</span> <span m=''2993270''>and</span> <span m=''2993780''>again,</span> <span
  m=''2994000''>a</span> <span m=''2994170''>reminder,</span> <span m=''2994780''>this</span>
  <span m=''2994910''>is</span> <span m=''2995010''>how</span> <span m=''2995110''>you</span>
  <span m=''2995220''>would</span> <span m=''2995320''>do</span> <span m=''2995430''>it</span>
  <span m=''2995520''>on</span> <span m=''2995670''>Cell.</span> <span m=''2996590''>These</span>
  <span m=''2996790''>are</span> <span m=''2997820''>SPE</span> <span m=''2999150''>sends</span>
  <span m=''2999470''>and</span> <span m=''2999570''>receives.</span> <span m=''3000300''>You</span>
  <span m=''3000420''>have</span> <span m=''3000830''>one</span> <span m=''3001010''>processor</span>
  <span m=''3002020''>that''s</span> <span m=''3002200''>sending</span> <span m=''3002490''>it</span>
  <span m=''3002710''>to</span> <span m=''3002790''>another</span> <span m=''3003030''>processor.</span>
  <span m=''3004660''>Or</span> <span m=''3004950''>you</span> <span m=''3005010''>have</span>
  <span m=''3005160''>some</span> <span m=''3005370''>network</span> <span m=''3005790''>in
  between.</span> <span m=''3006260''>And processor</span> <span m=''3006690''>A</span>
  <span m=''3006850''>can</span> <span m=''3007000''>essentially</span> <span m=''3007700''>send
  the</span> <span m=''3007980''>data</span> <span m=''3008430''>explicitly</span>
  <span m=''3008990''>to</span> <span m=''3009110''>processor</span> <span m=''3009570''>two.</span>
  <span m=''3011910''>And</span> <span m=''3012080''>the</span> <span m=''3012150''>message</span>
  <span m=''3012650''>in</span> <span m=''3012740''>this</span> <span m=''3012880''>case</span>
  <span m=''3013140''>would</span> <span m=''3013270''>include</span> <span m=''3014130''>how</span>
  <span m=''3014490''>the data is</span> <span m=''3014880''>packaged,</span> <span
  m=''3015750''>some</span> <span m=''3015990''>other</span> <span m=''3016140''>information</span>
  <span m=''3016630''>such</span> <span m=''3016850''>as</span> <span m=''3016980''>the</span>
  <span m=''3017060''>length</span> <span m=''3017240''>of</span> <span m=''3017340''>the</span>
  <span m=''3017400''>data,</span> <span m=''3018730''>destination,</span> <span m=''3019360''>possibly</span>
  <span m=''3019780''>some</span> <span m=''3019930''>tag</span> <span m=''3020230''>so
  you can</span> <span m=''3020570''>identify</span> <span m=''3021190''>the actual</span>
  <span m=''3021510''>communication.</span> <span m=''3022650''>And,</span> <span
  m=''3023040''>you</span> <span m=''3023150''>know,</span> <span m=''3023230''>there''s</span>
  <span m=''3024180''>an</span> <span m=''3024240''>actual</span> <span m=''3024540''>mapping</span>
  <span m=''3025960''>for</span> <span m=''3026100''>the</span> <span m=''3026180''>actual</span>
  <span m=''3026560''>functions</span> <span m=''3027010''>on</span> <span m=''3027280''>Cell.</span>
  <span m=''3029760''>And</span> <span m=''3029920''>there''s</span> <span m=''3030140''>a</span>
  <span m=''3030340''>get</span> <span m=''3030690''>for</span> <span m=''3030850''>the</span>
  <span m=''3030950''>send</span> <span m=''3031670''>and</span> <span m=''3032070''>a</span>
  <span m=''3032120''>put</span> <span m=''3032340''>for</span> <span m=''3032470''>the</span>
  <span m=''3032560''>receive.</span> </p><p><span m=''3039230''>So</span> <span m=''3039450''>there''s</span>
  <span m=''3039630''>a</span> <span m=''3039710''>question</span> <span m=''3040080''>of,</span>
  <span m=''3040520''>well,</span> <span m=''3040750''>how</span> <span m=''3040860''>do</span>
  <span m=''3040960''>I</span> <span m=''3041050''>know</span> <span m=''3041210''>if</span>
  <span m=''3041310''>my</span> <span m=''3041480''>data</span> <span m=''3041760''>actually</span>
  <span m=''3042350''>got</span> <span m=''3042570''>sent?</span> <span m=''3042880''>How</span>
  <span m=''3043020''>do</span> <span m=''3043120''>I</span> <span m=''3043190''>know</span>
  <span m=''3043360''>if it was</span> <span m=''3043620''>received?</span> <span
  m=''3045410''>And</span> <span m=''3045610''>there''s,</span> <span m=''3046230''>you</span>
  <span m=''3046350''>know,</span> <span m=''3046430''>you</span> <span m=''3046530''>can</span>
  <span m=''3046640''>think</span> <span m=''3046840''>of a</span> <span m=''3047150''>synchronous</span>
  <span m=''3048060''>send</span> <span m=''3049190''>and a</span> <span m=''3049340''>synchronous</span>
  <span m=''3049700''>receive,</span> <span m=''3050290''>or</span> <span m=''3050720''>asynchronous</span>
  <span m=''3051190''>communication.</span> <span m=''3052200''>So in the</span> <span
  m=''3052530''>synchronous</span> <span m=''3052880''>communication,</span> <span
  m=''3053500''>you</span> <span m=''3053570''>actually</span> <span m=''3053940''>wait</span>
  <span m=''3054220''>for</span> <span m=''3054380''>notification.</span> <span m=''3055390''>So</span>
  <span m=''3055540''>this is</span> <span m=''3055710''>kind</span> <span m=''3055920''>of</span>
  <span m=''3056030''>like</span> <span m=''3056210''>your</span> <span m=''3056350''>fax</span>
  <span m=''3056740''>machine.</span> <span m=''3057250''>You</span> <span m=''3057590''>put</span>
  <span m=''3057800''>something</span> <span m=''3058070''>into</span> <span m=''3058210''>your</span>
  <span m=''3058310''>fax.</span> <span m=''3058900''>It</span> <span m=''3059070''>goes</span>
  <span m=''3059330''>out</span> <span m=''3059490''>and you</span> <span m=''3059590''>eventually</span>
  <span m=''3059990''>get</span> <span m=''3060110''>a</span> <span m=''3060170''>beep</span>
  <span m=''3060440''>that</span> <span m=''3060570''>says</span> <span m=''3061020''>your</span>
  <span m=''3061190''>transmission was</span> <span m=''3061770''>OK.</span> <span
  m=''3062260''>Or</span> <span m=''3062710''>if</span> <span m=''3062850''>it</span>
  <span m=''3062920''>wasn''t</span> <span m=''3063160''>OK</span> <span m=''3063410''>then,</span>
  <span m=''3063810''>you</span> <span m=''3063990''>know,</span> <span m=''3064060''>you</span>
  <span m=''3064160''>get</span> <span m=''3064300''>a</span> <span m=''3064360''>message</span>
  <span m=''3064790''>that</span> <span m=''3064900''>says,</span> <span m=''3065700''>you</span>
  <span m=''3065810''>know,</span> <span m=''3065880''>something</span> <span m=''3066160''>went</span>
  <span m=''3066300''>wrong.</span> <span m=''3066630''>And</span> <span m=''3066800''>you</span>
  <span m=''3066880''>can</span> <span m=''3067240''>redo</span> <span m=''3067450''>your</span>
  <span m=''3068270''>communication.</span> <span m=''3069520''>An asynchronous</span>
  <span m=''3070050''>send</span> <span m=''3070390''>is</span> <span m=''3070630''>kind</span>
  <span m=''3070840''>of</span> <span m=''3070940''>like</span> <span m=''3071200''>your
  --</span> </p><p><span m=''3071730''>AUDIENCE: Most</span> <span m=''3072260''>[UNINTELLIGIBLE]</span>
  <span m=''3072790''>you</span> <span m=''3072878''>could</span> <span m=''3072966''>get</span>
  <span m=''3073055''>a</span> <span m=''3073143''>reply</span> <span m=''3073231''>too.</span>
  </p><p><span m=''3073320''>PROFESSOR: Yeah,</span> <span m=''3073600''>you can get</span>
  <span m=''3074070''>a reply.</span> <span m=''3075340''>Thanks.</span> <span m=''3076420''>An
  asynchronous</span> <span m=''3076870''>send,</span> <span m=''3077420''>it''s like</span>
  <span m=''3077540''>you</span> <span m=''3077740''>write</span> <span m=''3077960''>a</span>
  <span m=''3078010''>letter,</span> <span m=''3078240''>you</span> <span m=''3078360''>go</span>
  <span m=''3078480''>put</span> <span m=''3078680''>it in</span> <span m=''3078750''>the</span>
  <span m=''3078810''>mailbox,</span> <span m=''3079650''>and</span> <span m=''3079900''>you</span>
  <span m=''3079980''>don''t</span> <span m=''3080150''>know</span> <span m=''3080260''>whether</span>
  <span m=''3080550''>it</span> <span m=''3080680''>actually</span> <span m=''3081230''>made</span>
  <span m=''3081450''>it</span> <span m=''3081550''>into</span> <span m=''3082860''>the</span>
  <span m=''3082980''>actual</span> <span m=''3084660''>postman''s</span> <span m=''3085280''>bag</span>
  <span m=''3086100''>and</span> <span m=''3086360''>it was</span> <span m=''3086490''>delivered</span>
  <span m=''3086850''>to your</span> <span m=''3087040''>destination</span> <span
  m=''3089280''>or if it</span> <span m=''3089490''>was</span> <span m=''3089660''>actually</span>
  <span m=''3090130''>delivered.</span> <span m=''3090940''>So</span> <span m=''3092290''>you</span>
  <span m=''3092390''>only</span> <span m=''3092580''>know</span> <span m=''3092710''>that</span>
  <span m=''3092890''>the</span> <span m=''3092950''>message</span> <span m=''3093250''>was</span>
  <span m=''3093420''>sent.</span> <span m=''3094200''>You</span> <span m=''3094340''>know,</span>
  <span m=''3094430''>you</span> <span m=''3094510''>put</span> <span m=''3094690''>it
  in</span> <span m=''3094770''>the</span> <span m=''3094840''>mailbox.</span> <span
  m=''3096250''>But</span> <span m=''3096360''>you</span> <span m=''3096460''>don''t</span>
  <span m=''3096600''>know</span> <span m=''3096660''>anything</span> <span m=''3096990''>else</span>
  <span m=''3097180''>about</span> <span m=''3097410''>what</span> <span m=''3097550''>happened</span>
  <span m=''3097860''>to</span> <span m=''3097940''>the</span> <span m=''3098000''>message</span>
  <span m=''3099450''>along</span> <span m=''3099780''>the</span> <span m=''3099850''>way.</span>
  </p><p><span m=''3101100''>There''s</span> <span m=''3101290''>also</span> <span
  m=''3101600''>the</span> <span m=''3101670''>concept</span> <span m=''3102140''>of</span>
  <span m=''3102260''>a</span> <span m=''3102350''>blocking</span> <span m=''3102860''>versus</span>
  <span m=''3103220''>a</span> <span m=''3103530''>non-blocking</span> <span m=''3103860''>message.</span>
  <span m=''3104940''>So</span> <span m=''3105040''>this</span> <span m=''3105180''>is</span>
  <span m=''3106240''>orthogonal</span> <span m=''3106700''>really</span> <span m=''3107000''>to</span>
  <span m=''3107250''>synchronous</span> <span m=''3107700''>versus</span> <span m=''3108110''>asynchronous.</span>
  <span m=''3109930''>So in</span> <span m=''3110380''>blocking</span> <span m=''3111160''>messages,</span>
  <span m=''3112230''>a</span> <span m=''3112650''>sender</span> <span m=''3113010''>waits</span>
  <span m=''3113690''>until</span> <span m=''3114710''>there''s</span> <span m=''3114940''>some</span>
  <span m=''3115710''>signal</span> <span m=''3116170''>that</span> <span m=''3116300''>says</span>
  <span m=''3116690''>the</span> <span m=''3116780''>message</span> <span m=''3117120''>has</span>
  <span m=''3117280''>been</span> <span m=''3117420''>transmitted.</span> <span m=''3118440''>So</span>
  <span m=''3118970''>this</span> <span m=''3119240''>is,</span> <span m=''3119650''>for</span>
  <span m=''3119750''>example</span> <span m=''3120030''>if I''m</span> <span m=''3120220''>writing</span>
  <span m=''3120580''>data</span> <span m=''3121260''>into a</span> <span m=''3121590''>buffer,</span>
  <span m=''3123180''>and</span> <span m=''3123390''>the</span> <span m=''3123480''>buffer</span>
  <span m=''3123840''>essentially</span> <span m=''3124250''>gets</span> <span m=''3124440''>transmitted</span>
  <span m=''3124950''>to somebody</span> <span m=''3125350''>else,</span> <span m=''3126780''>we</span>
  <span m=''3127000''>wait</span> <span m=''3127310''>until</span> <span m=''3127570''>the</span>
  <span m=''3127670''>buffer is</span> <span m=''3128060''>empty.</span> <span m=''3130590''>And</span>
  <span m=''3130700''>what</span> <span m=''3130820''>that</span> <span m=''3130990''>means</span>
  <span m=''3131240''>is</span> <span m=''3131360''>that</span> <span m=''3131490''>somebody</span>
  <span m=''3131760''>has</span> <span m=''3131960''>read</span> <span m=''3132460''>it</span>
  <span m=''3132780''>on</span> <span m=''3133000''>the</span> <span m=''3133070''>other</span>
  <span m=''3133210''>end</span> <span m=''3133660''>or</span> <span m=''3133990''>somebody</span>
  <span m=''3134230''>has</span> <span m=''3134460''>drained that</span> <span m=''3134860''>buffer</span>
  <span m=''3135150''>from</span> <span m=''3135350''>somewhere</span> <span m=''3135620''>else.</span>
  </p><p><span m=''3136670''>The</span> <span m=''3136780''>receiver,</span> <span
  m=''3137360''>if</span> <span m=''3137530''>he''s</span> <span m=''3137740''>waiting</span>
  <span m=''3138060''>on</span> <span m=''3138240''>data,</span> <span m=''3138780''>well,</span>
  <span m=''3139070''>he</span> <span m=''3139240''>just</span> <span m=''3139500''>waits.</span>
  <span m=''3139820''>He</span> <span m=''3140090''>essentially</span> <span m=''3140390''>blocks</span>
  <span m=''3140900''>until</span> <span m=''3141300''>somebody</span> <span m=''3141570''>has</span>
  <span m=''3141700''>put</span> <span m=''3141850''>data</span> <span m=''3142320''>into
  the</span> <span m=''3142470''>buffer.</span> <span m=''3144110''>And</span> <span
  m=''3144310''>you</span> <span m=''3144380''>can</span> <span m=''3144530''>get</span>
  <span m=''3144680''>into</span> <span m=''3144900''>potential</span> <span m=''3145290''>deadlock</span>
  <span m=''3145660''>situations.</span> <span m=''3146470''>So</span> <span m=''3146760''>you</span>
  <span m=''3146930''>saw</span> <span m=''3147150''>deadlock</span> <span m=''3147590''>with</span>
  <span m=''3148150''>locks</span> <span m=''3148890''>in the</span> <span m=''3149120''>concurrency</span>
  <span m=''3149510''>talk.</span> <span m=''3150100''>I''m going</span> <span m=''3150230''>to</span>
  <span m=''3150320''>show</span> <span m=''3150500''>you a</span> <span m=''3150650''>different</span>
  <span m=''3150920''>kind</span> <span m=''3151180''>of</span> <span m=''3151710''>deadlock</span>
  <span m=''3152150''>example.</span> </p><p><span m=''3155200''>An</span> <span m=''3155330''>example</span>
  <span m=''3155810''>of</span> <span m=''3156250''>a</span> <span m=''3156390''>blocking</span>
  <span m=''3157940''>send</span> <span m=''3159090''>on</span> <span m=''3159290''>Cell
  --</span> <span m=''3160630''>allows</span> <span m=''3160970''>you</span> <span
  m=''3161040''>to</span> <span m=''3161200''>use</span> <span m=''3161400''>mailboxes.</span>
  <span m=''3163250''>Or</span> <span m=''3163650''>you</span> <span m=''3163830''>can</span>
  <span m=''3164750''>sort of use</span> <span m=''3165100''>mailboxes</span> <span
  m=''3165660''>for that.</span> <span m=''3167260''>Mailboxes</span> <span m=''3167740''>again</span>
  <span m=''3168000''>are</span> <span m=''3168270''>just</span> <span m=''3168490''>for</span>
  <span m=''3168850''>communicating</span> <span m=''3169280''>short</span> <span
  m=''3169560''>messages,</span> <span m=''3170050''>really,</span> <span m=''3170990''>not</span>
  <span m=''3171210''>necessarily</span> <span m=''3171640''>for</span> <span m=''3172200''>communicating</span>
  <span m=''3172660''>data</span> <span m=''3172890''>messages.</span> <span m=''3173910''>So</span>
  <span m=''3174160''>an</span> <span m=''3174270''>SPE</span> <span m=''3175270''>does
  some</span> <span m=''3175660''>work,</span> <span m=''3175980''>and</span> <span
  m=''3176100''>then</span> <span m=''3176210''>it</span> <span m=''3176300''>writes</span>
  <span m=''3176510''>out</span> <span m=''3176680''>a</span> <span m=''3176760''>message,</span>
  <span m=''3178340''>in</span> <span m=''3178500''>this</span> <span m=''3178620''>case</span>
  <span m=''3179420''>to</span> <span m=''3179580''>notify</span> <span m=''3180090''>the</span>
  <span m=''3180250''>PPU</span> <span m=''3180440''>that,</span> <span m=''3180710''>let''s</span>
  <span m=''3180910''>say,</span> <span m=''3181070''>it''s</span> <span m=''3181280''>done.</span>
  <span m=''3182750''>And</span> <span m=''3182940''>then</span> <span m=''3183070''>it</span>
  <span m=''3183140''>goes</span> <span m=''3183360''>on</span> <span m=''3183550''>and
  does</span> <span m=''3183750''>more</span> <span m=''3183920''>work.</span> <span
  m=''3184660''>And</span> <span m=''3184850''>then</span> <span m=''3185430''>it</span>
  <span m=''3185610''>wants to</span> <span m=''3185900''>notify</span> <span m=''3186500''>the</span>
  <span m=''3186620''>PPU</span> <span m=''3187110''>of</span> <span m=''3187200''>something</span>
  <span m=''3187490''>else.</span> <span m=''3188230''>So</span> <span m=''3188680''>in</span>
  <span m=''3188820''>this</span> <span m=''3188980''>case</span> <span m=''3189930''>this</span>
  <span m=''3190620''>particular</span> <span m=''3191140''>send</span> <span m=''3191560''>will</span>
  <span m=''3191690''>block</span> <span m=''3192190''>because,</span> <span m=''3192970''>let''s</span>
  <span m=''3193150''>say,</span> <span m=''3193320''>the</span> <span m=''3193430''>PPU</span>
  <span m=''3193770''>hasn''t</span> <span m=''3194120''>drained</span> <span m=''3194400''>its</span>
  <span m=''3194550''>mailbox.</span> <span m=''3194930''>It</span> <span m=''3195000''>hasn''t</span>
  <span m=''3195300''>read</span> <span m=''3195450''>the</span> <span m=''3195520''>mailbox.</span>
  <span m=''3196220''>So you</span> <span m=''3196430''>essentially</span> <span m=''3196760''>stop</span>
  <span m=''3197140''>and</span> <span m=''3197280''>wait</span> <span m=''3198540''>until</span>
  <span m=''3198900''>the</span> <span m=''3198990''>PPU</span> <span m=''3200240''>has,</span>
  <span m=''3200850''>you</span> <span m=''3200960''>know,</span> <span m=''3201330''>caught</span>
  <span m=''3201590''>up.</span> </p><p><span m=''3201810''>AUDIENCE: So all mailbox
  sends are blocking?</span> </p><p><span m=''3206860''>PROFESSOR: Yes.</span> <span
  m=''3207990''>David</span> <span m=''3208250''>says</span> <span m=''3208410''>yes.</span>
  <span m=''3216680''>A</span> <span m=''3217060''>non-blocking</span> <span m=''3217380''>send</span>
  <span m=''3218190''>is</span> <span m=''3218620''>something</span> <span m=''3219060''>that</span>
  <span m=''3219320''>essentially</span> <span m=''3219730''>allows</span> <span m=''3220060''>you</span>
  <span m=''3220200''>to</span> <span m=''3221610''>send</span> <span m=''3221820''>a</span>
  <span m=''3221860''>message</span> <span m=''3222200''>out</span> <span m=''3222470''>and</span>
  <span m=''3223460''>just</span> <span m=''3223690''>continue</span> <span m=''3224020''>on.</span>
  <span m=''3224400''>You</span> <span m=''3224530''>don''t</span> <span m=''3224680''>care</span>
  <span m=''3225900''>exactly</span> <span m=''3226470''>about</span> <span m=''3227490''>what''s</span>
  <span m=''3227770''>happened</span> <span m=''3228090''>to</span> <span m=''3228190''>the</span>
  <span m=''3228250''>message</span> <span m=''3228650''>or</span> <span m=''3229100''>what''s</span>
  <span m=''3229430''>going</span> <span m=''3229690''>on</span> <span m=''3229850''>with</span>
  <span m=''3229980''>the</span> <span m=''3230070''>receiver.</span> <span m=''3231910''>So</span>
  <span m=''3232270''>you</span> <span m=''3232510''>write the</span> <span m=''3232760''>data</span>
  <span m=''3233030''>into</span> <span m=''3233530''>the</span> <span m=''3233900''>buffer</span>
  <span m=''3234280''>and you</span> <span m=''3234530''>just</span> <span m=''3234810''>continue</span>
  <span m=''3235160''>executing.</span> <span m=''3236040''>And</span> <span m=''3236340''>this</span>
  <span m=''3236440''>really</span> <span m=''3236700''>helps</span> <span m=''3236960''>you</span>
  <span m=''3237230''>in</span> <span m=''3237360''>terms</span> <span m=''3237620''>of</span>
  <span m=''3237720''>avoiding</span> <span m=''3238120''>idle</span> <span m=''3238400''>times</span>
  <span m=''3238740''>and</span> <span m=''3238850''>deadlocks,</span> <span m=''3239380''>but</span>
  <span m=''3239550''>it</span> <span m=''3239620''>might</span> <span m=''3239780''>not</span>
  <span m=''3239970''>always</span> <span m=''3240270''>be</span> <span m=''3240470''>the</span>
  <span m=''3240560''>thing</span> <span m=''3240730''>that</span> <span m=''3240850''>you</span>
  <span m=''3240950''>want.</span> </p><p><span m=''3241840''>So</span> <span m=''3241960''>an</span>
  <span m=''3242060''>example</span> <span m=''3242570''>of</span> <span m=''3243270''>sort</span>
  <span m=''3243410''>of</span> <span m=''3243500''>a</span> <span m=''3243540''>non-blocking</span>
  <span m=''3244870''>send</span> <span m=''3245270''>and</span> <span m=''3245410''>wait</span>
  <span m=''3245770''>on</span> <span m=''3245970''>Cell</span> <span m=''3246320''>is</span>
  <span m=''3246500''>using</span> <span m=''3246750''>the</span> <span m=''3246830''>DMAs</span>
  <span m=''3247990''>to</span> <span m=''3248340''>ship</span> <span m=''3248610''>data</span>
  <span m=''3248830''>out.</span> <span m=''3249170''>You</span> <span m=''3249240''>know,</span>
  <span m=''3249300''>you</span> <span m=''3249360''>can</span> <span m=''3249470''>put</span>
  <span m=''3249730''>something,</span> <span m=''3250540''>put</span> <span m=''3250730''>in</span>
  <span m=''3250850''>a</span> <span m=''3250900''>request</span> <span m=''3251370''>to</span>
  <span m=''3251580''>send</span> <span m=''3251820''>data</span> <span m=''3251940''>out</span>
  <span m=''3252400''>on</span> <span m=''3252540''>the</span> <span m=''3252610''>DMA.</span>
  <span m=''3253910''>And</span> <span m=''3254010''>you</span> <span m=''3254070''>could</span>
  <span m=''3254270''>wait</span> <span m=''3254460''>for</span> <span m=''3254680''>it</span>
  <span m=''3254740''>if</span> <span m=''3254850''>you</span> <span m=''3254930''>want</span>
  <span m=''3255740''>in</span> <span m=''3255830''>terms</span> <span m=''3256100''>of</span>
  <span m=''3258920''>reading</span> <span m=''3259190''>the</span> <span m=''3259280''>status</span>
  <span m=''3259610''>bits</span> <span m=''3259830''>to</span> <span m=''3259920''>make</span>
  <span m=''3260040''>sure</span> <span m=''3260240''>it''s</span> <span m=''3260380''>completed.</span>
  </p><p><span m=''3262680''>OK,</span> <span m=''3262870''>so</span> <span m=''3263770''>what</span>
  <span m=''3263910''>is</span> <span m=''3264020''>a</span> <span m=''3264100''>source</span>
  <span m=''3264420''>of</span> <span m=''3264710''>deadlock</span> <span m=''3265300''>in</span>
  <span m=''3265450''>the</span> <span m=''3265530''>blocking</span> <span m=''3265890''>case?</span>
  <span m=''3267530''>And</span> <span m=''3267800''>it</span> <span m=''3267870''>really</span>
  <span m=''3268100''>comes</span> <span m=''3268330''>about</span> <span m=''3268660''>if</span>
  <span m=''3268930''>you</span> <span m=''3269020''>don''t</span> <span m=''3269340''>really</span>
  <span m=''3269570''>have</span> <span m=''3269840''>enough</span> <span m=''3270130''>buffering</span>
  <span m=''3270800''>in</span> <span m=''3271060''>your</span> <span m=''3271220''>communication</span>
  <span m=''3271840''>network.</span> <span m=''3273140''>And</span> <span m=''3273510''>often</span>
  <span m=''3273770''>you</span> <span m=''3273840''>can</span> <span m=''3273980''>resolve</span>
  <span m=''3274280''>that</span> <span m=''3274450''>by</span> <span m=''3274560''>having</span>
  <span m=''3274840''>additional</span> <span m=''3275210''>storage.</span> <span
  m=''3276300''>So</span> <span m=''3276630''>let''s say I have</span> <span m=''3276980''>processor</span>
  <span m=''3277390''>one</span> <span m=''3277670''>and</span> <span m=''3277750''>processor</span>
  <span m=''3278250''>two</span> <span m=''3278540''>and</span> <span m=''3278700''>they''re</span>
  <span m=''3278820''>trying</span> <span m=''3279070''>to</span> <span m=''3279140''>send</span>
  <span m=''3279350''>messages</span> <span m=''3279750''>to</span> <span m=''3279820''>each</span>
  <span m=''3280050''>other.</span> <span m=''3281000''>So</span> <span m=''3281830''>processor</span>
  <span m=''3282190''>one</span> <span m=''3282420''>sends</span> <span m=''3282640''>a</span>
  <span m=''3282690''>message</span> <span m=''3283120''>at</span> <span m=''3283190''>the</span>
  <span m=''3283270''>same</span> <span m=''3283490''>time</span> <span m=''3283710''>processor</span>
  <span m=''3284150''>two</span> <span m=''3284290''>sends</span> <span m=''3284530''>a</span>
  <span m=''3284610''>message.</span> <span m=''3285170''>And</span> <span m=''3285290''>these</span>
  <span m=''3285970''>are</span> <span m=''3286200''>going</span> <span m=''3286400''>to</span>
  <span m=''3286480''>go,</span> <span m=''3286720''>let''s say,</span> <span m=''3286990''>into</span>
  <span m=''3287210''>the</span> <span m=''3287290''>same</span> <span m=''3287520''>buffer.</span>
  <span m=''3289200''>Well,</span> <span m=''3289520''>neither</span> <span m=''3289710''>can</span>
  <span m=''3289840''>make</span> <span m=''3290020''>progress</span> <span m=''3291040''>because</span>
  <span m=''3293380''>somebody</span> <span m=''3293700''>has to</span> <span m=''3293930''>essentially</span>
  <span m=''3294410''>drain that</span> <span m=''3294750''>buffer</span> <span m=''3295020''>before</span>
  <span m=''3295350''>these</span> <span m=''3295630''>receives</span> <span m=''3295930''>can</span>
  <span m=''3296070''>execute.</span> </p><p><span m=''3300350''>So</span> <span m=''3300940''>what</span>
  <span m=''3301100''>happens</span> <span m=''3301420''>with</span> <span m=''3301530''>that</span>
  <span m=''3302030''>code is it</span> <span m=''3302110''>really</span> <span m=''3302320''>depends</span>
  <span m=''3302710''>on</span> <span m=''3302860''>how</span> <span m=''3302990''>much</span>
  <span m=''3303150''>buffering</span> <span m=''3303510''>you</span> <span m=''3303580''>have</span>
  <span m=''3303850''>between</span> <span m=''3304150''>the</span> <span m=''3304240''>two.</span>
  <span m=''3304830''>If</span> <span m=''3304920''>you</span> <span m=''3305000''>have</span>
  <span m=''3305130''>a</span> <span m=''3305190''>lot</span> <span m=''3305380''>of</span>
  <span m=''3305490''>buffering,</span> <span m=''3305810''>then</span> <span m=''3305940''>you</span>
  <span m=''3306030''>may</span> <span m=''3306140''>never</span> <span m=''3306370''>see</span>
  <span m=''3307290''>the</span> <span m=''3307370''>deadlock.</span> <span m=''3308000''>But</span>
  <span m=''3310780''>if</span> <span m=''3310890''>you</span> <span m=''3310980''>have
  a</span> <span m=''3311120''>really</span> <span m=''3311590''>tiny</span> <span
  m=''3311880''>buffer,</span> <span m=''3312260''>then</span> <span m=''3313090''>you</span>
  <span m=''3313230''>do</span> <span m=''3313360''>a send.</span> <span m=''3313930''>The</span>
  <span m=''3314020''>other</span> <span m=''3314140''>person</span> <span m=''3314650''>can''t</span>
  <span m=''3314910''>do</span> <span m=''3315010''>the</span> <span m=''3315180''>send</span>
  <span m=''3315950''>because</span> <span m=''3317360''>the</span> <span m=''3317560''>buffer</span>
  <span m=''3317860''>hasn''t</span> <span m=''3318180''>been</span> <span m=''3318420''>drained.</span>
  <span m=''3318970''>And</span> <span m=''3319120''>so</span> <span m=''3319360''>you</span>
  <span m=''3319540''>end</span> <span m=''3319650''>up</span> <span m=''3319770''>with</span>
  <span m=''3319880''>a</span> <span m=''3319940''>deadlock.</span> <span m=''3321220''>And</span>
  <span m=''3321370''>so a</span> <span m=''3321500''>potential</span> <span m=''3321910''>solution</span>
  <span m=''3322600''>is,</span> <span m=''3322920''>well,</span> <span m=''3323130''>you</span>
  <span m=''3323260''>actually</span> <span m=''3323600''>increase</span> <span m=''3323960''>your</span>
  <span m=''3324070''>buffer</span> <span m=''3324340''>length.</span> <span m=''3324620''>But</span>
  <span m=''3324890''>that</span> <span m=''3325030''>doesn''t</span> <span m=''3325250''>always</span>
  <span m=''3325510''>work</span> <span m=''3325860''>because</span> <span m=''3326080''>you
  can</span> <span m=''3326170''>still</span> <span m=''3326360''>get</span> <span
  m=''3326500''>into</span> <span m=''3326660''>trouble.</span> </p><p><span m=''3327480''>So</span>
  <span m=''3327780''>what</span> <span m=''3328050''>you</span> <span m=''3328180''>might</span>
  <span m=''3328430''>need</span> <span m=''3328580''>to</span> <span m=''3328670''>do</span>
  <span m=''3328870''>is</span> <span m=''3329010''>essentially</span> <span m=''3329470''>be</span>
  <span m=''3329800''>more</span> <span m=''3330040''>diligent</span> <span m=''3330700''>about</span>
  <span m=''3331060''>how</span> <span m=''3331250''>you</span> <span m=''3331400''>order</span>
  <span m=''3331660''>your</span> <span m=''3331840''>sends</span> <span m=''3332170''>and</span>
  <span m=''3332280''>receives.</span> <span m=''3333990''>So</span> <span m=''3334220''>if</span>
  <span m=''3334350''>you</span> <span m=''3334460''>have</span> <span m=''3334900''>processor</span>
  <span m=''3335400''>one</span> <span m=''3335700''>doing</span> <span m=''3335960''>a
  send,</span> <span m=''3336260''>make</span> <span m=''3336380''>sure</span> <span
  m=''3336570''>it''s</span> <span m=''3336740''>matched</span> <span m=''3337140''>up</span>
  <span m=''3337330''>with</span> <span m=''3337500''>a</span> <span m=''3337570''>receive</span>
  <span m=''3337940''>on</span> <span m=''3338050''>the</span> <span m=''3338150''>other</span>
  <span m=''3338280''>end.</span> <span m=''3339400''>And</span> <span m=''3340290''>similarly,</span>
  <span m=''3340620''>if</span> <span m=''3340760''>you''re</span> <span m=''3340860''>doing</span>
  <span m=''3341140''>a receive</span> <span m=''3341520''>here,</span> <span m=''3341730''>make</span>
  <span m=''3341880''>sure</span> <span m=''3342050''>there''s</span> <span m=''3342560''>sort
  of a</span> <span m=''3342790''>matching</span> <span m=''3343280''>send</span>
  <span m=''3343710''>on</span> <span m=''3343890''>the other end.</span> <span m=''3344100''>And</span>
  <span m=''3344790''>that</span> <span m=''3344910''>helps</span> <span m=''3345170''>you</span>
  <span m=''3345270''>in</span> <span m=''3345370''>sort</span> <span m=''3345550''>of</span>
  <span m=''3345650''>making</span> <span m=''3345870''>sure</span> <span m=''3346090''>that</span>
  <span m=''3346540''>things</span> <span m=''3346810''>are</span> <span m=''3346870''>operating</span>
  <span m=''3347990''>reasonably</span> <span m=''3348450''>in</span> <span m=''3348560''>lock</span>
  <span m=''3348820''>step</span> <span m=''3350100''>at,</span> <span m=''3350470''>you</span>
  <span m=''3350570''>know,</span> <span m=''3350700''>partially</span> <span m=''3351160''>ordered</span>
  <span m=''3351380''>times.</span> </p><p><span m=''3359750''>That was</span> <span
  m=''3360000''>really</span> <span m=''3360770''>examples</span> <span m=''3361220''>of</span>
  <span m=''3361310''>point-to-point</span> <span m=''3362830''>communication.</span>
  <span m=''3363600''>A broadcast</span> <span m=''3364250''>mechanism</span> <span
  m=''3365050''>is slightly</span> <span m=''3365410''>different.</span> <span m=''3365990''>It</span>
  <span m=''3366160''>says,</span> <span m=''3366520''>I</span> <span m=''3366680''>have</span>
  <span m=''3366900''>data</span> <span m=''3367530''>that</span> <span m=''3367770''>I
  want</span> <span m=''3368070''>to</span> <span m=''3368160''>send to</span> <span
  m=''3368380''>everybody.</span> <span m=''3369190''>It could</span> <span m=''3369300''>be</span>
  <span m=''3369380''>really</span> <span m=''3369650''>efficient</span> <span m=''3370030''>for</span>
  <span m=''3370840''>sending</span> <span m=''3371140''>short</span> <span m=''3371450''>control</span>
  <span m=''3371750''>messages,</span> <span m=''3372590''>maybe</span> <span m=''3372820''>even</span>
  <span m=''3373050''>efficient</span> <span m=''3373410''>for</span> <span m=''3373510''>sending</span>
  <span m=''3373780''>data</span> <span m=''3373990''>messages.</span> <span m=''3375570''>So</span>
  <span m=''3375820''>as</span> <span m=''3375960''>an</span> <span m=''3376050''>example,</span>
  <span m=''3376670''>if you</span> <span m=''3376880''>remember</span> <span m=''3377830''>our
  calculation</span> <span m=''3378520''>of</span> <span m=''3378950''>distances</span>
  <span m=''3379420''>between</span> <span m=''3379750''>all</span> <span m=''3379940''>points,</span>
  <span m=''3381050''>the</span> <span m=''3381240''>parallelization</span> <span
  m=''3381960''>strategy</span> <span m=''3382380''>said,</span> <span m=''3382700''>well,</span>
  <span m=''3382890''>I''m</span> <span m=''3383000''>going</span> <span m=''3383180''>to</span>
  <span m=''3383300''>send</span> <span m=''3383740''>one</span> <span m=''3383940''>copy</span>
  <span m=''3384430''>of</span> <span m=''3384900''>the</span> <span m=''3385060''>array</span>
  <span m=''3385280''>A to</span> <span m=''3385630''>everybody.</span> <span m=''3388370''>In
  the</span> <span m=''3388470''>two</span> <span m=''3388550''>processor</span> <span
  m=''3388920''>case</span> <span m=''3389190''>that</span> <span m=''3389340''>was</span>
  <span m=''3389460''>easy.</span> <span m=''3389820''>But</span> <span m=''3389970''>if</span>
  <span m=''3390090''>I</span> <span m=''3390190''>have</span> <span m=''3390450''>n</span>
  <span m=''3390650''>processors,</span> <span m=''3391590''>then</span> <span m=''3391780''>rather</span>
  <span m=''3392050''>than</span> <span m=''3392260''>sending</span> <span m=''3392730''>point-to-point</span>
  <span m=''3393210''>communication</span> <span m=''3393800''>from</span> <span m=''3394060''>A
  to</span> <span m=''3394430''>everybody</span> <span m=''3394750''>else,</span>
  <span m=''3395440''>what</span> <span m=''3395570''>I</span> <span m=''3395630''>could</span>
  <span m=''3395810''>do</span> <span m=''3395980''>is</span> <span m=''3396130''>just,</span>
  <span m=''3396280''>say,</span> <span m=''3396620''>broadcast</span> <span m=''3397180''>A
  to</span> <span m=''3397370''>everybody</span> <span m=''3398120''>and</span> <span
  m=''3398300''>they</span> <span m=''3398400''>can</span> <span m=''3398610''>grab</span>
  <span m=''3398800''>it</span> <span m=''3399890''>off</span> <span m=''3400120''>the</span>
  <span m=''3400190''>network.</span> </p><p><span m=''3401420''>So</span> <span m=''3401620''>in</span>
  <span m=''3401750''>MPI</span> <span m=''3402320''>there''s</span> <span m=''3402670''>this</span>
  <span m=''3404420''>function,</span> <span m=''3405000''>MPI</span> <span m=''3405210''>broadcast,</span>
  <span m=''3405990''>that does that.</span> <span m=''3406560''>I''m</span> <span
  m=''3406720''>using</span> <span m=''3407070''>sort</span> <span m=''3407260''>of</span>
  <span m=''3407470''>generic</span> <span m=''3410120''>abstract</span> <span m=''3410870''>sends,</span>
  <span m=''3411240''>receives</span> <span m=''3411610''>and</span> <span m=''3411700''>broadcasts</span>
  <span m=''3412310''>in my</span> <span m=''3412420''>examples.</span> <span m=''3413350''>So
  you can</span> <span m=''3413610''>broadcast</span> <span m=''3414320''>A to</span>
  <span m=''3414580''>everybody.</span> <span m=''3415600''>And</span> <span m=''3415820''>then</span>
  <span m=''3417620''>if</span> <span m=''3417730''>I</span> <span m=''3417810''>have</span>
  <span m=''3418160''>n</span> <span m=''3418350''>processors,</span> <span m=''3418890''>then</span>
  <span m=''3419130''>what</span> <span m=''3419350''>I</span> <span m=''3419470''>might</span>
  <span m=''3419550''>do is</span> <span m=''3420320''>distribute</span> <span m=''3421030''>the
  m''s</span> <span m=''3421650''>in</span> <span m=''3421780''>a round</span> <span
  m=''3422080''>robin</span> <span m=''3422370''>manner</span> <span m=''3423020''>to
  each</span> <span m=''3423260''>of the</span> <span m=''3423360''>different</span>
  <span m=''3423630''>processes.</span> <span m=''3424230''>So</span> <span m=''3424700''>you</span>
  <span m=''3424820''>pointed</span> <span m=''3425130''>this</span> <span m=''3425260''>out.</span>
  <span m=''3425710''>I</span> <span m=''3425790''>don''t</span> <span m=''3425950''>have</span>
  <span m=''3426080''>to</span> <span m=''3426170''>send</span> <span m=''3426460''>B
  to</span> <span m=''3426730''>everybody.</span> <span m=''3427180''>I</span> <span
  m=''3427260''>can</span> <span m=''3427400''>just</span> <span m=''3427570''>send,</span>
  <span m=''3428580''>you</span> <span m=''3428720''>know,</span> <span m=''3428800''>in</span>
  <span m=''3428930''>this</span> <span m=''3429060''>case,</span> <span m=''3429390''>one</span>
  <span m=''3429620''>particular</span> <span m=''3429970''>element.</span> <span
  m=''3430420''>Is</span> <span m=''3432330''>that</span> <span m=''3432560''>clear?</span>
  </p><p><span m=''3436838''>AUDIENCE: There''s no broadcast</span> <span m=''3437296''>on</span>
  <span m=''3437754''>Cell?</span> </p><p><span m=''3438670''>PROFESSOR: There</span>
  <span m=''3438830''>is</span> <span m=''3438960''>no</span> <span m=''3439080''>broadcast</span>
  <span m=''3439540''>on</span> <span m=''3439650''>Cell.</span> <span m=''3441210''>There</span>
  <span m=''3441440''>is</span> <span m=''3441640''>no</span> <span m=''3442090''>mechanism</span>
  <span m=''3442590''>for</span> <span m=''3442860''>reduction</span> <span m=''3443340''>either.</span>
  <span m=''3445680''>And</span> <span m=''3446410''>you</span> <span m=''3446610''>can''t</span>
  <span m=''3446840''>quite</span> <span m=''3447150''>do</span> <span m=''3447760''>scatters</span>
  <span m=''3448400''>and</span> <span m=''3448560''>gathers.</span> <span m=''3450340''>I
  don''t think.</span> <span m=''3452430''>OK,</span> <span m=''3452630''>so</span>
  <span m=''3453050''>an</span> <span m=''3453140''>example</span> <span m=''3453500''>of</span>
  <span m=''3453590''>a</span> <span m=''3453680''>reduction,</span> <span m=''3454780''>you
  know,</span> <span m=''3454940''>I</span> <span m=''3455120''>said</span> <span
  m=''3455380''>it''s the</span> <span m=''3455550''>opposite</span> <span m=''3455950''>of</span>
  <span m=''3456020''>a</span> <span m=''3456100''>broadcast.</span> <span m=''3456730''>Everybody</span>
  <span m=''3457150''>has</span> <span m=''3457400''>data</span> <span m=''3457650''>that</span>
  <span m=''3457820''>needs</span> <span m=''3458060''>to</span> <span m=''3458230''>essentially</span>
  <span m=''3458500''>get to</span> <span m=''3458660''>the</span> <span m=''3458820''>same</span>
  <span m=''3459060''>point.</span> <span m=''3459860''>So</span> <span m=''3460370''>as</span>
  <span m=''3460650''>an</span> <span m=''3460740''>example,</span> <span m=''3461830''>if</span>
  <span m=''3462280''>everybody</span> <span m=''3462780''>in</span> <span m=''3462900''>this</span>
  <span m=''3463040''>room</span> <span m=''3463390''>had</span> <span m=''3463840''>a</span>
  <span m=''3463950''>value,</span> <span m=''3465610''>including</span> <span m=''3465990''>myself,</span>
  <span m=''3466400''>and</span> <span m=''3466500''>I</span> <span m=''3466550''>wanted</span>
  <span m=''3466830''>to</span> <span m=''3466910''>know</span> <span m=''3467070''>what</span>
  <span m=''3467240''>is</span> <span m=''3467360''>the</span> <span m=''3467430''>collective</span>
  <span m=''3467770''>value of</span> <span m=''3468180''>everybody</span> <span m=''3468510''>in</span>
  <span m=''3468580''>the</span> <span m=''3468660''>room,</span> <span m=''3469110''>you
  all</span> <span m=''3469420''>have</span> <span m=''3469570''>to</span> <span m=''3469670''>send
  me</span> <span m=''3469900''>your</span> <span m=''3470070''>data.</span> </p><p><span
  m=''3470840''>Now,</span> <span m=''3471090''>this</span> <span m=''3471240''>is</span>
  <span m=''3471340''>important</span> <span m=''3471780''>because</span> <span m=''3472520''>if
  --</span> <span m=''3473110''>you</span> <span m=''3473240''>know,</span> <span
  m=''3473350''>in</span> <span m=''3473430''>this</span> <span m=''3473560''>case</span>
  <span m=''3473800''>we''re</span> <span m=''3473920''>doing</span> <span m=''3474150''>an</span>
  <span m=''3474250''>addition.</span> <span m=''3474700''>It''s</span> <span m=''3474840''>an</span>
  <span m=''3474920''>associative</span> <span m=''3475360''>operation.</span> <span
  m=''3476290''>So</span> <span m=''3476560''>what</span> <span m=''3476660''>we</span>
  <span m=''3476760''>can</span> <span m=''3476890''>do</span> <span m=''3477040''>is</span>
  <span m=''3477180''>we</span> <span m=''3477260''>can</span> <span m=''3477380''>be</span>
  <span m=''3477500''>smart</span> <span m=''3477830''>about</span> <span m=''3478050''>how</span>
  <span m=''3478220''>the</span> <span m=''3478330''>data</span> <span m=''3478530''>is</span>
  <span m=''3478700''>sent.</span> <span m=''3479350''>So,</span> <span m=''3479900''>you</span>
  <span m=''3480160''>know,</span> <span m=''3480260''>guys</span> <span m=''3480720''>that
  are</span> <span m=''3480930''>close</span> <span m=''3481220''>together</span>
  <span m=''3481550''>can</span> <span m=''3481680''>essentially</span> <span m=''3482160''>add</span>
  <span m=''3482360''>up</span> <span m=''3482460''>their</span> <span m=''3482590''>numbers</span>
  <span m=''3482910''>and</span> <span m=''3483010''>forward</span> <span m=''3483260''>me.</span>
  <span m=''3483420''>So</span> <span m=''3483590''>instead</span> <span m=''3483870''>of</span>
  <span m=''3483980''>getting</span> <span m=''3484450''>n</span> <span m=''3484650''>messages</span>
  <span m=''3485050''>I</span> <span m=''3485120''>can</span> <span m=''3485240''>get</span>
  <span m=''3485370''>log n</span> <span m=''3485710''>messages.</span> <span m=''3486520''>And</span>
  <span m=''3486690''>so</span> <span m=''3486780''>if</span> <span m=''3486880''>every</span>
  <span m=''3487090''>pair</span> <span m=''3487390''>of</span> <span m=''3487490''>you</span>
  <span m=''3487620''>added</span> <span m=''3487900''>your</span> <span m=''3488040''>numbers</span>
  <span m=''3488340''>and</span> <span m=''3488450''>forwarded</span> <span m=''3488680''>me
  that,</span> <span m=''3489200''>that</span> <span m=''3489310''>cuts</span> <span
  m=''3489590''>down</span> <span m=''3489790''>communication</span> <span m=''3490300''>by</span>
  <span m=''3490410''>half.</span> <span m=''3491040''>And</span> <span m=''3491190''>so</span>
  <span m=''3491270''>you</span> <span m=''3491420''>can,</span> <span m=''3492460''>you</span>
  <span m=''3492620''>know --</span> <span m=''3492860''>starting</span> <span m=''3493180''>from</span>
  <span m=''3493300''>the</span> <span m=''3493360''>back of</span> <span m=''3493640''>room,</span>
  <span m=''3494260''>by the</span> <span m=''3494400''>time</span> <span m=''3494680''>you
  get to</span> <span m=''3494920''>me,</span> <span m=''3495150''>I</span> <span
  m=''3495410''>only</span> <span m=''3495610''>get</span> <span m=''3495750''>two</span>
  <span m=''3495890''>messages</span> <span m=''3496420''>instead</span> <span m=''3496680''>of</span>
  <span m=''3496910''>n</span> <span m=''3497100''>messages.</span> </p><p><span m=''3498800''>So</span>
  <span m=''3499110''>a</span> <span m=''3499350''>reduction</span> <span m=''3499870''>combines</span>
  <span m=''3500350''>data</span> <span m=''3500570''>from</span> <span m=''3500760''>all</span>
  <span m=''3500970''>processors.</span> <span m=''3501680''>In</span> <span m=''3501830''>MPI,</span>
  <span m=''3502770''>you</span> <span m=''3502920''>know,</span> <span m=''3503010''>there''s</span>
  <span m=''3503220''>this</span> <span m=''3503370''>function</span> <span m=''3503960''>MPI</span>
  <span m=''3504030''>reduce</span> <span m=''3504450''>for</span> <span m=''3504540''>doing</span>
  <span m=''3504780''>that.</span> <span m=''3506300''>And</span> <span m=''3506840''>the</span>
  <span m=''3506980''>collective</span> <span m=''3507350''>operations</span> <span
  m=''3508220''>are</span> <span m=''3508540''>things</span> <span m=''3508830''>that</span>
  <span m=''3508930''>are</span> <span m=''3509180''>associative.</span> <span m=''3509920''>And</span>
  <span m=''3510730''>subtract --</span> <span m=''3512730''>sorry.</span> <span m=''3513660''>And</span>
  <span m=''3514100''>or</span> <span m=''3514400''>and --</span> <span m=''3514740''>you</span>
  <span m=''3516330''>can read them on the slide.</span> <span m=''3519500''>There</span>
  <span m=''3519700''>is</span> <span m=''3519830''>a</span> <span m=''3519960''>semantic</span>
  <span m=''3520920''>caveat</span> <span m=''3521270''>here</span> <span m=''3521510''>that</span>
  <span m=''3521690''>no</span> <span m=''3521810''>processor</span> <span m=''3522340''>can</span>
  <span m=''3522540''>finish</span> <span m=''3523580''>the</span> <span m=''3523700''>reduction</span>
  <span m=''3524210''>before</span> <span m=''3524530''>all</span> <span m=''3524760''>processors</span>
  <span m=''3525340''>have</span> <span m=''3525430''>at</span> <span m=''3525520''>least</span>
  <span m=''3525760''>sent</span> <span m=''3525810''>it</span> <span m=''3526000''>one</span>
  <span m=''3526150''>data</span> <span m=''3527500''>or</span> <span m=''3527650''>have</span>
  <span m=''3527840''>contributed,</span> <span m=''3528780''>rather,</span> <span
  m=''3529380''>a</span> <span m=''3529730''>particular</span> <span m=''3530100''>value.</span>
  </p><p><span m=''3531790''>So in</span> <span m=''3532040''>many</span> <span m=''3532270''>numerical</span>
  <span m=''3533430''>algorithms,</span> <span m=''3534250''>you can</span> <span
  m=''3534450''>actually</span> <span m=''3534740''>use</span> <span m=''3534950''>the</span>
  <span m=''3535090''>broadcast</span> <span m=''3535630''>and</span> <span m=''3535730''>send</span>
  <span m=''3536830''>to</span> <span m=''3537010''>broadcast</span> <span m=''3537610''>and
  reduce</span> <span m=''3539470''>in</span> <span m=''3539840''>place</span> <span
  m=''3540200''>of</span> <span m=''3540360''>sends</span> <span m=''3540610''>and</span>
  <span m=''3540710''>receives</span> <span m=''3541420''>because</span> <span m=''3541580''>it</span>
  <span m=''3541660''>really</span> <span m=''3544040''>improves</span> <span m=''3544360''>the</span>
  <span m=''3544430''>simplicity</span> <span m=''3544890''>of</span> <span m=''3544970''>your</span>
  <span m=''3545110''>computation.</span> <span m=''3546970''>You</span> <span m=''3547300''>don''t</span>
  <span m=''3547440''>have</span> <span m=''3547590''>to</span> <span m=''3547670''>do</span>
  <span m=''3547800''>n</span> <span m=''3548070''>sends</span> <span m=''3548470''>to</span>
  <span m=''3548580''>communicate there.</span> <span m=''3549260''>You can</span>
  <span m=''3549340''>just</span> <span m=''3549540''>broadcast.</span> <span m=''3550390''>It
  gives</span> <span m=''3550620''>you a</span> <span m=''3550720''>mechanism</span>
  <span m=''3551200''>for</span> <span m=''3551350''>essentially</span> <span m=''3551760''>having</span>
  <span m=''3552460''>a</span> <span m=''3552590''>shared</span> <span m=''3552910''>memory</span>
  <span m=''3553140''>abstraction</span> <span m=''3553770''>on distributed</span>
  <span m=''3554170''>memory</span> <span m=''3554400''>architecture.</span> <span
  m=''3556150''>There are</span> <span m=''3556490''>things</span> <span m=''3556780''>like</span>
  <span m=''3557030''>all to</span> <span m=''3557330''>all</span> <span m=''3557450''>communication</span>
  <span m=''3558200''>which would also</span> <span m=''3558490''>help</span> <span
  m=''3558730''>you</span> <span m=''3559260''>in that sense.</span> <span m=''3559730''>Although</span>
  <span m=''3559990''>I don''t</span> <span m=''3560240''>talk</span> <span m=''3560480''>about</span>
  <span m=''3560810''>all to</span> <span m=''3561490''>all</span> <span m=''3562000''>communication</span>
  <span m=''3562360''>here.</span> </p><p><span m=''3564960''>So</span> <span m=''3565060''>I''m
  going to show you</span> <span m=''3565430''>an</span> <span m=''3565500''>example</span>
  <span m=''3566060''>of</span> <span m=''3566860''>sort of a</span> <span m=''3567110''>more</span>
  <span m=''3567360''>detailed</span> <span m=''3567780''>MPI.</span> <span m=''3569810''>But
  I also</span> <span m=''3569900''>want</span> <span m=''3570010''>to</span> <span
  m=''3570060''>contrast</span> <span m=''3570610''>this</span> <span m=''3570770''>to</span>
  <span m=''3570890''>the OpenMP</span> <span m=''3572170''>programming</span> <span
  m=''3572690''>on</span> <span m=''3572880''>shared</span> <span m=''3573190''>memory</span>
  <span m=''3573420''>processors</span> <span m=''3574270''>because</span> <span m=''3574560''>one</span>
  <span m=''3575130''>might</span> <span m=''3575360''>look</span> <span m=''3575650''>simpler</span>
  <span m=''3576000''>than</span> <span m=''3576130''>the</span> <span m=''3576220''>other.</span>
  <span m=''3578470''>So</span> <span m=''3578720''>suppose</span> <span m=''3578960''>that
  you</span> <span m=''3579070''>have a</span> <span m=''3579350''>numerical</span>
  <span m=''3579710''>integration</span> <span m=''3580350''>method</span> <span m=''3580540''>that</span>
  <span m=''3580900''>essentially</span> <span m=''3581630''>you''re</span> <span
  m=''3581760''>going</span> <span m=''3581910''>to</span> <span m=''3582020''>use</span>
  <span m=''3582250''>to</span> <span m=''3582360''>calculate</span> <span m=''3582870''>pi.</span>
  <span m=''3584990''>So as you</span> <span m=''3585260''>get</span> <span m=''3585480''>finer</span>
  <span m=''3585810''>and finer,</span> <span m=''3586170''>you</span> <span m=''3586280''>can
  get</span> <span m=''3586420''>more</span> <span m=''3586620''>accurate --</span>
  <span m=''3588200''>as</span> <span m=''3588440''>you</span> <span m=''3588650''>shrink</span>
  <span m=''3589000''>these</span> <span m=''3589170''>intervals</span> <span m=''3589520''>you</span>
  <span m=''3589600''>can</span> <span m=''3589730''>get</span> <span m=''3590030''>better</span>
  <span m=''3591330''>values</span> <span m=''3591930''>for</span> <span m=''3592110''>pi.</span>
  </p><p><span m=''3593900''>And</span> <span m=''3594090''>the</span> <span m=''3594150''>code</span>
  <span m=''3594360''>for</span> <span m=''3594530''>doing</span> <span m=''3594850''>that</span>
  <span m=''3595410''>is</span> <span m=''3595580''>some</span> <span m=''3596460''>C</span>
  <span m=''3596740''>code.</span> <span m=''3598690''>You</span> <span m=''3598850''>have
  some</span> <span m=''3599120''>variables.</span> <span m=''3600270''>And</span>
  <span m=''3600440''>then</span> <span m=''3600560''>you</span> <span m=''3600670''>have</span>
  <span m=''3600890''>a</span> <span m=''3600960''>step that</span> <span m=''3601350''>essentially</span>
  <span m=''3601800''>tells</span> <span m=''3602030''>you</span> <span m=''3602110''>how</span>
  <span m=''3602260''>many</span> <span m=''3602800''>times</span> <span m=''3603130''>you''re</span>
  <span m=''3603210''>going</span> <span m=''3603360''>to</span> <span m=''3603450''>do</span>
  <span m=''3603590''>this</span> <span m=''3603730''>computation.</span> <span m=''3604730''>And</span>
  <span m=''3604860''>for</span> <span m=''3604960''>each</span> <span m=''3605200''>time</span>
  <span m=''3605420''>step</span> <span m=''3605820''>you</span> <span m=''3605940''>calculate</span>
  <span m=''3606860''>this</span> <span m=''3607030''>particular</span> <span m=''3607440''>function</span>
  <span m=''3607800''>here.</span> <span m=''3608540''>And</span> <span m=''3608840''>you</span>
  <span m=''3608900''>add</span> <span m=''3609110''>it</span> <span m=''3609180''>all</span>
  <span m=''3609340''>up</span> <span m=''3609530''>and</span> <span m=''3609620''>in
  the end</span> <span m=''3610230''>you can</span> <span m=''3610580''>sort of</span>
  <span m=''3610830''>print</span> <span m=''3611040''>out</span> <span m=''3611300''>what</span>
  <span m=''3611460''>is</span> <span m=''3611570''>the</span> <span m=''3611650''>value</span>
  <span m=''3611960''>of pi</span> <span m=''3612500''>that you calculated.</span>
  <span m=''3613640''>So</span> <span m=''3613880''>clearly</span> <span m=''3614270''>as,</span>
  <span m=''3614700''>you</span> <span m=''3614830''>know,</span> <span m=''3615330''>as</span>
  <span m=''3615490''>you</span> <span m=''3615590''>shrink</span> <span m=''3615900''>your</span>
  <span m=''3616030''>intervals,</span> <span m=''3616520''>you</span> <span m=''3616600''>can</span>
  <span m=''3616700''>get</span> <span m=''3616870''>more and</span> <span m=''3617150''>more</span>
  <span m=''3617970''>accurate</span> <span m=''3618390''>measures</span> <span m=''3618760''>of</span>
  <span m=''3618890''>pi.</span> <span m=''3620340''>So</span> <span m=''3620500''>that</span>
  <span m=''3620700''>translates</span> <span m=''3620830''>to</span> <span m=''3621060''>increasing</span>
  <span m=''3621510''>the</span> <span m=''3621590''>number</span> <span m=''3621840''>of</span>
  <span m=''3621920''>steps</span> <span m=''3622740''>in</span> <span m=''3626050''>that</span>
  <span m=''3626200''>particular</span> <span m=''3626610''>C code.</span> </p><p><span
  m=''3629160''>So</span> <span m=''3631050''>you</span> <span m=''3631200''>can</span>
  <span m=''3631320''>use</span> <span m=''3631550''>that</span> <span m=''3632050''>numerical</span>
  <span m=''3632430''>integration</span> <span m=''3632940''>to calculate</span> <span
  m=''3633370''>pi</span> <span m=''3633700''>with</span> <span m=''3633910''>OpenMP.</span>
  <span m=''3634900''>And</span> <span m=''3635240''>what</span> <span m=''3635380''>that</span>
  <span m=''3635580''>translates</span> <span m=''3636090''>to</span> <span m=''3636250''>is
  --</span> <span m=''3636870''>sorry,</span> <span m=''3637140''>there should have
  been an</span> <span m=''3637500''>animation</span> <span m=''3637900''>here</span>
  <span m=''3638270''>to ask</span> <span m=''3638620''>you</span> <span m=''3638710''>what</span>
  <span m=''3638850''>I</span> <span m=''3638940''>should</span> <span m=''3639430''>add</span>
  <span m=''3639620''>in.</span> <span m=''3641370''>You</span> <span m=''3641610''>have</span>
  <span m=''3642260''>this</span> <span m=''3642410''>particular</span> <span m=''3642860''>loop.</span>
  <span m=''3643220''>And</span> <span m=''3643500''>this</span> <span m=''3643600''>is</span>
  <span m=''3644130''>computation</span> <span m=''3644620''>that</span> <span m=''3644720''>you</span>
  <span m=''3644810''>want</span> <span m=''3644970''>to</span> <span m=''3645040''>parallelize.</span>
  <span m=''3646330''>And</span> <span m=''3646470''>there is</span> <span m=''3646600''>really</span>
  <span m=''3647340''>four</span> <span m=''3647520''>questions</span> <span m=''3648010''>that</span>
  <span m=''3648260''>you</span> <span m=''3648460''>essentially</span> <span m=''3648890''>have</span>
  <span m=''3649040''>to</span> <span m=''3649170''>go</span> <span m=''3649290''>through.</span>
  <span m=''3650540''>Are</span> <span m=''3650880''>there</span> <span m=''3650980''>variables</span>
  <span m=''3651420''>that are</span> <span m=''3651600''>shared?</span> <span m=''3652220''>Because</span>
  <span m=''3652710''>you</span> <span m=''3652850''>have</span> <span m=''3653060''>to</span>
  <span m=''3653160''>get</span> <span m=''3653300''>the</span> <span m=''3653390''>process</span>
  <span m=''3653820''>right.</span> <span m=''3654420''>If</span> <span m=''3654580''>there</span>
  <span m=''3654700''>are</span> <span m=''3654810''>variables</span> <span m=''3655210''>that
  are</span> <span m=''3655460''>shared,</span> <span m=''3655890''>you</span> <span
  m=''3655950''>have</span> <span m=''3656100''>to</span> <span m=''3656200''>explicitly</span>
  <span m=''3656810''>synchronize</span> <span m=''3657400''>them</span> <span m=''3658180''>and</span>
  <span m=''3658940''>use</span> <span m=''3659150''>locks</span> <span m=''3659470''>to</span>
  <span m=''3659580''>protect</span> <span m=''3659910''>them.</span> </p><p><span
  m=''3661830''>What</span> <span m=''3661970''>values</span> <span m=''3662320''>are</span>
  <span m=''3662400''>private?</span> <span m=''3662880''>So</span> <span m=''3663010''>in</span>
  <span m=''3663130''>OpenMP,</span> <span m=''3664870''>things</span> <span m=''3665160''>that
  are</span> <span m=''3665270''>private</span> <span m=''3665650''>are</span> <span
  m=''3665850''>data</span> <span m=''3666140''>on</span> <span m=''3666340''>the</span>
  <span m=''3666400''>stack,</span> <span m=''3668690''>things</span> <span m=''3669050''>that
  are</span> <span m=''3669270''>defined</span> <span m=''3669610''>lexically</span>
  <span m=''3670040''>within</span> <span m=''3670320''>the</span> <span m=''3670400''>scope</span>
  <span m=''3670810''>of</span> <span m=''3672000''>the</span> <span m=''3672140''>computation</span>
  <span m=''3672740''>that you</span> <span m=''3672970''>encapsulate</span> <span
  m=''3673390''>by</span> <span m=''3673620''>an OpenMP</span> <span m=''3676030''>pragma,</span>
  <span m=''3676920''>and</span> <span m=''3677350''>what</span> <span m=''3677500''>variables</span>
  <span m=''3678310''>you</span> <span m=''3678450''>might</span> <span m=''3678680''>want</span>
  <span m=''3678900''>to</span> <span m=''3679000''>use</span> <span m=''3679210''>for
  a</span> <span m=''3679340''>reduction.</span> <span m=''3680340''>So</span> <span
  m=''3680580''>in</span> <span m=''3680680''>this</span> <span m=''3680830''>case</span>
  <span m=''3681470''>I''m</span> <span m=''3681580''>doing a</span> <span m=''3682010''>summation,</span>
  <span m=''3683080''>and</span> <span m=''3683220''>this</span> <span m=''3683320''>is</span>
  <span m=''3683420''>the</span> <span m=''3683490''>computation</span> <span m=''3684100''>that
  I</span> <span m=''3684200''>can</span> <span m=''3684370''>parallelize.</span>
  <span m=''3685400''>Then</span> <span m=''3685700''>I</span> <span m=''3685840''>essentially</span>
  <span m=''3686220''>want</span> <span m=''3686430''>to</span> <span m=''3686750''>do
  a</span> <span m=''3686960''>reduction</span> <span m=''3687950''>for</span> <span
  m=''3688080''>the</span> <span m=''3688480''>plus</span> <span m=''3688770''>operator</span>
  <span m=''3689250''>since</span> <span m=''3689460''>I''m</span> <span m=''3689550''>doing
  an</span> <span m=''3689780''>addition</span> <span m=''3690780''>on this</span>
  <span m=''3691110''>variable.</span> </p><p><span m=''3692980''>This</span> <span
  m=''3693240''>loop</span> <span m=''3693530''>here is</span> <span m=''3693910''>parallel.</span>
  <span m=''3694760''>It''s</span> <span m=''3695530''>data</span> <span m=''3695740''>parallel.</span>
  <span m=''3696040''>I</span> <span m=''3696110''>can</span> <span m=''3696250''>split</span>
  <span m=''3696590''>it up.</span> <span m=''3698900''>The for</span> <span m=''3699260''>loop
  is</span> <span m=''3699540''>also --</span> <span m=''3701190''>I</span> <span
  m=''3701530''>can</span> <span m=''3701660''>do</span> <span m=''3701770''>this</span>
  <span m=''3701900''>work</span> <span m=''3702100''>sharing</span> <span m=''3702510''>on</span>
  <span m=''3702620''>it.</span> <span m=''3703810''>So I</span> <span m=''3703970''>use</span>
  <span m=''3704220''>the</span> <span m=''3704360''>parallel</span> <span m=''3704840''>for</span>
  <span m=''3705070''>pragma.</span> <span m=''3705960''>And</span> <span m=''3706440''>the</span>
  <span m=''3706520''>variable</span> <span m=''3707140''>x here is</span> <span m=''3707470''>private.</span>
  <span m=''3709360''>It''s</span> <span m=''3709620''>defined</span> <span m=''3710030''>here</span>
  <span m=''3710230''>but</span> <span m=''3710390''>I</span> <span m=''3710460''>can</span>
  <span m=''3710830''>essentially</span> <span m=''3711380''>give a</span> <span m=''3711640''>directive</span>
  <span m=''3712010''>that</span> <span m=''3712160''>says,</span> <span m=''3712660''>this</span>
  <span m=''3712830''>is</span> <span m=''3712960''>private.</span> <span m=''3713530''>You</span>
  <span m=''3713720''>can</span> <span m=''3714350''>essentially</span> <span m=''3714730''>rename</span>
  <span m=''3715090''>it</span> <span m=''3715190''>on</span> <span m=''3715340''>each</span>
  <span m=''3715530''>processor.</span> <span m=''3716290''>Its</span> <span m=''3716460''>value</span>
  <span m=''3716860''>won''t</span> <span m=''3717260''>have</span> <span m=''3717830''>any</span>
  <span m=''3718030''>effect</span> <span m=''3718400''>on the</span> <span m=''3718550''>overall</span>
  <span m=''3718890''>computation</span> <span m=''3719800''>because</span> <span
  m=''3720130''>each</span> <span m=''3720330''>computation</span> <span m=''3720790''>will</span>
  <span m=''3720880''>have</span> <span m=''3721050''>its</span> <span m=''3721170''>own</span>
  <span m=''3721270''>local</span> <span m=''3721560''>copy.</span> <span m=''3723910''>That
  clear</span> <span m=''3724430''>so far?</span> </p><p><span m=''3726360''>So</span>
  <span m=''3726950''>computing</span> <span m=''3727370''>pi</span> <span m=''3727730''>with</span>
  <span m=''3727900''>integration</span> <span m=''3728880''>using</span> <span m=''3729180''>MPI</span>
  <span m=''3729630''>takes</span> <span m=''3729850''>up</span> <span m=''3729950''>two</span>
  <span m=''3730050''>slides.</span> <span m=''3732110''>You</span> <span m=''3732250''>know,</span>
  <span m=''3732320''>I</span> <span m=''3732380''>could</span> <span m=''3732530''>fit
  it</span> <span m=''3732730''>on</span> <span m=''3732880''>one</span> <span m=''3733090''>slide</span>
  <span m=''3733360''>but</span> <span m=''3733510''>you</span> <span m=''3733630''>couldn''t</span>
  <span m=''3733830''>see</span> <span m=''3733980''>it</span> <span m=''3734060''>in</span>
  <span m=''3734120''>the</span> <span m=''3734180''>back.</span> <span m=''3735170''>So</span>
  <span m=''3735370''>there''s</span> <span m=''3735960''>some</span> <span m=''3736180''>initialization.</span>
  <span m=''3736990''>In</span> <span m=''3737060''>fact,</span> <span m=''3737290''>I</span>
  <span m=''3737330''>think</span> <span m=''3737550''>there''s</span> <span m=''3737750''>only</span>
  <span m=''3737950''>six</span> <span m=''3738460''>basic</span> <span m=''3738850''>MPI</span>
  <span m=''3739270''>commands</span> <span m=''3739980''>that</span> <span m=''3740130''>you</span>
  <span m=''3740210''>need</span> <span m=''3740480''>for</span> <span m=''3740670''>computing.</span>
  <span m=''3742120''>Three</span> <span m=''3742340''>of</span> <span m=''3742430''>them</span>
  <span m=''3742590''>are</span> <span m=''3742680''>here</span> <span m=''3743840''>and</span>
  <span m=''3744020''>you''ll</span> <span m=''3744140''>see</span> <span m=''3744860''>the</span>
  <span m=''3745320''>others</span> <span m=''3745600''>are</span> <span m=''3745820''>MPI</span>
  <span m=''3746030''>send</span> <span m=''3746490''>and</span> <span m=''3746630''>MPI</span>
  <span m=''3746860''>receive.</span> <span m=''3747680''>And</span> <span m=''3748050''>there''s</span>
  <span m=''3748310''>one</span> <span m=''3748450''>more</span> <span m=''3748920''>that</span>
  <span m=''3749090''>you''ll</span> <span m=''3749260''>see</span> <span m=''3749410''>on</span>
  <span m=''3749510''>the</span> <span m=''3749570''>next</span> <span m=''3749830''>slide.</span>
  </p><p><span m=''3751550''>So</span> <span m=''3751660''>there''s</span> <span m=''3751870''>some</span>
  <span m=''3752080''>loop</span> <span m=''3752270''>that</span> <span m=''3752420''>says</span>
  <span m=''3752780''>while</span> <span m=''3753080''>I''m</span> <span m=''3753170''>not</span>
  <span m=''3753390''>done</span> <span m=''3754930''>keep</span> <span m=''3755600''>computing.</span>
  <span m=''3756790''>And</span> <span m=''3757110''>what you</span> <span m=''3757270''>do</span>
  <span m=''3757530''>is you</span> <span m=''3757690''>broadcast</span> <span m=''3758430''>n</span>
  <span m=''3758860''>to</span> <span m=''3758940''>all the</span> <span m=''3759120''>different</span>
  <span m=''3759400''>processors.</span> <span m=''3759990''>N</span> <span m=''3760290''>is</span>
  <span m=''3760450''>really</span> <span m=''3760660''>your</span> <span m=''3760870''>time</span>
  <span m=''3761140''>step.</span> <span m=''3762900''>How</span> <span m=''3763190''>many</span>
  <span m=''3763860''>small</span> <span m=''3764160''>intervals</span> <span m=''3764530''>of</span>
  <span m=''3764620''>execution</span> <span m=''3765160''>are you</span> <span m=''3765260''>going</span>
  <span m=''3765400''>to</span> <span m=''3765500''>do?</span> <span m=''3767660''>And</span>
  <span m=''3768240''>you</span> <span m=''3768450''>can</span> <span m=''3768590''>go</span>
  <span m=''3768760''>through,</span> <span m=''3769010''>do your</span> <span m=''3769310''>computation.</span>
  <span m=''3769930''>So</span> <span m=''3770070''>now</span> <span m=''3770280''>this
  --</span> <span m=''3770880''>the MPI</span> <span m=''3771400''>essentially</span>
  <span m=''3771880''>encapsulates</span> <span m=''3772260''>the</span> <span m=''3772510''>computation</span>
  <span m=''3773050''>over</span> <span m=''3773260''>n</span> <span m=''3773460''>processors.</span>
  <span m=''3775290''>And</span> <span m=''3775520''>then you</span> <span m=''3775590''>get</span>
  <span m=''3775740''>to</span> <span m=''3775860''>an</span> <span m=''3775960''>MPI</span>
  <span m=''3776350''>reduce</span> <span m=''3777350''>command</span> <span m=''3777750''>at</span>
  <span m=''3777840''>some</span> <span m=''3777990''>point</span> <span m=''3778250''>that</span>
  <span m=''3778340''>says,</span> <span m=''3778920''>OK,</span> <span m=''3780000''>what</span>
  <span m=''3780220''>values</span> <span m=''3780530''>did</span> <span m=''3780670''>everybody</span>
  <span m=''3781040''>compute?</span> <span m=''3781810''>Do</span> <span m=''3781970''>the</span>
  <span m=''3782290''>reduction</span> <span m=''3782720''>on</span> <span m=''3782860''>that.</span>
  <span m=''3783430''>Write</span> <span m=''3783620''>that</span> <span m=''3783800''>value</span>
  <span m=''3784100''>into</span> <span m=''3784310''>my</span> <span m=''3784490''>MPI.</span>
  </p><p><span m=''3786410''>Now</span> <span m=''3786630''>what</span> <span m=''3786750''>happens</span>
  <span m=''3787090''>here</span> <span m=''3787940''>is</span> <span m=''3788610''>there''s</span>
  <span m=''3789350''>processor</span> <span m=''3789830''>ID</span> <span m=''3790300''>zero</span>
  <span m=''3790700''>which</span> <span m=''3790910''>I''m</span> <span m=''3791010''>going</span>
  <span m=''3791160''>to</span> <span m=''3791230''>consider</span> <span m=''3791660''>the
  master.</span> <span m=''3792140''>So he''s</span> <span m=''3792430''>the</span>
  <span m=''3792500''>one</span> <span m=''3792650''>who''s</span> <span m=''3792810''>going</span>
  <span m=''3793030''>to</span> <span m=''3793120''>actually</span> <span m=''3793820''>print</span>
  <span m=''3794100''>out</span> <span m=''3794230''>the</span> <span m=''3794310''>value.</span>
  <span m=''3795030''>So the</span> <span m=''3795340''>reduction</span> <span m=''3796460''>essentially</span>
  <span m=''3796880''>synchronizes</span> <span m=''3797650''>until</span> <span m=''3798290''>everybody''s</span>
  <span m=''3798780''>communicated</span> <span m=''3799400''>a</span> <span m=''3799450''>value</span>
  <span m=''3800290''>to</span> <span m=''3800400''>processor</span> <span m=''3800890''>zero.</span>
  <span m=''3802370''>And</span> <span m=''3802500''>then</span> <span m=''3802610''>it</span>
  <span m=''3802730''>can</span> <span m=''3802860''>print</span> <span m=''3803030''>out</span>
  <span m=''3803150''>the</span> <span m=''3803220''>pi.</span> <span m=''3803990''>And</span>
  <span m=''3804170''>then</span> <span m=''3804320''>you</span> <span m=''3804450''>can</span>
  <span m=''3804760''>finalize,</span> <span m=''3805480''>which actually</span> <span
  m=''3805800''>makes</span> <span m=''3805940''>sure</span> <span m=''3807380''>the</span>
  <span m=''3807660''>computation</span> <span m=''3808070''>can exit.</span> <span
  m=''3808890''>And</span> <span m=''3809050''>you</span> <span m=''3809130''>can</span>
  <span m=''3809270''>go</span> <span m=''3809380''>on</span> <span m=''3809830''>and</span>
  <span m=''3810070''>terminate.</span> </p><p><span m=''3815710''>So the</span> <span
  m=''3816120''>last</span> <span m=''3816460''>concept</span> <span m=''3816860''>in</span>
  <span m=''3816920''>terms</span> <span m=''3817200''>of</span> <span m=''3817440''>understanding</span>
  <span m=''3817970''>performance</span> <span m=''3819750''>for</span> <span m=''3819910''>parallelism</span>
  <span m=''3820910''>is</span> <span m=''3821460''>this</span> <span m=''3821620''>notion</span>
  <span m=''3821940''>of</span> <span m=''3822140''>locality.</span> <span m=''3823010''>And</span>
  <span m=''3823550''>there''s</span> <span m=''3823750''>locality</span> <span m=''3824210''>in
  your</span> <span m=''3824420''>communication</span> <span m=''3825410''>and</span>
  <span m=''3825660''>locality</span> <span m=''3826030''>in</span> <span m=''3826240''>your</span>
  <span m=''3826350''>computation.</span> <span m=''3827930''>So</span> <span m=''3828130''>what</span>
  <span m=''3828440''>do</span> <span m=''3828510''>I</span> <span m=''3828580''>mean</span>
  <span m=''3829150''>by that?</span> <span m=''3830700''>So</span> <span m=''3830890''>in</span>
  <span m=''3830980''>terms</span> <span m=''3831240''>of</span> <span m=''3831650''>communication,</span>
  <span m=''3832970''>you know,</span> <span m=''3833560''>if</span> <span m=''3833770''>I</span>
  <span m=''3833860''>have</span> <span m=''3835540''>two</span> <span m=''3835690''>operations</span>
  <span m=''3836520''>and</span> <span m=''3836820''>let''s</span> <span m=''3836970''>say
  --</span> <span m=''3837180''>this</span> <span m=''3837360''>is</span> <span m=''3837610''>a</span>
  <span m=''3837720''>picture or</span> <span m=''3838290''>schematic</span> <span
  m=''3838830''>of</span> <span m=''3839410''>what</span> <span m=''3839560''>the</span>
  <span m=''3840450''>MIT</span> <span m=''3840630''>raw</span> <span m=''3840750''>chip</span>
  <span m=''3841110''>looks</span> <span m=''3841300''>like.</span> <span m=''3842130''>Each</span>
  <span m=''3842310''>one</span> <span m=''3842470''>of</span> <span m=''3842570''>these</span>
  <span m=''3842830''>is a</span> <span m=''3842910''>core.</span> <span m=''3843570''>There''s</span>
  <span m=''3843800''>some</span> <span m=''3844030''>network,</span> <span m=''3844710''>some</span>
  <span m=''3844880''>basic</span> <span m=''3845570''>computation</span> <span m=''3846160''>elements.</span>
  <span m=''3846620''>And</span> <span m=''3847110''>if</span> <span m=''3847300''>I</span>
  <span m=''3847380''>have,</span> <span m=''3847800''>you</span> <span m=''3847950''>know,</span>
  <span m=''3848040''>an</span> <span m=''3848130''>addition</span> <span m=''3848580''>that</span>
  <span m=''3848740''>feeds</span> <span m=''3849010''>into a</span> <span m=''3849270''>shift,</span>
  <span m=''3850190''>well,</span> <span m=''3850410''>I</span> <span m=''3850480''>can</span>
  <span m=''3850620''>put</span> <span m=''3850890''>the</span> <span m=''3851630''>addition</span>
  <span m=''3851920''>here</span> <span m=''3852440''>and</span> <span m=''3852610''>the
  shift</span> <span m=''3852910''>there,</span> <span m=''3853440''>but</span> <span
  m=''3853540''>that</span> <span m=''3853690''>means</span> <span m=''3853840''>I</span>
  <span m=''3853890''>have</span> <span m=''3854000''>a</span> <span m=''3854080''>really</span>
  <span m=''3854410''>long</span> <span m=''3854660''>path</span> <span m=''3855350''>that</span>
  <span m=''3855470''>I need</span> <span m=''3855720''>to</span> <span m=''3855800''>go</span>
  <span m=''3855980''>to</span> <span m=''3856400''>in</span> <span m=''3856510''>terms</span>
  <span m=''3856780''>of</span> <span m=''3856910''>communicating</span> <span m=''3857700''>that</span>
  <span m=''3857880''>data</span> <span m=''3858070''>value</span> <span m=''3858410''>around.</span>
  <span m=''3859190''>So the</span> <span m=''3859640''>computation</span> <span m=''3860680''>naturally</span>
  <span m=''3861180''>should</span> <span m=''3861470''>just</span> <span m=''3861720''>be</span>
  <span m=''3861840''>closer</span> <span m=''3862190''>together</span> <span m=''3862590''>because</span>
  <span m=''3862910''>that</span> <span m=''3864100''>decreases</span> <span m=''3864690''>the</span>
  <span m=''3864770''>latency</span> <span m=''3865210''>that I</span> <span m=''3865330''>need</span>
  <span m=''3865540''>to</span> <span m=''3865950''>communicate.</span> <span m=''3867940''>So</span>
  <span m=''3868220''>rather</span> <span m=''3868520''>than</span> <span m=''3868750''>doing</span>
  <span m=''3869010''>net</span> <span m=''3869190''>mapping,</span> <span m=''3869770''>what</span>
  <span m=''3869900''>I</span> <span m=''3870010''>might</span> <span m=''3870060''>want</span>
  <span m=''3870230''>to</span> <span m=''3870300''>do</span> <span m=''3870420''>is</span>
  <span m=''3870540''>just</span> <span m=''3870730''>go</span> <span m=''3870850''>to</span>
  <span m=''3870980''>somebody</span> <span m=''3871270''>who is</span> <span m=''3871780''>close</span>
  <span m=''3872040''>to</span> <span m=''3872140''>me</span> <span m=''3872340''>and</span>
  <span m=''3872450''>available.</span> </p><p><span m=''3872900''>AUDIENCE: Also</span>
  <span m=''3873950''>there are volume issues.</span> <span m=''3875130''>So assume</span>
  <span m=''3876470''>more than that.</span> <span m=''3877140''>A lot</span> <span
  m=''3877820''>of other people</span> <span m=''3878317''>also want</span> <span
  m=''3878815''>to communicate.</span> <span m=''3880309''>So if</span> <span m=''3880807''>[UNINTELLIGIBLE]</span>
  <span m=''3881305''>randomly</span> <span m=''3881803''>distributed,</span> <span
  m=''3882301''>you</span> <span m=''3882798''>can</span> <span m=''3883296''>assume
  there''s</span> <span m=''3883794''>a lot more communication</span> <span m=''3884292''>going</span>
  <span m=''3885288''>into</span> <span m=''3887280''>the channel.</span> <span m=''3887880''>Whereas</span>
  <span m=''3888580''>if you put locality</span> <span m=''3890130''>in there</span>
  <span m=''3890710''>then</span> <span m=''3891210''>you</span> <span m=''3891710''>can</span>
  <span m=''3892210''>scale</span> <span m=''3892710''>communication</span> <span
  m=''3893210''>much</span> <span m=''3893710''>better</span> <span m=''3894210''>than</span>
  <span m=''3894710''>scaling</span> <span m=''3895210''>the</span> <span m=''3895710''>network.</span>
  </p><p><span m=''3900380''>PROFESSOR: There''s</span> <span m=''3900530''>also</span>
  <span m=''3900860''>a notion</span> <span m=''3901050''>of</span> <span m=''3901220''>locality</span>
  <span m=''3901790''>in</span> <span m=''3901890''>terms</span> <span m=''3902180''>of</span>
  <span m=''3902400''>memory</span> <span m=''3902710''>accesses.</span> <span m=''3903040''>And</span>
  <span m=''3903600''>these</span> <span m=''3904020''>are</span> <span m=''3904350''>potentially</span>
  <span m=''3905060''>also</span> <span m=''3905400''>very</span> <span m=''3905770''>important</span>
  <span m=''3907350''>or</span> <span m=''3907550''>more</span> <span m=''3907880''>important,</span>
  <span m=''3908150''>rather,</span> <span m=''3908410''>because</span> <span m=''3908950''>of</span>
  <span m=''3909380''>the</span> <span m=''3909630''>latencies for</span> <span m=''3910770''>accessing</span>
  <span m=''3911310''>memory.</span> <span m=''3912310''>So</span> <span m=''3912900''>if</span>
  <span m=''3913040''>I</span> <span m=''3913120''>have,</span> <span m=''3913850''>you</span>
  <span m=''3913940''>know,</span> <span m=''3914710''>this</span> <span m=''3914930''>loop</span>
  <span m=''3915160''>that''s</span> <span m=''3915310''>doing</span> <span m=''3915590''>some</span>
  <span m=''3915860''>addition</span> <span m=''3916980''>or</span> <span m=''3917160''>some</span>
  <span m=''3917300''>computation</span> <span m=''3918290''>on</span> <span m=''3918490''>an
  array</span> <span m=''3918820''>and</span> <span m=''3918950''>I</span> <span m=''3919010''>distribute
  it,</span> <span m=''3919530''>say,</span> <span m=''3919680''>over four</span>
  <span m=''3920080''>processors --</span> <span m=''3921900''>this</span> <span m=''3922040''>is,</span>
  <span m=''3922460''>again,</span> <span m=''3923180''>let''s</span> <span m=''3923390''>assume</span>
  <span m=''3923700''>a</span> <span m=''3923810''>data</span> <span m=''3924010''>parallel</span>
  <span m=''3924350''>loop.</span> <span m=''3924880''>So</span> <span m=''3925120''>what
  I</span> <span m=''3925170''>can</span> <span m=''3925350''>do</span> <span m=''3925530''>is</span>
  <span m=''3925700''>have</span> <span m=''3926070''>a</span> <span m=''3926180''>work</span>
  <span m=''3926440''>sharing</span> <span m=''3926790''>mechanism</span> <span m=''3927320''>that</span>
  <span m=''3927460''>says,</span> <span m=''3928230''>this</span> <span m=''3928410''>thread</span>
  <span m=''3928720''>here</span> <span m=''3929050''>will</span> <span m=''3929510''>operate</span>
  <span m=''3929890''>on</span> <span m=''3929970''>the</span> <span m=''3930040''>first</span>
  <span m=''3930290''>four</span> <span m=''3930660''>indices.</span> <span m=''3931570''>This</span>
  <span m=''3931800''>thread</span> <span m=''3931970''>here</span> <span m=''3932130''>will</span>
  <span m=''3932240''>operate</span> <span m=''3932630''>on</span> <span m=''3932750''>the</span>
  <span m=''3933150''>next</span> <span m=''3933420''>four</span> <span m=''3933690''>indices</span>
  <span m=''3933790''>and the</span> <span m=''3934480''>next</span> <span m=''3934830''>four</span>
  <span m=''3935100''>and the</span> <span m=''3935240''>next</span> <span m=''3935490''>four.</span>
  <span m=''3936120''>And</span> <span m=''3936270''>then</span> <span m=''3936360''>you</span>
  <span m=''3936460''>essentially</span> <span m=''3937510''>get</span> <span m=''3937710''>to</span>
  <span m=''3938330''>join</span> <span m=''3938770''>barrier</span> <span m=''3939160''>and</span>
  <span m=''3939320''>then</span> <span m=''3939430''>you</span> <span m=''3939530''>can</span>
  <span m=''3940140''>continue</span> <span m=''3940510''>on.</span> </p><p><span
  m=''3940950''>And</span> <span m=''3941970''>if</span> <span m=''3942110''>we</span>
  <span m=''3942230''>consider</span> <span m=''3943100''>how</span> <span m=''3943600''>the</span>
  <span m=''3943730''>access</span> <span m=''3944060''>patterns</span> <span m=''3944460''>are</span>
  <span m=''3944580''>going</span> <span m=''3944760''>to</span> <span m=''3944840''>be</span>
  <span m=''3944930''>generated</span> <span m=''3947350''>for</span> <span m=''3947500''>this</span>
  <span m=''3947640''>particular</span> <span m=''3948090''>loop,</span> <span m=''3948840''>well,</span>
  <span m=''3950400''>in</span> <span m=''3950630''>the</span> <span m=''3950730''>sequential</span>
  <span m=''3951150''>case</span> <span m=''3951760''>I''m</span> <span m=''3951940''>essentially</span>
  <span m=''3952560''>generating</span> <span m=''3953080''>them</span> <span m=''3953300''>in</span>
  <span m=''3953410''>sequence.</span> <span m=''3954200''>So</span> <span m=''3954380''>that</span>
  <span m=''3954750''>allows</span> <span m=''3955010''>me</span> <span m=''3955160''>to</span>
  <span m=''3955240''>exploit,</span> <span m=''3955650''>for</span> <span m=''3955770''>example,</span>
  <span m=''3956100''>on</span> <span m=''3956230''>traditional</span> <span m=''3956620''>[?
  CAT ?]</span> <span m=''3956940''>architecture,</span> <span m=''3957800''>a notion</span>
  <span m=''3958170''>of</span> <span m=''3958270''>spatial</span> <span m=''3958670''>locality.</span>
  <span m=''3959780''>If</span> <span m=''3959950''>I</span> <span m=''3960050''>look</span>
  <span m=''3960260''>at</span> <span m=''3960340''>how</span> <span m=''3960540''>things</span>
  <span m=''3960840''>are</span> <span m=''3961040''>organized in</span> <span m=''3961600''>memory,</span>
  <span m=''3963430''>in</span> <span m=''3963530''>the</span> <span m=''3963620''>sequential</span>
  <span m=''3964100''>case</span> <span m=''3964770''>I</span> <span m=''3964910''>can</span>
  <span m=''3965640''>perhaps</span> <span m=''3966200''>fetch</span> <span m=''3966620''>an</span>
  <span m=''3966710''>entire</span> <span m=''3967120''>block</span> <span m=''3967450''>at</span>
  <span m=''3967520''>a</span> <span m=''3967580''>time.</span> <span m=''3967870''>So</span>
  <span m=''3967980''>I</span> <span m=''3968050''>can</span> <span m=''3968190''>fetch</span>
  <span m=''3969230''>all</span> <span m=''3969490''>the</span> <span m=''3969590''>elements</span>
  <span m=''3970000''>of</span> <span m=''3970830''>A0</span> <span m=''3971340''>to</span>
  <span m=''3971520''>A3</span> <span m=''3971790''>in</span> <span m=''3971900''>one</span>
  <span m=''3972100''>shot.</span> <span m=''3972680''>I</span> <span m=''3972830''>can</span>
  <span m=''3973010''>fetch</span> <span m=''3973350''>all the</span> <span m=''3973570''>elements</span>
  <span m=''3973900''>of</span> <span m=''3974150''>A4</span> <span m=''3974540''>to</span>
  <span m=''3975660''>A7</span> <span m=''3976080''>in one</span> <span m=''3976240''>shot.</span>
  <span m=''3976820''>And</span> <span m=''3976930''>that</span> <span m=''3977070''>allows</span>
  <span m=''3977390''>me</span> <span m=''3977540''>to</span> <span m=''3977640''>essentially</span>
  <span m=''3978090''>improve</span> <span m=''3979520''>performance</span> <span
  m=''3980000''>because</span> <span m=''3980410''>I</span> <span m=''3980690''>overlap</span>
  <span m=''3981480''>communication.</span> <span m=''3982080''>I''m</span> <span
  m=''3982240''>predicting</span> <span m=''3982800''>that</span> <span m=''3983150''>once</span>
  <span m=''3983540''>I</span> <span m=''3983650''>see</span> <span m=''3983970''>a</span>
  <span m=''3984050''>reference,</span> <span m=''3984990''>I''m</span> <span m=''3985220''>going</span>
  <span m=''3985430''>to</span> <span m=''3985720''>use</span> <span m=''3985890''>data</span>
  <span m=''3986050''>that''s</span> <span m=''3987030''>adjacent</span> <span m=''3987330''>to
  it</span> <span m=''3987470''>in</span> <span m=''3987720''>space.</span> </p><p><span
  m=''3989140''>There''s</span> <span m=''3989260''>also</span> <span m=''3989550''>a
  notion of</span> <span m=''3989960''>temporal</span> <span m=''3990260''>locality</span>
  <span m=''3990720''>that</span> <span m=''3990860''>says that</span> <span m=''3991280''>if</span>
  <span m=''3991570''>I</span> <span m=''3991680''>use</span> <span m=''3992580''>some</span>
  <span m=''3992780''>particular</span> <span m=''3993090''>data</span> <span m=''3993290''>element,</span>
  <span m=''3993600''>I''m</span> <span m=''3993730''>going</span> <span m=''3993890''>to</span>
  <span m=''3993990''>reuse</span> <span m=''3994380''>it</span> <span m=''3994500''>later</span>
  <span m=''3994710''>on.</span> <span m=''3995430''>I''m</span> <span m=''3995660''>not</span>
  <span m=''3995800''>showing</span> <span m=''3996060''>that</span> <span m=''3996180''>here.</span>
  <span m=''3997970''>But</span> <span m=''3998110''>in the</span> <span m=''3998360''>parallel</span>
  <span m=''3998760''>case</span> <span m=''3999070''>what</span> <span m=''3999170''>could</span>
  <span m=''3999270''>happen</span> <span m=''3999630''>is</span> <span m=''4000580''>if</span>
  <span m=''4000710''>each</span> <span m=''4000920''>one</span> <span m=''4001110''>of</span>
  <span m=''4001190''>these</span> <span m=''4001460''>threads</span> <span m=''4001970''>is</span>
  <span m=''4002170''>requesting</span> <span m=''4002670''>a different</span> <span
  m=''4002950''>data</span> <span m=''4003160''>element --</span> <span m=''4003750''>and
  let''s</span> <span m=''4004090''>say</span> <span m=''4004670''>execution</span>
  <span m=''4005340''>essentially</span> <span m=''4008530''>proceeds --</span> <span
  m=''4009380''>you</span> <span m=''4009470''>know,</span> <span m=''4009550''>all</span>
  <span m=''4009690''>the</span> <span m=''4009790''>threads</span> <span m=''4010140''>are</span>
  <span m=''4010540''>requesting</span> <span m=''4011050''>their</span> <span m=''4011230''>data</span>
  <span m=''4012760''>at</span> <span m=''4012900''>the</span> <span m=''4012970''>same</span>
  <span m=''4013170''>time.</span> <span m=''4013970''>Then</span> <span m=''4014100''>all</span>
  <span m=''4014300''>these</span> <span m=''4014510''>requests</span> <span m=''4015050''>are</span>
  <span m=''4015250''>going</span> <span m=''4015460''>to</span> <span m=''4015530''>end</span>
  <span m=''4015680''>up</span> <span m=''4015770''>going</span> <span m=''4016010''>to</span>
  <span m=''4016130''>the same</span> <span m=''4016350''>memory</span> <span m=''4016640''>bank.</span>
  <span m=''4019130''>The</span> <span m=''4019290''>first</span> <span m=''4019600''>thread</span>
  <span m=''4020090''>is</span> <span m=''4020230''>requesting</span> <span m=''4020850''>ace
  of</span> <span m=''4021540''>zero.</span> <span m=''4022420''>The next</span> <span
  m=''4022730''>thread</span> <span m=''4022900''>is</span> <span m=''4023030''>requesting</span>
  <span m=''4023710''>ace</span> <span m=''4024040''>of four,</span> <span m=''4025080''>the
  next</span> <span m=''4025340''>thread</span> <span m=''4025770''>ace of eight,</span>
  <span m=''4027230''>next</span> <span m=''4027500''>thread</span> <span m=''4027690''>ace</span>
  <span m=''4027860''>of</span> <span m=''4028160''>12.</span> <span m=''4028750''>And
  all of</span> <span m=''4028970''>these</span> <span m=''4029170''>happen</span>
  <span m=''4029430''>to</span> <span m=''4029530''>be</span> <span m=''4029620''>in</span>
  <span m=''4029690''>the</span> <span m=''4029750''>same</span> <span m=''4029990''>memory</span>
  <span m=''4030210''>bank.</span> </p><p><span m=''4031010''>So</span> <span m=''4031160''>what</span>
  <span m=''4031290''>that</span> <span m=''4031490''>means</span> <span m=''4031820''>is,</span>
  <span m=''4032400''>you</span> <span m=''4032470''>know,</span> <span m=''4032550''>there''s</span>
  <span m=''4032710''>a</span> <span m=''4032760''>lot</span> <span m=''4032950''>of</span>
  <span m=''4033040''>contention</span> <span m=''4033510''>for</span> <span m=''4033610''>that</span>
  <span m=''4033750''>one</span> <span m=''4034020''>memory</span> <span m=''4034300''>bank.</span>
  <span m=''4034940''>And</span> <span m=''4035270''>in</span> <span m=''4035350''>effect</span>
  <span m=''4035680''>I''ve</span> <span m=''4035870''>serialized</span> <span m=''4036300''>the</span>
  <span m=''4036560''>computation.</span> <span m=''4037650''>Right?</span> <span
  m=''4037850''>Everybody</span> <span m=''4037950''>see that?</span> <span m=''4040620''>And,</span>
  <span m=''4041160''>you</span> <span m=''4041230''>know,</span> <span m=''4041360''>this</span>
  <span m=''4041790''>can</span> <span m=''4042030''>be</span> <span m=''4042160''>a</span>
  <span m=''4042230''>problem</span> <span m=''4042610''>in</span> <span m=''4042700''>that</span>
  <span m=''4042810''>you</span> <span m=''4042940''>can</span> <span m=''4043090''>essentially</span>
  <span m=''4044000''>fully</span> <span m=''4044380''>serialize</span> <span m=''4044790''>the
  computation</span> <span m=''4046090''>in</span> <span m=''4046220''>that,</span>
  <span m=''4046720''>you</span> <span m=''4046920''>know,</span> <span m=''4047020''>there''s</span>
  <span m=''4047260''>contention</span> <span m=''4047770''>on</span> <span m=''4047880''>the</span>
  <span m=''4047950''>first</span> <span m=''4048280''>bank,</span> <span m=''4048620''>contention</span>
  <span m=''4049490''>on</span> <span m=''4049720''>the</span> <span m=''4049790''>second</span>
  <span m=''4050120''>bank,</span> <span m=''4051410''>and</span> <span m=''4051580''>then</span>
  <span m=''4051690''>contention</span> <span m=''4052140''>on</span> <span m=''4052220''>the</span>
  <span m=''4052310''>third bank,</span> <span m=''4053620''>and</span> <span m=''4053760''>then</span>
  <span m=''4053810''>contention</span> <span m=''4054230''>on the</span> <span m=''4054340''>fourth</span>
  <span m=''4054580''>bank.</span> </p><p><span m=''4055040''>And</span> <span m=''4055210''>so</span>
  <span m=''4055400''>I''ve</span> <span m=''4055800''>done</span> <span m=''4056040''>absolutely</span>
  <span m=''4056450''>nothing</span> <span m=''4057450''>other</span> <span m=''4057660''>than</span>
  <span m=''4057830''>pay</span> <span m=''4058000''>overhead</span> <span m=''4058390''>for</span>
  <span m=''4058520''>parallelization.</span> <span m=''4059720''>I''ve</span> <span
  m=''4061370''>made</span> <span m=''4061590''>extra</span> <span m=''4061820''>work</span>
  <span m=''4061970''>for</span> <span m=''4062060''>myself</span> <span m=''4062470''>[?
  concreting ?]</span> <span m=''4062590''>the</span> <span m=''4063030''>threads.</span>
  <span m=''4064250''>Maybe</span> <span m=''4064800''>I''ve</span> <span m=''4065060''>done</span>
  <span m=''4065270''>some</span> <span m=''4066020''>extra</span> <span m=''4066290''>work</span>
  <span m=''4066460''>in</span> <span m=''4066520''>terms</span> <span m=''4066730''>of</span>
  <span m=''4066810''>synchronization.</span> <span m=''4068840''>So</span> <span
  m=''4069380''>I''m</span> <span m=''4069850''>fully</span> <span m=''4070090''>serial.</span>
  </p><p><span m=''4072980''>So</span> <span m=''4073160''>what</span> <span m=''4073270''>you</span>
  <span m=''4073340''>want</span> <span m=''4073520''>to</span> <span m=''4073600''>do</span>
  <span m=''4073760''>is</span> <span m=''4073900''>actually</span> <span m=''4075040''>reorganize</span>
  <span m=''4075590''>the way</span> <span m=''4075810''>data</span> <span m=''4076140''>is</span>
  <span m=''4076280''>laid</span> <span m=''4076510''>out</span> <span m=''4076650''>in</span>
  <span m=''4076720''>memory</span> <span m=''4077350''>so</span> <span m=''4077570''>that</span>
  <span m=''4077740''>you</span> <span m=''4077910''>can</span> <span m=''4078840''>effectively</span>
  <span m=''4079300''>get</span> <span m=''4079840''>the</span> <span m=''4079950''>benefit</span>
  <span m=''4080320''>of</span> <span m=''4080420''>parallelization.</span> <span
  m=''4081620''>So</span> <span m=''4082420''>if</span> <span m=''4082580''>you</span>
  <span m=''4082680''>have</span> <span m=''4083600''>the data</span> <span m=''4083920''>organized</span>
  <span m=''4084440''>as is</span> <span m=''4084830''>there,</span> <span m=''4086710''>you</span>
  <span m=''4086910''>can</span> <span m=''4087420''>shuffle</span> <span m=''4087770''>things</span>
  <span m=''4088010''>around.</span> <span m=''4089670''>And</span> <span m=''4089900''>then</span>
  <span m=''4090010''>you</span> <span m=''4090100''>end</span> <span m=''4090270''>up</span>
  <span m=''4090440''>with</span> <span m=''4090810''>fully</span> <span m=''4091090''>parallel</span>
  <span m=''4092110''>or</span> <span m=''4092370''>a</span> <span m=''4092440''>layout</span>
  <span m=''4092810''>that''s</span> <span m=''4093000''>more</span> <span m=''4093230''>amenable</span>
  <span m=''4093570''>to</span> <span m=''4093690''>full</span> <span m=''4093960''>parallelism</span>
  <span m=''4094480''>because</span> <span m=''4095250''>now</span> <span m=''4095560''>each</span>
  <span m=''4096320''>thread</span> <span m=''4096550''>is</span> <span m=''4096680''>going</span>
  <span m=''4096880''>to</span> <span m=''4096970''>a</span> <span m=''4097040''>different</span>
  <span m=''4097380''>bank.</span> <span m=''4097930''>And</span> <span m=''4098050''>that</span>
  <span m=''4098160''>essentially</span> <span m=''4098530''>gives</span> <span m=''4098750''>you
  a</span> <span m=''4098830''>four-way</span> <span m=''4099210''>parallelism.</span>
  <span m=''4100650''>And so</span> <span m=''4101380''>you</span> <span m=''4101690''>get</span>
  <span m=''4101820''>the</span> <span m=''4101920''>performance</span> <span m=''4102360''>benefits.</span>
  </p><p><span m=''4106480''>So</span> <span m=''4106600''>there are</span> <span
  m=''4107350''>different</span> <span m=''4107660''>kinds</span> <span m=''4108000''>of</span>
  <span m=''4108670''>sort</span> <span m=''4109060''>of</span> <span m=''4109810''>considerations</span>
  <span m=''4110580''>you need to</span> <span m=''4110710''>take</span> <span m=''4111020''>into</span>
  <span m=''4111290''>account</span> <span m=''4111920''>for</span> <span m=''4112450''>shared</span>
  <span m=''4112750''>memory</span> <span m=''4113010''>architectures</span> <span
  m=''4114080''>in</span> <span m=''4114400''>terms</span> <span m=''4114650''>of</span>
  <span m=''4114870''>how</span> <span m=''4115190''>the</span> <span m=''4115290''>design</span>
  <span m=''4115730''>affects the</span> <span m=''4116220''>memory</span> <span m=''4116470''>latency.</span>
  <span m=''4117400''>So</span> <span m=''4117750''>in</span> <span m=''4117960''>a</span>
  <span m=''4118040''>uniform</span> <span m=''4118910''>memory</span> <span m=''4119260''>access</span>
  <span m=''4119650''>architecture,</span> <span m=''4120620''>every</span> <span
  m=''4120910''>processor</span> <span m=''4122190''>is</span> <span m=''4122630''>either,</span>
  <span m=''4123090''>you</span> <span m=''4123190''>can</span> <span m=''4123420''>think</span>
  <span m=''4123580''>of</span> <span m=''4123640''>it as</span> <span m=''4123780''>being</span>
  <span m=''4124240''>equidistant</span> <span m=''4124530''>from</span> <span m=''4124710''>memory.</span>
  <span m=''4125200''>Or</span> <span m=''4125540''>another</span> <span m=''4125800''>way,</span>
  <span m=''4126410''>it</span> <span m=''4126560''>has</span> <span m=''4126790''>the</span>
  <span m=''4126850''>same</span> <span m=''4127160''>access</span> <span m=''4127560''>latency</span>
  <span m=''4128070''>for getting</span> <span m=''4128520''>data</span> <span m=''4128710''>from</span>
  <span m=''4128880''>memory.</span> <span m=''4130100''>Most</span> <span m=''4130350''>shared</span>
  <span m=''4130580''>memory</span> <span m=''4130830''>architectures</span> <span
  m=''4131560''>are</span> <span m=''4132120''>non-uniform,</span> <span m=''4134480''>also</span>
  <span m=''4134740''>known as</span> <span m=''4135000''>NUMA</span> <span m=''4135830''>architecture.</span>
  <span m=''4136710''>So</span> <span m=''4136990''>you</span> <span m=''4137100''>have</span>
  <span m=''4137270''>physically</span> <span m=''4137940''>partitioned</span> <span
  m=''4138550''>memories.</span> <span m=''4139460''>And</span> <span m=''4139960''>the</span>
  <span m=''4140030''>processors</span> <span m=''4141200''>can</span> <span m=''4141440''>have</span>
  <span m=''4141620''>the</span> <span m=''4141700''>same</span> <span m=''4141920''>address</span>
  <span m=''4142290''>space,</span> <span m=''4142830''>but</span> <span m=''4143020''>the</span>
  <span m=''4143120''>placement</span> <span m=''4143550''>of</span> <span m=''4143660''>data</span>
  <span m=''4143930''>affects</span> <span m=''4144290''>the</span> <span m=''4144380''>performance</span>
  <span m=''4144910''>because</span> <span m=''4145650''>going</span> <span m=''4145930''>to</span>
  <span m=''4146090''>one</span> <span m=''4146360''>bank</span> <span m=''4146630''>versus</span>
  <span m=''4146950''>another</span> <span m=''4147580''>can</span> <span m=''4147810''>be</span>
  <span m=''4148700''>faster</span> <span m=''4149580''>or</span> <span m=''4150020''>slower.</span>
  <span m=''4150860''>So</span> <span m=''4151160''>what</span> <span m=''4151310''>kind</span>
  <span m=''4151460''>of</span> <span m=''4151540''>architecture</span> <span m=''4151990''>is
  Cell?</span> <span m=''4152560''>Yeah.</span> <span m=''4159100''>No</span> <span
  m=''4159240''>guesses?</span> </p><p><span m=''4159710''>AUDIENCE: It''s not a shared
  memory.</span> </p><p><span m=''4162910''>PROFESSOR: Right.</span> <span m=''4163150''>It''s</span>
  <span m=''4163320''>not</span> <span m=''4163490''>a</span> <span m=''4163530''>shared</span>
  <span m=''4163830''>memory</span> <span m=''4164120''>architecture.</span> <span
  m=''4167770''>So a</span> <span m=''4168430''>summary</span> <span m=''4168910''>of</span>
  <span m=''4169010''>parallel</span> <span m=''4169360''>performance</span> <span
  m=''4169860''>factors.</span> <span m=''4170500''>So there''s</span> <span m=''4170770''>three</span>
  <span m=''4170980''>things</span> <span m=''4171260''>I</span> <span m=''4171370''>tried</span>
  <span m=''4171620''>to</span> <span m=''4171700''>cover.</span> <span m=''4174970''>Coverage</span>
  <span m=''4175340''>or the</span> <span m=''4175510''>extent of</span> <span m=''4175910''>parallelism
  in the</span> <span m=''4176510''>application.</span> <span m=''4177420''>So</span>
  <span m=''4177550''>you</span> <span m=''4177670''>saw</span> <span m=''4178120''>Amdahl''s</span>
  <span m=''4178210''>Law</span> <span m=''4178400''>and it</span> <span m=''4178820''>actually</span>
  <span m=''4179220''>gave</span> <span m=''4179530''>you</span> <span m=''4179720''>a</span>
  <span m=''4180170''>sort</span> <span m=''4180340''>of</span> <span m=''4180420''>a</span>
  <span m=''4180480''>model</span> <span m=''4180910''>that</span> <span m=''4181020''>said</span>
  <span m=''4182600''>when</span> <span m=''4182840''>is</span> <span m=''4182970''>parallelizing</span>
  <span m=''4183460''>your application</span> <span m=''4183990''>going to</span>
  <span m=''4184170''>be</span> <span m=''4184320''>worthwhile?</span> <span m=''4185000''>And
  it</span> <span m=''4185140''>really</span> <span m=''4185350''>boils</span> <span
  m=''4185650''>down to</span> <span m=''4185920''>how</span> <span m=''4186020''>much</span>
  <span m=''4186230''>parallelism</span> <span m=''4186530''>you</span> <span m=''4186750''>actually</span>
  <span m=''4187100''>have</span> <span m=''4187710''>in</span> <span m=''4187880''>your</span>
  <span m=''4188000''>particular</span> <span m=''4188370''>algorithm.</span> <span
  m=''4188990''>If</span> <span m=''4189150''>your</span> <span m=''4189380''>algorithm
  is</span> <span m=''4189590''>sequential,</span> <span m=''4190130''>then</span>
  <span m=''4190770''>there''s</span> <span m=''4190870''>really</span> <span m=''4191100''>nothing</span>
  <span m=''4191350''>you</span> <span m=''4191430''>can</span> <span m=''4191560''>do</span>
  <span m=''4191670''>for</span> <span m=''4193890''>programming</span> <span m=''4195190''>for</span>
  <span m=''4195630''>performance</span> <span m=''4196110''>using</span> <span m=''4196330''>parallel</span>
  <span m=''4196620''>architectures.</span> </p><p><span m=''4197820''>I</span> <span
  m=''4198610''>talked</span> <span m=''4198820''>about</span> <span m=''4199000''>granularity</span>
  <span m=''4199650''>of the</span> <span m=''4199810''>data</span> <span m=''4200050''>partitioning</span>
  <span m=''4201360''>and</span> <span m=''4201640''>the</span> <span m=''4202500''>granularity</span>
  <span m=''4202900''>of</span> <span m=''4203140''>the</span> <span m=''4203250''>work</span>
  <span m=''4203460''>distribution.</span> <span m=''4204360''>You know,</span> <span
  m=''4204500''>if</span> <span m=''4204590''>you</span> <span m=''4204670''>had</span>
  <span m=''4204820''>really</span> <span m=''4205030''>fine-grain</span> <span m=''4205520''>things</span>
  <span m=''4205770''>versus</span> <span m=''4206080''>really</span> <span m=''4206290''>coarse-grain</span>
  <span m=''4206760''>things,</span> <span m=''4207330''>how</span> <span m=''4207450''>does</span>
  <span m=''4207560''>that</span> <span m=''4207690''>translate</span> <span m=''4208100''>to</span>
  <span m=''4208200''>different</span> <span m=''4208460''>communication</span> <span
  m=''4209770''>costs?</span> <span m=''4210980''>And</span> <span m=''4211160''>then</span>
  <span m=''4211620''>last thing</span> <span m=''4212020''>I</span> <span m=''4212090''>shared</span>
  <span m=''4212390''>was</span> <span m=''4212650''>locality.</span> <span m=''4213770''>So</span>
  <span m=''4213940''>if</span> <span m=''4214060''>you</span> <span m=''4214150''>have</span>
  <span m=''4214340''>near</span> <span m=''4214530''>neighbors</span> <span m=''4214870''>talking,</span>
  <span m=''4215760''>that</span> <span m=''4215990''>may</span> <span m=''4216100''>be</span>
  <span m=''4216250''>different</span> <span m=''4216620''>than</span> <span m=''4217660''>two</span>
  <span m=''4217830''>things</span> <span m=''4218050''>that</span> <span m=''4218140''>are</span>
  <span m=''4218200''>further</span> <span m=''4218520''>apart</span> <span m=''4218820''>in</span>
  <span m=''4218920''>space</span> <span m=''4219230''>communicating.</span> <span
  m=''4220730''>And</span> <span m=''4221240''>there are</span> <span m=''4221370''>some</span>
  <span m=''4221570''>issues</span> <span m=''4221920''>in</span> <span m=''4222010''>terms</span>
  <span m=''4222270''>of</span> <span m=''4222500''>the</span> <span m=''4222580''>memory</span>
  <span m=''4222850''>latency</span> <span m=''4223690''>and how</span> <span m=''4223830''>you</span>
  <span m=''4223980''>actually</span> <span m=''4225810''>can</span> <span m=''4226450''>take</span>
  <span m=''4226610''>advantage</span> <span m=''4226930''>of</span> <span m=''4227020''>that.</span>
  <span m=''4228310''>So</span> <span m=''4229260''>this</span> <span m=''4229450''>really</span>
  <span m=''4229980''>is</span> <span m=''4230170''>an</span> <span m=''4231470''>overview</span>
  <span m=''4232130''>of</span> <span m=''4232580''>sort of</span> <span m=''4232730''>the</span>
  <span m=''4232890''>parallel</span> <span m=''4233400''>programming</span> <span
  m=''4233890''>concepts</span> <span m=''4234990''>and the performance</span> <span
  m=''4235730''>implications.</span> <span m=''4236670''>So</span> <span m=''4237010''>the</span>
  <span m=''4237160''>next</span> <span m=''4237400''>lecture</span> <span m=''4237680''>will</span>
  <span m=''4237840''>be,</span> <span m=''4238710''>you know,</span> <span m=''4238880''>how</span>
  <span m=''4239020''>do</span> <span m=''4239120''>I</span> <span m=''4239210''>actually</span>
  <span m=''4239530''>parallelize</span> <span m=''4239920''>my</span> <span m=''4240030''>program?</span>
  <span m=''4240560''>And we''ll</span> <span m=''4240790''>talk</span> <span m=''4241030''>about</span>
  <span m=''4241230''>that.</span> </p>'
type: course
uid: 04604da55928006293eaa04aecd3925f

---
None