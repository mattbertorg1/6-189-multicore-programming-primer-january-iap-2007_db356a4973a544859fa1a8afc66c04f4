---
about_this_resource_text: <p><strong>Topics covered:</strong> Design patterns for
  parallel programming II</p><p><strong>Instructor:</strong> Rodric Rabbah, IBM</p><p>Subtitles
  are provided through the generous assistance of Rohan Pai.</p>
course_id: 6-189-multicore-programming-primer-january-iap-2007
embedded_media:
- id: l7.jpg
  parent_uid: 306cd571b5462d3716442dda000bb886
  technical_location: https://ocw.mit.edu/courses/electrical-engineering-and-computer-science/6-189-multicore-programming-primer-january-iap-2007/lecture-notes-and-video/l7-design-patterns-for-parallel-programming-ii/l7.jpg
  title: 'L7: Design Patterns for Parallel Programming II'
  type: null
  uid: acdf50df2af49e8a23666dfda06e5cd4
- id: Video-YouTube-Stream
  media_location: V1BIvbUlhgU
  parent_uid: 306cd571b5462d3716442dda000bb886
  title: Video-YouTube-Stream
  type: Video
  uid: de8b2bbe3334bc564998fc07e6b2e58a
- id: Thumbnail-YouTube-JPG
  media_location: https://img.youtube.com/vi/V1BIvbUlhgU/default.jpg
  parent_uid: 306cd571b5462d3716442dda000bb886
  title: Thumbnail-YouTube-JPG
  type: Thumbnail
  uid: adee3d1c51273243e8b215bfc417017d
- id: Video-iTunesU-MP4
  media_location: https://itunes.apple.com/us/itunes-u/id341597759
  parent_uid: 306cd571b5462d3716442dda000bb886
  title: Video-iTunes U-MP4
  type: Video
  uid: ebddbd5e97c5ca40e2f21332dffa1ac1
- id: Video-InternetArchive-MP4
  media_location: http://www.archive.org/download/MIT6.189IAP07/ocw-6.189-iap07-lec07_300k.mp4
  parent_uid: 306cd571b5462d3716442dda000bb886
  title: Video-Internet Archive-MP4
  type: Video
  uid: e1b71c3754917e6d7d4ecffb8a677e32
- id: Thumbnail-OCW-JPG
  parent_uid: 306cd571b5462d3716442dda000bb886
  title: Thumbnail-OCW-JPG
  type: Thumbnail
  uid: d8f3b8dd7890bd70903f39c089ea2274
- id: 3Play-3PlayYouTubeid-MP4
  media_location: V1BIvbUlhgU
  parent_uid: 306cd571b5462d3716442dda000bb886
  title: 3Play-3Play YouTube id
  type: 3Play
  uid: 449a03432fc9ca113df34756372d73ba
- id: V1BIvbUlhgU.srt
  parent_uid: 306cd571b5462d3716442dda000bb886
  technical_location: https://ocw.mit.edu/courses/electrical-engineering-and-computer-science/6-189-multicore-programming-primer-january-iap-2007/lecture-notes-and-video/l7-design-patterns-for-parallel-programming-ii/V1BIvbUlhgU.srt
  title: 3play caption file
  type: null
  uid: 55c79a905a805bf83e06e86aa2f9eb6b
- id: V1BIvbUlhgU.pdf
  parent_uid: 306cd571b5462d3716442dda000bb886
  technical_location: https://ocw.mit.edu/courses/electrical-engineering-and-computer-science/6-189-multicore-programming-primer-january-iap-2007/lecture-notes-and-video/l7-design-patterns-for-parallel-programming-ii/V1BIvbUlhgU.pdf
  title: 3play pdf file
  type: null
  uid: 95038f346238ae445dc53df1608201f5
- id: Caption-3Play YouTube id-SRT
  parent_uid: 306cd571b5462d3716442dda000bb886
  title: Caption-3Play YouTube id-SRT-English - US
  type: Caption
  uid: bd3344e3eeb9c498f2f9f36dc633b61d
- id: Transcript-3Play YouTube id-PDF
  parent_uid: 306cd571b5462d3716442dda000bb886
  title: Transcript-3Play YouTube id-PDF-English - US
  type: Transcript
  uid: bcf0114bca1eca667d58c29388a5437c
inline_embed_id: 46018098l7:designpatternsforparallelprogrammingii27831594
layout: video
order_index: null
parent_uid: 69885f30bae5c69316fc5492e4404278
related_resources_text: <p>Lecture Notes (<a target="_blank" title="Open in a new
  window." href="./resolveuid/f7efaba01ecce00b739c1d4c93396e18">PDF</a>)</p>
short_url: l7-design-patterns-for-parallel-programming-ii
technical_location: https://ocw.mit.edu/courses/electrical-engineering-and-computer-science/6-189-multicore-programming-primer-january-iap-2007/lecture-notes-and-video/l7-design-patterns-for-parallel-programming-ii
template_type: Tabbed
title: 'L7: Design Patterns for Parallel Programming II'
transcript: '<p><span m=''30''>The</span> <span m=''130''>following</span> <span m=''540''>content</span>
  <span m=''1130''>is</span> <span m=''1250''>provided</span> <span m=''1710''>under</span>
  <span m=''2020''>a Creative</span> <span m=''2430''>Commons</span> <span m=''3080''>license.</span>
  <span m=''3830''>Your</span> <span m=''4110''>support</span> <span m=''4670''>will</span>
  <span m=''4790''>help</span> <span m=''5110''>MIT</span> <span m=''5470''>OpenCourseWare</span>
  <span m=''6300''>continue</span> <span m=''6790''>to</span> <span m=''6860''>offer</span>
  <span m=''7540''>high-quality</span> <span m=''8040''>educational</span> <span m=''8660''>resources</span>
  <span m=''9250''>for</span> <span m=''9450''>free.</span> <span m=''10560''>To</span>
  <span m=''10660''>make</span> <span m=''10860''>a</span> <span m=''10920''>donation</span>
  <span m=''11660''>or</span> <span m=''11970''>view</span> <span m=''12310''>additional</span>
  <span m=''12740''>materials</span> <span m=''13260''>from</span> <span m=''13410''>hundreds</span>
  <span m=''13850''>of</span> <span m=''14100''>MIT</span> <span m=''14400''>courses,</span>
  <span m=''15350''>visit</span> <span m=''15720''>MIT</span> <span m=''16210''>OpenCourseWare</span>
  <span m=''16610''>at</span> <span m=''17190''>ocw.mit.edu.</span> </p><p><span m=''22530''>PROFESSOR:
  OK.</span> <span m=''23030''>So</span> <span m=''23640''>today</span> <span m=''23960''>we''re</span>
  <span m=''24090''>going to</span> <span m=''24240''>continue</span> <span m=''24640''>on</span>
  <span m=''25910''>with</span> <span m=''26350''>some</span> <span m=''26580''>of</span>
  <span m=''26730''>the</span> <span m=''26790''>design</span> <span m=''27100''>patterns</span>
  <span m=''27860''>that we</span> <span m=''27970''>started</span> <span m=''28260''>talking</span>
  <span m=''28530''>about</span> <span m=''28800''>last</span> <span m=''29100''>week.</span>
  <span m=''30040''>So</span> <span m=''30360''>to</span> <span m=''30660''>recap,</span>
  <span m=''31900''>there are</span> <span m=''32440''>really</span> <span m=''32690''>four</span>
  <span m=''33110''>common</span> <span m=''33430''>steps</span> <span m=''33790''>to</span>
  <span m=''34420''>taking a</span> <span m=''34780''>program</span> <span m=''35280''>and
  then</span> <span m=''35380''>parallelizing</span> <span m=''35900''>it.</span>
  <span m=''36380''>Often</span> <span m=''36700''>you''re</span> <span m=''36830''>starting</span>
  <span m=''37170''>off</span> <span m=''37430''>with</span> <span m=''37790''>a</span>
  <span m=''37870''>program</span> <span m=''38360''>that''s</span> <span m=''38780''>designed</span>
  <span m=''39290''>or</span> <span m=''39480''>written in a</span> <span m=''39930''>sequential</span>
  <span m=''40350''>manner.</span> <span m=''41060''>And</span> <span m=''41390''>what</span>
  <span m=''41480''>you</span> <span m=''41550''>want</span> <span m=''41700''>to</span>
  <span m=''41770''>do</span> <span m=''41970''>is</span> <span m=''42230''>find</span>
  <span m=''42570''>tasks</span> <span m=''43020''>in</span> <span m=''43180''>the</span>
  <span m=''43250''>program --</span> <span m=''44420''>and these are</span> <span
  m=''44740''>sort of</span> <span m=''45140''>independent</span> <span m=''46490''>work</span>
  <span m=''46980''>pieces that</span> <span m=''47230''>you are</span> <span m=''47390''>going</span>
  <span m=''47590''>to</span> <span m=''47790''>be</span> <span m=''48300''>able</span>
  <span m=''48500''>to</span> <span m=''48610''>decompose</span> <span m=''49120''>from</span>
  <span m=''49260''>your</span> <span m=''49370''>sequential</span> <span m=''50170''>code.</span>
  <span m=''50950''>You''re</span> <span m=''51160''>going</span> <span m=''51260''>to</span>
  <span m=''51530''>group</span> <span m=''51830''>tasks</span> <span m=''52160''>together</span>
  <span m=''52520''>into</span> <span m=''53080''>threads</span> <span m=''53560''>or</span>
  <span m=''53760''>processes.</span> <span m=''54930''>And</span> <span m=''55090''>then</span>
  <span m=''55330''>you''ll</span> <span m=''55670''>essentially</span> <span m=''56120''>map</span>
  <span m=''56820''>each one of these</span> <span m=''57170''>threads</span> <span
  m=''57480''>or</span> <span m=''57770''>processes</span> <span m=''58070''>down</span>
  <span m=''58350''>to the</span> <span m=''58480''>actual</span> <span m=''58810''>hardware.</span>
  <span m=''59640''>And</span> <span m=''59930''>that</span> <span m=''60040''>will</span>
  <span m=''60160''>get</span> <span m=''60330''>you,</span> <span m=''61090''>eventually</span>
  <span m=''61510''>when</span> <span m=''61650''>these</span> <span m=''61800''>programs</span>
  <span m=''62200''>run,</span> <span m=''62460''>the</span> <span m=''63240''>concurrency</span>
  <span m=''63670''>and the</span> <span m=''63810''>performance</span> <span m=''64500''>speedups</span>
  <span m=''64700''>that</span> <span m=''64810''>you</span> <span m=''64890''>want.</span>
  </p><p><span m=''68680''>So</span> <span m=''69130''>as</span> <span m=''69250''>a</span>
  <span m=''69740''>reminder</span> <span m=''70190''>of</span> <span m=''70330''>what</span>
  <span m=''70490''>I</span> <span m=''70530''>talked</span> <span m=''70810''>about</span>
  <span m=''71070''>last</span> <span m=''71380''>week</span> <span m=''72040''>in</span>
  <span m=''72120''>terms</span> <span m=''72300''>of</span> <span m=''72400''>finding</span>
  <span m=''73050''>the</span> <span m=''73140''>task</span> <span m=''73430''>or</span>
  <span m=''73520''>finding</span> <span m=''73930''>the</span> <span m=''74040''>concurrency,</span>
  <span m=''74860''>you</span> <span m=''75000''>start</span> <span m=''75240''>off</span>
  <span m=''75440''>with an</span> <span m=''75800''>application.</span> <span m=''76920''>You</span>
  <span m=''77140''>come</span> <span m=''77340''>up</span> <span m=''77470''>with
  a</span> <span m=''77680''>block level</span> <span m=''78230''>diagram.</span>
  <span m=''79130''>And</span> <span m=''79520''>from</span> <span m=''79660''>that</span>
  <span m=''79860''>you</span> <span m=''80270''>sort of</span> <span m=''80560''>try</span>
  <span m=''80740''>to</span> <span m=''80830''>understand</span> <span m=''82530''>where</span>
  <span m=''82750''>the</span> <span m=''82830''>time</span> <span m=''83120''>is</span>
  <span m=''83210''>spent</span> <span m=''83420''>in</span> <span m=''83480''>the</span>
  <span m=''83560''>computations</span> <span m=''84390''>and</span> <span m=''84670''>what
  are</span> <span m=''84910''>some</span> <span m=''85180''>typical</span> <span
  m=''85520''>patterns</span> <span m=''86010''>for</span> <span m=''86160''>how</span>
  <span m=''86350''>the computations are</span> <span m=''87000''>carried</span> <span
  m=''87300''>out.</span> <span m=''87860''>So</span> <span m=''88080''>we</span>
  <span m=''88200''>talked</span> <span m=''88480''>about</span> <span m=''89060''>task</span>
  <span m=''89440''>decomposition</span> <span m=''90050''>or</span> <span m=''90800''>sort
  of</span> <span m=''91680''>independent</span> <span m=''92190''>tasks</span> <span
  m=''92520''>or</span> <span m=''92660''>tasks</span> <span m=''92970''>that</span>
  <span m=''93060''>might</span> <span m=''93180''>be</span> <span m=''93270''>different</span>
  <span m=''94010''>that the</span> <span m=''94220''>application is</span> <span
  m=''94830''>carrying</span> <span m=''95210''>out.</span> </p><p><span m=''95540''>So
  in the</span> <span m=''95880''>MPEG</span> <span m=''96060''>encoder,</span> <span
  m=''96330''>we</span> <span m=''96990''>looked</span> <span m=''97270''>at</span>
  <span m=''97450''>decoding</span> <span m=''97930''>the motion</span> <span m=''98310''>vectors</span>
  <span m=''99270''>for</span> <span m=''99560''>temporal</span> <span m=''100560''>compression</span>
  <span m=''101080''>versus</span> <span m=''102560''>spatial</span> <span m=''102960''>compression.</span>
  <span m=''103470''>It</span> <span m=''103580''>does sort of</span> <span m=''104530''>substantially</span>
  <span m=''105550''>different</span> <span m=''107420''>work.</span> <span m=''108050''>We</span>
  <span m=''108180''>talked</span> <span m=''108420''>about</span> <span m=''108870''>data</span>
  <span m=''109230''>decomposition.</span> <span m=''109820''>So</span> <span m=''110080''>if</span>
  <span m=''110200''>you''re</span> <span m=''110440''>doing</span> <span m=''111710''>a</span>
  <span m=''111800''>process --</span> <span m=''112430''>so</span> <span m=''112700''>if</span>
  <span m=''112860''>you</span> <span m=''112950''>have</span> <span m=''113120''>some</span>
  <span m=''113310''>work</span> <span m=''113690''>that''s</span> <span m=''114000''>really</span>
  <span m=''114260''>consuming</span> <span m=''114780''>a large</span> <span m=''115220''>chunk</span>
  <span m=''115430''>of</span> <span m=''115530''>data,</span> <span m=''116210''>and</span>
  <span m=''116620''>you</span> <span m=''116740''>realize</span> <span m=''117200''>that</span>
  <span m=''117340''>it''s</span> <span m=''117460''>applying</span> <span m=''117800''>the</span>
  <span m=''117860''>same</span> <span m=''118140''>kind</span> <span m=''118380''>of</span>
  <span m=''118460''>work</span> <span m=''118810''>to each</span> <span m=''119090''>of</span>
  <span m=''119160''>those</span> <span m=''119340''>data</span> <span m=''119560''>pieces,</span>
  <span m=''120430''>then</span> <span m=''120830''>you</span> <span m=''120960''>can</span>
  <span m=''121110''>partition</span> <span m=''121640''>your</span> <span m=''121780''>data</span>
  <span m=''122450''>into</span> <span m=''122640''>smaller</span> <span m=''123040''>subsets</span>
  <span m=''123480''>and</span> <span m=''125560''>apply</span> <span m=''125900''>the
  same</span> <span m=''126110''>function</span> <span m=''126480''>over</span> <span
  m=''126710''>and</span> <span m=''126820''>over</span> <span m=''127050''>again.</span>
  <span m=''133970''>So</span> <span m=''134510''>in</span> <span m=''134700''>the</span>
  <span m=''134780''>motion</span> <span m=''135070''>compensation</span> <span m=''135730''>phase,</span>
  <span m=''136040''>that''s</span> <span m=''136210''>one</span> <span m=''136410''>example</span>
  <span m=''136860''>where</span> <span m=''137110''>you</span> <span m=''137230''>can</span>
  <span m=''137350''>replicate</span> <span m=''137780''>the</span> <span m=''137860''>function</span>
  <span m=''138520''>and</span> <span m=''138910''>split</span> <span m=''139160''>up</span>
  <span m=''139270''>the</span> <span m=''139360''>data</span> <span m=''139590''>stream</span>
  <span m=''139890''>in</span> <span m=''140000''>different</span> <span m=''140270''>ways</span>
  <span m=''140860''>and</span> <span m=''141100''>have</span> <span m=''141720''>these</span>
  <span m=''142230''>tasks</span> <span m=''142790''>proceed</span> <span m=''143200''>in
  parallel.</span> <span m=''143920''>So that''s</span> <span m=''144080''>data</span>
  <span m=''144470''>decomposition.</span> </p><p><span m=''145250''>And</span> <span
  m=''145560''>then</span> <span m=''146000''>we</span> <span m=''146150''>talked</span>
  <span m=''146420''>a</span> <span m=''146470''>little</span> <span m=''146660''>bit</span>
  <span m=''146780''>about</span> <span m=''147360''>sort of</span> <span m=''147770''>making</span>
  <span m=''148080''>a</span> <span m=''148120''>case</span> <span m=''148370''>for
  a</span> <span m=''148480''>pipeline</span> <span m=''149030''>decomposition.</span>
  <span m=''149880''>So</span> <span m=''150030''>you</span> <span m=''150190''>have</span>
  <span m=''150580''>a</span> <span m=''150650''>data</span> <span m=''150830''>assembly</span>
  <span m=''151240''>line</span> <span m=''151570''>or</span> <span m=''151710''>producer-consumer</span>
  <span m=''152530''>chains,</span> <span m=''153310''>and</span> <span m=''153780''>you</span>
  <span m=''153880''>essentially</span> <span m=''154200''>want</span> <span m=''154400''>to</span>
  <span m=''154490''>recognize</span> <span m=''155000''>those</span> <span m=''155200''>in</span>
  <span m=''155270''>your</span> <span m=''155410''>computation</span> <span m=''157160''>and</span>
  <span m=''157340''>make</span> <span m=''157490''>it</span> <span m=''157590''>so</span>
  <span m=''157680''>that</span> <span m=''157810''>you</span> <span m=''157920''>can</span>
  <span m=''158090''>exploit</span> <span m=''158520''>them</span> <span m=''159140''>eventually</span>
  <span m=''159640''>when</span> <span m=''159770''>you''re</span> <span m=''159890''>doing</span>
  <span m=''160300''>your</span> <span m=''160400''>mapping</span> <span m=''161220''>down</span>
  <span m=''161460''>to</span> <span m=''161520''>actual</span> <span m=''161790''>hardware.</span>
  </p><p><span m=''164030''>But</span> <span m=''164170''>what</span> <span m=''164290''>does</span>
  <span m=''164400''>it</span> <span m=''164500''>mean</span> <span m=''164770''>for</span>
  <span m=''164960''>two</span> <span m=''165130''>tasks</span> <span m=''165490''>to
  actually</span> <span m=''165880''>be</span> <span m=''166210''>concurrent?</span>
  <span m=''167700''>And</span> <span m=''168020''>how</span> <span m=''168150''>do</span>
  <span m=''168230''>you</span> <span m=''168340''>know</span> <span m=''168460''>that</span>
  <span m=''168600''>you</span> <span m=''168710''>can</span> <span m=''168830''>safely</span>
  <span m=''169230''>actually</span> <span m=''169580''>run</span> <span m=''169790''>two</span>
  <span m=''169980''>tasks</span> <span m=''170360''>in</span> <span m=''170470''>parallel?</span>
  <span m=''171230''>So there''s</span> <span m=''171440''>something</span> <span
  m=''172220''>I</span> <span m=''172320''>crudely</span> <span m=''172690''>went</span>
  <span m=''172850''>over</span> <span m=''173040''>last</span> <span m=''173310''>time.</span>
  <span m=''174320''>So</span> <span m=''174480''>as to</span> <span m=''174650''>make</span>
  <span m=''174820''>it</span> <span m=''175580''>more</span> <span m=''175760''>concrete,</span>
  <span m=''177630''>highlighting</span> <span m=''178180''>Bernstein''s</span> <span
  m=''178700''>condition,</span> <span m=''179320''>which</span> <span m=''179620''>says</span>
  <span m=''179920''>that</span> <span m=''180170''>given</span> <span m=''180530''>two</span>
  <span m=''180730''>tasks,</span> <span m=''181590''>if</span> <span m=''181960''>the</span>
  <span m=''182050''>input</span> <span m=''182400''>set</span> <span m=''182990''>to
  one</span> <span m=''183230''>task</span> <span m=''184050''>is</span> <span m=''184460''>different</span>
  <span m=''184840''>from</span> <span m=''185220''>or</span> <span m=''186270''>does</span>
  <span m=''186410''>not</span> <span m=''186630''>intersect</span> <span m=''188240''>with</span>
  <span m=''188490''>the</span> <span m=''188560''>output</span> <span m=''188640''>set</span>
  <span m=''188870''>of</span> <span m=''189120''>another,</span> <span m=''190310''>and</span>
  <span m=''190520''>vice</span> <span m=''190750''>versa,</span> <span m=''191530''>and</span>
  <span m=''191850''>neither</span> <span m=''192030''>task</span> <span m=''192470''>sort
  of</span> <span m=''193050''>updates</span> <span m=''193440''>the</span> <span
  m=''193520''>same</span> <span m=''193740''>data</span> <span m=''193910''>structures</span>
  <span m=''194370''>in</span> <span m=''194450''>memory,</span> <span m=''195240''>then</span>
  <span m=''195810''>there''s</span> <span m=''196060''>really</span> <span m=''196380''>no</span>
  <span m=''196970''>dependency</span> <span m=''197660''>issues</span> <span m=''197970''>between</span>
  <span m=''198350''>them.</span> <span m=''198470''>You</span> <span m=''198600''>can</span>
  <span m=''198730''>run</span> <span m=''198880''>them</span> <span m=''199000''>safely</span>
  <span m=''200820''>in</span> <span m=''200970''>parallel.</span> </p><p><span m=''201650''>So</span>
  <span m=''202400''>task</span> <span m=''202780''>T1</span> <span m=''202920''>and</span>
  <span m=''203220''>T2,</span> <span m=''203750''>if</span> <span m=''204320''>all</span>
  <span m=''204520''>the</span> <span m=''204600''>data</span> <span m=''204840''>that''s</span>
  <span m=''205020''>consumed</span> <span m=''205410''>by</span> <span m=''205710''>T1,</span>
  <span m=''205980''>so</span> <span m=''206150''>all the</span> <span m=''206360''>data</span>
  <span m=''206610''>elements</span> <span m=''206940''>that</span> <span m=''207030''>are</span>
  <span m=''207090''>read</span> <span m=''207310''>by T1</span> <span m=''208340''>are</span>
  <span m=''208640''>different</span> <span m=''209460''>from</span> <span m=''209840''>the</span>
  <span m=''209930''>ones</span> <span m=''210220''>that</span> <span m=''210330''>are</span>
  <span m=''210390''>read</span> <span m=''210540''>by</span> <span m=''211270''>T2,</span>
  <span m=''211670''>then</span> <span m=''212080''>you</span> <span m=''212220''>have
  --</span> <span m=''213020''>you</span> <span m=''213150''>know,</span> <span m=''213630''>if</span>
  <span m=''213890''>T2 is</span> <span m=''214410''>running</span> <span m=''214640''>in</span>
  <span m=''214720''>parallel,</span> <span m=''215140''>there''s</span> <span m=''215440''>really</span>
  <span m=''216960''>no</span> <span m=''217130''>problem</span> <span m=''217500''>with</span>
  <span m=''217770''>T1</span> <span m=''218110''>because</span> <span m=''219470''>it''s</span>
  <span m=''219660''>updating</span> <span m=''220060''>the</span> <span m=''220240''>orthogonal</span>
  <span m=''220480''>data</span> <span m=''220600''>set.</span> <span m=''221360''>Similarly</span>
  <span m=''222120''>for</span> <span m=''222400''>T2</span> <span m=''222840''>and</span>
  <span m=''223100''>T1,</span> <span m=''223350''>any</span> <span m=''223740''>outputs</span>
  <span m=''224190''>are</span> <span m=''224350''>different.</span> </p><p><span
  m=''225060''>So</span> <span m=''226170''>as</span> <span m=''226330''>an</span>
  <span m=''226410''>example,</span> <span m=''227550''>let''s</span> <span m=''227680''>say</span>
  <span m=''227800''>you</span> <span m=''227910''>have</span> <span m=''228460''>two</span>
  <span m=''228630''>tasks.</span> <span m=''229480''>In</span> <span m=''229990''>T1</span>
  <span m=''230260''>you''re</span> <span m=''230440''>doing</span> <span m=''231070''>some</span>
  <span m=''231340''>basic</span> <span m=''231670''>statements.</span> <span m=''232240''>And
  these</span> <span m=''232620''>could</span> <span m=''232750''>be</span> <span
  m=''233160''>essentially</span> <span m=''234140''>more</span> <span m=''234360''>coarse</span>
  <span m=''234590''>grained.</span> <span m=''234850''>There</span> <span m=''234920''>could</span>
  <span m=''235030''>be</span> <span m=''235120''>a</span> <span m=''235210''>lot</span>
  <span m=''235540''>more</span> <span m=''235700''>computation</span> <span m=''236240''>in</span>
  <span m=''236350''>here.</span> <span m=''236580''>I just</span> <span m=''236750''>simplified</span>
  <span m=''237170''>it</span> <span m=''238510''>for the</span> <span m=''238690''>illustration.</span>
  <span m=''240390''>So</span> <span m=''240480''>you</span> <span m=''240580''>have</span>
  <span m=''240780''>task</span> <span m=''241180''>a</span> <span m=''241410''>equals</span>
  <span m=''242160''>x plus y.</span> <span m=''242980''>And</span> <span m=''243210''>task</span>
  <span m=''243590''>two</span> <span m=''244150''>does</span> <span m=''244580''>b</span>
  <span m=''245100''>equals</span> <span m=''245320''>x</span> <span m=''245460''>plus
  z.</span> <span m=''246300''>So</span> <span m=''246460''>if</span> <span m=''246540''>we</span>
  <span m=''246640''>look</span> <span m=''246810''>at</span> <span m=''247260''>the</span>
  <span m=''247360''>read set</span> <span m=''247930''>for</span> <span m=''248080''>T1,</span>
  <span m=''248860''>these</span> <span m=''249060''>are</span> <span m=''249140''>all</span>
  <span m=''249430''>the</span> <span m=''249660''>variables</span> <span m=''250450''>or</span>
  <span m=''250710''>data</span> <span m=''251010''>structures</span> <span m=''252200''>or</span>
  <span m=''252410''>addresses</span> <span m=''252770''>these</span> <span m=''253000''>that</span>
  <span m=''253100''>are</span> <span m=''253170''>read</span> <span m=''253390''>by
  the</span> <span m=''253550''>first task.</span> <span m=''254490''>So</span> <span
  m=''254740''>that''s</span> <span m=''254910''>x and y</span> <span m=''255580''>here.</span>
  <span m=''256320''>And</span> <span m=''256730''>all</span> <span m=''256890''>the</span>
  <span m=''256970''>data</span> <span m=''257230''>that''s</span> <span m=''257370''>written</span>
  <span m=''257670''>or</span> <span m=''257790''>produced</span> <span m=''258220''>by</span>
  <span m=''258760''>T1.</span> <span m=''259480''>So</span> <span m=''259820''>here</span>
  <span m=''260040''>we''re</span> <span m=''260150''>just</span> <span m=''260310''>producing</span>
  <span m=''261100''>one</span> <span m=''261480''>data</span> <span m=''261700''>value.</span>
  <span m=''262320''>And</span> <span m=''262630''>that''s</span> <span m=''262790''>going</span>
  <span m=''263050''>into</span> <span m=''263370''>location</span> <span m=''263770''>A.</span>
  </p><p><span m=''264830''>Similarly</span> <span m=''265140''>we</span> <span m=''265220''>can</span>
  <span m=''265330''>come</span> <span m=''265510''>up</span> <span m=''265610''>with</span>
  <span m=''265830''>the</span> <span m=''265930''>read set</span> <span m=''266480''>and</span>
  <span m=''266670''>write</span> <span m=''266900''>set</span> <span m=''267090''>for</span>
  <span m=''267410''>T2.</span> <span m=''268510''>And</span> <span m=''268710''>so</span>
  <span m=''269000''>that''s</span> <span m=''269480''>shown</span> <span m=''270380''>on</span>
  <span m=''271120''>here.</span> <span m=''272220''>So</span> <span m=''272350''>we</span>
  <span m=''272460''>have --</span> <span m=''273020''>task</span> <span m=''273300''>T2</span>
  <span m=''273540''>has</span> <span m=''273740''>x</span> <span m=''274000''>plus</span>
  <span m=''274170''>z</span> <span m=''274320''>in</span> <span m=''274430''>its</span>
  <span m=''274530''>read set.</span> <span m=''275530''>And</span> <span m=''275760''>it</span>
  <span m=''275820''>produces</span> <span m=''276210''>one</span> <span m=''276380''>data</span>
  <span m=''276520''>value,</span> <span m=''276840''>b.</span> <span m=''277440''>If</span>
  <span m=''277600''>we</span> <span m=''277700''>take</span> <span m=''277900''>the</span>
  <span m=''277980''>intersection</span> <span m=''279330''>of the</span> <span m=''279740''>read</span>
  <span m=''280000''>and</span> <span m=''280180''>write sets</span> <span m=''280340''>for
  the</span> <span m=''280410''>different</span> <span m=''280680''>tasks,</span>
  <span m=''281080''>then</span> <span m=''281310''>they''re</span> <span m=''281450''>empty.</span>
  <span m=''283550''>I</span> <span m=''283730''>read</span> <span m=''283990''>something</span>
  <span m=''284230''>completely</span> <span m=''284520''>different</span> <span m=''284830''>than</span>
  <span m=''284920''>what''s</span> <span m=''285100''>produced</span> <span m=''285440''>in</span>
  <span m=''285530''>this</span> <span m=''285710''>task</span> <span m=''286360''>and</span>
  <span m=''286760''>vice</span> <span m=''287040''>versa.</span> <span m=''287510''>And</span>
  <span m=''288020''>they</span> <span m=''288170''>write</span> <span m=''288430''>to</span>
  <span m=''288630''>two</span> <span m=''288800''>completely</span> <span m=''289190''>different</span>
  <span m=''289500''>memory</span> <span m=''289690''>locations.</span> <span m=''290530''>So</span>
  <span m=''291050''>I</span> <span m=''291210''>can</span> <span m=''291530''>essentially</span>
  <span m=''291950''>parallelize</span> <span m=''292590''>these</span> <span m=''292820''>or
  run these</span> <span m=''293020''>two</span> <span m=''293120''>tasks</span> <span
  m=''293430''>in</span> <span m=''293500''>parallel.</span> </p><p><span m=''294810''>So</span>
  <span m=''294940''>you</span> <span m=''295050''>can</span> <span m=''295170''>extend</span>
  <span m=''297270''>this</span> <span m=''297590''>analysis.</span> <span m=''298260''>And</span>
  <span m=''298470''>compilers</span> <span m=''298870''>can</span> <span m=''299030''>actually</span>
  <span m=''299370''>use</span> <span m=''299610''>this</span> <span m=''299720''>condition</span>
  <span m=''300840''>to</span> <span m=''300970''>determine</span> <span m=''301470''>when</span>
  <span m=''301680''>two</span> <span m=''301810''>tasks</span> <span m=''302110''>can
  be</span> <span m=''302290''>parallelized</span> <span m=''302860''>if</span> <span
  m=''302960''>you''re</span> <span m=''303060''>doing</span> <span m=''303300''>automatic</span>
  <span m=''305020''>parallelization.</span> <span m=''305380''>And</span> <span m=''305770''>you''ll</span>
  <span m=''306110''>probably</span> <span m=''306500''>hear</span> <span m=''306820''>more</span>
  <span m=''307060''>about</span> <span m=''307290''>these</span> <span m=''307500''>later</span>
  <span m=''307690''>on.</span> </p><p><span m=''310680''>And</span> <span m=''310890''>so</span>
  <span m=''311370''>what</span> <span m=''311520''>I</span> <span m=''311570''>focused</span>
  <span m=''311910''>on</span> <span m=''312080''>last</span> <span m=''312340''>time</span>
  <span m=''312570''>were</span> <span m=''313320''>the</span> <span m=''313540''>finding</span>
  <span m=''313990''>concurrency</span> <span m=''315660''>patterns.</span> <span
  m=''316530''>And</span> <span m=''317020''>I</span> <span m=''317150''>had</span>
  <span m=''317440''>identified</span> <span m=''318220''>sort of</span> <span m=''318320''>four</span>
  <span m=''318690''>design</span> <span m=''319040''>spaces</span> <span m=''319480''>based</span>
  <span m=''319780''>on</span> <span m=''320630''>the</span> <span m=''320760''>work</span>
  <span m=''321220''>that''s</span> <span m=''322030''>outlined</span> <span m=''322410''>in</span>
  <span m=''322480''>the</span> <span m=''322560''>book</span> <span m=''322950''>by</span>
  <span m=''323520''>Mattson,</span> <span m=''323930''>Sanders,</span> <span m=''324310''>and</span>
  <span m=''324530''>Massingill.</span> <span m=''326160''>And</span> <span m=''326820''>so</span>
  <span m=''327170''>starting</span> <span m=''327560''>with</span> <span m=''328750''>two</span>
  <span m=''329110''>large</span> <span m=''330300''>sort of</span> <span m=''330910''>concepts.</span>
  <span m=''331750''>The</span> <span m=''331900''>first</span> <span m=''332330''>helps</span>
  <span m=''332670''>you</span> <span m=''333830''>figure</span> <span m=''334060''>out</span>
  <span m=''334270''>how</span> <span m=''334490''>you''re</span> <span m=''334570''>going</span>
  <span m=''334770''>to</span> <span m=''334840''>actually</span> <span m=''335210''>express</span>
  <span m=''335560''>your</span> <span m=''335660''>algorithm.</span> <span m=''336310''>So</span>
  <span m=''336570''>first</span> <span m=''336890''>you</span> <span m=''336960''>find</span>
  <span m=''337210''>your</span> <span m=''337300''>concurrency</span> <span m=''337970''>and</span>
  <span m=''338110''>then</span> <span m=''338210''>you</span> <span m=''338500''>organize
  in</span> <span m=''339070''>some way.</span> <span m=''339640''>And</span> <span
  m=''339790''>so we''re</span> <span m=''339930''>going to</span> <span m=''340120''>talk</span>
  <span m=''340350''>about</span> <span m=''340530''>that</span> <span m=''340670''>in</span>
  <span m=''340730''>more</span> <span m=''340920''>detail.</span> </p><p><span m=''342240''>And</span>
  <span m=''342410''>then</span> <span m=''342750''>once</span> <span m=''343000''>you''ve</span>
  <span m=''343190''>organized</span> <span m=''343820''>your tasks</span> <span m=''344230''>in</span>
  <span m=''344330''>some</span> <span m=''344510''>way</span> <span m=''344690''>that</span>
  <span m=''344790''>actually</span> <span m=''345140''>expresses</span> <span m=''345570''>your</span>
  <span m=''345670''>overall</span> <span m=''346490''>computation,</span> <span m=''347520''>you</span>
  <span m=''347620''>need</span> <span m=''347800''>some</span> <span m=''348070''>software</span>
  <span m=''348400''>construction</span> <span m=''349550''>utilities</span> <span
  m=''350620''>or</span> <span m=''351640''>data</span> <span m=''351920''>structures</span>
  <span m=''352670''>or</span> <span m=''352890''>mechanisms</span> <span m=''353450''>for</span>
  <span m=''353790''>actually</span> <span m=''354140''>orchestrating</span> <span
  m=''354630''>computations</span> <span m=''355640''>for</span> <span m=''355810''>which</span>
  <span m=''356060''>they have</span> <span m=''356300''>also</span> <span m=''356660''>abstracted</span>
  <span m=''357190''>out</span> <span m=''357340''>some</span> <span m=''357600''>common</span>
  <span m=''357910''>patterns.</span> <span m=''358560''>And</span> <span m=''358800''>so</span>
  <span m=''359030''>I''ll</span> <span m=''359530''>briefly</span> <span m=''359890''>talk</span>
  <span m=''360160''>about</span> <span m=''360380''>these</span> <span m=''360570''>as</span>
  <span m=''360690''>well.</span> </p><p><span m=''361840''>And so</span> <span m=''362100''>on
  your</span> <span m=''362400''>algorithm</span> <span m=''362740''>expression</span>
  <span m=''363240''>side,</span> <span m=''363620''>these are</span> <span m=''363870''>essentially</span>
  <span m=''364910''>conceptualization</span> <span m=''365900''>steps</span> <span
  m=''366590''>that</span> <span m=''366870''>help</span> <span m=''367120''>you</span>
  <span m=''367220''>abstract</span> <span m=''367740''>out</span> <span m=''367850''>your</span>
  <span m=''367950''>problem.</span> <span m=''368500''>And</span> <span m=''369810''>you</span>
  <span m=''369910''>may</span> <span m=''370080''>in</span> <span m=''370220''>fact</span>
  <span m=''370950''>think</span> <span m=''371180''>about</span> <span m=''371750''>your</span>
  <span m=''372080''>algorithm</span> <span m=''372490''>expression in</span> <span
  m=''372940''>different</span> <span m=''373250''>ways</span> <span m=''373550''>to</span>
  <span m=''373630''>expose</span> <span m=''374010''>different</span> <span m=''374270''>kinds</span>
  <span m=''374480''>of</span> <span m=''374710''>concurrency</span> <span m=''375370''>or</span>
  <span m=''375820''>to</span> <span m=''375930''>be</span> <span m=''376030''>able</span>
  <span m=''376250''>to</span> <span m=''376350''>explore</span> <span m=''377340''>different</span>
  <span m=''377630''>ways</span> <span m=''377860''>of</span> <span m=''377960''>mapping</span>
  <span m=''378330''>the</span> <span m=''378400''>concurrency</span> <span m=''379570''>to</span>
  <span m=''379720''>hardware.</span> <span m=''380610''>And</span> <span m=''380950''>so</span>
  <span m=''381060''>for</span> <span m=''381260''>construction</span> <span m=''381810''>it''s</span>
  <span m=''381910''>more</span> <span m=''382130''>about</span> <span m=''382580''>actual</span>
  <span m=''382940''>engineering</span> <span m=''383540''>and</span> <span m=''383640''>implementation.</span>
  <span m=''385200''>So</span> <span m=''385370''>here</span> <span m=''385600''>you''re</span>
  <span m=''385670''>actually</span> <span m=''385970''>thinking</span> <span m=''386220''>about</span>
  <span m=''386340''>what</span> <span m=''386480''>do the</span> <span m=''386550''>data</span>
  <span m=''386910''>structures</span> <span m=''387370''>look</span> <span m=''387510''>like?</span>
  <span m=''388210''>What</span> <span m=''388400''>is</span> <span m=''388510''>the</span>
  <span m=''388590''>communication</span> <span m=''389130''>pattern</span> <span
  m=''389320''>going to</span> <span m=''389410''>look</span> <span m=''389870''>like?</span>
  <span m=''390050''>Am</span> <span m=''390200''>I</span> <span m=''390310''>but</span>
  <span m=''390470''>going to</span> <span m=''390590''>use</span> <span m=''390720''>things</span>
  <span m=''390930''>like</span> <span m=''391230''>MPI</span> <span m=''391620''>or</span>
  <span m=''392170''>OpenMP?</span> <span m=''392660''>What</span> <span m=''392870''>does</span>
  <span m=''392980''>that</span> <span m=''393140''>help</span> <span m=''393360''>me</span>
  <span m=''393490''>with</span> <span m=''394040''>in</span> <span m=''394140''>terms</span>
  <span m=''394420''>of</span> <span m=''395230''>doing</span> <span m=''396040''>my</span>
  <span m=''396270''>implementation?</span> </p><p><span m=''400320''>So</span> <span
  m=''400890''>given a</span> <span m=''401370''>collection</span> <span m=''401790''>of</span>
  <span m=''402060''>concurrent</span> <span m=''402340''>tasks --</span> <span m=''402570''>so</span>
  <span m=''402670''>you''ve</span> <span m=''402800''>done</span> <span m=''402990''>your</span>
  <span m=''403100''>first</span> <span m=''403340''>step</span> <span m=''403600''>in</span>
  <span m=''403690''>your</span> <span m=''404220''>four</span> <span m=''404500''>design</span>
  <span m=''404800''>patterns.</span> <span m=''406080''>You know,</span> <span m=''406580''>what</span>
  <span m=''406750''>is</span> <span m=''406880''>your</span> <span m=''407000''>next</span>
  <span m=''407230''>step?</span> <span m=''407510''>And</span> <span m=''407620''>that''s</span>
  <span m=''407760''>really</span> <span m=''408010''>mapping</span> <span m=''408440''>those</span>
  <span m=''408640''>tasks</span> <span m=''409150''>that you''ve</span> <span m=''409390''>identified</span>
  <span m=''410150''>down</span> <span m=''410400''>to</span> <span m=''410620''>some</span>
  <span m=''410820''>sort</span> <span m=''411010''>of</span> <span m=''411090''>execution</span>
  <span m=''411600''>units.</span> <span m=''412600''>So</span> <span m=''413290''>threads</span>
  <span m=''413760''>are</span> <span m=''413970''>very</span> <span m=''414230''>common.</span>
  <span m=''414660''>This</span> <span m=''414800''>is</span> <span m=''414920''>essentially</span>
  <span m=''415260''>what</span> <span m=''415430''>we''ve</span> <span m=''415610''>been
  using</span> <span m=''415920''>on Cell.</span> <span m=''416970''>We</span> <span
  m=''417130''>take</span> <span m=''417390''>our</span> <span m=''417480''>computation
  and</span> <span m=''418080''>we</span> <span m=''418220''>wrap</span> <span m=''418470''>it</span>
  <span m=''418550''>into</span> <span m=''418760''>SPE</span> <span m=''419180''>threads</span>
  <span m=''419670''>and</span> <span m=''419960''>then</span> <span m=''420050''>we</span>
  <span m=''420140''>can</span> <span m=''420310''>execute</span> <span m=''420790''>those</span>
  <span m=''421870''>at run</span> <span m=''422050''>time.</span> </p><p><span m=''423500''>So</span>
  <span m=''423870''>some things</span> <span m=''424300''>to</span> <span m=''424400''>keep</span>
  <span m=''424620''>in</span> <span m=''424690''>mind --</span> <span m=''424990''>although</span>
  <span m=''425270''>you</span> <span m=''425350''>shouldn''t</span> <span m=''425650''>over</span>
  <span m=''425900''>constrain</span> <span m=''426290''>yourself</span> <span m=''426710''>in</span>
  <span m=''426780''>terms</span> <span m=''427030''>of</span> <span m=''427870''>these</span>
  <span m=''428460''>considerations.</span> <span m=''429600''>What</span> <span m=''429780''>is</span>
  <span m=''429930''>the</span> <span m=''430020''>magnitude</span> <span m=''430670''>of</span>
  <span m=''431140''>your</span> <span m=''431270''>parallelism</span> <span m=''432100''>that
  you''re</span> <span m=''432200''>going to</span> <span m=''432280''>get?</span>
  <span m=''432580''>You</span> <span m=''432730''>know,</span> <span m=''432790''>do</span>
  <span m=''432890''>you</span> <span m=''432970''>want</span> <span m=''433210''>hundreds</span>
  <span m=''433640''>or</span> <span m=''433750''>thousands</span> <span m=''434180''>of</span>
  <span m=''434280''>threads?</span> <span m=''435030''>Or</span> <span m=''435290''>do</span>
  <span m=''435370''>you</span> <span m=''435430''>want</span> <span m=''435640''>something</span>
  <span m=''435930''>on the</span> <span m=''436020''>order</span> <span m=''436450''>of
  tens?</span> <span m=''438630''>And</span> <span m=''439390''>this</span> <span
  m=''439550''>is</span> <span m=''439630''>because</span> <span m=''439900''>you</span>
  <span m=''439980''>don''t</span> <span m=''440100''>want to</span> <span m=''440230''>overwhelm</span>
  <span m=''441310''>the</span> <span m=''441620''>intended</span> <span m=''442030''>system</span>
  <span m=''442340''>that</span> <span m=''442430''>you''re</span> <span m=''442570''>going</span>
  <span m=''442750''>to</span> <span m=''442880''>run on.</span> <span m=''443540''>So</span>
  <span m=''444160''>we</span> <span m=''444380''>talked</span> <span m=''444680''>about</span>
  <span m=''444880''>yesterday</span> <span m=''445280''>on</span> <span m=''445690''>Cell</span>
  <span m=''445950''>processor,</span> <span m=''446740''>if</span> <span m=''446910''>you''re</span>
  <span m=''447010''>creating</span> <span m=''447440''>a</span> <span m=''447530''>lot</span>
  <span m=''447740''>more</span> <span m=''447980''>than</span> <span m=''448190''>six</span>
  <span m=''448570''>threads,</span> <span m=''449240''>then</span> <span m=''449430''>you</span>
  <span m=''449550''>can</span> <span m=''449670''>create</span> <span m=''449960''>problems</span>
  <span m=''450560''>or</span> <span m=''450900''>you</span> <span m=''451090''>essentially</span>
  <span m=''451440''>don''t</span> <span m=''451670''>get</span> <span m=''451920''>extra</span>
  <span m=''452170''>parallelism</span> <span m=''452660''>because</span> <span m=''452990''>each</span>
  <span m=''453230''>thread</span> <span m=''453510''>is</span> <span m=''453660''>running</span>
  <span m=''454170''>to</span> <span m=''454300''>completion</span> <span m=''454740''>on</span>
  <span m=''454890''>each</span> <span m=''455140''>SPE.</span> <span m=''455710''>And</span>
  <span m=''456120''>contact</span> <span m=''456500''>switch</span> <span m=''456680''>overhead</span>
  <span m=''456860''>is</span> <span m=''457030''>extremely</span> <span m=''457510''>high.</span>
  </p><p><span m=''458140''>So</span> <span m=''458710''>you</span> <span m=''458830''>don''t</span>
  <span m=''459010''>want</span> <span m=''459180''>to</span> <span m=''459260''>spend</span>
  <span m=''459580''>too</span> <span m=''459720''>much</span> <span m=''459950''>engineering</span>
  <span m=''460420''>cost</span> <span m=''460770''>to</span> <span m=''460870''>come</span>
  <span m=''461010''>up</span> <span m=''461160''>with</span> <span m=''461290''>an</span>
  <span m=''461510''>algorithm</span> <span m=''461790''>implementation</span> <span
  m=''462510''>that''s</span> <span m=''462960''>massively</span> <span m=''463700''>scalable</span>
  <span m=''463930''>to</span> <span m=''464050''>hundreds</span> <span m=''464480''>or</span>
  <span m=''464610''>thousands</span> <span m=''465060''>of</span> <span m=''465140''>threads</span>
  <span m=''465700''>when</span> <span m=''465940''>you</span> <span m=''466020''>can''t</span>
  <span m=''466250''>actually</span> <span m=''466590''>exploit</span> <span m=''467010''>it.</span>
  <span m=''467670''>But</span> <span m=''467840''>that</span> <span m=''467990''>doesn''t</span>
  <span m=''468260''>mean</span> <span m=''468560''>that</span> <span m=''468790''>you</span>
  <span m=''468920''>should</span> <span m=''469100''>over</span> <span m=''469370''>constrain</span>
  <span m=''469820''>your</span> <span m=''469940''>implementation</span> <span m=''470680''>to</span>
  <span m=''470820''>where</span> <span m=''471410''>if</span> <span m=''471620''>now</span>
  <span m=''471880''>I</span> <span m=''471930''>want</span> <span m=''472160''>to</span>
  <span m=''472250''>take</span> <span m=''472480''>your</span> <span m=''472570''>code</span>
  <span m=''472880''>and</span> <span m=''473000''>run</span> <span m=''473170''>it
  on</span> <span m=''473310''>a</span> <span m=''473360''>different</span> <span
  m=''473650''>machine,</span> <span m=''474420''>I</span> <span m=''474610''>essentially</span>
  <span m=''475010''>have</span> <span m=''475180''>to</span> <span m=''475440''>redesign</span>
  <span m=''475900''>or</span> <span m=''476080''>re-engineer</span> <span m=''476980''>the</span>
  <span m=''477280''>complete</span> <span m=''477670''>process.</span> <span m=''478410''>So</span>
  <span m=''478600''>you</span> <span m=''478700''>want to</span> <span m=''479070''>avoid</span>
  <span m=''479480''>tendencies</span> <span m=''480080''>to</span> <span m=''480360''>over
  constrain the</span> <span m=''480790''>implementation.</span> <span m=''482000''>And</span>
  <span m=''482170''>you</span> <span m=''482240''>want</span> <span m=''482410''>to</span>
  <span m=''482470''>leave</span> <span m=''482730''>your</span> <span m=''482910''>code</span>
  <span m=''483320''>in</span> <span m=''483390''>a</span> <span m=''483450''>way</span>
  <span m=''483640''>that''s</span> <span m=''483870''>malleable</span> <span m=''484340''>so</span>
  <span m=''484490''>that you</span> <span m=''484640''>can</span> <span m=''484760''>easily</span>
  <span m=''485110''>make</span> <span m=''485340''>changes</span> <span m=''486430''>to</span>
  <span m=''486690''>sort of</span> <span m=''487000''>factor in</span> <span m=''487580''>new</span>
  <span m=''487770''>platforms</span> <span m=''488240''>that</span> <span m=''488390''>you</span>
  <span m=''488460''>want to</span> <span m=''488720''>run</span> <span m=''488900''>on</span>
  <span m=''489590''>or</span> <span m=''489870''>new</span> <span m=''490000''>machine</span>
  <span m=''490340''>architecture</span> <span m=''490850''>features</span> <span
  m=''491240''>that</span> <span m=''491340''>you</span> <span m=''491440''>might</span>
  <span m=''491640''>want to</span> <span m=''491830''>exploit.</span> </p><p><span
  m=''494500''>So there</span> <span m=''494610''>are</span> <span m=''495750''>three</span>
  <span m=''496010''>major</span> <span m=''496320''>organization</span> <span m=''497080''>principles</span>
  <span m=''497550''>I''m</span> <span m=''497670''>going to</span> <span m=''497860''>talk
  about.</span> <span m=''500060''>And</span> <span m=''500190''>none</span> <span
  m=''500320''>of</span> <span m=''500440''>these</span> <span m=''500640''>should</span>
  <span m=''500800''>be</span> <span m=''501070''>sort</span> <span m=''501160''>of</span>
  <span m=''501250''>foreign</span> <span m=''501850''>to</span> <span m=''501960''>you</span>
  <span m=''502040''>at</span> <span m=''502130''>this</span> <span m=''502280''>point</span>
  <span m=''502520''>because</span> <span m=''502800''>we''ve</span> <span m=''502970''>talked</span>
  <span m=''503240''>about</span> <span m=''503430''>them</span> <span m=''503590''>in</span>
  <span m=''503660''>different</span> <span m=''503980''>ways</span> <span m=''504950''>in
  the</span> <span m=''505100''>recitations</span> <span m=''505910''>or in</span>
  <span m=''506090''>previous</span> <span m=''506500''>lectures.</span> <span m=''508510''>And</span>
  <span m=''508860''>it''s</span> <span m=''509000''>really,</span> <span m=''509440''>what</span>
  <span m=''509650''>is</span> <span m=''509770''>it</span> <span m=''509880''>that</span>
  <span m=''510020''>determines</span> <span m=''510620''>sort</span> <span m=''510900''>of</span>
  <span m=''511100''>the</span> <span m=''511240''>algorithm</span> <span m=''511340''>structure</span>
  <span m=''512030''>based</span> <span m=''512350''>on</span> <span m=''512510''>the</span>
  <span m=''512580''>set</span> <span m=''512720''>of</span> <span m=''512820''>tasks
  that you''re</span> <span m=''513290''>actually</span> <span m=''513680''>carrying</span>
  <span m=''514050''>out</span> <span m=''514550''>in</span> <span m=''514670''>your</span>
  <span m=''514790''>computation?</span> </p><p><span m=''516070''>And</span> <span
  m=''516230''>so</span> <span m=''516410''>there''s</span> <span m=''517140''>the</span>
  <span m=''517240''>principle</span> <span m=''517670''>that</span> <span m=''517830''>says,</span>
  <span m=''518180''>organize</span> <span m=''518660''>things</span> <span m=''518910''>by</span>
  <span m=''519050''>tasks.</span> <span m=''520450''>I''m</span> <span m=''520620''>going
  to</span> <span m=''521200''>talk</span> <span m=''521460''>to</span> <span m=''521590''>that.</span>
  <span m=''522030''>And</span> <span m=''522220''>then</span> <span m=''522330''>there''s
  a</span> <span m=''522500''>principle</span> <span m=''522860''>that</span> <span
  m=''523020''>says,</span> <span m=''523290''>well,</span> <span m=''523520''>organize</span>
  <span m=''523980''>things</span> <span m=''524180''>by</span> <span m=''524690''>how</span>
  <span m=''524830''>you''re</span> <span m=''524990''>doing</span> <span m=''525180''>the</span>
  <span m=''525260''>data</span> <span m=''525670''>decomposition.</span> <span m=''526700''>So</span>
  <span m=''527960''>in</span> <span m=''528080''>this</span> <span m=''528230''>case</span>
  <span m=''528630''>how</span> <span m=''528820''>you''re</span> <span m=''528930''>actually</span>
  <span m=''529210''>distributing</span> <span m=''529690''>the</span> <span m=''529760''>data</span>
  <span m=''530090''>or</span> <span m=''530350''>how</span> <span m=''530520''>to</span>
  <span m=''530630''>the</span> <span m=''530770''>data is</span> <span m=''530950''>laid</span>
  <span m=''531150''>out</span> <span m=''531290''>in</span> <span m=''531360''>memory,</span>
  <span m=''532010''>or</span> <span m=''532320''>how</span> <span m=''532510''>you''re</span>
  <span m=''533260''>partitioning</span> <span m=''533800''>the</span> <span m=''533900''>data
  to</span> <span m=''534190''>actually</span> <span m=''534550''>compute</span> <span
  m=''534920''>on</span> <span m=''535040''>it</span> <span m=''535510''>dictates</span>
  <span m=''536130''>how</span> <span m=''536410''>you</span> <span m=''536480''>should</span>
  <span m=''536640''>actually</span> <span m=''537330''>organize</span> <span m=''538000''>your
  actual</span> <span m=''538330''>computation.</span> </p><p><span m=''539420''>And</span>
  <span m=''539710''>then</span> <span m=''539840''>there''s</span> <span m=''540240''>organize</span>
  <span m=''540780''>by</span> <span m=''540940''>flow of</span> <span m=''541360''>data.</span>
  <span m=''541780''>And this is</span> <span m=''542190''>something</span> <span
  m=''542480''>you''ll</span> <span m=''543180''>hear</span> <span m=''543460''>about</span>
  <span m=''543710''>more</span> <span m=''544010''>in the</span> <span m=''544480''>next</span>
  <span m=''544870''>lecture</span> <span m=''545150''>where we''re</span> <span m=''545330''>talking</span>
  <span m=''545630''>about</span> <span m=''545750''>streaming.</span> <span m=''546540''>But</span>
  <span m=''547150''>in</span> <span m=''547350''>this</span> <span m=''547560''>pattern</span>
  <span m=''549100''>if</span> <span m=''549300''>there are</span> <span m=''549590''>specific</span>
  <span m=''551740''>sort</span> <span m=''551970''>of</span> <span m=''552210''>computations</span>
  <span m=''553040''>that</span> <span m=''553180''>take</span> <span m=''553410''>advantage</span>
  <span m=''553930''>of</span> <span m=''555500''>high</span> <span m=''555760''>bandwidth</span>
  <span m=''556230''>flow</span> <span m=''556490''>of data</span> <span m=''556790''>between</span>
  <span m=''557130''>computations,</span> <span m=''558170''>you</span> <span m=''558280''>might</span>
  <span m=''558450''>want to</span> <span m=''558670''>exploit</span> <span m=''559220''>that</span>
  <span m=''559610''>for</span> <span m=''560000''>concurrency.</span> <span m=''560520''>And
  we''ll</span> <span m=''560710''>talk</span> <span m=''560950''>about</span> <span
  m=''561120''>that</span> <span m=''561310''>as</span> <span m=''561410''>well.</span>
  </p><p><span m=''563540''>OK.</span> <span m=''564100''>So</span> <span m=''565370''>a</span>
  <span m=''565490''>design</span> <span m=''565890''>diagram</span> <span m=''566310''>for</span>
  <span m=''566600''>how</span> <span m=''566830''>can</span> <span m=''566980''>you</span>
  <span m=''567070''>actually</span> <span m=''567820''>go</span> <span m=''567990''>through</span>
  <span m=''568340''>process.</span> <span m=''568660''>So</span> <span m=''568750''>you</span>
  <span m=''568820''>can</span> <span m=''568940''>ask</span> <span m=''569140''>yourself</span>
  <span m=''569720''>a set of</span> <span m=''570010''>questions.</span> <span m=''571250''>if</span>
  <span m=''571430''>I</span> <span m=''571500''>want to</span> <span m=''571730''>organize</span>
  <span m=''572180''>things</span> <span m=''572410''>by</span> <span m=''572560''>tasks,</span>
  <span m=''574090''>then</span> <span m=''574810''>there</span> <span m=''575160''>are
  essentially</span> <span m=''576170''>two</span> <span m=''576350''>main</span>
  <span m=''576550''>clusters</span> <span m=''576940''>or</span> <span m=''577020''>two</span>
  <span m=''577200''>main</span> <span m=''577420''>computations,</span> <span m=''578380''>two</span>
  <span m=''578530''>main patterns.</span> <span m=''580010''>If</span> <span m=''580120''>the</span>
  <span m=''580720''>code is</span> <span m=''580870''>recursive,</span> <span m=''582420''>then</span>
  <span m=''582740''>you</span> <span m=''582900''>essentially</span> <span m=''583200''>want</span>
  <span m=''583420''>to</span> <span m=''583500''>apply a</span> <span m=''583900''>divide</span>
  <span m=''584290''>and</span> <span m=''584390''>conquer</span> <span m=''584710''>pattern</span>
  <span m=''585160''>or</span> <span m=''586490''>divide</span> <span m=''586750''>and</span>
  <span m=''586860''>conquer</span> <span m=''587220''>organization.</span> <span
  m=''588430''>If</span> <span m=''588530''>it''s</span> <span m=''588660''>not</span>
  <span m=''588860''>recursive.</span> <span m=''589780''>then</span> <span m=''590020''>you</span>
  <span m=''590170''>essentially</span> <span m=''590440''>want</span> <span m=''590620''>to</span>
  <span m=''590680''>do</span> <span m=''590780''>task</span> <span m=''591110''>parallelism.</span>
  </p><p><span m=''594990''>So in</span> <span m=''595260''>task</span> <span m=''595560''>parallelism
  --</span> <span m=''596400''>you</span> <span m=''596540''>know,</span> <span m=''596630''>I''ve</span>
  <span m=''596790''>listed</span> <span m=''597090''>two</span> <span m=''597250''>examples</span>
  <span m=''597740''>here.</span> <span m=''598620''>But</span> <span m=''598760''>really</span>
  <span m=''598980''>any of the things that</span> <span m=''599630''>we''ve talked</span>
  <span m=''599850''>about</span> <span m=''600040''>in</span> <span m=''600190''>the
  past</span> <span m=''600660''>fit.</span> <span m=''601810''>Ray</span> <span m=''602000''>computation,</span>
  <span m=''602950''>ray</span> <span m=''603220''>tracing.</span> <span m=''603940''>So</span>
  <span m=''604180''>here</span> <span m=''604370''>you''re</span> <span m=''604520''>shooting</span>
  <span m=''604840''>rays</span> <span m=''605160''>through a scene</span> <span m=''605600''>to
  try</span> <span m=''605830''>to</span> <span m=''605950''>determine</span> <span
  m=''608660''>how</span> <span m=''608840''>to</span> <span m=''608930''>render it.</span>
  <span m=''609420''>And</span> <span m=''610090''>really</span> <span m=''610320''>each</span>
  <span m=''610550''>ray is</span> <span m=''610890''>a</span> <span m=''610940''>separate</span>
  <span m=''611350''>and</span> <span m=''611450''>independent</span> <span m=''611950''>computation</span>
  <span m=''612510''>step.</span> <span m=''613570''>In</span> <span m=''613720''>molecular</span>
  <span m=''614140''>dynamics</span> <span m=''614750''>you''re</span> <span m=''614950''>trying</span>
  <span m=''615200''>to</span> <span m=''615290''>determine</span> <span m=''615710''>the</span>
  <span m=''616070''>non-bonded</span> <span m=''616380''>force</span> <span m=''616650''>calculations.</span>
  <span m=''617660''>There</span> <span m=''617800''>are</span> <span m=''617950''>some</span>
  <span m=''618170''>dependencies,</span> <span m=''618900''>but</span> <span m=''619150''>really</span>
  <span m=''619510''>you</span> <span m=''619580''>can</span> <span m=''619760''>do</span>
  <span m=''619940''>each</span> <span m=''620160''>calculation</span> <span m=''621590''>for</span>
  <span m=''621740''>one</span> <span m=''621980''>molecule</span> <span m=''622540''>or</span>
  <span m=''622610''>for</span> <span m=''622750''>one</span> <span m=''622980''>atom</span>
  <span m=''623340''>independent</span> <span m=''624350''>of</span> <span m=''624470''>any</span>
  <span m=''624620''>other.</span> <span m=''625080''>And then</span> <span m=''625620''>there
  are</span> <span m=''625900''>sort</span> <span m=''626080''>of the</span> <span
  m=''626170''>global</span> <span m=''626530''>dependence of</span> <span m=''627020''>having</span>
  <span m=''627430''>to update</span> <span m=''627770''>or</span> <span m=''627830''>communicate</span>
  <span m=''628740''>across</span> <span m=''629220''>all</span> <span m=''629410''>those</span>
  <span m=''629610''>molecules</span> <span m=''630260''>that</span> <span m=''630370''>sort</span>
  <span m=''630530''>of</span> <span m=''630630''>reflect</span> <span m=''631090''>new</span>
  <span m=''631190''>positions</span> <span m=''631660''>in</span> <span m=''631760''>the</span>
  <span m=''631820''>system.</span> </p><p><span m=''633350''>So</span> <span m=''633500''>the</span>
  <span m=''633570''>common</span> <span m=''633880''>factors</span> <span m=''634340''>here</span>
  <span m=''635040''>are</span> <span m=''635670''>your</span> <span m=''635810''>tasks</span>
  <span m=''636140''>are</span> <span m=''636240''>associated</span> <span m=''638310''>with</span>
  <span m=''638500''>iterations</span> <span m=''639060''>of a</span> <span m=''639180''>loop.</span>
  <span m=''639850''>And</span> <span m=''640140''>you</span> <span m=''640250''>can</span>
  <span m=''640470''>distribute,</span> <span m=''641430''>you</span> <span m=''641600''>know,</span>
  <span m=''641700''>each</span> <span m=''642330''>process --</span> <span m=''643460''>each</span>
  <span m=''643700''>processor</span> <span m=''644080''>can</span> <span m=''644260''>do</span>
  <span m=''644400''>a</span> <span m=''644470''>different</span> <span m=''644760''>iteration</span>
  <span m=''645310''>of the loop.</span> <span m=''647150''>And</span> <span m=''647650''>often</span>
  <span m=''648090''>you</span> <span m=''648200''>know</span> <span m=''649040''>sort
  of</span> <span m=''649180''>what</span> <span m=''649560''>the tasks</span> <span
  m=''649980''>are</span> <span m=''650690''>before</span> <span m=''651090''>you</span>
  <span m=''651170''>actually</span> <span m=''651480''>start</span> <span m=''651710''>your</span>
  <span m=''651810''>computation.</span> <span m=''652850''>Although</span> <span
  m=''653170''>in</span> <span m=''653320''>some</span> <span m=''653510''>cases,</span>
  <span m=''653860''>like</span> <span m=''654010''>in</span> <span m=''654100''>ray</span>
  <span m=''654310''>tracing,</span> <span m=''655220''>you</span> <span m=''655350''>might</span>
  <span m=''655550''>generate</span> <span m=''655940''>more and</span> <span m=''656230''>more</span>
  <span m=''656490''>threads</span> <span m=''656870''>as</span> <span m=''657040''>you</span>
  <span m=''657130''>go</span> <span m=''657290''>along,</span> <span m=''658580''>or</span>
  <span m=''658720''>more</span> <span m=''658950''>and more</span> <span m=''659130''>computations</span>
  <span m=''659730''>because</span> <span m=''659970''>as</span> <span m=''660100''>the</span>
  <span m=''660270''>ray is</span> <span m=''660470''>shooting</span> <span m=''660850''>off,</span>
  <span m=''661130''>you''re</span> <span m=''661760''>calculating</span> <span m=''663260''>new</span>
  <span m=''663410''>reflections.</span> <span m=''665680''>And</span> <span m=''667050''>that</span>
  <span m=''667250''>creates</span> <span m=''667560''>sort of</span> <span m=''668010''>extra</span>
  <span m=''668350''>work.</span> <span m=''668800''>But</span> <span m=''669080''>largely</span>
  <span m=''669660''>you</span> <span m=''669810''>have</span> <span m=''669990''>these</span>
  <span m=''670180''>independent</span> <span m=''670640''>tasks</span> <span m=''670980''>that</span>
  <span m=''671080''>you</span> <span m=''671170''>can</span> <span m=''671330''>encapsulate</span>
  <span m=''671880''>in threads</span> <span m=''672560''>and</span> <span m=''672710''>you</span>
  <span m=''672780''>run</span> <span m=''673170''>them.</span> </p><p><span m=''674680''>And</span>
  <span m=''675280''>this</span> <span m=''675600''>is</span> <span m=''675730''>sort</span>
  <span m=''675920''>of --</span> <span m=''676070''>it</span> <span m=''676270''>might</span>
  <span m=''676460''>appear</span> <span m=''676700''>subtle,</span> <span m=''677040''>but</span>
  <span m=''677390''>there</span> <span m=''677650''>are</span> <span m=''678070''>algorithm</span>
  <span m=''678310''>classes</span> <span m=''678780''>where</span> <span m=''679190''>not</span>
  <span m=''679400''>all</span> <span m=''679600''>tasks</span> <span m=''680210''>essentially</span>
  <span m=''680580''>need</span> <span m=''680730''>to</span> <span m=''680810''>complete</span>
  <span m=''681270''>for you to</span> <span m=''681600''>arrive</span> <span m=''681940''>at</span>
  <span m=''682010''>a</span> <span m=''682050''>solution.</span> <span m=''683160''>You</span>
  <span m=''683290''>know,</span> <span m=''683410''>in some</span> <span m=''683610''>cases</span>
  <span m=''683910''>you</span> <span m=''683990''>might</span> <span m=''684110''>convert
  to an</span> <span m=''684640''>acceptable</span> <span m=''685120''>solution.</span>
  <span m=''685960''>And</span> <span m=''686490''>you</span> <span m=''686580''>don''t</span>
  <span m=''686730''>actually</span> <span m=''687030''>need</span> <span m=''687250''>to</span>
  <span m=''688470''>go</span> <span m=''688640''>through</span> <span m=''688950''>and</span>
  <span m=''689040''>exercise</span> <span m=''691070''>all</span> <span m=''691240''>the</span>
  <span m=''691330''>computation</span> <span m=''691890''>that''s</span> <span m=''692070''>outstanding</span>
  <span m=''692950''>for</span> <span m=''693110''>you</span> <span m=''693210''>to</span>
  <span m=''693290''>say</span> <span m=''693530''>the</span> <span m=''693630''>program</span>
  <span m=''693990''>is</span> <span m=''694130''>done.</span> <span m=''694760''>So
  there</span> <span m=''695010''>will</span> <span m=''695150''>be</span> <span m=''695310''>a</span>
  <span m=''695370''>tricky</span> <span m=''695690''>issue --</span> <span m=''696230''>I''ll</span>
  <span m=''696600''>revisit</span> <span m=''696770''>this</span> <span m=''697000''>just</span>
  <span m=''697210''>briefly</span> <span m=''697550''>later</span> <span m=''697780''>on
  --</span> <span m=''698030''>is</span> <span m=''698450''>how</span> <span m=''698560''>do</span>
  <span m=''698640''>you</span> <span m=''698700''>determine</span> <span m=''699120''>if</span>
  <span m=''699250''>your</span> <span m=''699420''>program</span> <span m=''699890''>has</span>
  <span m=''699980''>actually</span> <span m=''700280''>terminated</span> <span m=''700870''>or</span>
  <span m=''701310''>has</span> <span m=''701430''>completed?</span> </p><p><span
  m=''703300''>In</span> <span m=''703540''>divide</span> <span m=''703830''>and</span>
  <span m=''703950''>conquer,</span> <span m=''705190''>this</span> <span m=''705350''>is</span>
  <span m=''705520''>really</span> <span m=''705790''>for</span> <span m=''706140''>recursive</span>
  <span m=''706400''>programs.</span> <span m=''707910''>You</span> <span m=''708030''>know,</span>
  <span m=''708750''>you</span> <span m=''708850''>can</span> <span m=''708980''>think</span>
  <span m=''709180''>of</span> <span m=''709840''>a</span> <span m=''710310''>well-known</span>
  <span m=''710700''>sorting</span> <span m=''711140''>algorithm,</span> <span m=''711340''>merge</span>
  <span m=''711610''>sort,</span> <span m=''712010''>that</span> <span m=''712230''>classically</span>
  <span m=''712670''>fits</span> <span m=''713160''>into</span> <span m=''713380''>this</span>
  <span m=''713610''>kind</span> <span m=''713810''>of</span> <span m=''713900''>picture,</span>
  <span m=''714640''>where</span> <span m=''715020''>you</span> <span m=''715200''>have</span>
  <span m=''715850''>some</span> <span m=''716200''>really</span> <span m=''716460''>large</span>
  <span m=''716770''>array</span> <span m=''717090''>of</span> <span m=''717170''>data</span>
  <span m=''717350''>that</span> <span m=''717450''>you</span> <span m=''717530''>want</span>
  <span m=''717660''>to</span> <span m=''717720''>sort.</span> <span m=''718280''>You</span>
  <span m=''718410''>keep</span> <span m=''718810''>subdividing</span> <span m=''719240''>into</span>
  <span m=''719470''>smaller</span> <span m=''719840''>and</span> <span m=''719950''>smaller</span>
  <span m=''720940''>chunks</span> <span m=''721330''>until</span> <span m=''721720''>you</span>
  <span m=''721880''>can</span> <span m=''722320''>do</span> <span m=''722580''>local</span>
  <span m=''723010''>reorderings.</span> <span m=''723610''>And</span> <span m=''723750''>then</span>
  <span m=''723840''>you</span> <span m=''723920''>start</span> <span m=''724450''>merging</span>
  <span m=''724850''>things</span> <span m=''725090''>together.</span> <span m=''726320''>So</span>
  <span m=''726490''>this</span> <span m=''726680''>gives</span> <span m=''726870''>you</span>
  <span m=''727760''>sort of</span> <span m=''728050''>a way to</span> <span m=''728420''>take
  a</span> <span m=''728650''>problem,</span> <span m=''729030''>divide</span> <span
  m=''729460''>it into</span> <span m=''729720''>subproblems.</span> <span m=''730650''>And</span>
  <span m=''730860''>then</span> <span m=''731370''>you</span> <span m=''731530''>can</span>
  <span m=''731640''>split</span> <span m=''731920''>the</span> <span m=''732030''>data</span>
  <span m=''732320''>at</span> <span m=''732430''>some</span> <span m=''732620''>point</span>
  <span m=''733000''>and then</span> <span m=''733100''>you</span> <span m=''733210''>join</span>
  <span m=''733430''>it</span> <span m=''733500''>back</span> <span m=''733700''>together.</span>
  <span m=''733990''>You</span> <span m=''734080''>merge</span> <span m=''734360''>it.</span>
  <span m=''735540''>You</span> <span m=''735820''>might</span> <span m=''736030''>see</span>
  <span m=''736220''>things</span> <span m=''736510''>like</span> <span m=''736970''>fork
  and</span> <span m=''737660''>merge</span> <span m=''738280''>or</span> <span m=''738520''>fork</span>
  <span m=''739020''>and</span> <span m=''739250''>join</span> <span m=''740160''>used</span>
  <span m=''740470''>instead</span> <span m=''740700''>of</span> <span m=''740820''>split
  and</span> <span m=''741160''>join.</span> <span m=''742330''>I''ve</span> <span
  m=''742600''>used</span> <span m=''742780''>the</span> <span m=''742850''>terminology</span>
  <span m=''743400''>that sort</span> <span m=''743590''>of</span> <span m=''743830''>melds</span>
  <span m=''744190''>well</span> <span m=''744380''>with</span> <span m=''745660''>some</span>
  <span m=''745790''>of</span> <span m=''745850''>the</span> <span m=''745910''>concepts</span>
  <span m=''746250''>we</span> <span m=''746370''>use</span> <span m=''746530''>in</span>
  <span m=''746590''>streaming</span> <span m=''747590''>that</span> <span m=''747750''>you''ll</span>
  <span m=''747890''>see</span> <span m=''748090''>in the next</span> <span m=''748450''>lecture.</span>
  </p><p><span m=''749780''>And</span> <span m=''749950''>so</span> <span m=''750290''>in</span>
  <span m=''750480''>these</span> <span m=''750660''>kinds of</span> <span m=''751010''>programs,</span>
  <span m=''751860''>it''s</span> <span m=''752000''>not</span> <span m=''752190''>always</span>
  <span m=''752510''>the</span> <span m=''752580''>case</span> <span m=''752920''>that</span>
  <span m=''753040''>each</span> <span m=''753380''>subproblem</span> <span m=''753970''>will</span>
  <span m=''754140''>have</span> <span m=''754860''>essentially</span> <span m=''755240''>the
  same</span> <span m=''755510''>amount</span> <span m=''755750''>of</span> <span
  m=''755840''>work</span> <span m=''756080''>to</span> <span m=''756170''>do.</span>
  <span m=''756710''>You</span> <span m=''756920''>might</span> <span m=''757260''>need</span>
  <span m=''758710''>more</span> <span m=''759030''>dynamic</span> <span m=''759440''>load</span>
  <span m=''759630''>balancing</span> <span m=''760160''>because</span> <span m=''760640''>each</span>
  <span m=''761050''>subproblem --</span> <span m=''762390''>how</span> <span m=''762620''>you</span>
  <span m=''762740''>distribute</span> <span m=''763140''>the</span> <span m=''763250''>data</span>
  <span m=''763540''>might</span> <span m=''763760''>lead</span> <span m=''764000''>you</span>
  <span m=''764160''>to</span> <span m=''764380''>do</span> <span m=''764570''>more</span>
  <span m=''764910''>work</span> <span m=''765210''>in</span> <span m=''765290''>one</span>
  <span m=''765490''>problem</span> <span m=''765850''>than</span> <span m=''766160''>in
  the</span> <span m=''766280''>other.</span> <span m=''767720''>So</span> <span m=''767970''>as</span>
  <span m=''768110''>opposed</span> <span m=''768500''>to</span> <span m=''769390''>some</span>
  <span m=''769550''>of</span> <span m=''769610''>the</span> <span m=''769670''>other</span>
  <span m=''769860''>mechanisms</span> <span m=''770360''>where</span> <span m=''770550''>static</span>
  <span m=''770950''>load</span> <span m=''771130''>balancing</span> <span m=''771940''>will</span>
  <span m=''772160''>work</span> <span m=''772410''>really</span> <span m=''772630''>well
  --</span> <span m=''773220''>and</span> <span m=''774010''>to</span> <span m=''774130''>remind</span>
  <span m=''774400''>you,</span> <span m=''774480''>static</span> <span m=''774750''>load</span>
  <span m=''774870''>balancing</span> <span m=''775190''>essentially</span> <span
  m=''775760''>says,</span> <span m=''776340''>you</span> <span m=''776440''>have</span>
  <span m=''776530''>some</span> <span m=''776790''>work,</span> <span m=''777010''>you</span>
  <span m=''777140''>assign</span> <span m=''777430''>it to</span> <span m=''777510''>each</span>
  <span m=''777680''>of</span> <span m=''777740''>the</span> <span m=''777810''>processors.</span>
  <span m=''778610''>And</span> <span m=''778900''>you''re</span> <span m=''779070''>going</span>
  <span m=''779250''>to</span> <span m=''779320''>be</span> <span m=''779770''>relatively</span>
  <span m=''780260''>happy</span> <span m=''780590''>with</span> <span m=''780780''>how</span>
  <span m=''781940''>each</span> <span m=''782180''>processor''s</span> <span m=''783090''>sort</span>
  <span m=''783260''>of</span> <span m=''783340''>utilization is</span> <span m=''784000''>going
  to</span> <span m=''784170''>be</span> <span m=''784300''>over</span> <span m=''784490''>time.</span>
  <span m=''785240''>Nobody''s</span> <span m=''785630''>going to</span> <span m=''785840''>be</span>
  <span m=''786030''>too</span> <span m=''786270''>overwhelmed</span> <span m=''787000''>with</span>
  <span m=''787200''>the amount</span> <span m=''787370''>of</span> <span m=''787430''>work</span>
  <span m=''787810''>they</span> <span m=''787910''>have</span> <span m=''788100''>to</span>
  <span m=''788200''>do.</span> <span m=''788830''>In</span> <span m=''788960''>this</span>
  <span m=''789140''>case,</span> <span m=''789650''>you</span> <span m=''789810''>might</span>
  <span m=''790030''>end</span> <span m=''790180''>up</span> <span m=''790340''>with</span>
  <span m=''790660''>needing</span> <span m=''791040''>some</span> <span m=''791270''>things</span>
  <span m=''791500''>for</span> <span m=''791630''>dynamic</span> <span m=''791950''>load</span>
  <span m=''792200''>balancing</span> <span m=''792570''>that</span> <span m=''792690''>says,</span>
  <span m=''793100''>I''m</span> <span m=''793340''>unhappy</span> <span m=''793840''>with</span>
  <span m=''794040''>the</span> <span m=''794580''>work</span> <span m=''794770''>performance</span>
  <span m=''795340''>or</span> <span m=''795740''>utilization.</span> <span m=''796700''>Some</span>
  <span m=''796960''>processors</span> <span m=''797460''>are</span> <span m=''797560''>more</span>
  <span m=''797880''>idle</span> <span m=''798070''>than</span> <span m=''798150''>the</span>
  <span m=''798220''>others,</span> <span m=''798720''>so</span> <span m=''798850''>you</span>
  <span m=''798920''>might</span> <span m=''799140''>want to</span> <span m=''799410''>essentially</span>
  <span m=''799950''>redistribute</span> <span m=''800510''>things.</span> </p><p><span
  m=''801570''>So</span> <span m=''801750''>what</span> <span m=''801940''>we''ll</span>
  <span m=''802050''>talk</span> <span m=''802320''>about --</span> <span m=''803010''>you</span>
  <span m=''803110''>know,</span> <span m=''803340''>how</span> <span m=''803560''>does</span>
  <span m=''803850''>this</span> <span m=''804060''>concept</span> <span m=''804570''>of</span>
  <span m=''804820''>divide</span> <span m=''805200''>and</span> <span m=''805300''>conquer</span>
  <span m=''807330''>parallelization</span> <span m=''808170''>pattern</span> <span
  m=''808990''>work</span> <span m=''809310''>into</span> <span m=''809540''>the</span>
  <span m=''809600''>actual</span> <span m=''809970''>implementation?</span> <span
  m=''810910''>You know,</span> <span m=''811250''>how</span> <span m=''811430''>do
  I</span> <span m=''811580''>actually</span> <span m=''811940''>implement</span>
  <span m=''812400''>a</span> <span m=''812480''>divide</span> <span m=''812770''>and</span>
  <span m=''812870''>conquer</span> <span m=''815310''>organization?</span> </p><p><span
  m=''817060''>The</span> <span m=''817170''>next</span> <span m=''817380''>organization</span>
  <span m=''818120''>is</span> <span m=''818700''>organized</span> <span m=''819000''>by</span>
  <span m=''819150''>data.</span> <span m=''820590''>So</span> <span m=''820750''>here</span>
  <span m=''820930''>you</span> <span m=''821010''>have</span> <span m=''821150''>some</span>
  <span m=''821360''>computation --</span> <span m=''823450''>not</span> <span m=''823610''>sure</span>
  <span m=''823770''>why</span> <span m=''824080''>it''s</span> <span m=''824240''>flickering.</span>
  </p><p><span m=''824370''>AUDIENCE: Check your --</span> <span m=''825398''>maybe</span>
  <span m=''825912''>your VGA cables</span> <span m=''826426''>aren''t</span> <span
  m=''826940''>in good.</span> </p><p><span m=''830540''>PROFESSOR:</span> <span m=''837210''>So</span>
  <span m=''837860''>in</span> <span m=''838050''>the</span> <span m=''838110''>organize</span>
  <span m=''838550''>by</span> <span m=''838650''>data,</span> <span m=''839860''>you</span>
  <span m=''840010''>essentially</span> <span m=''840330''>want to</span> <span m=''840570''>apply</span>
  <span m=''840890''>this</span> <span m=''841100''>if</span> <span m=''841380''>you</span>
  <span m=''841460''>have</span> <span m=''841620''>a</span> <span m=''841680''>lot</span>
  <span m=''841880''>of</span> <span m=''841970''>computation</span> <span m=''843090''>that''s</span>
  <span m=''843400''>using</span> <span m=''843830''>a</span> <span m=''843880''>shared</span>
  <span m=''844380''>global</span> <span m=''844670''>data</span> <span m=''844880''>structure</span>
  <span m=''845410''>or</span> <span m=''845620''>that''s</span> <span m=''845740''>going</span>
  <span m=''845940''>to</span> <span m=''846040''>update</span> <span m=''846550''>a</span>
  <span m=''846850''>central</span> <span m=''847240''>data</span> <span m=''847470''>structure.</span>
  <span m=''848590''>So</span> <span m=''848760''>in</span> <span m=''848840''>molecular</span>
  <span m=''849250''>dynamics,</span> <span m=''849670''>for</span> <span m=''849810''>example,</span>
  <span m=''850220''>you</span> <span m=''850320''>have</span> <span m=''850880''>a</span>
  <span m=''851070''>huge</span> <span m=''851170''>array</span> <span m=''851940''>that</span>
  <span m=''852210''>records the</span> <span m=''852670''>position</span> <span m=''853430''>of</span>
  <span m=''853990''>each</span> <span m=''854200''>of</span> <span m=''854260''>the</span>
  <span m=''854320''>molecules.</span> <span m=''855150''>And</span> <span m=''855520''>while</span>
  <span m=''855690''>you</span> <span m=''855830''>can</span> <span m=''856010''>do</span>
  <span m=''856170''>the</span> <span m=''856320''>coarse</span> <span m=''856760''>calculations</span>
  <span m=''857310''>independently,</span> <span m=''857900''>eventually</span> <span
  m=''859970''>all</span> <span m=''860160''>the</span> <span m=''860250''>parallel</span>
  <span m=''860610''>tasks</span> <span m=''860950''>have</span> <span m=''861060''>to</span>
  <span m=''861160''>communicate</span> <span m=''861790''>with</span> <span m=''861900''>the</span>
  <span m=''861970''>central</span> <span m=''862260''>data</span> <span m=''862480''>structure</span>
  <span m=''862830''>and</span> <span m=''862940''>say,</span> <span m=''863440''>here</span>
  <span m=''863700''>are the</span> <span m=''863790''>new</span> <span m=''863940''>locations</span>
  <span m=''864420''>for</span> <span m=''864590''>all</span> <span m=''864720''>the</span>
  <span m=''864790''>molecules.</span> <span m=''865980''>And</span> <span m=''866190''>so</span>
  <span m=''866320''>that</span> <span m=''866430''>has</span> <span m=''866620''>to</span>
  <span m=''866700''>go</span> <span m=''866840''>into a</span> <span m=''867010''>central</span>
  <span m=''867410''>repository.</span> </p><p><span m=''869070''>And</span> <span
  m=''869310''>there are</span> <span m=''869450''>different</span> <span m=''869820''>kinds</span>
  <span m=''870210''>of</span> <span m=''870480''>sort</span> <span m=''871040''>of</span>
  <span m=''871720''>decompositions</span> <span m=''872770''>within</span> <span
  m=''873040''>this</span> <span m=''873190''>organization.</span> <span m=''876160''>If</span>
  <span m=''876410''>your</span> <span m=''877380''>data</span> <span m=''877610''>structure</span>
  <span m=''878290''>is</span> <span m=''878540''>recursive,</span> <span m=''879010''>so</span>
  <span m=''879560''>a link</span> <span m=''879860''>list</span> <span m=''880270''>or</span>
  <span m=''880450''>a tree</span> <span m=''880850''>or</span> <span m=''881050''>a
  graph,</span> <span m=''881850''>then</span> <span m=''882140''>you</span> <span
  m=''882270''>can</span> <span m=''882380''>apply</span> <span m=''882670''>the</span>
  <span m=''882750''>recursive</span> <span m=''883130''>data</span> <span m=''883390''>pattern.</span>
  <span m=''884630''>If</span> <span m=''884840''>it''s</span> <span m=''884980''>not,</span>
  <span m=''885210''>if</span> <span m=''885310''>it''s</span> <span m=''885470''>linear,</span>
  <span m=''885910''>like</span> <span m=''886090''>an</span> <span m=''886170''>array</span>
  <span m=''886500''>or a</span> <span m=''886730''>vector,</span> <span m=''888250''>then</span>
  <span m=''888460''>you</span> <span m=''888570''>apply</span> <span m=''889050''>geometric</span>
  <span m=''889450''>decomposition.</span> <span m=''890450''>And</span> <span m=''891050''>you''ve</span>
  <span m=''891580''>essentially</span> <span m=''892030''>seen</span> <span m=''892430''>geometric</span>
  <span m=''893000''>decomposition.</span> <span m=''893560''>These</span> <span m=''893700''>were</span>
  <span m=''893860''>some</span> <span m=''894060''>of</span> <span m=''894120''>the</span>
  <span m=''894240''>labs</span> <span m=''894520''>that</span> <span m=''894640''>you''ve</span>
  <span m=''894790''>already</span> <span m=''895060''>done.</span> </p><p><span m=''896990''>And</span>
  <span m=''897120''>so the</span> <span m=''897470''>example</span> <span m=''897910''>from</span>
  <span m=''898150''>yesterday''s</span> <span m=''898570''>recitation,</span> <span
  m=''899520''>you''re</span> <span m=''899850''>doing</span> <span m=''900250''>an</span>
  <span m=''900540''>end</span> <span m=''900730''>body</span> <span m=''901160''>simulation</span>
  <span m=''901610''>in</span> <span m=''901690''>terms</span> <span m=''901980''>of</span>
  <span m=''903250''>who is</span> <span m=''903470''>gravitating</span> <span m=''904070''>towards</span>
  <span m=''904290''>who,</span> <span m=''905100''>you''re</span> <span m=''905250''>calculating</span>
  <span m=''905770''>the</span> <span m=''905860''>forces</span> <span m=''906320''>between</span>
  <span m=''906650''>pairs</span> <span m=''906950''>of</span> <span m=''907040''>objects.</span>
  <span m=''907670''>And</span> <span m=''908010''>depending</span> <span m=''908450''>on</span>
  <span m=''909090''>the</span> <span m=''909200''>force</span> <span m=''909630''>that</span>
  <span m=''909930''>each</span> <span m=''910170''>object</span> <span m=''910560''>feels,</span>
  <span m=''910960''>you</span> <span m=''911060''>calculate</span> <span m=''913360''>a</span>
  <span m=''913700''>new</span> <span m=''914490''>motion</span> <span m=''914870''>vector.</span>
  <span m=''916170''>And</span> <span m=''916330''>you use</span> <span m=''916610''>that</span>
  <span m=''916760''>to</span> <span m=''917490''>update</span> <span m=''917880''>the</span>
  <span m=''917960''>position</span> <span m=''918390''>of</span> <span m=''918550''>each</span>
  <span m=''918900''>body</span> <span m=''919370''>in</span> <span m=''919500''>your,</span>
  <span m=''920160''>say,</span> <span m=''920400''>galaxy</span> <span m=''920790''>that
  you''re</span> <span m=''921100''>simulating.</span> <span m=''922790''>And so</span>
  <span m=''923060''>what</span> <span m=''923170''>we</span> <span m=''923280''>talked</span>
  <span m=''923520''>about</span> <span m=''923730''>yesterday</span> <span m=''924160''>was</span>
  <span m=''924740''>given</span> <span m=''925450''>an</span> <span m=''925580''>array</span>
  <span m=''925940''>of</span> <span m=''926140''>positions,</span> <span m=''927310''>each</span>
  <span m=''927570''>processor</span> <span m=''928160''>gets</span> <span m=''928640''>a</span>
  <span m=''929070''>sub-chunk</span> <span m=''929570''>of</span> <span m=''929870''>that</span>
  <span m=''930050''>position</span> <span m=''930480''>array.</span> <span m=''931050''>And</span>
  <span m=''931310''>it</span> <span m=''931390''>knows</span> <span m=''931630''>how</span>
  <span m=''931770''>to</span> <span m=''931890''>calculate</span> <span m=''932610''>sort
  of</span> <span m=''934280''>locally,</span> <span m=''934720''>based</span> <span
  m=''934950''>on</span> <span m=''935060''>that.</span> <span m=''935240''>And</span>
  <span m=''935340''>then</span> <span m=''935680''>you</span> <span m=''935850''>might</span>
  <span m=''936010''>also</span> <span m=''936250''>communicate</span> <span m=''936820''>local</span>
  <span m=''937110''>chunks</span> <span m=''937480''>to</span> <span m=''937560''>do</span>
  <span m=''938500''>more</span> <span m=''938690''>scalable</span> <span m=''939110''>computations.</span>
  </p><p><span m=''943930''>And</span> <span m=''944420''>recursive</span> <span m=''944780''>data</span>
  <span m=''945030''>structure</span> <span m=''945490''>are a</span> <span m=''945570''>little</span>
  <span m=''945750''>bit</span> <span m=''945840''>more</span> <span m=''946050''>tricky.</span>
  <span m=''946850''>So</span> <span m=''947170''>at</span> <span m=''947410''>face</span>
  <span m=''947640''>value</span> <span m=''948040''>you might</span> <span m=''948280''>think</span>
  <span m=''948490''>that</span> <span m=''948690''>there''s</span> <span m=''948880''>really</span>
  <span m=''949170''>no</span> <span m=''949910''>kind of</span> <span m=''950190''>parallelism</span>
  <span m=''950720''>you</span> <span m=''950810''>can</span> <span m=''950940''>get</span>
  <span m=''951140''>out</span> <span m=''951320''>of</span> <span m=''951420''>a</span>
  <span m=''951580''>recursive</span> <span m=''951900''>data</span> <span m=''952130''>structure.</span>
  <span m=''952970''>So</span> <span m=''953150''>if</span> <span m=''953300''>you''re</span>
  <span m=''953720''>iterating</span> <span m=''953980''>over</span> <span m=''954240''>a
  list</span> <span m=''954720''>and you</span> <span m=''954820''>want</span> <span
  m=''955010''>to</span> <span m=''955070''>get</span> <span m=''955220''>the</span>
  <span m=''955310''>sum,</span> <span m=''955910''>well,</span> <span m=''956610''>you</span>
  <span m=''956700''>know,</span> <span m=''956800''>I</span> <span m=''956860''>just</span>
  <span m=''957060''>need</span> <span m=''957190''>to</span> <span m=''957280''>go</span>
  <span m=''957400''>through</span> <span m=''957570''>the</span> <span m=''957650''>list.</span>
  <span m=''958040''>Can</span> <span m=''958200''>I</span> <span m=''958280''>really</span>
  <span m=''958530''>parallelize</span> <span m=''959690''>that?</span> <span m=''961020''>There</span>
  <span m=''961210''>are,</span> <span m=''961370''>however,</span> <span m=''961760''>opportunities</span>
  <span m=''962460''>where</span> <span m=''962630''>you</span> <span m=''962750''>can</span>
  <span m=''964720''>reshape</span> <span m=''965140''>the</span> <span m=''965240''>computation</span>
  <span m=''965980''>in</span> <span m=''966150''>a</span> <span m=''966220''>way</span>
  <span m=''966360''>that</span> <span m=''966450''>exposes</span> <span m=''966930''>the</span>
  <span m=''967100''>concurrency.</span> <span m=''968130''>And</span> <span m=''968530''>often</span>
  <span m=''968960''>what</span> <span m=''969160''>this</span> <span m=''969440''>comes</span>
  <span m=''969750''>down</span> <span m=''970010''>to</span> <span m=''970490''>is</span>
  <span m=''970650''>you''re going to</span> <span m=''970800''>do</span> <span m=''970930''>more</span>
  <span m=''971220''>work,</span> <span m=''971730''>but</span> <span m=''971910''>it''s</span>
  <span m=''972060''>OK</span> <span m=''972380''>because</span> <span m=''972810''>you''re</span>
  <span m=''972920''>going</span> <span m=''973140''>to</span> <span m=''973270''>finish</span>
  <span m=''973560''>faster.</span> <span m=''976000''>So</span> <span m=''976170''>this</span>
  <span m=''976310''>kind</span> <span m=''976530''>of</span> <span m=''976760''>work/concurrency</span>
  <span m=''977390''>tradeoff,</span> <span m=''978770''>I''m</span> <span m=''978930''>going
  to</span> <span m=''979030''>illustrate</span> <span m=''979180''>with</span> <span
  m=''979370''>an</span> <span m=''979530''>example.</span> </p><p><span m=''981740''>So</span>
  <span m=''983800''>in</span> <span m=''984120''>this</span> <span m=''984780''>application</span>
  <span m=''985100''>we</span> <span m=''985200''>have</span> <span m=''985350''>some</span>
  <span m=''985570''>graphs.</span> <span m=''987450''>And</span> <span m=''987730''>for</span>
  <span m=''987890''>each</span> <span m=''988270''>node</span> <span m=''988570''>in</span>
  <span m=''988640''>a</span> <span m=''988720''>graph,</span> <span m=''989220''>we</span>
  <span m=''989360''>want</span> <span m=''989570''>to</span> <span m=''989650''>know</span>
  <span m=''990240''>what</span> <span m=''990440''>is</span> <span m=''990560''>its</span>
  <span m=''990640''>root?</span> <span m=''991170''>So</span> <span m=''992240''>this</span>
  <span m=''992460''>works</span> <span m=''992680''>well</span> <span m=''992830''>when</span>
  <span m=''992950''>you</span> <span m=''993010''>have</span> <span m=''993100''>a</span>
  <span m=''993160''>forest</span> <span m=''993920''>where</span> <span m=''994300''>not</span>
  <span m=''994500''>all</span> <span m=''994620''>the</span> <span m=''994700''>graphs</span>
  <span m=''994950''>are</span> <span m=''995030''>connected</span> <span m=''995460''>and</span>
  <span m=''995600''>given</span> <span m=''995830''>a node</span> <span m=''996130''>you</span>
  <span m=''996210''>want</span> <span m=''996400''>to</span> <span m=''996480''>know</span>
  <span m=''997040''>who is</span> <span m=''997340''>the</span> <span m=''997420''>root</span>
  <span m=''997680''>of</span> <span m=''997830''>this</span> <span m=''997920''>graph.</span>
  <span m=''999750''>So</span> <span m=''999910''>what we</span> <span m=''1000060''>can</span>
  <span m=''1000240''>do</span> <span m=''1000470''>is</span> <span m=''1000690''>essentially</span>
  <span m=''1002060''>have</span> <span m=''1002370''>more</span> <span m=''1002580''>concurrency</span>
  <span m=''1003210''>by</span> <span m=''1004050''>changing</span> <span m=''1004560''>the</span>
  <span m=''1004640''>way</span> <span m=''1004870''>we</span> <span m=''1005020''>actually</span>
  <span m=''1005300''>think</span> <span m=''1005520''>about</span> <span m=''1005700''>the</span>
  <span m=''1005780''>algorithm.</span> </p><p><span m=''1006630''>So</span> <span
  m=''1006860''>rather</span> <span m=''1007140''>than</span> <span m=''1007330''>starting</span>
  <span m=''1007710''>with</span> <span m=''1007860''>each</span> <span m=''1008080''>node</span>
  <span m=''1008330''>and</span> <span m=''1008430''>then,</span> <span m=''1009490''>in</span>
  <span m=''1009600''>a</span> <span m=''1009670''>directed</span> <span m=''1010060''>graph,</span>
  <span m=''1010360''>following</span> <span m=''1010780''>its</span> <span m=''1010910''>successor
  --</span> <span m=''1013000''>so this is</span> <span m=''1013380''>essentially</span>
  <span m=''1013770''>order</span> <span m=''1014000''>n,</span> <span m=''1014450''>because</span>
  <span m=''1014770''>for</span> <span m=''1014890''>each</span> <span m=''1015100''>node</span>
  <span m=''1015210''>we</span> <span m=''1015340''>have</span> <span m=''1015500''>to</span>
  <span m=''1015600''>follow</span> <span m=''1015890''>n</span> <span m=''1016040''>links
  --</span> <span m=''1017600''>we</span> <span m=''1017780''>can</span> <span m=''1018120''>think</span>
  <span m=''1018300''>about</span> <span m=''1018520''>it</span> <span m=''1018650''>slightly</span>
  <span m=''1018940''>differently.</span> <span m=''1019580''>So</span> <span m=''1019730''>what</span>
  <span m=''1019900''>if</span> <span m=''1020380''>rather</span> <span m=''1020610''>than</span>
  <span m=''1020740''>finding the</span> <span m=''1021200''>successor</span> <span
  m=''1021710''>and</span> <span m=''1021810''>then</span> <span m=''1021920''>finding</span>
  <span m=''1022510''>that</span> <span m=''1022740''>successor''s</span> <span m=''1023140''>successor,</span>
  <span m=''1023700''>at</span> <span m=''1023860''>each</span> <span m=''1024100''>computational</span>
  <span m=''1024660''>step</span> <span m=''1025440''>we</span> <span m=''1025560''>start</span>
  <span m=''1025820''>with</span> <span m=''1025970''>a</span> <span m=''1026010''>node</span>
  <span m=''1026260''>and</span> <span m=''1026350''>we</span> <span m=''1026440''>say</span>
  <span m=''1026700''>who</span> <span m=''1026900''>is</span> <span m=''1027040''>your</span>
  <span m=''1027150''>successor''s</span> <span m=''1027580''>successor?</span> </p><p><span
  m=''1029640''>So</span> <span m=''1030420''>we</span> <span m=''1030550''>can</span>
  <span m=''1030660''>converge</span> <span m=''1031540''>in</span> <span m=''1031610''>this</span>
  <span m=''1031740''>example</span> <span m=''1032140''>in</span> <span m=''1032260''>three</span>
  <span m=''1032450''>steps.</span> <span m=''1034000''>So</span> <span m=''1034230''>from</span>
  <span m=''1034520''>five</span> <span m=''1034910''>to</span> <span m=''1035020''>six</span>
  <span m=''1035370''>we</span> <span m=''1035470''>can</span> <span m=''1035620''>say</span>
  <span m=''1036300''>who  is</span> <span m=''1036660''>this</span> <span m=''1036760''>successor?</span>
  <span m=''1038160''>So</span> <span m=''1039130''>who is</span> <span m=''1039360''>the</span>
  <span m=''1039470''>successor''s</span> <span m=''1039970''>successor</span> <span
  m=''1040470''>of five?</span> <span m=''1041200''>And</span> <span m=''1041310''>that</span>
  <span m=''1041410''>would</span> <span m=''1041500''>be</span> <span m=''1041600''>two.</span>
  <span m=''1042590''>And</span> <span m=''1042830''>similarly</span> <span m=''1043300''>you</span>
  <span m=''1043410''>can</span> <span m=''1043530''>do</span> <span m=''1043630''>that</span>
  <span m=''1043790''>for</span> <span m=''1043980''>seven</span> <span m=''1044370''>and</span>
  <span m=''1044510''>so</span> <span m=''1044630''>on.</span> <span m=''1045150''>And
  so</span> <span m=''1045260''>you</span> <span m=''1045360''>keep</span> <span m=''1045630''>asking</span>
  <span m=''1045980''>the</span> <span m=''1046050''>question.</span> <span m=''1047520''>So</span>
  <span m=''1047660''>you</span> <span m=''1047720''>can</span> <span m=''1047830''>distribute</span>
  <span m=''1048240''>all</span> <span m=''1048390''>these</span> <span m=''1048550''>data</span>
  <span m=''1048780''>structures,</span> <span m=''1049540''>repeatedly</span> <span
  m=''1050040''>ask</span> <span m=''1050320''>these</span> <span m=''1050490''>questions</span>
  <span m=''1050950''>out</span> <span m=''1051100''>of</span> <span m=''1051290''>all</span>
  <span m=''1051460''>these</span> <span m=''1051650''>end nodes,</span> <span m=''1051970''>and</span>
  <span m=''1052340''>it</span> <span m=''1052580''>leads</span> <span m=''1052780''>you</span>
  <span m=''1052870''>to</span> <span m=''1053060''>an</span> <span m=''1053180''>order</span>
  <span m=''1053410''>log n</span> <span m=''1053810''>solution</span> <span m=''1054250''>versus</span>
  <span m=''1054560''>an</span> <span m=''1054620''>order</span> <span m=''1054840''>n</span>
  <span m=''1055060''>solution.</span> </p><p><span m=''1056770''>But</span> <span
  m=''1057040''>what</span> <span m=''1057160''>have</span> <span m=''1057320''>I</span>
  <span m=''1057410''>done</span> <span m=''1057710''>in</span> <span m=''1057820''>each</span>
  <span m=''1058050''>step?</span> <span m=''1059310''>Well,</span> <span m=''1059780''>I''ve</span>
  <span m=''1060020''>actually</span> <span m=''1060370''>created</span> <span m=''1060640''>myself</span>
  <span m=''1061250''>and</span> <span m=''1062960''>I''ve</span> <span m=''1063230''>sort</span>
  <span m=''1063400''>of</span> <span m=''1063850''>increased</span> <span m=''1064390''>the</span>
  <span m=''1064470''>amount</span> <span m=''1064690''>of</span> <span m=''1064790''>work</span>
  <span m=''1065040''>that</span> <span m=''1065130''>I''m</span> <span m=''1065230''>doing</span>
  <span m=''1066020''>by</span> <span m=''1066220''>order n.</span> <span m=''1068220''>Right</span>
  <span m=''1068930''>there.</span> <span m=''1069310''>Right.</span> <span m=''1071370''>Yes.</span>
  <span m=''1072260''>Because</span> <span m=''1072790''>I''ve</span> <span m=''1073050''>essentially</span>
  <span m=''1074380''>for</span> <span m=''1074530''>each</span> <span m=''1074770''>node</span>
  <span m=''1075640''>doing</span> <span m=''1075940''>n queries,</span> <span m=''1076590''>you</span>
  <span m=''1076680''>know,</span> <span m=''1076770''>who''s</span> <span m=''1076960''>your</span>
  <span m=''1077070''>successor''s</span> <span m=''1077540''>successor?</span> <span
  m=''1078720''>Whereas</span> <span m=''1079110''>in a</span> <span m=''1079240''>sequential</span>
  <span m=''1079710''>case,</span> <span m=''1080330''>you</span> <span m=''1080420''>know,</span>
  <span m=''1080540''>I</span> <span m=''1080750''>just</span> <span m=''1080980''>need</span>
  <span m=''1081120''>to</span> <span m=''1081200''>do</span> <span m=''1081350''>it</span>
  <span m=''1081460''>once</span> <span m=''1082080''>for</span> <span m=''1082260''>each</span>
  <span m=''1082500''>node.</span> <span m=''1082980''>And</span> <span m=''1083150''>that</span>
  <span m=''1083260''>works</span> <span m=''1083470''>really</span> <span m=''1083700''>well.</span>
  </p><p><span m=''1085070''>So</span> <span m=''1085400''>most</span> <span m=''1085640''>strategies</span>
  <span m=''1086210''>based</span> <span m=''1086480''>on</span> <span m=''1086590''>this</span>
  <span m=''1086730''>pattern</span> <span m=''1087110''>of</span> <span m=''1087320''>actually</span>
  <span m=''1087790''>decomposing</span> <span m=''1088530''>your</span> <span m=''1089150''>computation</span>
  <span m=''1089770''>according</span> <span m=''1090090''>to</span> <span m=''1090320''>recursive</span>
  <span m=''1090630''>pattern</span> <span m=''1091390''>lead</span> <span m=''1091610''>you
  to</span> <span m=''1091840''>doing</span> <span m=''1092710''>much</span> <span
  m=''1092960''>more</span> <span m=''1093120''>work</span> <span m=''1093980''>or</span>
  <span m=''1095980''>some</span> <span m=''1096300''>increase in</span> <span m=''1096800''>the</span>
  <span m=''1096860''>amount</span> <span m=''1097110''>of</span> <span m=''1097210''>work.</span>
  <span m=''1098510''>But</span> <span m=''1098630''>you</span> <span m=''1098750''>get</span>
  <span m=''1098920''>this</span> <span m=''1099080''>back</span> <span m=''1099380''>in</span>
  <span m=''1099550''>because</span> <span m=''1099830''>you</span> <span m=''1099930''>can</span>
  <span m=''1100080''>decrease</span> <span m=''1100520''>your</span> <span m=''1100620''>execution.</span>
  <span m=''1101590''>And</span> <span m=''1102020''>so</span> <span m=''1102180''>this</span>
  <span m=''1102340''>is</span> <span m=''1102530''>a good</span> <span m=''1102630''>tradeoff</span>
  <span m=''1103050''>that</span> <span m=''1103160''>you</span> <span m=''1103260''>might</span>
  <span m=''1103430''>want</span> <span m=''1103580''>to</span> <span m=''1103640''>consider.</span>
  </p><p><span m=''1104990''>AUDIENCE:</span> <span m=''1105520''>In the first one</span>
  <span m=''1106050''>order n</span> <span m=''1107110''>was</span> <span m=''1107640''>sequential?</span>
  </p><p><span m=''1107860''>PROFESSOR: Yeah,</span> <span m=''1108040''>yeah.</span>
  <span m=''1108520''>It''s a typo.</span> <span m=''1110970''>Yeah.</span> <span
  m=''1114630''>So</span> <span m=''1115410''>organize</span> <span m=''1115930''>by</span>
  <span m=''1116040''>flow</span> <span m=''1116530''>or</span> <span m=''1117470''>organize</span>
  <span m=''1117910''>by</span> <span m=''1118050''>flow of</span> <span m=''1118520''>data.</span>
  <span m=''1119130''>And</span> <span m=''1119660''>this</span> <span m=''1119950''>is</span>
  <span m=''1120150''>essentially</span> <span m=''1120590''>the</span> <span m=''1120690''>pipeline</span>
  <span m=''1121170''>model.</span> <span m=''1121560''>And</span> <span m=''1121820''>we</span>
  <span m=''1121900''>talked</span> <span m=''1122160''>about</span> <span m=''1122390''>this</span>
  <span m=''1122670''>again</span> <span m=''1123180''>in</span> <span m=''1123290''>some
  of the</span> <span m=''1123530''>recitations</span> <span m=''1124100''>in</span>
  <span m=''1124270''>terms</span> <span m=''1124580''>of</span> <span m=''1125060''>SPE</span>
  <span m=''1125490''>to</span> <span m=''1125580''>SPE</span> <span m=''1126030''>communication.</span>
  <span m=''1127960''>Or</span> <span m=''1128300''>do</span> <span m=''1128440''>you</span>
  <span m=''1128500''>want</span> <span m=''1128690''>to</span> <span m=''1128760''>organize</span>
  <span m=''1129290''>based</span> <span m=''1129620''>on</span> <span m=''1130000''>event-based</span>
  <span m=''1130370''>mechanisms?</span> <span m=''1132440''>So</span> <span m=''1132940''>what</span>
  <span m=''1133180''>these</span> <span m=''1133400''>really</span> <span m=''1133610''>come</span>
  <span m=''1133790''>down</span> <span m=''1134040''>to</span> <span m=''1134260''>is,</span>
  <span m=''1134440''>well,</span> <span m=''1134740''>how</span> <span m=''1134970''>regular</span>
  <span m=''1135800''>is</span> <span m=''1136050''>the</span> <span m=''1136130''>flow</span>
  <span m=''1136360''>of</span> <span m=''1136490''>data</span> <span m=''1136640''>in</span>
  <span m=''1136760''>your</span> <span m=''1136890''>application?</span> <span m=''1137750''>If</span>
  <span m=''1138070''>you</span> <span m=''1138170''>have</span> <span m=''1138850''>regular,</span>
  <span m=''1139570''>let''s</span> <span m=''1139720''>say,</span> <span m=''1139900''>one-way</span>
  <span m=''1140330''>flow</span> <span m=''1141030''>through</span> <span m=''1141250''>a
  stable</span> <span m=''1141640''>computation</span> <span m=''1142280''>path --</span>
  <span m=''1142940''>so</span> <span m=''1143150''>I''ve</span> <span m=''1143180''>set</span>
  <span m=''1143440''>up</span> <span m=''1143600''>my</span> <span m=''1143860''>sort
  of</span> <span m=''1144480''>algorithm</span> <span m=''1144950''>structure.</span>
  <span m=''1145690''>Data is</span> <span m=''1146160''>flowing</span> <span m=''1146400''>through</span>
  <span m=''1146540''>it at a</span> <span m=''1146740''>regular</span> <span m=''1147110''>rate.</span>
  <span m=''1148190''>The computation</span> <span m=''1148730''>graph</span> <span
  m=''1149080''>isn''t</span> <span m=''1149190''>changing</span> <span m=''1149550''>very</span>
  <span m=''1149730''>much.</span> <span m=''1150990''>Then</span> <span m=''1151170''>I</span>
  <span m=''1151220''>can</span> <span m=''1151410''>essentially</span> <span m=''1151820''>pipeline</span>
  <span m=''1152370''>things</span> <span m=''1152590''>really</span> <span m=''1152820''>well.</span>
  <span m=''1153490''>And</span> <span m=''1153630''>this</span> <span m=''1153710''>could</span>
  <span m=''1153850''>be</span> <span m=''1153950''>a</span> <span m=''1154040''>linear</span>
  <span m=''1154350''>chain</span> <span m=''1154610''>of</span> <span m=''1154700''>computation</span>
  <span m=''1155450''>or</span> <span m=''1155800''>it</span> <span m=''1155870''>could</span>
  <span m=''1156010''>be</span> <span m=''1156180''>sort of</span> <span m=''1156500''>nonlinear.</span>
  <span m=''1157040''>There</span> <span m=''1157130''>could</span> <span m=''1157270''>be</span>
  <span m=''1157370''>branches</span> <span m=''1159300''>in</span> <span m=''1159380''>the</span>
  <span m=''1159460''>graph.</span> <span m=''1160780''>And</span> <span m=''1160990''>I</span>
  <span m=''1161040''>can</span> <span m=''1161240''>use</span> <span m=''1161440''>that</span>
  <span m=''1162290''>in</span> <span m=''1162440''>a</span> <span m=''1162480''>way</span>
  <span m=''1162650''>to</span> <span m=''1162760''>exploit</span> <span m=''1163110''>pipeline</span>
  <span m=''1163550''>parallelism.</span> </p><p><span m=''1165740''>If</span> <span
  m=''1166230''>I</span> <span m=''1166370''>don''t</span> <span m=''1166620''>have</span>
  <span m=''1166860''>sort of</span> <span m=''1167720''>this</span> <span m=''1167960''>nice,</span>
  <span m=''1168210''>regular</span> <span m=''1168520''>structure,</span> <span m=''1169300''>it</span>
  <span m=''1169440''>could</span> <span m=''1169630''>be</span> <span m=''1170730''>events</span>
  <span m=''1170970''>that are</span> <span m=''1171150''>created</span> <span m=''1171630''>at</span>
  <span m=''1171720''>run</span> <span m=''1171870''>time.</span> <span m=''1173400''>So,</span>
  <span m=''1173830''>for</span> <span m=''1174020''>example,</span> <span m=''1175970''>you''re</span>
  <span m=''1176250''>a</span> <span m=''1176310''>car</span> <span m=''1176610''>wash</span>
  <span m=''1176900''>attendant</span> <span m=''1177270''>and</span> <span m=''1177420''>a</span>
  <span m=''1177450''>new</span> <span m=''1177580''>car</span> <span m=''1177800''>comes</span>
  <span m=''1178020''>in.</span> <span m=''1178470''>So</span> <span m=''1178600''>you</span>
  <span m=''1178690''>have</span> <span m=''1178860''>to</span> <span m=''1179110''>find</span>
  <span m=''1179660''>a</span> <span m=''1179960''>garage</span> <span m=''1180670''>to</span>
  <span m=''1180780''>assign</span> <span m=''1181350''>to</span> <span m=''1181460''>it</span>
  <span m=''1181890''>and then</span> <span m=''1182070''>turn</span> <span m=''1182480''>on</span>
  <span m=''1182720''>the</span> <span m=''1183320''>car</span> <span m=''1183530''>wash</span>
  <span m=''1183780''>machine.</span> <span m=''1185180''>So</span> <span m=''1185610''>the</span>
  <span m=''1185940''>dynamic</span> <span m=''1186460''>threads</span> <span m=''1186630''>are</span>
  <span m=''1186810''>created</span> <span m=''1187230''>based</span> <span m=''1187530''>on</span>
  <span m=''1187890''>sensory</span> <span m=''1188390''>input</span> <span m=''1188540''>that</span>
  <span m=''1188690''>comes</span> <span m=''1188940''>in,</span> <span m=''1189480''>then</span>
  <span m=''1189700''>you</span> <span m=''1189790''>might</span> <span m=''1189980''>want</span>
  <span m=''1190190''>to</span> <span m=''1190310''>use an</span> <span m=''1190480''>events-based</span>
  <span m=''1191100''>coordination.</span> <span m=''1192150''>You</span> <span m=''1192520''>have</span>
  <span m=''1192700''>irregular</span> <span m=''1193160''>computation.</span> <span
  m=''1194250''>The</span> <span m=''1194550''>computation</span> <span m=''1195050''>might</span>
  <span m=''1195180''>vary</span> <span m=''1195530''>based</span> <span m=''1195840''>on</span>
  <span m=''1195980''>the</span> <span m=''1196050''>data</span> <span m=''1196330''>that</span>
  <span m=''1196410''>comes</span> <span m=''1196680''>into</span> <span m=''1196870''>your</span>
  <span m=''1196980''>system.</span> <span m=''1198420''>And</span> <span m=''1198720''>you</span>
  <span m=''1198780''>might</span> <span m=''1198950''>have</span> <span m=''1199960''>unpredictable</span>
  <span m=''1201260''>data</span> <span m=''1201530''>flow.</span> </p><p><span m=''1203460''>So</span>
  <span m=''1205020''>in the</span> <span m=''1205430''>pipeline</span> <span m=''1205910''>model,</span>
  <span m=''1206290''>the</span> <span m=''1206350''>things</span> <span m=''1206610''>to</span>
  <span m=''1206720''>consider</span> <span m=''1207300''>is</span> <span m=''1207610''>the</span>
  <span m=''1207690''>pipeline</span> <span m=''1208120''>throughput</span> <span
  m=''1208650''>versus</span> <span m=''1209080''>the</span> <span m=''1209170''>pipeline</span>
  <span m=''1209640''>latency.</span> <span m=''1210610''>So the</span> <span m=''1211030''>amount</span>
  <span m=''1211520''>of</span> <span m=''1211650''>concurrency</span> <span m=''1212080''>in</span>
  <span m=''1212160''>a</span> <span m=''1212220''>pipeline</span> <span m=''1212880''>is</span>
  <span m=''1213440''>really</span> <span m=''1213720''>limited</span> <span m=''1214030''>by
  the</span> <span m=''1214170''>number</span> <span m=''1214480''>of stages.</span>
  <span m=''1215090''>This</span> <span m=''1215250''>is</span> <span m=''1215390''>nothing</span>
  <span m=''1216230''>new.</span> <span m=''1216450''>You''ve</span> <span m=''1216580''>seen</span>
  <span m=''1216780''>this,</span> <span m=''1217260''>for example,</span> <span m=''1217780''>in</span>
  <span m=''1218040''>super</span> <span m=''1218280''>scaled</span> <span m=''1218570''>pipelines.</span>
  <span m=''1219950''>And</span> <span m=''1220470''>just</span> <span m=''1220670''>as</span>
  <span m=''1220840''>in</span> <span m=''1220930''>this</span> <span m=''1221070''>case,</span>
  <span m=''1222180''>as</span> <span m=''1222410''>in</span> <span m=''1222470''>the</span>
  <span m=''1222540''>case</span> <span m=''1222790''>of</span> <span m=''1222910''>an</span>
  <span m=''1222990''>architecture</span> <span m=''1223460''>pipeline,</span> <span
  m=''1224330''>the</span> <span m=''1224530''>amount</span> <span m=''1224740''>of</span>
  <span m=''1224830''>time it</span> <span m=''1225120''>takes</span> <span m=''1225360''>you</span>
  <span m=''1225430''>to fill</span> <span m=''1225780''>the</span> <span m=''1225870''>pipeline</span>
  <span m=''1226740''>and the</span> <span m=''1227020''>amount</span> <span m=''1227230''>of</span>
  <span m=''1227290''>time</span> <span m=''1227530''>it takes</span> <span m=''1227740''>you
  to</span> <span m=''1227810''>drain the</span> <span m=''1228160''>pipeline</span>
  <span m=''1228600''>can</span> <span m=''1228780''>essentially</span> <span m=''1229130''>limit</span>
  <span m=''1229340''>your</span> <span m=''1229460''>parallelism.</span> <span m=''1229940''>So</span>
  <span m=''1230070''>you</span> <span m=''1230140''>want</span> <span m=''1230350''>those</span>
  <span m=''1230520''>to</span> <span m=''1230620''>be</span> <span m=''1231080''>really</span>
  <span m=''1231380''>small</span> <span m=''1231720''>compared</span> <span m=''1232090''>to
  the</span> <span m=''1232220''>actual</span> <span m=''1232550''>computation</span>
  <span m=''1233480''>that you</span> <span m=''1233750''>spend</span> <span m=''1234160''>in
  your</span> <span m=''1234240''>pipeline.</span> </p><p><span m=''1235930''>And</span>
  <span m=''1236080''>the</span> <span m=''1236150''>performance</span> <span m=''1236630''>metric</span>
  <span m=''1236990''>is</span> <span m=''1237190''>usually</span> <span m=''1237620''>the</span>
  <span m=''1237710''>throughput.</span> <span m=''1238470''>How</span> <span m=''1238570''>much</span>
  <span m=''1238750''>data</span> <span m=''1238970''>can</span> <span m=''1239130''>you</span>
  <span m=''1239210''>pump</span> <span m=''1239570''>through</span> <span m=''1239660''>your</span>
  <span m=''1239790''>pipeline</span> <span m=''1241690''>per</span> <span m=''1241840''>unit</span>
  <span m=''1242130''>time?</span> <span m=''1243630''>So</span> <span m=''1243970''>in</span>
  <span m=''1244380''>video</span> <span m=''1244750''>encoding,</span> <span m=''1245290''>you</span>
  <span m=''1245370''>know,</span> <span m=''1245640''>it''s the</span> <span m=''1245730''>frames</span>
  <span m=''1246030''>per</span> <span m=''1246150''>second</span> <span m=''1246490''>that
  you</span> <span m=''1246640''>can</span> <span m=''1246790''>produce.</span> <span
  m=''1248130''>And</span> <span m=''1248440''>the</span> <span m=''1248500''>pipeline</span>
  <span m=''1248910''>latency,</span> <span m=''1249220''>though,</span> <span m=''1249520''>is</span>
  <span m=''1249690''>important,</span> <span m=''1250150''>especially</span> <span
  m=''1250580''>in a</span> <span m=''1250780''>real-time</span> <span m=''1251200''>application</span>
  <span m=''1251820''>where</span> <span m=''1252420''>you</span> <span m=''1252540''>need</span>
  <span m=''1252700''>a</span> <span m=''1252760''>result</span> <span m=''1253190''>every</span>
  <span m=''1253470''>10</span> <span m=''1253720''>milliseconds.</span> <span m=''1254470''>You</span>
  <span m=''1254560''>know,</span> <span m=''1254750''>your</span> <span m=''1255010''>pacemaker</span>
  <span m=''1255580''>for</span> <span m=''1255690''>example</span> <span m=''1256020''>has</span>
  <span m=''1256200''>to</span> <span m=''1256300''>produce</span> <span m=''1256610''>a</span>
  <span m=''1256670''>beep</span> <span m=''1257240''>or</span> <span m=''1257510''>a</span>
  <span m=''1257930''>signal</span> <span m=''1258350''>to</span> <span m=''1258440''>your</span>
  <span m=''1258540''>heart</span> <span m=''1258800''>at</span> <span m=''1259100''>specific</span>
  <span m=''1259620''>rates.</span> <span m=''1260990''>So</span> <span m=''1261480''>you
  need</span> <span m=''1261670''>to</span> <span m=''1261770''>consider</span> <span
  m=''1262260''>what</span> <span m=''1262470''>is</span> <span m=''1262580''>your</span>
  <span m=''1262700''>pipeline</span> <span m=''1263120''>throughput</span> <span
  m=''1263780''>versus</span> <span m=''1264080''>your</span> <span m=''1264190''>pipeline</span>
  <span m=''1264610''>latency?</span> <span m=''1265000''>And</span> <span m=''1265120''>that
  can</span> <span m=''1265540''>actually</span> <span m=''1265960''>determine</span>
  <span m=''1266280''>how</span> <span m=''1266400''>many</span> <span m=''1266590''>stages</span>
  <span m=''1267450''>you</span> <span m=''1267590''>might</span> <span m=''1267780''>want</span>
  <span m=''1268560''>to</span> <span m=''1268790''>actually</span> <span m=''1269070''>decompose</span>
  <span m=''1269630''>or organize your</span> <span m=''1270250''>application</span>
  <span m=''1270830''>in.</span> </p><p><span m=''1272660''>And</span> <span m=''1273260''>in
  the</span> <span m=''1273510''>event-based</span> <span m=''1274130''>coordination,</span>
  <span m=''1275520''>these are</span> <span m=''1275790''>interactions</span> <span
  m=''1276540''>of</span> <span m=''1276670''>tasks</span> <span m=''1277210''>over</span>
  <span m=''1277670''>unpredictable</span> <span m=''1278340''>intervals.</span> <span
  m=''1279120''>And</span> <span m=''1280670''>you''re</span> <span m=''1280890''>more</span>
  <span m=''1281110''>prone</span> <span m=''1281470''>to</span> <span m=''1281660''>sort</span>
  <span m=''1281820''>of</span> <span m=''1281930''>deadlocks</span> <span m=''1282620''>in</span>
  <span m=''1282780''>these</span> <span m=''1282920''>applications.</span> <span
  m=''1283600''>Because</span> <span m=''1284560''>you</span> <span m=''1284710''>might</span>
  <span m=''1284870''>have</span> <span m=''1285190''>cyclic</span> <span m=''1285390''>dependencies</span>
  <span m=''1286150''>where</span> <span m=''1286340''>one</span> <span m=''1286570''>event</span>
  <span m=''1286830''>can''t</span> <span m=''1287020''>proceed</span> <span m=''1287450''>until</span>
  <span m=''1288070''>it</span> <span m=''1288260''>gets</span> <span m=''1288510''>data</span>
  <span m=''1288720''>from</span> <span m=''1288890''>another</span> <span m=''1289180''>event.</span>
  <span m=''1289500''>But</span> <span m=''1289700''>it</span> <span m=''1289790''>can''t</span>
  <span m=''1290010''>proceed</span> <span m=''1290410''>until</span> <span m=''1290680''>it</span>
  <span m=''1290750''>gets</span> <span m=''1290960''>data</span> <span m=''1291160''>from</span>
  <span m=''1291340''>another</span> <span m=''1291610''>event.</span> <span m=''1292450''>You</span>
  <span m=''1292570''>can</span> <span m=''1292710''>create</span> <span m=''1293010''>sort</span>
  <span m=''1293150''>of</span> <span m=''1293240''>these</span> <span m=''1293410''>complex</span>
  <span m=''1293860''>interactions</span> <span m=''1294810''>that</span> <span m=''1295000''>often</span>
  <span m=''1295320''>lead</span> <span m=''1295480''>to</span> <span m=''1295580''>deadlock.</span>
  <span m=''1296780''>So</span> <span m=''1296990''>you</span> <span m=''1297060''>have</span>
  <span m=''1297200''>to</span> <span m=''1297520''>sort of</span> <span m=''1297680''>be</span>
  <span m=''1297800''>very</span> <span m=''1298000''>careful</span> <span m=''1298710''>in</span>
  <span m=''1298890''>structuring</span> <span m=''1299350''>things</span> <span m=''1299580''>together</span>
  <span m=''1299910''>so</span> <span m=''1300440''>you</span> <span m=''1300600''>don''t</span>
  <span m=''1300760''>end</span> <span m=''1300870''>up</span> <span m=''1300970''>with</span>
  <span m=''1301510''>feedback</span> <span m=''1302050''>loops</span> <span m=''1302300''>that</span>
  <span m=''1304390''>block</span> <span m=''1304680''>computation</span> <span m=''1305220''>progress.</span>
  </p><p><span m=''1307130''>So</span> <span m=''1307360''>given</span> <span m=''1307980''>sort
  of</span> <span m=''1308240''>these</span> <span m=''1308390''>three</span> <span
  m=''1308660''>organizational</span> <span m=''1309410''>structures</span> <span
  m=''1310320''>that</span> <span m=''1310510''>say,</span> <span m=''1310700''>you</span>
  <span m=''1310860''>know,</span> <span m=''1310930''>I</span> <span m=''1311020''>can</span>
  <span m=''1311240''>organize</span> <span m=''1311690''>my</span> <span m=''1311810''>computation</span>
  <span m=''1312400''>by task</span> <span m=''1313260''>or</span> <span m=''1313680''>by</span>
  <span m=''1313880''>the</span> <span m=''1313970''>flow</span> <span m=''1314270''>of</span>
  <span m=''1314390''>data</span> <span m=''1314920''>or</span> <span m=''1315230''>by</span>
  <span m=''1315900''>sort of</span> <span m=''1316070''>the</span> <span m=''1316210''>pipeline</span>
  <span m=''1316690''>nature</span> <span m=''1316950''>of</span> <span m=''1317040''>the</span>
  <span m=''1317120''>computation,</span> <span m=''1318260''>what</span> <span m=''1318510''>are
  the</span> <span m=''1318710''>supporting</span> <span m=''1319110''>structures?</span>
  <span m=''1319440''>How do I</span> <span m=''1319750''>actually</span> <span m=''1320200''>implement</span>
  <span m=''1320610''>these?</span> <span m=''1320800''>And</span> <span m=''1321320''>so</span>
  <span m=''1321880''>there</span> <span m=''1322060''>are</span> <span m=''1322300''>many</span>
  <span m=''1322580''>different</span> <span m=''1323130''>supporting</span> <span
  m=''1323510''>structures.</span> <span m=''1324150''>I''ve</span> <span m=''1324760''>identified</span>
  <span m=''1325900''>sort</span> <span m=''1326110''>of</span> <span m=''1326210''>four</span>
  <span m=''1327150''>that</span> <span m=''1327460''>occur</span> <span m=''1327750''>most</span>
  <span m=''1328030''>often</span> <span m=''1328700''>in</span> <span m=''1328880''>literature</span>
  <span m=''1329380''>and in</span> <span m=''1329630''>books</span> <span m=''1330490''>and</span>
  <span m=''1330890''>common</span> <span m=''1331190''>terminology</span> <span m=''1331720''>that''s</span>
  <span m=''1331880''>used.</span> <span m=''1333600''>And</span> <span m=''1333840''>so</span>
  <span m=''1334150''>those</span> <span m=''1334480''>are</span> <span m=''1334830''>SPMD,</span>
  <span m=''1335560''>loop</span> <span m=''1335800''>parallelism,</span> <span m=''1336810''>the</span>
  <span m=''1337490''>master/worker</span> <span m=''1338090''>pattern,</span> <span
  m=''1338490''>and</span> <span m=''1338620''>the</span> <span m=''1338690''>fork/join</span>
  <span m=''1339140''>pattern.</span> </p><p><span m=''1342620''>In</span> <span m=''1342810''>the</span>
  <span m=''1343260''>SPMD</span> <span m=''1343800''>pattern,</span> <span m=''1344600''>you''re</span>
  <span m=''1344960''>talking</span> <span m=''1345350''>about a</span> <span m=''1345850''>single</span>
  <span m=''1346070''>program,</span> <span m=''1346630''>multiple</span> <span m=''1347080''>data</span>
  <span m=''1348060''>concept.</span> <span m=''1349070''>So</span> <span m=''1349260''>here</span>
  <span m=''1349520''>you</span> <span m=''1349740''>just</span> <span m=''1349870''>have</span>
  <span m=''1350190''>one</span> <span m=''1350420''>program.</span> <span m=''1351000''>You</span>
  <span m=''1351220''>write</span> <span m=''1351420''>it</span> <span m=''1351510''>once</span>
  <span m=''1352070''>and</span> <span m=''1352360''>then</span> <span m=''1352550''>you</span>
  <span m=''1352700''>assign</span> <span m=''1353060''>it</span> <span m=''1353170''>to</span>
  <span m=''1353270''>each</span> <span m=''1353500''>of your</span> <span m=''1353680''>processors</span>
  <span m=''1354320''>to</span> <span m=''1354450''>run.</span> <span m=''1354900''>So
  it''s</span> <span m=''1355120''>the</span> <span m=''1355230''>same</span> <span
  m=''1355510''>program.</span> <span m=''1355940''>It just</span> <span m=''1356180''>runs</span>
  <span m=''1356400''>on</span> <span m=''1356500''>different</span> <span m=''1356760''>machines.</span>
  <span m=''1358490''>Now</span> <span m=''1358760''>each</span> <span m=''1359010''>program</span>
  <span m=''1359700''>or</span> <span m=''1359860''>each</span> <span m=''1360300''>instance</span>
  <span m=''1361040''>of</span> <span m=''1361430''>the</span> <span m=''1361520''>code</span>
  <span m=''1362270''>can</span> <span m=''1362440''>have</span> <span m=''1362710''>different</span>
  <span m=''1363000''>control</span> <span m=''1363340''>flow</span> <span m=''1363470''>that
  it</span> <span m=''1363790''>takes.</span> <span m=''1364490''>So</span> <span
  m=''1364820''>just</span> <span m=''1365040''>because</span> <span m=''1365280''>they''re</span>
  <span m=''1365380''>running</span> <span m=''1365660''>the same</span> <span m=''1365890''>program</span>
  <span m=''1366270''>doesn''t</span> <span m=''1366530''>mean</span> <span m=''1366720''>the
  computation</span> <span m=''1367440''>is happening</span> <span m=''1367850''>in</span>
  <span m=''1367970''>lock</span> <span m=''1368220''>step.</span> <span m=''1368830''>That
  would</span> <span m=''1368990''>be</span> <span m=''1369240''>a sort of a</span>
  <span m=''1369360''>SIMD</span> <span m=''1370240''>or</span> <span m=''1370400''>vector-like</span>
  <span m=''1371560''>computation.</span> </p><p><span m=''1373910''>In</span> <span
  m=''1374110''>this</span> <span m=''1374300''>model</span> <span m=''1374600''>you</span>
  <span m=''1374720''>can</span> <span m=''1374840''>actually</span> <span m=''1375210''>take</span>
  <span m=''1375630''>independent</span> <span m=''1375850''>control</span> <span
  m=''1376200''>flow.</span> <span m=''1376550''>It could</span> <span m=''1376710''>be</span>
  <span m=''1376960''>different</span> <span m=''1377500''>behavior</span> <span m=''1377930''>in</span>
  <span m=''1378040''>each</span> <span m=''1378270''>instance</span> <span m=''1378600''>of</span>
  <span m=''1378690''>the</span> <span m=''1378800''>code.</span> <span m=''1379810''>But</span>
  <span m=''1380070''>you''re</span> <span m=''1380260''>running</span> <span m=''1380560''>the</span>
  <span m=''1380640''>same</span> <span m=''1380920''>code</span> <span m=''1381220''>everywhere.</span>
  <span m=''1382140''>So</span> <span m=''1382340''>this</span> <span m=''1382560''>is</span>
  <span m=''1382930''>slightly</span> <span m=''1383320''>different,</span> <span
  m=''1383710''>for</span> <span m=''1383810''>example,</span> <span m=''1384140''>from</span>
  <span m=''1384320''>what</span> <span m=''1384430''>you''ve</span> <span m=''1384550''>seen</span>
  <span m=''1384770''>on</span> <span m=''1384910''>Cell,</span> <span m=''1385610''>where</span>
  <span m=''1385850''>you</span> <span m=''1385990''>have</span> <span m=''1386670''>the</span>
  <span m=''1387790''>PPE</span> <span m=''1388240''>thread</span> <span m=''1388970''>that</span>
  <span m=''1389120''>creates</span> <span m=''1389480''>SPE</span> <span m=''1389930''>threads.</span>
  <span m=''1390540''>Sometimes</span> <span m=''1390980''>the</span> <span m=''1391190''>SPE</span>
  <span m=''1391550''>threads</span> <span m=''1391830''>are</span> <span m=''1391950''>the</span>
  <span m=''1392010''>same,</span> <span m=''1392600''>but</span> <span m=''1392820''>it''s</span>
  <span m=''1392940''>not</span> <span m=''1393390''>always</span> <span m=''1393720''>the</span>
  <span m=''1393800''>case</span> <span m=''1394080''>that</span> <span m=''1394190''>the</span>
  <span m=''1394260''>PPE</span> <span m=''1394720''>threads and</span> <span m=''1395130''>the</span>
  <span m=''1395350''>SPE</span> <span m=''1395560''>threads</span> <span m=''1395840''>are
  the</span> <span m=''1396060''>same.</span> </p><p><span m=''1397610''>So in</span>
  <span m=''1397860''>the</span> <span m=''1397990''>SPMD</span> <span m=''1398520''>model</span>
  <span m=''1398860''>there are</span> <span m=''1399020''>really</span> <span m=''1399510''>five</span>
  <span m=''1399800''>steps</span> <span m=''1400120''>that</span> <span m=''1400230''>you</span>
  <span m=''1400360''>do.</span> <span m=''1401110''>You</span> <span m=''1401270''>initialize</span>
  <span m=''1401780''>sort of your</span> <span m=''1402300''>computation</span> <span
  m=''1403470''>in</span> <span m=''1403640''>the</span> <span m=''1403710''>world</span>
  <span m=''1404170''>of</span> <span m=''1405020''>sort of</span> <span m=''1405360''>code</span>
  <span m=''1405620''>instances</span> <span m=''1406040''>that</span> <span m=''1406180''>you''re</span>
  <span m=''1406330''>going</span> <span m=''1406470''>to</span> <span m=''1406600''>run.</span>
  <span m=''1407250''>And</span> <span m=''1407670''>for</span> <span m=''1407780''>each</span>
  <span m=''1407960''>one</span> <span m=''1408250''>you</span> <span m=''1408370''>obtain
  a</span> <span m=''1408660''>unique</span> <span m=''1408960''>identifier.</span>
  <span m=''1409730''>And this</span> <span m=''1409880''>usually</span> <span m=''1410230''>helps</span>
  <span m=''1410500''>them</span> <span m=''1410610''>being</span> <span m=''1410850''>able</span>
  <span m=''1411030''>to</span> <span m=''1411540''>determine</span> <span m=''1412070''>who</span>
  <span m=''1412250''>needs to</span> <span m=''1412480''>communicate</span> <span
  m=''1413000''>with</span> <span m=''1413200''>who</span> <span m=''1413810''>or</span>
  <span m=''1414630''>ordering</span> <span m=''1415360''>dependencies.</span> <span
  m=''1417250''>And</span> <span m=''1417680''>you</span> <span m=''1417790''>run</span>
  <span m=''1417980''>the</span> <span m=''1418070''>same</span> <span m=''1418320''>program</span>
  <span m=''1419030''>on</span> <span m=''1419300''>each</span> <span m=''1419560''>processor.</span>
  <span m=''1421560''>And</span> <span m=''1421980''>what</span> <span m=''1422100''>you</span>
  <span m=''1422180''>need</span> <span m=''1422330''>to</span> <span m=''1422420''>do</span>
  <span m=''1422560''>in</span> <span m=''1422650''>this</span> <span m=''1422790''>case</span>
  <span m=''1423080''>is</span> <span m=''1423190''>also</span> <span m=''1423440''>distribute</span>
  <span m=''1424030''>your</span> <span m=''1424180''>data</span> <span m=''1424790''>between</span>
  <span m=''1425220''>each</span> <span m=''1425420''>of the</span> <span m=''1425560''>different</span>
  <span m=''1425860''>instances</span> <span m=''1426270''>of</span> <span m=''1426360''>your</span>
  <span m=''1426480''>code.</span> <span m=''1428030''>And</span> <span m=''1428240''>once,</span>
  <span m=''1429440''>you</span> <span m=''1429560''>know,</span> <span m=''1429630''>each</span>
  <span m=''1429810''>program</span> <span m=''1430180''>is</span> <span m=''1430310''>running,</span>
  <span m=''1430630''>it''s</span> <span m=''1430870''>computing</span> <span m=''1431310''>on
  its</span> <span m=''1431530''>data,</span> <span m=''1431820''>eventually</span>
  <span m=''1432320''>you</span> <span m=''1432820''>need to</span> <span m=''1433300''>finalize</span>
  <span m=''1434140''>in</span> <span m=''1434300''>some way.</span> <span m=''1434570''>And</span>
  <span m=''1434770''>so</span> <span m=''1434890''>that</span> <span m=''1435030''>might</span>
  <span m=''1435200''>mean</span> <span m=''1436000''>doing</span> <span m=''1436300''>a</span>
  <span m=''1436360''>reduction</span> <span m=''1436820''>to</span> <span m=''1436930''>communicate</span>
  <span m=''1437560''>all</span> <span m=''1437790''>the data</span> <span m=''1438110''>to</span>
  <span m=''1438290''>one</span> <span m=''1438500''>processor</span> <span m=''1439320''>to</span>
  <span m=''1439650''>actually</span> <span m=''1440160''>output</span> <span m=''1440590''>the</span>
  <span m=''1440690''>value.</span> </p><p><span m=''1443160''>And</span> <span m=''1443290''>so</span>
  <span m=''1443520''>we</span> <span m=''1443670''>saw</span> <span m=''1443920''>in</span>
  <span m=''1444030''>SPMD</span> <span m=''1444470''>an</span> <span m=''1444590''>example</span>
  <span m=''1445690''>for</span> <span m=''1446070''>the</span> <span m=''1446200''>numerical</span>
  <span m=''1446620''>integration</span> <span m=''1447110''>for</span> <span m=''1447240''>calculating</span>
  <span m=''1447800''>pi.</span> <span m=''1449120''>And</span> <span m=''1449530''>if</span>
  <span m=''1449660''>you</span> <span m=''1449740''>remember,</span> <span m=''1450300''>so</span>
  <span m=''1450480''>we</span> <span m=''1450600''>had</span> <span m=''1450840''>this</span>
  <span m=''1452340''>very</span> <span m=''1452620''>simple</span> <span m=''1452980''>c</span>
  <span m=''1453230''>loop.</span> <span m=''1454000''>And</span> <span m=''1454630''>we</span>
  <span m=''1454760''>showed</span> <span m=''1455450''>the</span> <span m=''1455570''>MPI</span>
  <span m=''1456520''>implementation</span> <span m=''1457170''>of</span> <span m=''1457240''>the</span>
  <span m=''1457350''>c</span> <span m=''1457530''>loop.</span> <span m=''1459780''>And</span>
  <span m=''1459900''>so</span> <span m=''1460790''>in</span> <span m=''1460910''>this</span>
  <span m=''1461090''>code,</span> <span m=''1461550''>what we''re</span> <span m=''1461780''>doing</span>
  <span m=''1462080''>is</span> <span m=''1462640''>we''re</span> <span m=''1462750''>trying</span>
  <span m=''1462980''>to</span> <span m=''1463070''>determine</span> <span m=''1463450''>different</span>
  <span m=''1463760''>intervals.</span> <span m=''1464760''>And</span> <span m=''1464920''>for</span>
  <span m=''1465030''>each</span> <span m=''1465240''>interval</span> <span m=''1465730''>we''re</span>
  <span m=''1465840''>going</span> <span m=''1466030''>to</span> <span m=''1466140''>calculate</span>
  <span m=''1467360''>a</span> <span m=''1467490''>value</span> <span m=''1467850''>and</span>
  <span m=''1467980''>then</span> <span m=''1469830''>in</span> <span m=''1469980''>the</span>
  <span m=''1470070''>MPI</span> <span m=''1470450''>program</span> <span m=''1471030''>we''re</span>
  <span m=''1471770''>essentially</span> <span m=''1472290''>deciding</span> <span
  m=''1473090''>how big</span> <span m=''1473420''>an</span> <span m=''1473500''>interval</span>
  <span m=''1474190''>each</span> <span m=''1474500''>process</span> <span m=''1475370''>should</span>
  <span m=''1475690''>run.</span> <span m=''1476640''>So</span> <span m=''1476820''>it''s</span>
  <span m=''1476930''>the</span> <span m=''1477000''>same</span> <span m=''1477240''>program.</span>
  <span m=''1477770''>It</span> <span m=''1477920''>runs</span> <span m=''1478170''>on</span>
  <span m=''1478260''>every</span> <span m=''1478510''>single</span> <span m=''1478750''>machine</span>
  <span m=''1479500''>or</span> <span m=''1479640''>every</span> <span m=''1479850''>single</span>
  <span m=''1480080''>processor.</span> <span m=''1481150''>And</span> <span m=''1481430''>each</span>
  <span m=''1481660''>processor</span> <span m=''1482120''>determines</span> <span
  m=''1482660''>based</span> <span m=''1482890''>on</span> <span m=''1483000''>its</span>
  <span m=''1483110''>ID</span> <span m=''1485350''>which</span> <span m=''1485760''>interval</span>
  <span m=''1486290''>of</span> <span m=''1486390''>the</span> <span m=''1486480''>actual</span>
  <span m=''1486790''>integration</span> <span m=''1487340''>to</span> <span m=''1487440''>do.</span>
  <span m=''1489340''>And</span> <span m=''1489460''>so in</span> <span m=''1489760''>this</span>
  <span m=''1489910''>model</span> <span m=''1490490''>we''re</span> <span m=''1490670''>distributing</span>
  <span m=''1491320''>work</span> <span m=''1492110''>relatively</span> <span m=''1492560''>evenly.</span>
  <span m=''1493000''>Each</span> <span m=''1493240''>processor is</span> <span m=''1493840''>doing
  a</span> <span m=''1494060''>specific</span> <span m=''1494520''>chunk</span> <span
  m=''1495200''>that</span> <span m=''1495840''>starts</span> <span m=''1496220''>at</span>
  <span m=''1496400''>say</span> <span m=''1497020''>some</span> <span m=''1497240''>index</span>
  <span m=''1497570''>i.</span> <span m=''1497930''>And</span> <span m=''1498040''>if</span>
  <span m=''1498160''>I</span> <span m=''1498250''>have</span> <span m=''1499560''>10</span>
  <span m=''1499820''>processors,</span> <span m=''1500390''>I''m</span> <span m=''1500520''>doing</span>
  <span m=''1500740''>100</span> <span m=''1501120''>steps.</span> <span m=''1501810''>Then</span>
  <span m=''1502410''>you''re</span> <span m=''1502710''>doing</span> <span m=''1502960''>i,</span>
  <span m=''1503200''>i</span> <span m=''1503380''>plus</span> <span m=''1503630''>10,</span>
  <span m=''1503900''>i plus</span> <span m=''1504220''>20</span> <span m=''1504580''>and
  so</span> <span m=''1504830''>on.</span> </p><p><span m=''1506260''>But I can</span>
  <span m=''1506530''>do</span> <span m=''1506640''>a</span> <span m=''1506720''>different</span>
  <span m=''1507040''>distribution.</span> <span m=''1508320''>So</span> <span m=''1508460''>the</span>
  <span m=''1508540''>first</span> <span m=''1508880''>is</span> <span m=''1509040''>a</span>
  <span m=''1509110''>block</span> <span m=''1509410''>distribution.</span> <span
  m=''1510050''>I</span> <span m=''1510130''>can</span> <span m=''1510290''>do</span>
  <span m=''1510410''>something</span> <span m=''1510810''>called</span> <span m=''1511180''>a</span>
  <span m=''1511260''>cyclic</span> <span m=''1511450''>distribution.</span> <span
  m=''1512490''>So in</span> <span m=''1512780''>a</span> <span m=''1512850''>cyclic</span>
  <span m=''1513030''>distribution,</span> <span m=''1513600''>I</span> <span m=''1513650''>distribute</span>
  <span m=''1514070''>work</span> <span m=''1514480''>sort of</span> <span m=''1514810''>in</span>
  <span m=''1514930''>a</span> <span m=''1515420''>round</span> <span m=''1515700''>robin</span>
  <span m=''1515960''>fashion</span> <span m=''1516420''>or</span> <span m=''1516650''>some</span>
  <span m=''1516900''>other</span> <span m=''1517620''>mechanism.</span> <span m=''1518080''>So</span>
  <span m=''1518210''>here,</span> <span m=''1519680''>you know,</span> <span m=''1519810''>each</span>
  <span m=''1520030''>processor --</span> <span m=''1521940''>sorry.</span> <span
  m=''1524780''>In</span> <span m=''1524950''>the</span> <span m=''1525020''>block</span>
  <span m=''1525380''>distribution</span> <span m=''1526360''>I</span> <span m=''1526850''>sort</span>
  <span m=''1526990''>of</span> <span m=''1527060''>start at</span> <span m=''1527450''>interval</span>
  <span m=''1527840''>i</span> <span m=''1528480''>and</span> <span m=''1528860''>I</span>
  <span m=''1528960''>go --</span> <span m=''1531380''>sorry.</span> <span m=''1532660''>So</span>
  <span m=''1532780''>each</span> <span m=''1532990''>processor</span> <span m=''1533390''>gets</span>
  <span m=''1533640''>one</span> <span m=''1534000''>entire</span> <span m=''1534670''>slice</span>
  <span m=''1535000''>here.</span> <span m=''1536180''>So I</span> <span m=''1536670''>start</span>
  <span m=''1536960''>here</span> <span m=''1537160''>and</span> <span m=''1537280''>I</span>
  <span m=''1537320''>go</span> <span m=''1537490''>through to</span> <span m=''1537700''>completion.</span>
  <span m=''1538260''>I start</span> <span m=''1538490''>here</span> <span m=''1538730''>and
  go</span> <span m=''1538870''>through to</span> <span m=''1539100''>completion.</span>
  <span m=''1541760''>In</span> <span m=''1542000''>a</span> <span m=''1542090''>cyclic</span>
  <span m=''1542260''>distribution</span> <span m=''1543100''>I</span> <span m=''1543210''>might</span>
  <span m=''1543400''>do</span> <span m=''1543580''>smaller</span> <span m=''1544010''>slices</span>
  <span m=''1544840''>of</span> <span m=''1545100''>each</span> <span m=''1545260''>one</span>
  <span m=''1545440''>of</span> <span m=''1545560''>those</span> <span m=''1545860''>intervals.</span>
  <span m=''1547670''>And so I</span> <span m=''1548440''>greyed</span> <span m=''1548770''>out</span>
  <span m=''1548910''>the</span> <span m=''1549320''>components</span> <span m=''1549730''>for</span>
  <span m=''1550740''>the</span> <span m=''1551200''>block</span> <span m=''1552320''>distribution</span>
  <span m=''1553720''>to show</span> <span m=''1553960''>you that</span> <span m=''1554260''>for</span>
  <span m=''1554360''>a</span> <span m=''1554420''>contrast here.</span> </p><p><span
  m=''1558070''>There</span> <span m=''1558230''>are</span> <span m=''1558310''>some</span>
  <span m=''1558550''>challenges</span> <span m=''1559080''>in</span> <span m=''1559280''>the</span>
  <span m=''1559420''>SPMD</span> <span m=''1560460''>model.</span> <span m=''1561610''>And</span>
  <span m=''1561810''>that</span> <span m=''1561970''>is</span> <span m=''1562130''>how</span>
  <span m=''1562270''>do</span> <span m=''1562360''>you</span> <span m=''1562590''>actually</span>
  <span m=''1562980''>split</span> <span m=''1563270''>your</span> <span m=''1563420''>data</span>
  <span m=''1563960''>correctly?</span> <span m=''1565030''>You</span> <span m=''1565150''>have</span>
  <span m=''1565270''>to</span> <span m=''1565370''>distribute</span> <span m=''1565950''>your
  data</span> <span m=''1566350''>in</span> <span m=''1566470''>a</span> <span m=''1566510''>way</span>
  <span m=''1566760''>that,</span> <span m=''1567220''>you</span> <span m=''1567360''>know,</span>
  <span m=''1568410''>doesn''t</span> <span m=''1568710''>increase</span> <span m=''1569010''>contention</span>
  <span m=''1569460''>on</span> <span m=''1569570''>your</span> <span m=''1569690''>memory</span>
  <span m=''1569950''>system,</span> <span m=''1570940''>where</span> <span m=''1571410''>each</span>
  <span m=''1571690''>actual</span> <span m=''1572040''>processor</span> <span m=''1572680''>that''s</span>
  <span m=''1572850''>assigned</span> <span m=''1572940''>the</span> <span m=''1573450''>computation</span>
  <span m=''1574360''>has</span> <span m=''1574900''>data</span> <span m=''1575140''>locally</span>
  <span m=''1576150''>to</span> <span m=''1576630''>actually</span> <span m=''1577000''>operate</span>
  <span m=''1577380''>on.</span> <span m=''1578630''>And</span> <span m=''1578770''>you</span>
  <span m=''1578840''>want</span> <span m=''1579000''>to achieve an</span> <span m=''1579490''>even</span>
  <span m=''1579770''>work</span> <span m=''1579980''>distribution.</span> <span m=''1581480''>You</span>
  <span m=''1581600''>know,</span> <span m=''1581660''>do</span> <span m=''1581780''>you</span>
  <span m=''1581890''>need a</span> <span m=''1582100''>dynamic</span> <span m=''1582540''>load</span>
  <span m=''1582700''>balancing</span> <span m=''1583130''>scheme</span> <span m=''1583800''>or</span>
  <span m=''1584840''>can</span> <span m=''1585010''>you use</span> <span m=''1585220''>an</span>
  <span m=''1585300''>alternative</span> <span m=''1585770''>pattern</span> <span
  m=''1586740''>if</span> <span m=''1586890''>that''s</span> <span m=''1587370''>not</span>
  <span m=''1587590''>suitable?</span> </p><p><span m=''1590740''>So</span> <span
  m=''1591850''>the</span> <span m=''1591940''>second</span> <span m=''1592300''>pattern,</span>
  <span m=''1592900''>as</span> <span m=''1593360''>opposed to the</span> <span m=''1593650''>SPMD</span>
  <span m=''1593940''>pattern</span> <span m=''1594570''>is</span> <span m=''1594750''>loop</span>
  <span m=''1594970''>parallelism</span> <span m=''1595350''>pattern.</span> <span
  m=''1596100''>In</span> <span m=''1596320''>this</span> <span m=''1596500''>case,</span>
  <span m=''1597250''>this</span> <span m=''1597470''>is</span> <span m=''1597690''>the</span>
  <span m=''1597750''>best</span> <span m=''1598060''>suited</span> <span m=''1598380''>when</span>
  <span m=''1598640''>you</span> <span m=''1598750''>actually</span> <span m=''1599080''>have</span>
  <span m=''1599220''>a</span> <span m=''1599260''>programming</span> <span m=''1599700''>model</span>
  <span m=''1600910''>or a</span> <span m=''1601210''>program</span> <span m=''1602050''>that</span>
  <span m=''1602340''>you</span> <span m=''1602410''>can''t</span> <span m=''1602660''>really</span>
  <span m=''1602870''>change</span> <span m=''1603280''>a</span> <span m=''1603320''>whole</span>
  <span m=''1603520''>lot</span> <span m=''1603770''>or</span> <span m=''1604010''>that
  you</span> <span m=''1604140''>don''t</span> <span m=''1604380''>really</span> <span
  m=''1604630''>want</span> <span m=''1604810''>to</span> <span m=''1604880''>change</span>
  <span m=''1605140''>a</span> <span m=''1605190''>whole</span> <span m=''1605320''>lot.</span>
  <span m=''1606590''>Or</span> <span m=''1606890''>you</span> <span m=''1606970''>have</span>
  <span m=''1607080''>a</span> <span m=''1607130''>programming</span> <span m=''1607530''>model</span>
  <span m=''1607800''>that</span> <span m=''1607920''>allows</span> <span m=''1608260''>you</span>
  <span m=''1608350''>to</span> <span m=''1608450''>sort</span> <span m=''1608680''>of</span>
  <span m=''1609140''>identify</span> <span m=''1609980''>loops</span> <span m=''1610790''>that</span>
  <span m=''1610960''>take</span> <span m=''1611200''>up</span> <span m=''1611310''>most</span>
  <span m=''1611520''>of</span> <span m=''1611580''>the</span> <span m=''1611640''>computation</span>
  <span m=''1612640''>and</span> <span m=''1612790''>then</span> <span m=''1612910''>insert</span>
  <span m=''1613430''>annotations</span> <span m=''1614000''>or</span> <span m=''1614130''>some</span>
  <span m=''1614360''>ways to</span> <span m=''1614640''>automatically</span> <span
  m=''1615160''>parallelize</span> <span m=''1615760''>those</span> <span m=''1615890''>loops.</span>
  </p><p><span m=''1617350''>So</span> <span m=''1618440''>we</span> <span m=''1618570''>saw</span>
  <span m=''1619150''>in</span> <span m=''1619310''>the</span> <span m=''1619420''>OpenMP</span>
  <span m=''1619920''>example,</span> <span m=''1620970''>you</span> <span m=''1621110''>have</span>
  <span m=''1621270''>some</span> <span m=''1621470''>loops</span> <span m=''1621660''>you
  can insert</span> <span m=''1622240''>these</span> <span m=''1622380''>pragmas</span>
  <span m=''1622830''>that</span> <span m=''1622990''>say,</span> <span m=''1623580''>this</span>
  <span m=''1623830''>loop</span> <span m=''1623980''>is</span> <span m=''1624170''>parallel.</span>
  <span m=''1625000''>And</span> <span m=''1625270''>the</span> <span m=''1625330''>compiler</span>
  <span m=''1626920''>in</span> <span m=''1627120''>the</span> <span m=''1627190''>run-time</span>
  <span m=''1627320''>time</span> <span m=''1627540''>system</span> <span m=''1628200''>can</span>
  <span m=''1628390''>automatically</span> <span m=''1628980''>partition</span> <span
  m=''1629470''>this</span> <span m=''1629570''>loop</span> <span m=''1629970''>into</span>
  <span m=''1630190''>smaller</span> <span m=''1630560''>chunks.</span> <span m=''1631270''>And</span>
  <span m=''1631410''>then</span> <span m=''1631600''>each chunk can</span> <span
  m=''1633240''>compute</span> <span m=''1633960''>in</span> <span m=''1634150''>parallel.</span>
  <span m=''1635880''>And</span> <span m=''1636950''>you</span> <span m=''1637070''>might</span>
  <span m=''1637280''>apply</span> <span m=''1637620''>this</span> <span m=''1637770''>scheme</span>
  <span m=''1638120''>in</span> <span m=''1638230''>different</span> <span m=''1638530''>ways</span>
  <span m=''1639200''>depending</span> <span m=''1639660''>on</span> <span m=''1639860''>how</span>
  <span m=''1640010''>well</span> <span m=''1640190''>you</span> <span m=''1640300''>understand</span>
  <span m=''1640710''>your</span> <span m=''1640810''>code.</span> <span m=''1641870''>Are</span>
  <span m=''1641980''>you</span> <span m=''1642100''>running</span> <span m=''1642350''>on</span>
  <span m=''1642470''>a</span> <span m=''1642500''>shared</span> <span m=''1642840''>memory</span>
  <span m=''1643080''>machine?</span> <span m=''1645390''>You</span> <span m=''1645530''>can''t</span>
  <span m=''1645760''>afford</span> <span m=''1646040''>to</span> <span m=''1646140''>do</span>
  <span m=''1646330''>a</span> <span m=''1646410''>whole</span> <span m=''1646610''>lot</span>
  <span m=''1646770''>of</span> <span m=''1646850''>restructuring.</span> <span m=''1647490''>Communication</span>
  <span m=''1648070''>costs</span> <span m=''1648380''>might be</span> <span m=''1648620''>really</span>
  <span m=''1648890''>expensive.</span> </p><p><span m=''1653480''>In</span> <span
  m=''1653910''>the</span> <span m=''1653970''>master/worker</span> <span m=''1654640''>pattern,</span>
  <span m=''1655230''>this</span> <span m=''1655460''>is</span> <span m=''1655580''>really</span>
  <span m=''1656430''>starting to get</span> <span m=''1656910''>closer</span> <span
  m=''1657290''>to</span> <span m=''1657520''>what</span> <span m=''1657710''>we''ve</span>
  <span m=''1657910''>done</span> <span m=''1658170''>with</span> <span m=''1660150''>the</span>
  <span m=''1660480''>Cell</span> <span m=''1661040''>recitations</span> <span m=''1661920''>in
  the Cell</span> <span m=''1662150''>labs.</span> <span m=''1663000''>You</span>
  <span m=''1663110''>have</span> <span m=''1663400''>some</span> <span m=''1663650''>world</span>
  <span m=''1664140''>of</span> <span m=''1664260''>independent</span> <span m=''1664730''>tasks</span>
  <span m=''1665490''>and</span> <span m=''1666330''>the</span> <span m=''1666850''>master</span>
  <span m=''1667750''>essentially</span> <span m=''1668450''>running</span> <span
  m=''1669200''>and distributing</span> <span m=''1669980''>each</span> <span m=''1670200''>of</span>
  <span m=''1670260''>these</span> <span m=''1670460''>tasks</span> <span m=''1670940''>to</span>
  <span m=''1671380''>different</span> <span m=''1671790''>processors.</span> <span
  m=''1673490''>So in this</span> <span m=''1673910''>case</span> <span m=''1674930''>you''d</span>
  <span m=''1675320''>get</span> <span m=''1675590''>several</span> <span m=''1675960''>advantages</span>
  <span m=''1677010''>that</span> <span m=''1677110''>you</span> <span m=''1677240''>can</span>
  <span m=''1677380''>leverage.</span> <span m=''1678150''>If</span> <span m=''1678330''>each</span>
  <span m=''1678550''>of</span> <span m=''1678630''>your</span> <span m=''1678770''>tasks</span>
  <span m=''1679130''>are</span> <span m=''1679260''>varied in</span> <span m=''1679730''>nature
  --</span> <span m=''1680390''>and</span> <span m=''1680750''>they</span> <span m=''1680830''>might</span>
  <span m=''1681030''>finish at</span> <span m=''1681770''>different</span> <span
  m=''1682210''>times</span> <span m=''1682690''>or</span> <span m=''1682970''>they</span>
  <span m=''1683160''>require</span> <span m=''1683390''>different</span> <span m=''1683640''>kinds
  of</span> <span m=''1683950''>resources,</span> <span m=''1684700''>you</span> <span
  m=''1684940''>can</span> <span m=''1685060''>use</span> <span m=''1685250''>this</span>
  <span m=''1685410''>model</span> <span m=''1685790''>to</span> <span m=''1685910''>sort</span>
  <span m=''1686140''>of</span> <span m=''1686340''>view</span> <span m=''1686510''>your</span>
  <span m=''1686690''>machine</span> <span m=''1687250''>as</span> <span m=''1687930''>sort</span>
  <span m=''1688120''>of</span> <span m=''1688600''>a</span> <span m=''1688840''>non-symmetric</span>
  <span m=''1690080''>processor.</span> <span m=''1690640''>Not</span> <span m=''1690830''>everybody</span>
  <span m=''1691270''>is the</span> <span m=''1691440''>same.</span> <span m=''1692090''>And</span>
  <span m=''1692310''>you</span> <span m=''1692400''>can</span> <span m=''1692530''>use</span>
  <span m=''1692690''>this</span> <span m=''1692750''>model</span> <span m=''1693070''>really</span>
  <span m=''1693310''>well</span> <span m=''1693490''>for</span> <span m=''1693610''>that.</span>
  </p><p><span m=''1695040''>So</span> <span m=''1695980''>you</span> <span m=''1696150''>can</span>
  <span m=''1696280''>distribute</span> <span m=''1697290''>these</span> <span m=''1697650''>and</span>
  <span m=''1697910''>then</span> <span m=''1698030''>you</span> <span m=''1698140''>can</span>
  <span m=''1698250''>do</span> <span m=''1698410''>dynamic</span> <span m=''1698790''>load</span>
  <span m=''1698950''>balancing.</span> <span m=''1699390''>Because</span> <span m=''1700130''>as</span>
  <span m=''1700430''>processors --</span> <span m=''1701670''>as</span> <span m=''1701890''>workers</span>
  <span m=''1702290''>finish</span> <span m=''1702610''>you</span> <span m=''1702720''>can</span>
  <span m=''1702880''>ship</span> <span m=''1703060''>them</span> <span m=''1703210''>more
  and</span> <span m=''1703430''>more</span> <span m=''1703670''>data.</span> <span
  m=''1705120''>So</span> <span m=''1705660''>it</span> <span m=''1705760''>has</span>
  <span m=''1708620''>some</span> <span m=''1708910''>particularly</span> <span m=''1709300''>relevant</span>
  <span m=''1713020''>properties</span> <span m=''1715160''>for</span> <span m=''1715580''>heterogeneous</span>
  <span m=''1716140''>computations,</span> <span m=''1716770''>but</span> <span m=''1716920''>it''s</span>
  <span m=''1717050''>also</span> <span m=''1717350''>really</span> <span m=''1717610''>good</span>
  <span m=''1717810''>for</span> <span m=''1718200''>when</span> <span m=''1718420''>you</span>
  <span m=''1718490''>have</span> <span m=''1718680''>a</span> <span m=''1718720''>whole</span>
  <span m=''1719000''>lot</span> <span m=''1719240''>of</span> <span m=''1719440''>parallelism</span>
  <span m=''1719950''>in</span> <span m=''1720030''>your</span> <span m=''1720140''>application.</span>
  <span m=''1720790''>So</span> <span m=''1720930''>something</span> <span m=''1721190''>called</span>
  <span m=''1721520''>embarrassingly</span> <span m=''1721990''>parallel</span> <span
  m=''1722400''>problems.</span> <span m=''1724030''>So</span> <span m=''1724240''>ray</span>
  <span m=''1724500''>tracing,</span> <span m=''1724880''>molecular</span> <span m=''1725280''>dynamics,</span>
  <span m=''1725840''>a</span> <span m=''1725920''>lot</span> <span m=''1726100''>of</span>
  <span m=''1726200''>scientific</span> <span m=''1726710''>applications</span> <span
  m=''1727700''>have</span> <span m=''1727900''>these</span> <span m=''1728080''>massive</span>
  <span m=''1728440''>levels</span> <span m=''1728680''>of</span> <span m=''1728780''>parallelism.</span>
  <span m=''1729580''>And</span> <span m=''1729830''>you</span> <span m=''1729920''>can</span>
  <span m=''1730100''>use</span> <span m=''1730420''>this</span> <span m=''1730700''>essentially</span>
  <span m=''1731260''>work-queue</span> <span m=''1731750''>based</span> <span m=''1732060''>mechanism</span>
  <span m=''1732820''>that</span> <span m=''1732960''>says</span> <span m=''1733190''>I</span>
  <span m=''1733250''>have</span> <span m=''1733470''>all</span> <span m=''1733610''>these</span>
  <span m=''1733810''>tasks</span> <span m=''1734080''>and</span> <span m=''1734200''>I''ll</span>
  <span m=''1734460''>just</span> <span m=''1734690''>dispatch</span> <span m=''1735060''>them
  to</span> <span m=''1735160''>workers</span> <span m=''1736870''>and</span> <span
  m=''1737520''>compute.</span> </p><p><span m=''1738700''>And as I</span> <span m=''1738830''>pointed</span>
  <span m=''1739130''>out</span> <span m=''1739320''>earlier,</span> <span m=''1739950''>you</span>
  <span m=''1740060''>know,</span> <span m=''1740130''>when</span> <span m=''1740410''>do
  you</span> <span m=''1740570''>define</span> <span m=''1740970''>your</span> <span
  m=''1741100''>entire</span> <span m=''1741430''>computation</span> <span m=''1742010''>to
  have</span> <span m=''1742170''>completed?</span> <span m=''1743040''>You know,
  sometimes</span> <span m=''1743700''>you''re</span> <span m=''1743970''>computing</span>
  <span m=''1744460''>a</span> <span m=''1744530''>result</span> <span m=''1744890''>until</span>
  <span m=''1745160''>you''ve</span> <span m=''1745510''>reached</span> <span m=''1748410''>some</span>
  <span m=''1748650''>result.</span> <span m=''1749210''>And</span> <span m=''1749810''>often</span>
  <span m=''1750170''>you''re</span> <span m=''1750270''>willing</span> <span m=''1750500''>to</span>
  <span m=''1750560''>accept</span> <span m=''1750850''>a result</span> <span m=''1751200''>within</span>
  <span m=''1752570''>some</span> <span m=''1753080''>range</span> <span m=''1753350''>of</span>
  <span m=''1753450''>error.</span> <span m=''1754720''>And</span> <span m=''1754870''>you</span>
  <span m=''1754930''>might</span> <span m=''1755130''>have</span> <span m=''1755430''>some</span>
  <span m=''1755580''>more</span> <span m=''1755780''>threads</span> <span m=''1756100''>that
  are</span> <span m=''1756210''>still</span> <span m=''1756470''>in</span> <span
  m=''1756580''>flight.</span> <span m=''1757290''>Do</span> <span m=''1757630''>you</span>
  <span m=''1757860''>terminate</span> <span m=''1758360''>your</span> <span m=''1758440''>computation</span>
  <span m=''1759080''>then</span> <span m=''1759270''>or</span> <span m=''1759380''>not?</span>
  <span m=''1759860''>What</span> <span m=''1760060''>are</span> <span m=''1760140''>some</span>
  <span m=''1760340''>issues</span> <span m=''1760690''>with</span> <span m=''1760850''>synchronization?</span>
  <span m=''1761580''>If</span> <span m=''1761670''>you</span> <span m=''1761740''>have</span>
  <span m=''1761900''>so</span> <span m=''1762070''>many</span> <span m=''1762270''>threads
  that</span> <span m=''1762610''>are</span> <span m=''1762730''>running</span> <span
  m=''1762970''>together,</span> <span m=''1763840''>you</span> <span m=''1764020''>know,</span>
  <span m=''1764120''>does</span> <span m=''1764260''>the</span> <span m=''1764360''>communication</span>
  <span m=''1764990''>between</span> <span m=''1765370''>them</span> <span m=''1765560''>to</span>
  <span m=''1766490''>send</span> <span m=''1766640''>out</span> <span m=''1766750''>these</span>
  <span m=''1766900''>control</span> <span m=''1767230''>messages</span> <span m=''1767660''>say,</span>
  <span m=''1767850''>I''m</span> <span m=''1768050''>done,</span> <span m=''1769050''>start</span>
  <span m=''1769310''>to</span> <span m=''1769390''>overwhelm</span> <span m=''1769820''>you?</span>
  </p><p><span m=''1773660''>In</span> <span m=''1773840''>the</span> <span m=''1774210''>fork/join</span>
  <span m=''1774730''>pattern --</span> <span m=''1776240''>this</span> <span m=''1776430''>is</span>
  <span m=''1776580''>really</span> <span m=''1778780''>not</span> <span m=''1779000''>conceptually</span>
  <span m=''1779490''>too</span> <span m=''1779680''>different</span> <span m=''1780470''>in</span>
  <span m=''1780610''>my</span> <span m=''1780750''>mind</span> <span m=''1783520''>from
  the</span> <span m=''1783720''>master/worker</span> <span m=''1784420''>model,</span>
  <span m=''1785470''>and</span> <span m=''1785650''>also</span> <span m=''1785910''>very</span>
  <span m=''1786150''>relevant</span> <span m=''1786570''>to</span> <span m=''1786680''>what</span>
  <span m=''1786810''>we''ve</span> <span m=''1787000''>done</span> <span m=''1787250''>with</span>
  <span m=''1787550''>Cell.</span> <span m=''1789840''>The</span> <span m=''1789950''>main</span>
  <span m=''1790140''>difference</span> <span m=''1790750''>might</span> <span m=''1790970''>be</span>
  <span m=''1791120''>that</span> <span m=''1791450''>you</span> <span m=''1791680''>have</span>
  <span m=''1791910''>tasks</span> <span m=''1792180''>that are</span> <span m=''1792300''>dynamically</span>
  <span m=''1792820''>created.</span> <span m=''1794610''>So in</span> <span m=''1794780''>the</span>
  <span m=''1794990''>embarrassingly</span> <span m=''1795630''>parallel</span> <span
  m=''1796000''>case,</span> <span m=''1796600''>you actually</span> <span m=''1796960''>know</span>
  <span m=''1797210''>the</span> <span m=''1797310''>world</span> <span m=''1797670''>of</span>
  <span m=''1797820''>all</span> <span m=''1798000''>your</span> <span m=''1798200''>potential</span>
  <span m=''1798660''>task</span> <span m=''1798940''>that</span> <span m=''1799040''>you''re</span>
  <span m=''1799170''>going</span> <span m=''1799320''>to</span> <span m=''1799410''>run</span>
  <span m=''1799560''>in</span> <span m=''1799660''>parallel.</span> <span m=''1800280''>In</span>
  <span m=''1800560''>the</span> <span m=''1800630''>fork/join</span> <span m=''1800870''>join</span>
  <span m=''1801090''>model</span> <span m=''1801420''>some</span> <span m=''1801940''>new</span>
  <span m=''1802120''>computation</span> <span m=''1802740''>might</span> <span m=''1802920''>come</span>
  <span m=''1803130''>up</span> <span m=''1803600''>as</span> <span m=''1803760''>a</span>
  <span m=''1803810''>result</span> <span m=''1804210''>of,</span> <span m=''1804320''>say,</span>
  <span m=''1804590''>an</span> <span m=''1804680''>event-based</span> <span m=''1805200''>mechanism.</span>
  <span m=''1806720''>So</span> <span m=''1806920''>a task</span> <span m=''1807270''>might</span>
  <span m=''1807370''>be</span> <span m=''1807580''>created</span> <span m=''1808640''>dynamically</span>
  <span m=''1809310''>and</span> <span m=''1809490''>then</span> <span m=''1809630''>later</span>
  <span m=''1809870''>terminated</span> <span m=''1810570''>or</span> <span m=''1810880''>they
  might</span> <span m=''1810980''>complete.</span> <span m=''1811760''>And so</span>
  <span m=''1812060''>new</span> <span m=''1812180''>ones</span> <span m=''1812880''>come</span>
  <span m=''1813110''>up</span> <span m=''1813230''>as</span> <span m=''1813350''>a</span>
  <span m=''1813410''>result.</span> </p><p><span m=''1813900''>AUDIENCE:</span> <span
  m=''1814148''>It</span> <span m=''1814397''>almost</span> <span m=''1814895''>seems</span>
  <span m=''1815392''>like</span> <span m=''1815890''>you</span> <span m=''1816387''>are</span>
  <span m=''1816885''>forking</span> <span m=''1817382''>the</span> <span m=''1818120''>task</span>
  <span m=''1821410''>in the</span> <span m=''1822410''>forking</span> <span m=''1822910''>model.</span>
  <span m=''1823910''>And</span> <span m=''1823993''>then</span> <span m=''1824076''>keep</span>
  <span m=''1824160''>assigning</span> <span m=''1824243''>tasks</span> <span m=''1824326''>to</span>
  <span m=''1824410''>that.</span> <span m=''1825758''>The fork/join</span> <span
  m=''1826247''>model</span> <span m=''1826736''>you</span> <span m=''1826899''>just</span>
  <span m=''1827062''>keep</span> <span m=''1827225''>forking at</span> <span m=''1828203''>first
  virtual box.</span> <span m=''1829670''>Might</span> <span m=''1830010''>not</span>
  <span m=''1830507''>be</span> <span m=''1830672''>completely</span> <span m=''1830838''>matched</span>
  <span m=''1831004''>to a</span> <span m=''1831169''>number</span> <span m=''1831335''>of</span>
  <span m=''1831501''>processor</span> <span m=''1831998''>available.</span> <span
  m=''1843430''>fork them out.</span> </p><p><span m=''1846910''>PROFESSOR: So</span>
  <span m=''1849780''>the</span> <span m=''1849900''>process</span> <span m=''1850380''>that''s</span>
  <span m=''1850610''>equating</span> <span m=''1851650''>all</span> <span m=''1852040''>these</span>
  <span m=''1852420''>threads</span> <span m=''1853330''>or</span> <span m=''1853510''>that''s</span>
  <span m=''1853750''>doing</span> <span m=''1853960''>all</span> <span m=''1854110''>the</span>
  <span m=''1854190''>forking</span> <span m=''1855490''>is</span> <span m=''1855670''>often</span>
  <span m=''1855950''>known</span> <span m=''1856130''>as</span> <span m=''1856250''>the</span>
  <span m=''1856340''>parent</span> <span m=''1856870''>and</span> <span m=''1857630''>the
  tasks</span> <span m=''1858310''>that</span> <span m=''1858450''>are</span> <span
  m=''1858600''>generated</span> <span m=''1859210''>are the</span> <span m=''1859440''>children.</span>
  <span m=''1860240''>And</span> <span m=''1860570''>eventually</span> <span m=''1861350''>essentially</span>
  <span m=''1862760''>the</span> <span m=''1862860''>parent</span> <span m=''1863370''>can''t</span>
  <span m=''1863680''>continue</span> <span m=''1864160''>or</span> <span m=''1864340''>can''t</span>
  <span m=''1864580''>resume</span> <span m=''1864960''>until</span> <span m=''1865690''>its</span>
  <span m=''1865850''>children</span> <span m=''1866560''>have sort</span> <span m=''1866870''>of</span>
  <span m=''1866950''>completed</span> <span m=''1867440''>or</span> <span m=''1867590''>have</span>
  <span m=''1867760''>reached</span> <span m=''1868230''>the</span> <span m=''1868330''>join</span>
  <span m=''1868650''>point.</span> <span m=''1870130''>And so</span> <span m=''1873360''>those
  are</span> <span m=''1873500''>really</span> <span m=''1873770''>some of</span>
  <span m=''1874010''>the</span> <span m=''1874050''>models</span> <span m=''1874490''>that</span>
  <span m=''1874640''>we''ve</span> <span m=''1875310''>seen</span> <span m=''1875730''>already,</span>
  <span m=''1876270''>in</span> <span m=''1876500''>a</span> <span m=''1876540''>lot</span>
  <span m=''1876690''>of</span> <span m=''1876780''>cases</span> <span m=''1877330''>in</span>
  <span m=''1877720''>the</span> <span m=''1877820''>recitations</span> <span m=''1878480''>and
  labs</span> <span m=''1878740''>for</span> <span m=''1878870''>how</span> <span
  m=''1879060''>you</span> <span m=''1879210''>run</span> <span m=''1879410''>your</span>
  <span m=''1879850''>computations.</span> <span m=''1880720''>And</span> <span m=''1881020''>some
  of</span> <span m=''1881240''>you</span> <span m=''1881330''>have</span> <span m=''1881510''>already</span>
  <span m=''1881780''>discovered</span> <span m=''1882290''>these and</span> <span
  m=''1882720''>actually</span> <span m=''1883100''>are thinking</span> <span m=''1883420''>about</span>
  <span m=''1883710''>how</span> <span m=''1883910''>your</span> <span m=''1884070''>projects</span>
  <span m=''1884500''>should</span> <span m=''1884640''>be</span> <span m=''1885100''>sort
  of</span> <span m=''1885230''>parallelized</span> <span m=''1885980''>for</span>
  <span m=''1886070''>your</span> <span m=''1886130''>actual</span> <span m=''1888080''>Cell</span>
  <span m=''1888370''>demos.</span> </p><p><span m=''1890160''>Some</span> <span m=''1890370''>of</span>
  <span m=''1890430''>the</span> <span m=''1890550''>other</span> <span m=''1890770''>things</span>
  <span m=''1891180''>that I''m</span> <span m=''1891630''>just</span> <span m=''1891830''>going</span>
  <span m=''1892000''>to</span> <span m=''1892100''>talk</span> <span m=''1892350''>about</span>
  <span m=''1892610''>are</span> <span m=''1892730''>communication</span> <span m=''1893270''>patterns.</span>
  <span m=''1894020''>So</span> <span m=''1894630''>two</span> <span m=''1894800''>lectures</span>
  <span m=''1895210''>ago</span> <span m=''1895510''>you</span> <span m=''1895670''>saw,</span>
  <span m=''1896040''>for</span> <span m=''1896160''>example,</span> <span m=''1896550''>that</span>
  <span m=''1896670''>you</span> <span m=''1896790''>have</span> <span m=''1897300''>point</span>
  <span m=''1897610''>to</span> <span m=''1897680''>point</span> <span m=''1897910''>communication</span>
  <span m=''1898970''>or</span> <span m=''1899370''>you</span> <span m=''1899490''>have</span>
  <span m=''1899780''>broadcast</span> <span m=''1900430''>communication.</span> <span
  m=''1901400''>So in</span> <span m=''1901630''>point to</span> <span m=''1901910''>point</span>
  <span m=''1902160''>communication,</span> <span m=''1902830''>you</span> <span m=''1902940''>have</span>
  <span m=''1903240''>two</span> <span m=''1903430''>tasks</span> <span m=''1903770''>that</span>
  <span m=''1903860''>need</span> <span m=''1904010''>to</span> <span m=''1904100''>communicate.</span>
  <span m=''1905010''>And</span> <span m=''1905150''>they</span> <span m=''1905230''>can</span>
  <span m=''1905370''>send</span> <span m=''1905580''>explicit</span> <span m=''1906020''>messages</span>
  <span m=''1906440''>to</span> <span m=''1906560''>each</span> <span m=''1906740''>other.</span>
  <span m=''1907720''>These</span> <span m=''1907920''>could</span> <span m=''1908040''>be</span>
  <span m=''1908150''>control</span> <span m=''1908480''>messages</span> <span m=''1908940''>that</span>
  <span m=''1909060''>say</span> <span m=''1909200''>I''m</span> <span m=''1909370''>done
  or I''m</span> <span m=''1909960''>waiting</span> <span m=''1910160''>for</span>
  <span m=''1910320''>data.</span> <span m=''1910940''>Or</span> <span m=''1911280''>they</span>
  <span m=''1911380''>could</span> <span m=''1911510''>be</span> <span m=''1911640''>data</span>
  <span m=''1911880''>messages</span> <span m=''1912380''>that actually</span> <span
  m=''1912790''>ships</span> <span m=''1913130''>you a</span> <span m=''1913560''>particular</span>
  <span m=''1913950''>data</span> <span m=''1914210''>element</span> <span m=''1914570''>that</span>
  <span m=''1914690''>you</span> <span m=''1914790''>might</span> <span m=''1914990''>need.</span>
  <span m=''1915640''>And</span> <span m=''1916300''>again</span> <span m=''1916510''>we''ve</span>
  <span m=''1916620''>seen</span> <span m=''1916870''>this</span> <span m=''1917020''>with</span>
  <span m=''1917210''>Cell.</span> </p><p><span m=''1918250''>Broadcast</span> <span
  m=''1919160''>says,</span> <span m=''1919790''>you</span> <span m=''1919970''>know,</span>
  <span m=''1920310''>I</span> <span m=''1920510''>have</span> <span m=''1920740''>some</span>
  <span m=''1920910''>result that</span> <span m=''1921320''>everybody needs.</span>
  <span m=''1922050''>And</span> <span m=''1922260''>so</span> <span m=''1922350''>I</span>
  <span m=''1922430''>send</span> <span m=''1922650''>that</span> <span m=''1922790''>out</span>
  <span m=''1922960''>to</span> <span m=''1923060''>everybody</span> <span m=''1924770''>by</span>
  <span m=''1924900''>some</span> <span m=''1925110''>mechanism.</span> <span m=''1925570''>There
  is</span> <span m=''1925880''>no</span> <span m=''1926050''>real</span> <span m=''1926280''>broadcast</span>
  <span m=''1926770''>mechanism</span> <span m=''1927200''>on</span> <span m=''1927340''>Cell.</span>
  <span m=''1929530''>The</span> <span m=''1929900''>concept</span> <span m=''1930350''>I''m</span>
  <span m=''1930460''>going</span> <span m=''1930630''>to</span> <span m=''1930720''>talk</span>
  <span m=''1930950''>about</span> <span m=''1931150''>though</span> <span m=''1931270''>is
  the</span> <span m=''1931590''>reduction</span> <span m=''1932000''>mechanism,</span>
  <span m=''1932550''>which</span> <span m=''1932970''>really</span> <span m=''1933250''>is</span>
  <span m=''1933400''>the</span> <span m=''1933520''>inverse</span> <span m=''1934230''>of</span>
  <span m=''1934580''>the</span> <span m=''1934710''>broadcast.</span> <span m=''1935540''>So</span>
  <span m=''1935900''>in the</span> <span m=''1936000''>broadcast</span> <span m=''1936610''>I</span>
  <span m=''1936730''>have a</span> <span m=''1936960''>data</span> <span m=''1937160''>element</span>
  <span m=''1937490''>I</span> <span m=''1937560''>need</span> <span m=''1937710''>to</span>
  <span m=''1937770''>send</span> <span m=''1937980''>to</span> <span m=''1938070''>everybody</span>
  <span m=''1938490''>else.</span> <span m=''1939060''>In the</span> <span m=''1939260''>reduction,</span>
  <span m=''1939870''>all</span> <span m=''1940110''>of</span> <span m=''1940230''>you</span>
  <span m=''1940340''>have</span> <span m=''1940600''>data</span> <span m=''1940920''>that</span>
  <span m=''1941080''>I</span> <span m=''1941190''>need</span> <span m=''1941680''>or</span>
  <span m=''1942870''>all</span> <span m=''1943090''>of</span> <span m=''1943200''>us</span>
  <span m=''1943330''>have</span> <span m=''1943520''>data</span> <span m=''1943940''>that
  each</span> <span m=''1944250''>somebody</span> <span m=''1944570''>else</span>
  <span m=''1944810''>needs.</span> <span m=''1945370''>So</span> <span m=''1945770''>what</span>
  <span m=''1946010''>we</span> <span m=''1946090''>need</span> <span m=''1946220''>to</span>
  <span m=''1946290''>do</span> <span m=''1946420''>is</span> <span m=''1946710''>collectively</span>
  <span m=''1947380''>bring</span> <span m=''1947630''>that</span> <span m=''1947860''>data</span>
  <span m=''1947990''>together</span> <span m=''1948600''>or group it</span> <span
  m=''1948940''>together</span> <span m=''1949630''>and</span> <span m=''1949950''>generate</span>
  <span m=''1952470''>an</span> <span m=''1952620''>end</span> <span m=''1952770''>result.</span>
  </p><p><span m=''1954730''>So</span> <span m=''1955520''>a</span> <span m=''1955770''>simple</span>
  <span m=''1956080''>example</span> <span m=''1956530''>of</span> <span m=''1956620''>a</span>
  <span m=''1956710''>reduction,</span> <span m=''1959230''>you</span> <span m=''1959330''>have</span>
  <span m=''1959520''>some</span> <span m=''1959900''>array</span> <span m=''1960160''>of</span>
  <span m=''1960290''>elements</span> <span m=''1960740''>that</span> <span m=''1960890''>you</span>
  <span m=''1960990''>want</span> <span m=''1961170''>to</span> <span m=''1961250''>add</span>
  <span m=''1961460''>together.</span> <span m=''1962530''>And</span> <span m=''1963330''>sort</span>
  <span m=''1963650''>of</span> <span m=''1963750''>the</span> <span m=''1963930''>result</span>
  <span m=''1964290''>of</span> <span m=''1964460''>the</span> <span m=''1964800''>collective</span>
  <span m=''1965240''>operation</span> <span m=''1965830''>is</span> <span m=''1966010''>the</span>
  <span m=''1966270''>end sum.</span> <span m=''1967800''>So</span> <span m=''1967950''>you</span>
  <span m=''1968040''>have</span> <span m=''1968290''>an</span> <span m=''1968360''>array</span>
  <span m=''1969890''>of</span> <span m=''1970060''>four</span> <span m=''1970370''>elements,</span>
  <span m=''1970900''>A0,</span> <span m=''1971230''>A1,</span> <span m=''1971490''>A2,</span>
  <span m=''1971820''>and</span> <span m=''1972130''>A3.</span> <span m=''1972790''>And</span>
  <span m=''1972950''>you</span> <span m=''1973070''>can</span> <span m=''1973170''>do
  a</span> <span m=''1973360''>serial</span> <span m=''1973600''>reduction.</span>
  <span m=''1974080''>I</span> <span m=''1974140''>can</span> <span m=''1974300''>take</span>
  <span m=''1974660''>A0</span> <span m=''1975660''>and</span> <span m=''1975850''>add
  it to</span> <span m=''1976370''>A1.</span> <span m=''1976810''>And</span> <span
  m=''1976960''>that</span> <span m=''1977030''>gives</span> <span m=''1977220''>me</span>
  <span m=''1977340''>a result.</span> <span m=''1979360''>And</span> <span m=''1979600''>I</span>
  <span m=''1979650''>can</span> <span m=''1979900''>take</span> <span m=''1980150''>A2</span>
  <span m=''1980980''>and</span> <span m=''1981130''>add that</span> <span m=''1981390''>to</span>
  <span m=''1981530''>it.</span> <span m=''1982030''>And</span> <span m=''1982160''>I</span>
  <span m=''1982200''>can</span> <span m=''1982340''>take</span> <span m=''1982670''>A3</span>
  <span m=''1982960''>and add</span> <span m=''1983040''>that to it.</span> <span
  m=''1983900''>And</span> <span m=''1984040''>so</span> <span m=''1984640''>at</span>
  <span m=''1985020''>the</span> <span m=''1985150''>end</span> <span m=''1985300''>I''ll
  have</span> <span m=''1985470''>sort</span> <span m=''1985640''>of</span> <span
  m=''1985720''>calculated</span> <span m=''1986220''>the sum</span> <span m=''1986530''>from</span>
  <span m=''1987050''>A0</span> <span m=''1987180''>to</span> <span m=''1987660''>A3.</span>
  </p><p><span m=''1989030''>So</span> <span m=''1989630''>this</span> <span m=''1989800''>is</span>
  <span m=''1989960''>essentially --</span> <span m=''1990470''>the</span> <span m=''1990690''>serial</span>
  <span m=''1991120''>reduction</span> <span m=''1992160''>applies</span> <span m=''1992660''>when</span>
  <span m=''1992880''>your</span> <span m=''1993170''>operation</span> <span m=''1993940''>is</span>
  <span m=''1994030''>an</span> <span m=''1994130''>associative.</span> <span m=''1995080''>So</span>
  <span m=''1995650''>the</span> <span m=''1995920''>addition</span> <span m=''1996250''>is</span>
  <span m=''1996410''>associative.</span> <span m=''1997450''>So in</span> <span m=''1997570''>this</span>
  <span m=''1997730''>case</span> <span m=''1998440''>I</span> <span m=''1998690''>can</span>
  <span m=''1998850''>actually</span> <span m=''1999150''>do</span> <span m=''1999290''>something</span>
  <span m=''1999910''>more</span> <span m=''2000180''>intelligent.</span> <span m=''2002100''>And</span>
  <span m=''2002680''>I</span> <span m=''2002880''>think</span> <span m=''2003080''>we</span>
  <span m=''2003180''>talked</span> <span m=''2003440''>about</span> <span m=''2003610''>that</span>
  <span m=''2003780''>last</span> <span m=''2004010''>time.</span> <span m=''2004280''>I''m</span>
  <span m=''2004420''>going to</span> <span m=''2004660''>show you</span> <span m=''2004960''>some
  more examples.</span> <span m=''2006470''>And</span> <span m=''2006680''>often</span>
  <span m=''2007630''>sort of</span> <span m=''2007960''>the</span> <span m=''2008180''>end
  result</span> <span m=''2008910''>follows</span> <span m=''2009240''>a</span> <span
  m=''2009320''>broadcast.</span> <span m=''2009920''>It</span> <span m=''2009980''>says,</span>
  <span m=''2010230''>here is</span> <span m=''2010400''>the</span> <span m=''2010530''>end</span>
  <span m=''2010680''>result.</span> <span m=''2011130''>Who</span> <span m=''2011240''>are</span>
  <span m=''2011320''>all</span> <span m=''2011460''>the</span> <span m=''2011540''>people</span>
  <span m=''2011820''>that</span> <span m=''2011950''>need</span> <span m=''2012120''>it?</span>
  <span m=''2012530''>I''ll</span> <span m=''2012920''>sort of</span> <span m=''2013540''>broadcast</span>
  <span m=''2014110''>that out</span> <span m=''2014670''>so that</span> <span m=''2015030''>everybody</span>
  <span m=''2015570''>has the result.</span> <span m=''2016820''>If</span> <span m=''2016960''>your</span>
  <span m=''2017040''>operation</span> <span m=''2017720''>isn''t</span> <span m=''2018050''>associative,</span>
  <span m=''2018960''>then</span> <span m=''2019170''>you''re</span> <span m=''2019320''>essentially</span>
  <span m=''2019710''>limited</span> <span m=''2020100''>to</span> <span m=''2020300''>a</span>
  <span m=''2020410''>serial</span> <span m=''2020750''>process.</span> <span m=''2021790''>And
  so</span> <span m=''2022050''>that''s</span> <span m=''2022790''>not</span> <span
  m=''2023260''>very</span> <span m=''2023590''>good</span> <span m=''2023780''>from</span>
  <span m=''2023970''>a</span> <span m=''2024280''>performance</span> <span m=''2024810''>standpoint.</span>
  </p><p><span m=''2028860''>Some of the</span> <span m=''2029160''>tricks</span>
  <span m=''2029420''>you</span> <span m=''2029550''>can</span> <span m=''2029680''>apply</span>
  <span m=''2030060''>for</span> <span m=''2030200''>actually</span> <span m=''2030640''>getting</span>
  <span m=''2030890''>performance</span> <span m=''2031410''>out</span> <span m=''2031590''>of</span>
  <span m=''2031740''>your</span> <span m=''2032530''>reduction</span> <span m=''2033090''>is</span>
  <span m=''2033300''>to</span> <span m=''2033510''>go</span> <span m=''2033740''>to</span>
  <span m=''2033960''>a</span> <span m=''2034030''>tree-based</span> <span m=''2034490''>reduction</span>
  <span m=''2034880''>model.</span> <span m=''2035840''>So</span> <span m=''2036000''>this</span>
  <span m=''2036160''>might</span> <span m=''2036370''>be</span> <span m=''2036580''>very</span>
  <span m=''2036810''>obvious.</span> <span m=''2037200''>Rather</span> <span m=''2037470''>than</span>
  <span m=''2037630''>doing</span> <span m=''2038640''>A0</span> <span m=''2038900''>and</span>
  <span m=''2039160''>A1</span> <span m=''2039750''>and</span> <span m=''2039970''>then</span>
  <span m=''2040080''>adding</span> <span m=''2040560''>A2</span> <span m=''2040680''>to</span>
  <span m=''2040870''>that</span> <span m=''2041010''>result,</span> <span m=''2041570''>I</span>
  <span m=''2041690''>can</span> <span m=''2041800''>do</span> <span m=''2041910''>A0</span>
  <span m=''2042160''>and</span> <span m=''2042490''>A1</span> <span m=''2042830''>together.</span>
  <span m=''2043650''>In</span> <span m=''2043820''>parallel</span> <span m=''2044160''>I</span>
  <span m=''2044240''>can</span> <span m=''2044390''>do</span> <span m=''2044570''>A2</span>
  <span m=''2044840''>and</span> <span m=''2045110''>A3.</span> <span m=''2045860''>And</span>
  <span m=''2046030''>then</span> <span m=''2046230''>I</span> <span m=''2046280''>can</span>
  <span m=''2046410''>get</span> <span m=''2046530''>those</span> <span m=''2046750''>results</span>
  <span m=''2047100''>and</span> <span m=''2047370''>add them</span> <span m=''2047440''>together.</span>
  <span m=''2047830''>So rather</span> <span m=''2048120''>than</span> <span m=''2048250''>doing</span>
  <span m=''2048510''>n</span> <span m=''2048650''>steps</span> <span m=''2048920''>I</span>
  <span m=''2048990''>can</span> <span m=''2049110''>do</span> <span m=''2049240''>log
  n</span> <span m=''2049610''>steps.</span> <span m=''2052150''>So this</span> <span
  m=''2052370''>is</span> <span m=''2053540''>particularly</span> <span m=''2053790''>attractive</span>
  <span m=''2054340''>when</span> <span m=''2054540''>only</span> <span m=''2054740''>one</span>
  <span m=''2054940''>task</span> <span m=''2055240''>needs</span> <span m=''2055460''>the</span>
  <span m=''2055670''>result.</span> <span m=''2056100''>So</span> <span m=''2056400''>in</span>
  <span m=''2056470''>the</span> <span m=''2056550''>MPI</span> <span m=''2056890''>program</span>
  <span m=''2057410''>when</span> <span m=''2057580''>we''re</span> <span m=''2057710''>doing</span>
  <span m=''2058340''>the</span> <span m=''2058540''>integration</span> <span m=''2059180''>to</span>
  <span m=''2059280''>calculate</span> <span m=''2059770''>pi,</span> <span m=''2060500''>you
  know,</span> <span m=''2060660''>one</span> <span m=''2060860''>processor</span>
  <span m=''2061310''>needs</span> <span m=''2061550''>to</span> <span m=''2061630''>print</span>
  <span m=''2061810''>out</span> <span m=''2061920''>that</span> <span m=''2062070''>value</span>
  <span m=''2062400''>of</span> <span m=''2062510''>pi.</span> </p><p><span m=''2065440''>But</span>
  <span m=''2065590''>if</span> <span m=''2065710''>you</span> <span m=''2065800''>have</span>
  <span m=''2066230''>a</span> <span m=''2066780''>computation</span> <span m=''2067480''>where</span>
  <span m=''2068060''>more</span> <span m=''2068290''>than</span> <span m=''2068430''>one</span>
  <span m=''2068620''>process</span> <span m=''2069020''>actually</span> <span m=''2069440''>needs</span>
  <span m=''2069560''>the</span> <span m=''2069610''>result</span> <span m=''2069950''>of
  the</span> <span m=''2070020''>reduction,</span> <span m=''2070950''>there''s</span>
  <span m=''2071170''>actually</span> <span m=''2071580''>a</span> <span m=''2071630''>better</span>
  <span m=''2071910''>mechanism</span> <span m=''2072450''>you</span> <span m=''2072600''>can</span>
  <span m=''2072820''>use</span> <span m=''2074180''>that''s</span> <span m=''2074850''>sort
  of a</span> <span m=''2075170''>better</span> <span m=''2075420''>alternative</span>
  <span m=''2076060''>to</span> <span m=''2076620''>the</span> <span m=''2076730''>tree-based</span>
  <span m=''2077180''>reduction</span> <span m=''2077770''>followed</span> <span m=''2078060''>by
  a</span> <span m=''2078240''>broadcast.</span> <span m=''2079390''>So</span> <span
  m=''2079520''>you</span> <span m=''2079580''>can</span> <span m=''2079710''>do</span>
  <span m=''2079860''>a</span> <span m=''2079950''>recursive</span> <span m=''2080540''>doubling</span>
  <span m=''2081390''>reduction.</span> <span m=''2084010''>So at</span> <span m=''2084560''>the
  end</span> <span m=''2084730''>here,</span> <span m=''2085070''>every</span> <span
  m=''2085320''>process</span> <span m=''2085860''>will</span> <span m=''2086000''>have</span>
  <span m=''2086460''>the</span> <span m=''2086770''>result</span> <span m=''2087110''>of</span>
  <span m=''2087230''>the</span> <span m=''2087330''>reduction</span> <span m=''2087890''>without</span>
  <span m=''2088270''>having</span> <span m=''2088550''>done</span> <span m=''2088720''>the</span>
  <span m=''2088810''>broadcast.</span> <span m=''2090400''>So</span> <span m=''2090550''>we</span>
  <span m=''2090630''>can</span> <span m=''2090770''>start</span> <span m=''2091020''>off</span>
  <span m=''2091210''>as</span> <span m=''2091390''>with</span> <span m=''2091520''>the</span>
  <span m=''2091590''>tree-based</span> <span m=''2092240''>and</span> <span m=''2094010''>add</span>
  <span m=''2094210''>up</span> <span m=''2094580''>A0</span> <span m=''2094750''>and</span>
  <span m=''2094950''>A1</span> <span m=''2095200''>together.</span> <span m=''2096380''>But</span>
  <span m=''2096680''>what</span> <span m=''2096810''>we</span> <span m=''2096940''>do</span>
  <span m=''2097190''>is</span> <span m=''2097810''>for</span> <span m=''2097960''>each</span>
  <span m=''2098210''>process</span> <span m=''2098730''>that</span> <span m=''2098860''>has</span>
  <span m=''2099130''>a</span> <span m=''2099170''>value,</span> <span m=''2099850''>we</span>
  <span m=''2100110''>sort</span> <span m=''2100270''>of</span> <span m=''2100340''>do</span>
  <span m=''2100480''>a</span> <span m=''2100560''>local</span> <span m=''2100870''>exchange.</span>
  <span m=''2101960''>So</span> <span m=''2102840''>from</span> <span m=''2103250''>here</span>
  <span m=''2103610''>we</span> <span m=''2103750''>communicate</span> <span m=''2104270''>the</span>
  <span m=''2104350''>value</span> <span m=''2104670''>to</span> <span m=''2104770''>here.</span>
  <span m=''2105100''>And</span> <span m=''2105290''>from</span> <span m=''2105420''>here
  we</span> <span m=''2105710''>communicate</span> <span m=''2106220''>the</span>
  <span m=''2106300''>value</span> <span m=''2106610''>to here.</span> <span m=''2106900''>And</span>
  <span m=''2107760''>so</span> <span m=''2107930''>now</span> <span m=''2108280''>these</span>
  <span m=''2108400''>two</span> <span m=''2108560''>processors</span> <span m=''2109160''>that</span>
  <span m=''2109280''>had</span> <span m=''2109510''>the</span> <span m=''2109570''>value</span>
  <span m=''2109900''>independently</span> <span m=''2110750''>now</span> <span m=''2110890''>both</span>
  <span m=''2111170''>have</span> <span m=''2111380''>a</span> <span m=''2111440''>local</span>
  <span m=''2111740''>sum,</span> <span m=''2112300''>A0</span> <span m=''2112780''>to</span>
  <span m=''2112970''>A1.</span> <span m=''2113700''>And</span> <span m=''2114010''>similarly</span>
  <span m=''2114370''>we</span> <span m=''2114470''>can</span> <span m=''2114640''>sort</span>
  <span m=''2114800''>of</span> <span m=''2115730''>make the</span> <span m=''2116460''>similar</span>
  <span m=''2116760''>symmetric</span> <span m=''2117140''>computation</span> <span
  m=''2117770''>on</span> <span m=''2117860''>the</span> <span m=''2117960''>other</span>
  <span m=''2118090''>side.</span> </p><p><span m=''2119740''>And</span> <span m=''2119950''>now</span>
  <span m=''2120620''>we</span> <span m=''2120800''>can</span> <span m=''2120930''>communicate</span>
  <span m=''2121560''>data</span> <span m=''2121840''>from</span> <span m=''2122100''>these</span>
  <span m=''2122290''>two</span> <span m=''2122410''>processors</span> <span m=''2123340''>here</span>
  <span m=''2123940''>to</span> <span m=''2124170''>come</span> <span m=''2124330''>up</span>
  <span m=''2124460''>with</span> <span m=''2124580''>the</span> <span m=''2124950''>end
  --</span> </p><p><span m=''2130150''>PROFESSOR: It</span> <span m=''2130420''>was</span>
  <span m=''2130670''>there.</span> <span m=''2131630''>All right.</span> <span m=''2132720''>Must</span>
  <span m=''2132860''>have</span> <span m=''2133000''>been lost in</span> <span m=''2133140''>the</span>
  <span m=''2133280''>animation.</span> <span m=''2133420''>So</span> <span m=''2133670''>you</span>
  <span m=''2133810''>actually</span> <span m=''2134180''>do</span> <span m=''2134350''>that</span>
  <span m=''2134880''>the</span> <span m=''2135010''>other</span> <span m=''2135190''>way</span>
  <span m=''2135340''>as</span> <span m=''2135500''>well</span> <span m=''2136400''>so</span>
  <span m=''2136560''>that</span> <span m=''2136880''>you</span> <span m=''2137000''>have</span>
  <span m=''2137740''>the</span> <span m=''2137940''>sum</span> <span m=''2138380''>A0</span>
  <span m=''2138610''>to</span> <span m=''2138690''>A3</span> <span m=''2139380''>on</span>
  <span m=''2139650''>all</span> <span m=''2139840''>the</span> <span m=''2139920''>different</span>
  <span m=''2140210''>processors.</span> <span m=''2142050''>Sorry</span> <span m=''2142410''>about</span>
  <span m=''2142560''>the</span> <span m=''2143025''>lost</span> <span m=''2143490''>animation.</span>
  <span m=''2145350''>OK.</span> <span m=''2145620''>So</span> <span m=''2145770''>this</span>
  <span m=''2145960''>is</span> <span m=''2146120''>better</span> <span m=''2146560''>than</span>
  <span m=''2146700''>the</span> <span m=''2146780''>tree-based</span> <span m=''2147270''>approach</span>
  <span m=''2147660''>with</span> <span m=''2147790''>a</span> <span m=''2147870''>broadcast</span>
  <span m=''2148480''>because</span> <span m=''2149470''>you</span> <span m=''2149670''>end</span>
  <span m=''2149840''>up</span> <span m=''2150030''>with</span> <span m=''2150290''>local</span>
  <span m=''2151070''>results</span> <span m=''2151450''>of your</span> <span m=''2151570''>reduction.</span>
  <span m=''2153410''>And</span> <span m=''2153600''>rather</span> <span m=''2153850''>than</span>
  <span m=''2154030''>doing</span> <span m=''2157060''>the</span> <span m=''2157510''>broadcast</span>
  <span m=''2158170''>following</span> <span m=''2158570''>the</span> <span m=''2158780''>tree-based</span>
  <span m=''2159260''>reduction</span> <span m=''2159640''>which</span> <span m=''2159820''>takes</span>
  <span m=''2160050''>n</span> <span m=''2160230''>steps,</span> <span m=''2160890''>you</span>
  <span m=''2161010''>end</span> <span m=''2161140''>up</span> <span m=''2161310''>with</span>
  <span m=''2161900''>an</span> <span m=''2162100''>order</span> <span m=''2162400''>n.</span>
  <span m=''2163000''>Everybody</span> <span m=''2163420''>has a</span> <span m=''2163640''>result</span>
  <span m=''2163980''>in</span> <span m=''2164050''>order</span> <span m=''2164240''>n</span>
  <span m=''2164780''>versus</span> <span m=''2165220''>an</span> <span m=''2165320''>order</span>
  <span m=''2165550''>2n</span> <span m=''2166450''>process</span> <span m=''2167490''>for</span>
  <span m=''2167650''>the</span> <span m=''2167730''>tree-based</span> <span m=''2168120''>plus</span>
  <span m=''2168330''>broadcast.</span> </p><p><span m=''2170590''>AUDIENCE: On the</span>
  <span m=''2170930''>Cell</span> <span m=''2171340''>processor but not in general.</span>
  </p><p><span m=''2173200''>PROFESSOR: Not in general.</span> <span m=''2175250''>It</span>
  <span m=''2175510''>depends</span> <span m=''2175870''>on</span> <span m=''2176340''>sort
  of</span> <span m=''2176590''>the</span> <span m=''2176730''>architectural</span>
  <span m=''2177300''>mechanism</span> <span m=''2177780''>that</span> <span m=''2177900''>you</span>
  <span m=''2178000''>have</span> <span m=''2179280''>for</span> <span m=''2179400''>your</span>
  <span m=''2179550''>network.</span> <span m=''2180860''>If</span> <span m=''2181140''>you</span>
  <span m=''2181240''>actually</span> <span m=''2181580''>do</span> <span m=''2181800''>need</span>
  <span m=''2181970''>to</span> <span m=''2182140''>sort</span> <span m=''2182290''>of,</span>
  <span m=''2182700''>you</span> <span m=''2182860''>know,</span> <span m=''2182970''>if</span>
  <span m=''2183050''>you</span> <span m=''2183110''>have</span> <span m=''2183220''>a</span>
  <span m=''2183270''>broadcast</span> <span m=''2183730''>mechanism</span> <span
  m=''2184500''>that has</span> <span m=''2185100''>bus-based</span> <span m=''2185670''>architecture</span>
  <span m=''2186130''>where you</span> <span m=''2186280''>can</span> <span m=''2186440''>deposit</span>
  <span m=''2186850''>a local</span> <span m=''2187100''>value,</span> <span m=''2187410''>everybody</span>
  <span m=''2187690''>can</span> <span m=''2187850''>pull</span> <span m=''2188090''>that</span>
  <span m=''2188250''>value,</span> <span m=''2188970''>then,</span> <span m=''2189750''>yeah,</span>
  <span m=''2189970''>it</span> <span m=''2190050''>can</span> <span m=''2190230''>be</span>
  <span m=''2190950''>more</span> <span m=''2191150''>efficient.</span> <span m=''2191410''>Or</span>
  <span m=''2191840''>on</span> <span m=''2191920''>optical</span> <span m=''2192270''>networks,</span>
  <span m=''2192950''>you can</span> <span m=''2193300''>broadcast the data and</span>
  <span m=''2193960''>everybody</span> <span m=''2194300''>can</span> <span m=''2194430''>just</span>
  <span m=''2195010''>fuse</span> <span m=''2195300''>it out.</span> <span m=''2198910''>OK.</span>
  </p><p><span m=''2200340''>So</span> <span m=''2200760''>summarizing</span> <span
  m=''2201360''>all the</span> <span m=''2201560''>different</span> <span m=''2201840''>patterns,</span>
  <span m=''2204070''>so</span> <span m=''2204490''>here</span> <span m=''2204860''>these</span>
  <span m=''2205100''>are</span> <span m=''2205260''>the</span> <span m=''2205350''>actual</span>
  <span m=''2206220''>mechanisms</span> <span m=''2206810''>that</span> <span m=''2206930''>you</span>
  <span m=''2207040''>would</span> <span m=''2207180''>use</span> <span m=''2207490''>for</span>
  <span m=''2207710''>how</span> <span m=''2207920''>you</span> <span m=''2208090''>would</span>
  <span m=''2208550''>implement</span> <span m=''2209460''>the different</span> <span
  m=''2209890''>patterns.</span> <span m=''2210800''>So in the</span> <span m=''2211190''>SPMD</span>
  <span m=''2211700''>you would</span> <span m=''2211880''>write the</span> <span
  m=''2212140''>same</span> <span m=''2212400''>program.</span> <span m=''2213130''>In</span>
  <span m=''2213440''>loop</span> <span m=''2213740''>parallelism</span> <span m=''2214590''>you</span>
  <span m=''2214790''>have</span> <span m=''2215590''>your</span> <span m=''2215790''>program</span>
  <span m=''2216240''>and you</span> <span m=''2216330''>might</span> <span m=''2216700''>annotate</span>
  <span m=''2217600''>sort</span> <span m=''2217810''>of</span> <span m=''2218060''>some</span>
  <span m=''2218310''>pragmas</span> <span m=''2218780''>that</span> <span m=''2218840''>tell</span>
  <span m=''2219030''>you</span> <span m=''2219140''>how</span> <span m=''2219300''>to</span>
  <span m=''2219380''>parallelize</span> <span m=''2220260''>your computation.</span>
  <span m=''2221200''>In</span> <span m=''2221300''>the</span> <span m=''2221360''>master/worker</span>
  <span m=''2222020''>model</span> <span m=''2222360''>you</span> <span m=''2222500''>might</span>
  <span m=''2222700''>have</span> <span m=''2223310''>sort</span> <span m=''2223490''>of</span>
  <span m=''2223980''>a</span> <span m=''2224210''>master</span> <span m=''2224740''>that''s</span>
  <span m=''2224850''>going</span> <span m=''2225040''>to</span> <span m=''2225130''>create</span>
  <span m=''2225470''>threads</span> <span m=''2225990''>and</span> <span m=''2226330''>you</span>
  <span m=''2226520''>actually</span> <span m=''2226830''>know --</span> <span m=''2227690''>you</span>
  <span m=''2227800''>might</span> <span m=''2228470''>sort</span> <span m=''2228640''>of</span>
  <span m=''2228720''>have</span> <span m=''2228900''>a</span> <span m=''2228970''>very</span>
  <span m=''2229200''>good</span> <span m=''2229340''>idea</span> <span m=''2229780''>of</span>
  <span m=''2230160''>what</span> <span m=''2230380''>is</span> <span m=''2230490''>the</span>
  <span m=''2230560''>kind</span> <span m=''2230800''>of</span> <span m=''2230890''>work</span>
  <span m=''2231070''>you''re</span> <span m=''2231180''>going</span> <span m=''2231340''>to</span>
  <span m=''2231510''>have to do</span> <span m=''2231610''>in</span> <span m=''2231740''>each</span>
  <span m=''2231960''>thread.</span> <span m=''2232780''>In the</span> <span m=''2233210''>fork/join</span>
  <span m=''2233460''>model</span> <span m=''2233750''>you</span> <span m=''2233880''>have</span>
  <span m=''2234090''>more</span> <span m=''2234330''>dynamism.</span> <span m=''2236340''>So
  you</span> <span m=''2236480''>might</span> <span m=''2236680''>create</span> <span
  m=''2237410''>threads</span> <span m=''2237880''>on</span> <span m=''2238070''>the</span>
  <span m=''2238140''>fly.</span> </p><p><span m=''2239280''>And</span> <span m=''2239490''>you</span>
  <span m=''2239580''>apply</span> <span m=''2239940''>these</span> <span m=''2240830''>sort
  of</span> <span m=''2242300''>based</span> <span m=''2242580''>on</span> <span m=''2243740''>appeal</span>
  <span m=''2244220''>or</span> <span m=''2245600''>what</span> <span m=''2245770''>is</span>
  <span m=''2245890''>more</span> <span m=''2246120''>suited</span> <span m=''2246430''>in</span>
  <span m=''2246530''>terms</span> <span m=''2246790''>of</span> <span m=''2246900''>implementation</span>
  <span m=''2248040''>to</span> <span m=''2248170''>each</span> <span m=''2248370''>of
  the</span> <span m=''2248490''>different</span> <span m=''2248800''>patterns</span>
  <span m=''2249240''>for</span> <span m=''2249400''>how</span> <span m=''2249530''>you</span>
  <span m=''2249650''>actually</span> <span m=''2249930''>organize</span> <span m=''2250380''>your</span>
  <span m=''2250490''>data.</span> <span m=''2251190''>So</span> <span m=''2251440''>in</span>
  <span m=''2251510''>the</span> <span m=''2251600''>task</span> <span m=''2251970''>parallelism</span>
  <span m=''2252450''>model,</span> <span m=''2253320''>this</span> <span m=''2253480''>is</span>
  <span m=''2253600''>where</span> <span m=''2253760''>you</span> <span m=''2253830''>have</span>
  <span m=''2254020''>a</span> <span m=''2254060''>world</span> <span m=''2254400''>of</span>
  <span m=''2254480''>threads</span> <span m=''2255230''>that</span> <span m=''2255360''>you</span>
  <span m=''2255540''>know</span> <span m=''2255730''>you''re</span> <span m=''2255870''>going</span>
  <span m=''2256080''>to</span> <span m=''2256230''>calculate</span> <span m=''2257410''>or</span>
  <span m=''2257540''>that you''re</span> <span m=''2257700''>going</span> <span m=''2257900''>to</span>
  <span m=''2258000''>use</span> <span m=''2258160''>for your</span> <span m=''2258350''>computation.</span>
  <span m=''2259290''>And</span> <span m=''2259440''>really</span> <span m=''2259660''>you</span>
  <span m=''2259750''>can</span> <span m=''2259890''>use</span> <span m=''2260750''>largely</span>
  <span m=''2261090''>any</span> <span m=''2261370''>one</span> <span m=''2261540''>of</span>
  <span m=''2261640''>these</span> <span m=''2261840''>models.</span> <span m=''2263610''>So</span>
  <span m=''2263870''>I</span> <span m=''2263970''>used</span> <span m=''2264220''>a</span>
  <span m=''2264290''>ranking</span> <span m=''2264590''>system</span> <span m=''2264930''>where</span>
  <span m=''2265070''>four</span> <span m=''2265340''>stars</span> <span m=''2265740''>is
  really</span> <span m=''2265990''>good.</span> <span m=''2266340''>One</span> <span
  m=''2266590''>star</span> <span m=''2267320''>is</span> <span m=''2267650''>sort</span>
  <span m=''2267840''>of</span> <span m=''2268320''>bad</span> <span m=''2268800''>or</span>
  <span m=''2268930''>no star</span> <span m=''2269380''>means</span> <span m=''2269900''>not</span>
  <span m=''2270160''>well</span> <span m=''2270330''>suited.</span> </p><p><span
  m=''2271192''>AUDIENCE:</span> <span m=''2271724''>Sort</span> <span m=''2271857''>of</span>
  <span m=''2271990''>in</span> <span m=''2272123''>Cell</span> <span m=''2272256''>because</span>
  <span m=''2272788''>the</span> <span m=''2273320''>inherit</span> <span m=''2273870''>master
  there.</span> <span m=''2275220''>Sometimes</span> <span m=''2275773''>master/worker</span>
  <span m=''2276880''>might</span> <span m=''2277016''>get</span> <span m=''2277153''>a</span>
  <span m=''2277290''>little</span> <span m=''2277426''>bit</span> <span m=''2277563''>of</span>
  <span m=''2277700''>a</span> <span m=''2277836''>biasing</span> <span m=''2278110''>than
  this one.</span> </p><p><span m=''2279910''>PROFESSOR: Right,</span> <span m=''2280250''>so
  --</span> </p><p><span m=''2281210''>AUDIENCE: You don''t</span> <span m=''2281800''>have</span>
  <span m=''2281943''>to</span> <span m=''2282086''>pay</span> <span m=''2282230''>a</span>
  <span m=''2282373''>cost</span> <span m=''2282516''>of</span> <span m=''2282880''>having
  master</span> </p><p><span m=''2284600''>PROFESSOR: Right.</span> <span m=''2284950''>Right.</span>
  <span m=''2286050''>Although</span> <span m=''2286480''>you</span> <span m=''2286620''>could</span>
  <span m=''2286920''>use</span> <span m=''2287590''>the</span> <span m=''2287970''>Cell</span>
  <span m=''2288550''>master</span> <span m=''2289130''>to</span> <span m=''2289280''>do</span>
  <span m=''2289910''>regular</span> <span m=''2290230''>computations</span> <span
  m=''2290900''>as well.</span> <span m=''2291660''>But, yes.</span> <span m=''2294390''>So</span>
  <span m=''2294920''>and</span> <span m=''2295100''>the</span> <span m=''2295560''>divide
  and</span> <span m=''2295950''>conquer</span> <span m=''2296350''>model,</span>
  <span m=''2297740''>you</span> <span m=''2297840''>know,</span> <span m=''2298170''>might</span>
  <span m=''2298390''>be</span> <span m=''2298700''>especially</span> <span m=''2299210''>well</span>
  <span m=''2299390''>suited</span> <span m=''2299570''>for</span> <span m=''2299650''>a</span>
  <span m=''2299830''>fork and</span> <span m=''2300200''>join</span> <span m=''2300500''>because</span>
  <span m=''2300820''>you''re</span> <span m=''2300930''>creating</span> <span m=''2301270''>all</span>
  <span m=''2301460''>these</span> <span m=''2301650''>recursive</span> <span m=''2302060''>subproblems</span>
  <span m=''2303010''>They</span> <span m=''2303120''>might</span> <span m=''2303300''>be</span>
  <span m=''2303580''>heterogeneous.</span> <span m=''2304080''>In</span> <span m=''2304160''>the</span>
  <span m=''2304240''>nature</span> <span m=''2304520''>of</span> <span m=''2304590''>the</span>
  <span m=''2304670''>computation</span> <span m=''2305210''>that</span> <span m=''2305300''>you</span>
  <span m=''2305440''>do,</span> <span m=''2305940''>you</span> <span m=''2306160''>might</span>
  <span m=''2306660''>have</span> <span m=''2307070''>more</span> <span m=''2307270''>problems</span>
  <span m=''2307600''>created</span> <span m=''2307850''>dynamically.</span> <span
  m=''2308850''>Fork/join</span> <span m=''2309350''>really</span> <span m=''2309560''>works</span>
  <span m=''2309850''>well</span> <span m=''2310020''>for</span> <span m=''2310140''>that.</span>
  <span m=''2310300''>And</span> <span m=''2310440''>the</span> <span m=''2310510''>fact,</span>
  <span m=''2311040''>you</span> <span m=''2311250''>know,</span> <span m=''2311640''>the</span>
  <span m=''2312210''>subproblem</span> <span m=''2312690''>structure</span> <span
  m=''2313150''>that I</span> <span m=''2313220''>showed,</span> <span m=''2313590''>the</span>
  <span m=''2313670''>graph</span> <span m=''2314060''>of sort of</span> <span m=''2314640''>division.</span>
  <span m=''2315400''>And</span> <span m=''2315600''>then</span> <span m=''2315890''>merging</span>
  <span m=''2316500''>works</span> <span m=''2316730''>really</span> <span m=''2316950''>well</span>
  <span m=''2317380''>with the</span> <span m=''2317660''>fork/join</span> <span m=''2318130''>model.</span>
  </p><p><span m=''2320260''>In</span> <span m=''2320420''>the</span> <span m=''2320640''>recursive,</span>
  <span m=''2321460''>in</span> <span m=''2321590''>the</span> <span m=''2321950''>geometric</span>
  <span m=''2322560''>decomposition --</span> <span m=''2325260''>this</span> <span
  m=''2325390''>is</span> <span m=''2325590''>essentially</span> <span m=''2325990''>your</span>
  <span m=''2326350''>lab</span> <span m=''2326650''>one</span> <span m=''2326880''>exercise</span>
  <span m=''2327860''>and the</span> <span m=''2328100''>things</span> <span m=''2328320''>we</span>
  <span m=''2328420''>went</span> <span m=''2328590''>over</span> <span m=''2328780''>yesterday</span>
  <span m=''2329170''>in the</span> <span m=''2329320''>recitation.</span> <span m=''2330330''>You''re</span>
  <span m=''2330550''>taking</span> <span m=''2330920''>data</span> <span m=''2331110''>and</span>
  <span m=''2331270''>you''re</span> <span m=''2331370''>partitioning</span> <span
  m=''2332770''>over</span> <span m=''2333020''>multiple</span> <span m=''2334860''>processors</span>
  <span m=''2335520''>to actually</span> <span m=''2335840''>compute</span> <span
  m=''2336190''>in parallel.</span> <span m=''2336960''>So</span> <span m=''2337330''>this</span>
  <span m=''2337560''>could</span> <span m=''2337720''>be</span> <span m=''2338140''>SPMD</span>
  <span m=''2338790''>implementation</span> <span m=''2339950''>or</span> <span m=''2340170''>it</span>
  <span m=''2340240''>could</span> <span m=''2340380''>be</span> <span m=''2340510''>a</span>
  <span m=''2340580''>loop</span> <span m=''2340770''>parallelism</span> <span m=''2341140''>implementation,</span>
  <span m=''2342570''>which</span> <span m=''2342750''>we</span> <span m=''2342870''>didn''t</span>
  <span m=''2343110''>do.</span> <span m=''2344880''>Less</span> <span m=''2345200''>suitable,
  the</span> <span m=''2345650''>master/worker</span> <span m=''2346340''>and fork/join,</span>
  <span m=''2347280''>often</span> <span m=''2347570''>because</span> <span m=''2348530''>the</span>
  <span m=''2348660''>geometric</span> <span m=''2349060''>decomposition</span> <span
  m=''2350370''>applied</span> <span m=''2350770''>some</span> <span m=''2350960''>distribution</span>
  <span m=''2351540''>to</span> <span m=''2351650''>the</span> <span m=''2351760''>data</span>
  <span m=''2352100''>which</span> <span m=''2352290''>has</span> <span m=''2352490''>static</span>
  <span m=''2352820''>properties</span> <span m=''2353270''>that</span> <span m=''2353390''>you</span>
  <span m=''2353510''>can</span> <span m=''2353870''>exploit</span> <span m=''2354460''>in</span>
  <span m=''2354590''>various</span> <span m=''2354980''>ways.</span> <span m=''2355640''>So</span>
  <span m=''2355820''>you</span> <span m=''2355950''>don''t need</span> <span m=''2356160''>to</span>
  <span m=''2356240''>pay the</span> <span m=''2356450''>overhead</span> <span m=''2356930''>of</span>
  <span m=''2357420''>master/worker</span> <span m=''2358140''>or</span> <span m=''2358330''>fork/join.</span>
  </p><p><span m=''2361320''>Recursive</span> <span m=''2361840''>data</span> <span
  m=''2362110''>structures</span> <span m=''2362690''>sort of</span> <span m=''2363430''>have</span>
  <span m=''2364460''>very</span> <span m=''2364860''>specific</span> <span m=''2365340''>models</span>
  <span m=''2365670''>that</span> <span m=''2365790''>you</span> <span m=''2365910''>can</span>
  <span m=''2366110''>run</span> <span m=''2366300''>with.</span> <span m=''2367320''>Largely</span>
  <span m=''2368220''>master/worker</span> <span m=''2370500''>is</span> <span m=''2370690''>a</span>
  <span m=''2370750''>decent</span> <span m=''2371040''>implementation</span> <span
  m=''2371890''>choice.</span> <span m=''2372950''>SPMD</span> <span m=''2373210''>is</span>
  <span m=''2373350''>another.</span> <span m=''2376180''>And</span> <span m=''2376520''>you''re</span>
  <span m=''2376610''>going to</span> <span m=''2376780''>hear</span> <span m=''2376950''>more</span>
  <span m=''2377190''>about</span> <span m=''2377420''>sort</span> <span m=''2377570''>of</span>
  <span m=''2377670''>the</span> <span m=''2377760''>pipeline</span> <span m=''2378220''>mechanism</span>
  <span m=''2379110''>in</span> <span m=''2379220''>the</span> <span m=''2379290''>next</span>
  <span m=''2379520''>talk</span> <span m=''2379840''>so</span> <span m=''2379990''>I''m
  not</span> <span m=''2380110''>going to</span> <span m=''2380280''>talk</span> <span
  m=''2380450''>about</span> <span m=''2380620''>that</span> <span m=''2381140''>very</span>
  <span m=''2381290''>much.</span> <span m=''2382120''>Event-based</span> <span m=''2382620''>coordination,</span>
  <span m=''2383610''>largely</span> <span m=''2383940''>dynamic.</span> <span m=''2384710''>So</span>
  <span m=''2385050''>fork/join</span> <span m=''2385540''>works</span> <span m=''2385790''>really</span>
  <span m=''2386030''>well.</span> <span m=''2387090''>So</span> <span m=''2387680''>one
  --</span> </p><p><span m=''2388780''>AUDIENCE:</span> <span m=''2388895''>When you''re</span>
  <span m=''2389010''>buffering</span> <span m=''2389286''>them</span> <span m=''2389562''>you</span>
  <span m=''2389838''>could</span> <span m=''2390114''>do</span> <span m=''2390870''>master/worker</span>
  <span m=''2391436''>with</span> <span m=''2392003''>pipelining?</span> </p><p><span
  m=''2392570''>PROFESSOR:</span> <span m=''2392860''>Yes, so</span> <span m=''2393100''>next
  slide.</span> <span m=''2394960''>So</span> <span m=''2396710''>sort</span> <span
  m=''2396850''>of</span> <span m=''2396970''>these</span> <span m=''2397190''>choices</span>
  <span m=''2397570''>or</span> <span m=''2397650''>these</span> <span m=''2397790''>tradeoffs</span>
  <span m=''2398260''>aren''t</span> <span m=''2398480''>really</span> <span m=''2398860''>orthogonal.</span>
  <span m=''2399570''>You</span> <span m=''2399660''>can</span> <span m=''2399770''>actually</span>
  <span m=''2400110''>combine</span> <span m=''2400570''>them</span> <span m=''2400690''>in</span>
  <span m=''2400770''>different</span> <span m=''2401070''>ways.</span> <span m=''2401670''>And</span>
  <span m=''2402610''>in</span> <span m=''2402930''>a</span> <span m=''2402970''>lot</span>
  <span m=''2403200''>of</span> <span m=''2403290''>applications</span> <span m=''2404060''>what</span>
  <span m=''2404180''>you</span> <span m=''2404250''>might</span> <span m=''2404460''>find</span>
  <span m=''2404790''>is</span> <span m=''2404910''>that</span> <span m=''2405430''>the</span>
  <span m=''2406320''>different</span> <span m=''2406630''>patterns</span> <span m=''2407170''>compose</span>
  <span m=''2407630''>hierarchically.</span> <span m=''2408710''>And</span> <span
  m=''2409720''>you</span> <span m=''2409880''>actually</span> <span m=''2410190''>want</span>
  <span m=''2410530''>that</span> <span m=''2410810''>in</span> <span m=''2411150''>various</span>
  <span m=''2411420''>ways --</span> <span m=''2412540''>for</span> <span m=''2412720''>various</span>
  <span m=''2413060''>reasons.</span> <span m=''2413610''>So</span> <span m=''2413750''>in
  the</span> <span m=''2414040''>MPEG</span> <span m=''2414500''>example,</span> <span
  m=''2415370''>you know,</span> <span m=''2415530''>we</span> <span m=''2415660''>had</span>
  <span m=''2416020''>tasks</span> <span m=''2416890''>here</span> <span m=''2417250''>within</span>
  <span m=''2417530''>each</span> <span m=''2417740''>task</span> <span m=''2418400''>and</span>
  <span m=''2418750''>identified</span> <span m=''2419520''>some</span> <span m=''2419740''>pipeline</span>
  <span m=''2420220''>stages.</span> <span m=''2421720''>You</span> <span m=''2421820''>know,</span>
  <span m=''2421910''>here</span> <span m=''2422160''>I</span> <span m=''2422210''>have</span>
  <span m=''2422370''>some</span> <span m=''2422520''>data</span> <span m=''2422720''>parallelism</span>
  <span m=''2423230''>so</span> <span m=''2423410''>I</span> <span m=''2423480''>can</span>
  <span m=''2423680''>apply</span> <span m=''2424430''>the</span> <span m=''2424570''>loop</span>
  <span m=''2425860''>pattern</span> <span m=''2426290''>here.</span> </p><p><span
  m=''2427590''>And</span> <span m=''2427840''>what</span> <span m=''2427970''>I</span>
  <span m=''2428020''>want</span> <span m=''2428230''>to</span> <span m=''2428330''>do</span>
  <span m=''2428500''>is</span> <span m=''2428690''>actually</span> <span m=''2429050''>in</span>
  <span m=''2429140''>my</span> <span m=''2429480''>computation</span> <span m=''2430400''>sort
  of</span> <span m=''2430850''>express</span> <span m=''2431490''>these</span> <span
  m=''2431780''>different</span> <span m=''2432090''>mechanisms</span> <span m=''2432560''>so</span>
  <span m=''2432650''>I</span> <span m=''2432720''>can</span> <span m=''2432870''>understand</span>
  <span m=''2433390''>sort of</span> <span m=''2433640''>different</span> <span m=''2433950''>tradeoffs.</span>
  <span m=''2434910''>And</span> <span m=''2435530''>for</span> <span m=''2435770''>really</span>
  <span m=''2435980''>large</span> <span m=''2436270''>applications,</span> <span
  m=''2437280''>there</span> <span m=''2437420''>might</span> <span m=''2437590''>be</span>
  <span m=''2437670''>different</span> <span m=''2437980''>patterns</span> <span m=''2438360''>that
  are</span> <span m=''2438470''>well</span> <span m=''2438740''>suited</span> <span
  m=''2440170''>for</span> <span m=''2440290''>the</span> <span m=''2440350''>actual</span>
  <span m=''2440630''>computation</span> <span m=''2441180''>that I''m</span> <span
  m=''2441400''>doing.</span> <span m=''2441910''>So</span> <span m=''2442120''>I</span>
  <span m=''2442170''>can</span> <span m=''2442290''>combine</span> <span m=''2442740''>things</span>
  <span m=''2442970''>like</span> <span m=''2443150''>pipelining</span> <span m=''2444780''>with
  a</span> <span m=''2445260''>task-based</span> <span m=''2445860''>mechanism</span>
  <span m=''2446500''>or</span> <span m=''2446790''>data</span> <span m=''2447020''>parallelism</span>
  <span m=''2447450''>to</span> <span m=''2447940''>actually</span> <span m=''2448530''>get</span>
  <span m=''2448850''>really</span> <span m=''2449120''>good</span> <span m=''2449270''>performance</span>
  <span m=''2449710''>speedups.</span> </p><p><span m=''2450660''>And</span> <span
  m=''2451300''>one</span> <span m=''2451550''>of</span> <span m=''2451610''>the</span>
  <span m=''2451670''>things</span> <span m=''2452010''>that</span> <span m=''2452490''>might</span>
  <span m=''2452700''>strike</span> <span m=''2452970''>you</span> <span m=''2453160''>as</span>
  <span m=''2453540''>well,</span> <span m=''2453850''>heck,</span> <span m=''2454040''>this</span>
  <span m=''2454180''>is</span> <span m=''2454270''>a</span> <span m=''2454320''>whole</span>
  <span m=''2454510''>lot</span> <span m=''2454690''>of</span> <span m=''2454810''>work</span>
  <span m=''2455020''>that</span> <span m=''2455130''>I</span> <span m=''2455170''>have</span>
  <span m=''2455400''>to</span> <span m=''2455470''>do</span> <span m=''2455650''>to</span>
  <span m=''2455740''>actually</span> <span m=''2456150''>get</span> <span m=''2456350''>my</span>
  <span m=''2456500''>code</span> <span m=''2456880''>in</span> <span m=''2456950''>the</span>
  <span m=''2457040''>right</span> <span m=''2457260''>way</span> <span m=''2458330''>so</span>
  <span m=''2458470''>that</span> <span m=''2458610''>I</span> <span m=''2458650''>can</span>
  <span m=''2458810''>actually</span> <span m=''2459130''>take</span> <span m=''2459340''>advantage</span>
  <span m=''2459740''>of my</span> <span m=''2459890''>parallel</span> <span m=''2460220''>architecture.</span>
  <span m=''2461050''>You</span> <span m=''2461190''>know,</span> <span m=''2461290''>I</span>
  <span m=''2461440''>have</span> <span m=''2461640''>to</span> <span m=''2461760''>conceptually</span>
  <span m=''2462280''>think</span> <span m=''2462460''>about</span> <span m=''2462820''>the</span>
  <span m=''2463020''>question</span> <span m=''2463410''>the right</span> <span m=''2463670''>way.</span>
  <span m=''2464250''>I have</span> <span m=''2464510''>to</span> <span m=''2465130''>maybe</span>
  <span m=''2465390''>restructure</span> <span m=''2465870''>my</span> <span m=''2466030''>computation
  in</span> <span m=''2466720''>different</span> <span m=''2467010''>ways</span> <span
  m=''2467270''>to</span> <span m=''2467370''>actually</span> <span m=''2467750''>exploit</span>
  <span m=''2468090''>parallelism.</span> <span m=''2469790''>Data</span> <span m=''2469950''>distribution
  is</span> <span m=''2470610''>really</span> <span m=''2470880''>hard.</span> <span
  m=''2471260''>I</span> <span m=''2471340''>have</span> <span m=''2471490''>to</span>
  <span m=''2471600''>get</span> <span m=''2471740''>that</span> <span m=''2471950''>right.</span>
  <span m=''2472810''>Synchronization</span> <span m=''2473490''>issues</span> <span
  m=''2473920''>might</span> <span m=''2474100''>be</span> <span m=''2474190''>a</span>
  <span m=''2474220''>problem.</span> <span m=''2474970''>And how</span> <span m=''2475150''>much</span>
  <span m=''2475340''>buffering</span> <span m=''2475600''>do I</span> <span m=''2475920''>need</span>
  <span m=''2476090''>to</span> <span m=''2476160''>do</span> <span m=''2476330''>between</span>
  <span m=''2477030''>different</span> <span m=''2477360''>tasks?</span> </p><p><span
  m=''2478020''>So</span> <span m=''2478420''>the</span> <span m=''2478740''>thing</span>
  <span m=''2479030''>you''re going to</span> <span m=''2479140''>hear</span> <span
  m=''2479340''>about</span> <span m=''2479560''>in the</span> <span m=''2479620''>next</span>
  <span m=''2479930''>talk</span> <span m=''2480210''>is,</span> <span m=''2480480''>well,</span>
  <span m=''2480730''>what</span> <span m=''2480870''>if</span> <span m=''2480980''>these</span>
  <span m=''2481190''>things</span> <span m=''2481480''>really</span> <span m=''2481750''>fall</span>
  <span m=''2482040''>out</span> <span m=''2482190''>naturally</span> <span m=''2482680''>from</span>
  <span m=''2482820''>the</span> <span m=''2482890''>way you</span> <span m=''2483110''>actually</span>
  <span m=''2483430''>write</span> <span m=''2483610''>the</span> <span m=''2483680''>program,</span>
  <span m=''2484420''>and</span> <span m=''2487360''>if</span> <span m=''2487500''>the</span>
  <span m=''2487590''>way you</span> <span m=''2487800''>actually</span> <span m=''2488190''>write</span>
  <span m=''2488400''>your</span> <span m=''2488510''>program</span> <span m=''2489210''>matches</span>
  <span m=''2489610''>really</span> <span m=''2489840''>well</span> <span m=''2490110''>with</span>
  <span m=''2490260''>the</span> <span m=''2490360''>intuitive,</span> <span m=''2491530''>sort
  of</span> <span m=''2491760''>natural</span> <span m=''2492530''>conceptualization</span>
  <span m=''2493330''>of</span> <span m=''2493430''>the</span> <span m=''2493530''>problem.</span>
  <span m=''2495000''>And so</span> <span m=''2495410''>I''ll</span> <span m=''2495540''>leave</span>
  <span m=''2495850''>Bill</span> <span m=''2496040''>to</span> <span m=''2496380''>talk</span>
  <span m=''2496600''>about</span> <span m=''2496810''>that.</span> <span m=''2497410''>And
  I''m</span> <span m=''2497640''>going to</span> <span m=''2497720''>stop here.</span>
  <span m=''2500190''>Any</span> <span m=''2500400''>questions?</span> </p><p><span
  m=''2501883''>AUDIENCE: We can</span> <span m=''2502370''>take in some questions</span>
  <span m=''2502856''>and then</span> <span m=''2503343''>everybody --</span> </p><p><span
  m=''2510650''>AUDIENCE: You talked about</span> <span m=''2510830''>fork and join.</span>
  <span m=''2512460''>When you</span> <span m=''2512550''>have</span> <span m=''2513080''>a
  parent thread</span> <span m=''2514700''>that</span> <span m=''2514870''>spawns</span>
  <span m=''2515250''>off to</span> <span m=''2516130''>a</span> <span m=''2517170''>child
  thread,</span> <span m=''2519040''>how</span> <span m=''2519150''>do</span> <span
  m=''2519240''>you keep your</span> <span m=''2519863''>parent thread</span> <span
  m=''2520890''>from</span> <span m=''2521403''>using up</span> <span m=''2521916''>the
  SPE?</span> </p><p><span m=''2523970''>PROFESSOR: So</span> <span m=''2524670''>you</span>
  <span m=''2524810''>have</span> <span m=''2525120''>a fork/join</span> <span m=''2526010''>where</span>
  <span m=''2526920''>you have --</span> </p><p><span m=''2527290''>AUDIENCE:</span>
  <span m=''2527788''>Most of</span> <span m=''2528287''>the</span> <span m=''2528786''>parents</span>
  <span m=''2529285''>it</span> <span m=''2529784''>might be the</span> <span m=''2530283''>PPE.</span>
  <span m=''2531780''>And so</span> <span m=''2532080''>if you just do</span> <span
  m=''2533780''>fork/join,</span> <span m=''2535790''>might</span> <span m=''2536200''>not</span>
  <span m=''2536370''>really</span> <span m=''2537430''>use</span> <span m=''2537570''>PPE</span>
  <span m=''2537710''>unless you can,</span> <span m=''2538610''>you know,</span>
  <span m=''2539370''>you have</span> <span m=''2539490''>some time</span> <span m=''2540070''>and
  you</span> <span m=''2540370''>let it do</span> <span m=''2540600''>some</span>
  <span m=''2541100''>of</span> <span m=''2541180''>the</span> <span m=''2541300''>task
  and</span> <span m=''2541540''>come back.</span> </p><p><span m=''2542670''>AUDIENCE:
  So</span> <span m=''2543470''>for</span> <span m=''2543880''>our purposes we shouldn''t</span>
  <span m=''2546170''>spawn</span> <span m=''2546428''>off</span> <span m=''2546687''>new
  threads by</span> <span m=''2547205''>the SPEs?</span> </p><p><span m=''2549110''>PROFESSOR:
  So,</span> <span m=''2549510''>yeah.</span> <span m=''2549810''>So</span> <span
  m=''2550670''>most</span> <span m=''2551010''>of</span> <span m=''2551140''>the</span>
  <span m=''2551250''>threads</span> <span m=''2551570''>that</span> <span m=''2551660''>are</span>
  <span m=''2551730''>spawned</span> <span m=''2552110''>off</span> <span m=''2552390''>are</span>
  <span m=''2552850''>done</span> <span m=''2553080''>by</span> <span m=''2553200''>the</span>
  <span m=''2553290''>PPE.</span> <span m=''2554160''>So</span> <span m=''2554490''>you</span>
  <span m=''2554690''>have</span> <span m=''2554950''>these --</span> <span m=''2555560''>in</span>
  <span m=''2555710''>fact</span> <span m=''2556570''>a</span> <span m=''2557180''>good</span>
  <span m=''2557540''>walk</span> <span m=''2557790''>through</span> <span m=''2557910''>in</span>
  <span m=''2558020''>recitation</span> <span m=''2558490''>yesterday.</span> <span
  m=''2559200''>You have</span> <span m=''2559350''>the</span> <span m=''2559440''>PPE.</span>
  <span m=''2559950''>Essentially</span> <span m=''2560420''>it</span> <span m=''2560510''>sends</span>
  <span m=''2561010''>messages</span> <span m=''2561590''>to the</span> <span m=''2561740''>SPEs</span>
  <span m=''2562140''>that</span> <span m=''2562350''>says,</span> <span m=''2562890''>create
  these</span> <span m=''2563240''>threads</span> <span m=''2563710''>and</span> <span
  m=''2564400''>start</span> <span m=''2564660''>running</span> <span m=''2564930''>them.</span>
  <span m=''2565190''>Here''s</span> <span m=''2565470''>the</span> <span m=''2565540''>data</span>
  <span m=''2565770''>for</span> <span m=''2565880''>them.</span> <span m=''2566400''>And</span>
  <span m=''2566570''>then</span> <span m=''2566790''>these</span> <span m=''2566950''>threads</span>
  <span m=''2567830''>run</span> <span m=''2568180''>on</span> <span m=''2568320''>the</span>
  <span m=''2568540''>SPEs.</span> <span m=''2568950''>And</span> <span m=''2569090''>they</span>
  <span m=''2569190''>just</span> <span m=''2569400''>do</span> <span m=''2569520''>local</span>
  <span m=''2569780''>computation.</span> <span m=''2570680''>And</span> <span m=''2570780''>then</span>
  <span m=''2570870''>they</span> <span m=''2571000''>send</span> <span m=''2571200''>messages</span>
  <span m=''2571600''>back</span> <span m=''2572620''>to</span> <span m=''2572740''>the</span>
  <span m=''2572800''>PPE</span> <span m=''2573200''>that</span> <span m=''2573420''>says,</span>
  <span m=''2573570''>we''re</span> <span m=''2573720''>done.</span> <span m=''2574050''>So</span>
  <span m=''2574210''>that</span> <span m=''2574520''>essentially</span> <span m=''2575150''>implements</span>
  <span m=''2575640''>the join</span> <span m=''2575930''>mechanism.</span> </p><p><span
  m=''2576422''>AUDIENCE: On</span> <span m=''2576914''>the other hand,</span> <span
  m=''2577406''>if you</span> <span m=''2577898''>are doing something</span> <span
  m=''2578390''>like</span> <span m=''2581180''>master</span> <span m=''2581730''>slave</span>
  <span m=''2583130''>way,</span> <span m=''2583680''>and</span> <span m=''2583960''>then
  the</span> <span m=''2584250''>SPE</span> <span m=''2584470''>can</span> <span m=''2585080''>send</span>
  <span m=''2585270''>a</span> <span m=''2585430''>message</span> <span m=''2586390''>and</span>
  <span m=''2586580''>deliver</span> <span m=''2587130''>another</span> <span m=''2587370''>job
  into the</span> <span m=''2589650''>PPE who feeds the</span> <span m=''2590080''>master.</span>
  <span m=''2591830''>If</span> <span m=''2592050''>SPE</span> <span m=''2592220''>see</span>
  <span m=''2592420''>there''s</span> <span m=''2592570''>some more</span> <span m=''2592970''>computers,</span>
  <span m=''2593120''>you can say,</span> <span m=''2593660''>OK, look,</span> <span
  m=''2594200''>put</span> <span m=''2594335''>this</span> <span m=''2594470''>into</span>
  <span m=''2594605''>your</span> <span m=''2594740''>keybord</span> <span m=''2595280''>and
  keep</span> <span m=''2595820''>sending</span> <span m=''2596360''>messages</span>
  <span m=''2596650''>and so</span> <span m=''2597280''>the master</span> <span m=''2598240''>can
  look at that</span> <span m=''2599260''>and update it.</span> <span m=''2599740''>So,
  you know,</span> <span m=''2600900''>it''s not</span> <span m=''2601100''>only</span>
  <span m=''2601520''>master</span> <span m=''2601850''>who</span> <span m=''2602020''>has
  to fork off</span> <span m=''2602400''>but the</span> <span m=''2603470''>slaves</span>
  <span m=''2604280''>also.</span> <span m=''2604670''>They</span> <span m=''2604990''>still</span>
  <span m=''2605680''>can send</span> <span m=''2606270''>information</span> <span
  m=''2606590''>back.</span> <span m=''2608470''>So</span> <span m=''2608670''>you
  can</span> <span m=''2609060''>think</span> <span m=''2609320''>about</span> <span
  m=''2613050''>something</span> <span m=''2613310''>like</span> <span m=''2614070''>very</span>
  <span m=''2614180''>confident</span> <span m=''2615120''>that way.</span> <span
  m=''2616250''>There are</span> <span m=''2617440''>eight --</span> <span m=''2617900''>like</span>
  <span m=''2619390''>if six</span> <span m=''2620060''>SPE is</span> <span m=''2620350''>running</span>
  <span m=''2621640''>and</span> <span m=''2622920''>you</span> <span m=''2623130''>first</span>
  <span m=''2623340''>get something</span> <span m=''2623740''>in there</span> <span
  m=''2624090''>and</span> <span m=''2624330''>SPE</span> <span m=''2625210''>says</span>
  <span m=''2625530''>divide</span> <span m=''2626540''>it will</span> <span m=''2627060''>take</span>
  <span m=''2627330''>one task</span> <span m=''2627550''>and</span> <span m=''2627920''>run</span>
  <span m=''2628100''>that</span> <span m=''2628330''>until</span> <span m=''2628590''>the
  other</span> <span m=''2628970''>one</span> <span m=''2629070''>to</span> <span
  m=''2629180''>the</span> <span m=''2629240''>master</span> <span m=''2629860''>will
  finish it</span> <span m=''2632070''>and here''s</span> <span m=''2632540''>my</span>
  <span m=''2632670''>ID.</span> <span m=''2633070''>Send me</span> <span m=''2633230''>the
  message</span> <span m=''2633530''>when</span> <span m=''2633810''>it''s done.</span>
  <span m=''2635560''>And so you fork</span> <span m=''2635770''>that end</span> <span
  m=''2636140''>and wait.</span> <span m=''2636510''>So</span> <span m=''2637010''>you</span>
  <span m=''2637180''>can</span> <span m=''2637480''>assume</span> <span m=''2637960''>you</span>
  <span m=''2638210''>can</span> <span m=''2638350''>do</span> <span m=''2638450''>something
  like that.</span> </p><p><span m=''2639740''>So it''s almost</span> <span m=''2640380''>master/slave</span>
  <span m=''2642200''>but</span> <span m=''2643010''>the</span> <span m=''2643350''>coordination
  is</span> <span m=''2643550''>there.</span> <span m=''2645210''>The</span> <span
  m=''2645500''>trouble</span> <span m=''2645650''>with</span> <span m=''2645830''>normally</span>
  <span m=''2647520''>fork/join</span> <span m=''2647870''>is if</span> <span m=''2648840''>you</span>
  <span m=''2650310''>create</span> <span m=''2651020''>too many</span> <span m=''2651410''>threads.</span>
  <span m=''2652420''>You are in like a</span> <span m=''2652990''>thread hell</span>
  <span m=''2653280''>because there are too many things to</span> <span m=''2654560''>run.</span>
  <span m=''2655640''>I</span> <span m=''2655796''>don''t</span> <span m=''2655952''>know,</span>
  <span m=''2656108''>can</span> <span m=''2656264''>you</span> <span m=''2656420''>SPE?</span>
  </p><p><span m=''2657760''>PROFESSOR: No.</span> </p><p><span m=''2659650''>AUDIENCE:
  So you can''t even do</span> <span m=''2660180''>that</span> <span m=''2660710''>because</span>
  <span m=''2661240''>of some</span> <span m=''2661770''>physical</span> <span m=''2662035''>limitation.</span>
  <span m=''2662300''>You</span> <span m=''2662395''>can''t</span> <span m=''2662490''>get</span>
  <span m=''2665680''>take up 1000</span> <span m=''2665820''>threads</span> <span
  m=''2666640''>you</span> <span m=''2666760''>run</span> <span m=''2667840''>another</span>
  <span m=''2668410''>master/slave</span> <span m=''2668780''>thing</span> <span m=''2670210''>yourself</span>
  <span m=''2670450''>is</span> <span m=''2671010''>because</span> <span m=''2673160''>1000</span>
  <span m=''2673980''>threads</span> <span m=''2674180''>on top</span> <span m=''2674740''>of
  your</span> <span m=''2675490''>SPEs.</span> <span m=''2676900''>And</span> <span
  m=''2676978''>that''s</span> <span m=''2677056''>going</span> <span m=''2677135''>to</span>
  <span m=''2677213''>be</span> <span m=''2677291''>locked</span> <span m=''2677840''>threads.</span>
  </p><p><span m=''2679820''>PROFESSOR: Yeah.</span> <span m=''2680310''>Contact</span>
  <span m=''2680660''>switching</span> <span m=''2681090''>on the</span> <span m=''2681570''>SPEs</span>
  <span m=''2681820''>is very</span> <span m=''2682020''>expensive.</span> <span m=''2683420''>So</span>
  <span m=''2685380''>on</span> <span m=''2685530''>the</span> <span m=''2685600''>PlayStation</span>
  <span m=''2686120''>3</span> <span m=''2686580''>you have</span> <span m=''2686820''>six</span>
  <span m=''2687460''>SPEs</span> <span m=''2687980''>available</span> <span m=''2688370''>to</span>
  <span m=''2688530''>you.</span> <span m=''2688810''>So</span> <span m=''2688970''>if</span>
  <span m=''2689090''>you</span> <span m=''2689180''>have</span> <span m=''2689400''>a</span>
  <span m=''2689470''>lot</span> <span m=''2689660''>more</span> <span m=''2689890''>than</span>
  <span m=''2690030''>six</span> <span m=''2691390''>threads</span> <span m=''2691740''>that</span>
  <span m=''2691850''>you''ve</span> <span m=''2692020''>created,</span> <span m=''2692480''>essentially</span>
  <span m=''2692730''>each</span> <span m=''2692870''>one</span> <span m=''2693090''>runs</span>
  <span m=''2693320''>to</span> <span m=''2693410''>completion.</span> <span m=''2695190''>And</span>
  <span m=''2695360''>then</span> <span m=''2695470''>you</span> <span m=''2696030''>swap</span>
  <span m=''2696300''>that</span> <span m=''2696460''>out</span> <span m=''2696710''>and
  you</span> <span m=''2696810''>bring</span> <span m=''2697050''>in --</span> <span
  m=''2697530''>well,</span> <span m=''2698050''>that</span> <span m=''2698210''>terminates.</span>
  <span m=''2699090''>You</span> <span m=''2699380''>deallocate it</span> <span m=''2699860''>from</span>
  <span m=''2700030''>the</span> <span m=''2700100''>SPE</span> <span m=''2700420''>and</span>
  <span m=''2700520''>you</span> <span m=''2700600''>bring</span> <span m=''2700810''>in
  a</span> <span m=''2700960''>new</span> <span m=''2701100''>thread.</span> <span
  m=''2702200''>If</span> <span m=''2702360''>you</span> <span m=''2702440''>actually</span>
  <span m=''2702740''>want</span> <span m=''2702950''>to</span> <span m=''2703020''>do</span>
  <span m=''2703150''>more</span> <span m=''2703460''>thread-like</span> <span m=''2705220''>dynamic</span>
  <span m=''2705590''>load</span> <span m=''2705770''>balancing</span> <span m=''2706270''>on</span>
  <span m=''2706400''>the SPEs,</span> <span m=''2707180''>it''s not</span> <span
  m=''2707390''>well</span> <span m=''2707590''>suited</span> <span m=''2707890''>for</span>
  <span m=''2708000''>that.</span> <span m=''2708720''>Just</span> <span m=''2708920''>because</span>
  <span m=''2709170''>the --</span> </p><p><span m=''2709720''>AUDIENCE: The best
  model</span> <span m=''2710140''>there</span> <span m=''2711228''>is master/slave.</span>
  <span m=''2712860''>Because the PPE</span> <span m=''2714290''>[UNINTELLIGIBLE PHRASE]</span>
  <span m=''2714990''>the master part.</span> <span m=''2715370''>It will run</span>
  <span m=''2715912''>more</span> <span m=''2716454''>sequential code.</span> <span
  m=''2718080''>And</span> <span m=''2718470''>when</span> <span m=''2718610''>there''s</span>
  <span m=''2718790''>parallel</span> <span m=''2719200''>send --</span> <span m=''2720710''>it
  will give it to you</span> <span m=''2721690''>and</span> <span m=''2722670''>produce</span>
  <span m=''2723170''>the</span> <span m=''2723450''>work</span> <span m=''2723630''>queue</span>
  <span m=''2723810''>model</span> <span m=''2723990''>type</span> <span m=''2724162''>and</span>
  <span m=''2724335''>send</span> <span m=''2724507''>stuff</span> <span m=''2724680''>into</span>
  <span m=''2724830''>SPE</span> <span m=''2725820''>and feed that.</span> <span m=''2727290''>So</span>
  <span m=''2728150''>work</span> <span m=''2728425''>queue</span> <span m=''2728700''>type
  models</span> <span m=''2729040''>can be</span> <span m=''2729420''>used there.</span>
  </p><p><span m=''2730750''>PROFESSOR: Yeah.</span> <span m=''2731140''>And the</span>
  <span m=''2731510''>SPMD</span> <span m=''2731930''>model</span> <span m=''2732230''>might</span>
  <span m=''2732380''>not</span> <span m=''2732550''>work</span> <span m=''2732750''>really</span>
  <span m=''2732920''>well</span> <span m=''2733210''>because</span> <span m=''2733690''>you</span>
  <span m=''2733820''>have</span> <span m=''2733960''>this</span> <span m=''2734290''>heterogeneity</span>
  <span m=''2735200''>in</span> <span m=''2735390''>the</span> <span m=''2735520''>actual</span>
  <span m=''2735920''>hardware,</span> <span m=''2736430''>right.</span> <span m=''2737030''>So</span>
  <span m=''2737300''>if I''m</span> <span m=''2737590''>taking</span> <span m=''2737870''>the</span>
  <span m=''2737940''>same</span> <span m=''2738160''>program</span> <span m=''2738570''>running</span>
  <span m=''2738810''>on</span> <span m=''2738900''>the</span> <span m=''2738990''>SPE</span>
  <span m=''2739530''>versus</span> <span m=''2739950''>the</span> <span m=''2740040''>PPE,</span>
  <span m=''2741410''>that</span> <span m=''2741600''>code</span> <span m=''2741910''>might</span>
  <span m=''2742040''>not</span> <span m=''2742190''>be --</span> <span m=''2742900''>so
  I</span> <span m=''2743360''>essentially</span> <span m=''2743850''>have</span>
  <span m=''2743980''>to</span> <span m=''2744080''>specialize</span> <span m=''2744710''>the
  code.</span> <span m=''2745010''>And</span> <span m=''2745350''>that</span> <span
  m=''2745510''>starts</span> <span m=''2745770''>to</span> <span m=''2746250''>deviate</span>
  <span m=''2746610''>away</span> <span m=''2746750''>from the</span> <span m=''2747160''>SPMD</span>
  <span m=''2747590''>model.</span> </p><p><span m=''2747670''>AUDIENCE: Something
  I think</span> <span m=''2749440''>most of</span> <span m=''2750490''>the code you
  write for Cell</span> <span m=''2751780''>will probably be</span> <span m=''2752270''>master/worker.</span>
  <span m=''2755020''>And if you try to do</span> <span m=''2755350''>something other
  than</span> <span m=''2755910''>you should</span> <span m=''2756800''>think hard</span>
  <span m=''2757190''>why</span> <span m=''2758583''>that''s</span> <span m=''2759070''>the
  case.</span> </p><p><span m=''2762690''>PROFESSOR: You can do</span> <span m=''2763120''>fork/join</span>
  <span m=''2763610''>but</span> <span m=''2764140''>you</span> <span m=''2764330''>know,</span>
  <span m=''2764470''>it''s --</span> </p><p><span m=''2765120''>AUDIENCE:</span>
  <span m=''2765760''>I</span> <span m=''2765800''>mean</span> <span m=''2765980''>you</span>
  <span m=''2766070''>can''t --</span> <span m=''2767490''>because</span> <span m=''2767820''>you
  don''t have</span> <span m=''2768050''>virtualization.</span> <span m=''2769410''>If
  you</span> <span m=''2769810''>fork</span> <span m=''2770130''>too much</span> <span
  m=''2770540''>where are you going to put those?</span> </p><p><span m=''2771938''>PROFESSOR:
  Right.</span> <span m=''2772404''>Sometimes</span> <span m=''2772870''>you fork
  --</span> <span m=''2774790''>AUDIENCE: Yeah. but in that sense you --</span> <span
  m=''2775360''>should you</span> <span m=''2776010''>fork</span> <span m=''2776410''>too
  much?</span> <span m=''2777220''>To keep</span> <span m=''2777390''>work</span>
  <span m=''2777880''>you want</span> <span m=''2778310''>the</span> <span m=''2778470''>master.</span>
  <span m=''2779330''>You can fork things --</span> <span m=''2780590''>you</span>
  <span m=''2780740''>can do</span> <span m=''2781100''>virtual fork</span> <span
  m=''2781540''>and send</span> <span m=''2782220''>the work</span> <span m=''2782560''>to
  the master</span> <span m=''2782770''>and</span> <span m=''2783110''>say,</span>
  <span m=''2783520''>here, I forked something.</span> <span m=''2784070''>Here''s
  the work.</span> <span m=''2786350''>I mean,</span> <span m=''2786815''>the</span>
  <span m=''2787280''>key thing</span> <span m=''2787930''>is</span> <span m=''2788418''>do</span>
  <span m=''2788906''>the</span> <span m=''2789394''>simplest</span> <span m=''2789882''>thing.</span>
  <span m=''2790370''>I</span> <span m=''2790430''>mean,</span> <span m=''2791190''>you
  guys</span> <span m=''2791780''>have two</span> <span m=''2792130''>weeks left.</span>
  <span m=''2793320''>And</span> <span m=''2793890''>if you try</span> <span m=''2794030''>doing
  anything</span> <span m=''2794480''>complicated,</span> <span m=''2795620''>you
  might end up</span> <span m=''2796590''>with a big mess</span> <span m=''2797490''>that''s</span>
  <span m=''2797680''>undebuggable.</span> <span m=''2798730''>Just do simple things.</span>
  </p><p><span m=''2799780''>And</span> <span m=''2801370''>I</span> <span m=''2801660''>can
  vouch,</span> <span m=''2803710''>parallelism is hard.</span> <span m=''2805400''>Debugging</span>
  <span m=''2805720''>parallel</span> <span m=''2805910''>code</span> <span m=''2806090''>is
  even</span> <span m=''2806590''>harder.</span> <span m=''2807600''>So you''re</span>
  <span m=''2808210''>sort of</span> <span m=''2808420''>trying</span> <span m=''2808680''>to
  push</span> <span m=''2808760''>the limits</span> <span m=''2810180''>on</span>
  <span m=''2811050''>the</span> <span m=''2811300''>complexity of</span> <span m=''2812470''>messages</span>
  <span m=''2812970''>going all</span> <span m=''2813120''>over the world</span> <span
  m=''2814680''>and</span> <span m=''2815180''>the three</span> <span m=''2815510''>different</span>
  <span m=''2815800''>types of</span> <span m=''2816380''>parallelism</span> <span
  m=''2816770''>all</span> <span m=''2816830''>trying</span> <span m=''2817440''>to
  compete</span> <span m=''2818350''>in there.</span> <span m=''2819040''>Just do
  the simple thing.</span> <span m=''2820935''>Just get the simple thing working.</span>
  <span m=''2821882''>First get the sequential</span> <span m=''2822356''>code</span>
  <span m=''2822830''>working</span> <span m=''2824390''>and keep adding</span> <span
  m=''2824950''>more and</span> <span m=''2825060''>more story.</span> <span m=''2825650''>And</span>
  <span m=''2825821''>then</span> <span m=''2825992''>make</span> <span m=''2826163''>sure</span>
  <span m=''2826335''>that</span> <span m=''2826506''>each</span> <span m=''2826677''>level
  it works.</span> <span m=''2828430''>The problem</span> <span m=''2828670''>with</span>
  <span m=''2828820''>parallelism is</span> <span m=''2829470''>because</span> <span
  m=''2830060''>things that</span> <span m=''2830350''>determine</span> <span m=''2830570''>if
  some</span> <span m=''2830710''>bugs</span> <span m=''2830940''>that</span> <span
  m=''2831170''>might</span> <span m=''2831400''>show</span> <span m=''2831630''>up.</span>
  <span m=''2832020''>Data</span> <span m=''2832780''>might be hard.</span> <span
  m=''2833950''>But</span> <span m=''2835100''>design</span> <span m=''2835490''>absolutely</span>
  <span m=''2835630''>matters.</span> </p><p><span m=''2837770''>Another thing</span>
  <span m=''2838510''>I think,</span> <span m=''2839250''>especially for doing demos
  and stuff</span> <span m=''2841350''>would be nice,</span> <span m=''2841600''>would</span>
  <span m=''2841782''>be</span> <span m=''2841964''>to</span> <span m=''2842146''>have</span>
  <span m=''2842328''>a</span> <span m=''2842510''>knob</span> <span m=''2843610''>that</span>
  <span m=''2843870''>basically</span> <span m=''2844570''>you</span> <span m=''2844680''>can</span>
  <span m=''2844930''>tune.</span> <span m=''2845510''>So</span> <span m=''2845710''>you
  can say, OK,</span> <span m=''2845910''>no</span> <span m=''2846020''>SPEs.</span>
  <span m=''2846180''>Everything</span> <span m=''2846430''>running</span> <span m=''2847040''>in</span>
  <span m=''2847150''>PPE</span> <span m=''2848110''>one is two is.</span> <span m=''2849624''>So
  you can actually see</span> <span m=''2850558''>hopefully</span> <span m=''2851025''>in</span>
  <span m=''2851492''>your code</span> <span m=''2851960''>how</span> <span m=''2852270''>how
  things move</span> <span m=''2856193''>for the demo part.</span> </p><p><span m=''2863200''>PROFESSOR:
  You had a</span> <span m=''2863370''>question?</span> <span m=''2863770''>All</span>
  <span m=''2866300''>right.</span> <span m=''2866550''>We''ll</span> <span m=''2866670''>take</span>
  <span m=''2866850''>a</span> <span m=''2866980''>brief</span> <span m=''2867240''>break</span>
  <span m=''2867540''>and</span> <span m=''2867890''>do</span> <span m=''2868010''>the</span>
  <span m=''2868130''>quizzes</span> <span m=''2868390''>in the</span> <span m=''2868470''>meantime.</span>
  </p>'
type: course
uid: 306cd571b5462d3716442dda000bb886

---
None