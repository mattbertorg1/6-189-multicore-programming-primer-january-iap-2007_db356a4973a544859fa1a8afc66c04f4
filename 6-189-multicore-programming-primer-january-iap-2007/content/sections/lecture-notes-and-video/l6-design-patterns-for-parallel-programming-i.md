---
about_this_resource_text: <p><strong>Topics covered:</strong> Design patterns for
  parallel programming I</p><p><strong>Instructor:</strong> Rodric Rabbah, IBM</p><p>Subtitles
  are provided through the generous assistance of Rohan Pai.</p>
course_id: 6-189-multicore-programming-primer-january-iap-2007
embedded_media:
- id: l6.jpg
  parent_uid: e551fb0d383f0b60a4cb1eef41a1c90b
  technical_location: https://ocw.mit.edu/courses/electrical-engineering-and-computer-science/6-189-multicore-programming-primer-january-iap-2007/lecture-notes-and-video/l6-design-patterns-for-parallel-programming-i/l6.jpg
  title: 'L6: Design Patterns for Parallel Programming I'
  type: null
  uid: 1f80a1773bf3ab4f6c125defb71bfeaa
- id: Video-YouTube-Stream
  media_location: 4_B2x3UVLAo
  parent_uid: e551fb0d383f0b60a4cb1eef41a1c90b
  title: Video-YouTube-Stream
  type: Video
  uid: afb5f15de48ce67408fe44d703460fbe
- id: Thumbnail-YouTube-JPG
  media_location: https://img.youtube.com/vi/4_B2x3UVLAo/default.jpg
  parent_uid: e551fb0d383f0b60a4cb1eef41a1c90b
  title: Thumbnail-YouTube-JPG
  type: Thumbnail
  uid: 3d59506ce0ec6b0b4946caffe5f61732
- id: Video-iTunesU-MP4
  media_location: https://itunes.apple.com/us/itunes-u/id341597759
  parent_uid: e551fb0d383f0b60a4cb1eef41a1c90b
  title: Video-iTunes U-MP4
  type: Video
  uid: 6cd63e9ada182b1974ad5b3a70ad297f
- id: Video-InternetArchive-MP4
  media_location: http://www.archive.org/download/MIT6.189IAP07/ocw-6.189-iap07-lec06_300k.mp4
  parent_uid: e551fb0d383f0b60a4cb1eef41a1c90b
  title: Video-Internet Archive-MP4
  type: Video
  uid: 2e5cb60624559ce8aae8115cbc495cec
- id: Thumbnail-OCW-JPG
  parent_uid: e551fb0d383f0b60a4cb1eef41a1c90b
  title: Thumbnail-OCW-JPG
  type: Thumbnail
  uid: 1600de1a91c6dff0d11d1d5f614ce890
- id: 3Play-3PlayYouTubeid-MP4
  media_location: 4_B2x3UVLAo
  parent_uid: e551fb0d383f0b60a4cb1eef41a1c90b
  title: 3Play-3Play YouTube id
  type: 3Play
  uid: 34eeccda9465290e37aa60cbbfc9be57
- id: 4_B2x3UVLAo.srt
  parent_uid: e551fb0d383f0b60a4cb1eef41a1c90b
  technical_location: https://ocw.mit.edu/courses/electrical-engineering-and-computer-science/6-189-multicore-programming-primer-january-iap-2007/lecture-notes-and-video/l6-design-patterns-for-parallel-programming-i/4_B2x3UVLAo.srt
  title: 3play caption file
  type: null
  uid: 75cf628d64a1c92c1ca6ad8b154edb53
- id: 4_B2x3UVLAo.pdf
  parent_uid: e551fb0d383f0b60a4cb1eef41a1c90b
  technical_location: https://ocw.mit.edu/courses/electrical-engineering-and-computer-science/6-189-multicore-programming-primer-january-iap-2007/lecture-notes-and-video/l6-design-patterns-for-parallel-programming-i/4_B2x3UVLAo.pdf
  title: 3play pdf file
  type: null
  uid: 3bd3b6e0546acbdc52e9f5f501942c76
- id: Caption-3Play YouTube id-SRT
  parent_uid: e551fb0d383f0b60a4cb1eef41a1c90b
  title: Caption-3Play YouTube id-SRT-English - US
  type: Caption
  uid: 46b25f500243b8a916fcdcf8b5ac91d4
- id: Transcript-3Play YouTube id-PDF
  parent_uid: e551fb0d383f0b60a4cb1eef41a1c90b
  title: Transcript-3Play YouTube id-PDF-English - US
  type: Transcript
  uid: e4054450460a2f4ef8c2988494a1c68c
inline_embed_id: 94312560l6:designpatternsforparallelprogrammingi24426047
layout: video
order_index: null
parent_uid: 69885f30bae5c69316fc5492e4404278
related_resources_text: <p>Lecture Notes (<a target="_blank" title="Open in a new
  window." href="./resolveuid/9808de6a4c059325b61e8d632f5c9307">PDF</a>)</p>
short_url: l6-design-patterns-for-parallel-programming-i
technical_location: https://ocw.mit.edu/courses/electrical-engineering-and-computer-science/6-189-multicore-programming-primer-january-iap-2007/lecture-notes-and-video/l6-design-patterns-for-parallel-programming-i
template_type: Tabbed
title: 'L6: Design Patterns for Parallel Programming I'
transcript: '<p><span m=''0''>The</span> <span m=''140''>following</span> <span m=''540''>content</span>
  <span m=''1130''>is</span> <span m=''1260''>provided</span> <span m=''1710''>under
  a</span> <span m=''2020''>Creative</span> <span m=''2430''>Commons</span> <span
  m=''3880''>license.</span> <span m=''4000''>Your</span> <span m=''4110''>support</span>
  <span m=''4660''>will</span> <span m=''4790''>help</span> <span m=''5030''>MIT</span>
  <span m=''5330''>OpenCourseWare</span> <span m=''6300''>continue</span> <span m=''6790''>to</span>
  <span m=''6950''>offer</span> <span m=''7360''>high</span> <span m=''7530''>quality</span>
  <span m=''8050''>educational</span> <span m=''8660''>resources for</span> <span
  m=''9440''>free.</span> <span m=''10560''>To</span> <span m=''10660''>make</span>
  <span m=''10860''>a</span> <span m=''10920''>donation</span> <span m=''11660''>or</span>
  <span m=''11830''>view</span> <span m=''12340''>additional</span> <span m=''12740''>materials</span>
  <span m=''13095''>from</span> <span m=''13450''>hundreds</span> <span m=''13930''>of</span>
  <span m=''14070''>MIT</span> <span m=''14410''>courses,</span> <span m=''15370''>visit</span>
  <span m=''15730''>MIT</span> <span m=''16020''>OpenCourseWare</span> <span m=''16350''>at</span>
  <span m=''16610''>ocw.mit.edu.</span> </p><p><span m=''22740''>PROFESSOR: So</span>
  <span m=''22870''>in</span> <span m=''23010''>this</span> <span m=''23070''>second</span>
  <span m=''23370''>lecture</span> <span m=''24850''>we''re</span> <span m=''24960''>going
  to</span> <span m=''25110''>talk</span> <span m=''25350''>about</span> <span m=''26650''>some</span>
  <span m=''27090''>design</span> <span m=''27470''>patterns</span> <span m=''27960''>for</span>
  <span m=''28090''>parallel</span> <span m=''28460''>programming.</span> <span m=''29830''>And</span>
  <span m=''30470''>to</span> <span m=''31040''>tell</span> <span m=''31240''>you</span>
  <span m=''31320''>a</span> <span m=''31450''>little</span> <span m=''31660''>bit</span>
  <span m=''32060''>about what</span> <span m=''32240''>a design</span> <span m=''32640''>pattern</span>
  <span m=''32990''>is</span> <span m=''33180''>and</span> <span m=''33320''>why</span>
  <span m=''33580''>is it</span> <span m=''33730''>useful.</span> <span m=''34340''>And</span>
  <span m=''34660''>some</span> <span m=''34780''>of</span> <span m=''34890''>you,</span>
  <span m=''35000''>if</span> <span m=''35110''>you''ve</span> <span m=''35270''>taken</span>
  <span m=''35580''>object</span> <span m=''35910''>oriented</span> <span m=''36440''>programming</span>
  <span m=''36730''>you''ve</span> <span m=''36820''>probably</span> <span m=''37150''>already</span>
  <span m=''37820''>have</span> <span m=''37970''>seen</span> <span m=''38270''>design</span>
  <span m=''38450''>patterns</span> <span m=''38770''>before.</span> <span m=''40580''>So</span>
  <span m=''40820''>I ended</span> <span m=''41170''>the</span> <span m=''41260''>last</span>
  <span m=''41570''>lecture</span> <span m=''41850''>with</span> <span m=''42490''>OK,</span>
  <span m=''42870''>so I</span> <span m=''42980''>understand</span> <span m=''43470''>some</span>
  <span m=''43600''>of</span> <span m=''43660''>the</span> <span m=''43720''>performance</span>
  <span m=''44150''>implications,</span> <span m=''44820''>how</span> <span m=''44940''>do</span>
  <span m=''45040''>I</span> <span m=''45150''>go</span> <span m=''45330''>about</span>
  <span m=''46100''>parallelizing</span> <span m=''46580''>my</span> <span m=''46690''>program?</span>
  <span m=''48510''>This</span> <span m=''48660''>is</span> <span m=''48920''>a</span>
  <span m=''49270''>flyer</span> <span m=''49650''>I</span> <span m=''49690''>found</span>
  <span m=''50780''>quite</span> <span m=''51670''>often</span> <span m=''51960''>in</span>
  <span m=''52190''>books</span> <span m=''52560''>and</span> <span m=''52950''>talks</span>
  <span m=''53580''>on</span> <span m=''53900''>parallel</span> <span m=''54160''>programming.</span>
  <span m=''54600''>It</span> <span m=''55040''>essentially</span> <span m=''55540''>lays</span>
  <span m=''55850''>out</span> <span m=''56130''>4</span> <span m=''56380''>common</span>
  <span m=''56700''>steps</span> <span m=''57050''>for</span> <span m=''58680''>parallelizing</span>
  <span m=''58960''>your</span> <span m=''59090''>program.</span> <span m=''60680''>So</span>
  <span m=''61130''>often,</span> <span m=''61730''>you</span> <span m=''61870''>start</span>
  <span m=''62090''>out</span> <span m=''62200''>with</span> <span m=''62310''>sequential</span>
  <span m=''62680''>programs.</span> <span m=''63510''>This</span> <span m=''63630''>shouldn''t</span>
  <span m=''63890''>be</span> <span m=''63950''>surprising</span> <span m=''64560''>since</span>
  <span m=''65340''>for</span> <span m=''65500''>a</span> <span m=''65570''>long</span>
  <span m=''65830''>time</span> <span m=''66260''>as</span> <span m=''66550''>you''ve</span>
  <span m=''66810''>heard</span> <span m=''67080''>in earlier</span> <span m=''67420''>lectures,</span>
  <span m=''68050''>people</span> <span m=''68330''>just</span> <span m=''68610''>coded</span>
  <span m=''68910''>sequential</span> <span m=''69350''>code</span> <span m=''69630''>and</span>
  <span m=''69740''>that</span> <span m=''69870''>was</span> <span m=''70140''>just</span>
  <span m=''70960''>good</span> <span m=''71180''>enough.</span> <span m=''72190''>So</span>
  <span m=''72470''>now</span> <span m=''73000''>the</span> <span m=''73090''>problem</span>
  <span m=''73440''>is</span> <span m=''73670''>you</span> <span m=''73800''>want
  to</span> <span m=''73960''>take</span> <span m=''74170''>that</span> <span m=''74330''>sequential</span>
  <span m=''74740''>code</span> <span m=''75220''>or</span> <span m=''75560''>you</span>
  <span m=''75660''>want</span> <span m=''75870''>to</span> <span m=''75980''>still</span>
  <span m=''76250''>write</span> <span m=''76480''>sequential</span> <span m=''76820''>code</span>
  <span m=''77020''>just</span> <span m=''77170''>because</span> <span m=''77410''>it''s</span>
  <span m=''77550''>conceptually</span> <span m=''77980''>easier</span> <span m=''78830''>and</span>
  <span m=''79070''>you</span> <span m=''79130''>want</span> <span m=''79290''>to</span>
  <span m=''79360''>be</span> <span m=''79440''>able</span> <span m=''79590''>to</span>
  <span m=''79670''>parallelize</span> <span m=''80170''>it</span> <span m=''80420''>so</span>
  <span m=''80530''>you</span> <span m=''80670''>can</span> <span m=''80910''>map</span>
  <span m=''81350''>it</span> <span m=''81880''>down</span> <span m=''82170''>to</span>
  <span m=''82580''>your</span> <span m=''82790''>parallel</span> <span m=''83240''>architecture,</span>
  <span m=''83840''>which</span> <span m=''84140''>in</span> <span m=''84230''>this</span>
  <span m=''84360''>example</span> <span m=''84730''>has</span> <span m=''85490''>4</span>
  <span m=''85670''>processors.</span> </p><p><span m=''86930''>So</span> <span m=''87190''>the</span>
  <span m=''87300''>first</span> <span m=''87520''>step</span> <span m=''87800''>is</span>
  <span m=''88450''>you</span> <span m=''88540''>take</span> <span m=''88740''>your</span>
  <span m=''88850''>sequential</span> <span m=''89340''>program</span> <span m=''90230''>and</span>
  <span m=''90630''>you</span> <span m=''90780''>divide it</span> <span m=''91200''>up</span>
  <span m=''91360''>into</span> <span m=''91780''>tasks.</span> <span m=''92760''>So</span>
  <span m=''92890''>during</span> <span m=''93180''>the</span> <span m=''93280''>project</span>
  <span m=''93680''>reviews,</span> <span m=''94070''>for</span> <span m=''94170''>example,</span>
  <span m=''94590''>yesterday</span> <span m=''95030''>when</span> <span m=''95170''>I</span>
  <span m=''95250''>talked</span> <span m=''95550''>to</span> <span m=''96260''>each</span>
  <span m=''96470''>team</span> <span m=''96660''>individually</span> <span m=''97360''>we</span>
  <span m=''97460''>sort</span> <span m=''97610''>of</span> <span m=''97680''>talked</span>
  <span m=''97980''>about</span> <span m=''98200''>this</span> <span m=''98500''>and
  you</span> <span m=''98710''>sort</span> <span m=''98880''>of</span> <span m=''98960''>stumbled</span>
  <span m=''99370''>on</span> <span m=''100220''>these</span> <span m=''100560''>4</span>
  <span m=''100780''>steps</span> <span m=''101740''>whether</span> <span m=''101970''>you</span>
  <span m=''102380''>realized</span> <span m=''102750''>it</span> <span m=''102840''>or</span>
  <span m=''102910''>not.</span> <span m=''104190''>And</span> <span m=''104430''>so</span>
  <span m=''104730''>you</span> <span m=''104850''>come</span> <span m=''104990''>up</span>
  <span m=''105110''>with</span> <span m=''105260''>these</span> <span m=''105480''>tasks</span>
  <span m=''105880''>and</span> <span m=''106550''>then</span> <span m=''107390''>each</span>
  <span m=''107570''>one</span> <span m=''107750''>essentially</span> <span m=''108300''>incapsulates</span>
  <span m=''109000''>some</span> <span m=''109260''>computation.</span> <span m=''110670''>And</span>
  <span m=''110810''>then</span> <span m=''110930''>you</span> <span m=''111160''>group</span>
  <span m=''111410''>them</span> <span m=''111550''>together,</span> <span m=''112020''>so</span>
  <span m=''112160''>this</span> <span m=''112270''>is</span> <span m=''112690''>some</span>
  <span m=''112870''>granularity</span> <span m=''113210''>adjustment</span> <span
  m=''113900''>and</span> <span m=''114050''>you</span> <span m=''114120''>map</span>
  <span m=''114330''>them</span> <span m=''114460''>down</span> <span m=''114770''>to</span>
  <span m=''114880''>processes.</span> <span m=''115530''>These</span> <span m=''115710''>are</span>
  <span m=''115790''>things</span> <span m=''116080''>you</span> <span m=''116220''>can</span>
  <span m=''116660''>pose</span> <span m=''116760''>into</span> <span m=''116990''>threads,</span>
  <span m=''117210''>for</span> <span m=''117360''>example.</span> <span m=''118370''>And</span>
  <span m=''118540''>then</span> <span m=''118820''>you</span> <span m=''118910''>have</span>
  <span m=''119100''>to</span> <span m=''119250''>essentially</span> <span m=''120070''>plot</span>
  <span m=''120320''>these</span> <span m=''120480''>down</span> <span m=''120790''>onto</span>
  <span m=''121190''>actual</span> <span m=''122370''>processors</span> <span m=''123170''>and</span>
  <span m=''123710''>they</span> <span m=''123810''>have</span> <span m=''123980''>to</span>
  <span m=''124100''>talk</span> <span m=''124510''>with</span> <span m=''124660''>each</span>
  <span m=''124850''>other,</span> <span m=''125040''>so</span> <span m=''125140''>you</span>
  <span m=''125210''>have</span> <span m=''125320''>to</span> <span m=''125410''>orchestrate
  to</span> <span m=''125930''>communication</span> <span m=''127250''>and</span>
  <span m=''127490''>then</span> <span m=''127660''>finally</span> <span m=''128010''>do</span>
  <span m=''128140''>the</span> <span m=''128220''>execution.</span> <span m=''130110''>So</span>
  <span m=''130510''>step</span> <span m=''130700''>through</span> <span m=''132380''>each</span>
  <span m=''132560''>one</span> <span m=''132710''>of</span> <span m=''132780''>these</span>
  <span m=''133230''>at</span> <span m=''135310''>a</span> <span m=''135440''>time.</span>
  <span m=''136280''>Sort</span> <span m=''136440''>of</span> <span m=''136600''>composition</span>
  <span m=''137400''>and</span> <span m=''137590''>recall</span> <span m=''138130''>that</span>
  <span m=''138500''>just</span> <span m=''138740''>really</span> <span m=''138960''>effects</span>
  <span m=''140050''>or</span> <span m=''140300''>just</span> <span m=''140590''>really</span>
  <span m=''140830''>is</span> <span m=''141520''>effected</span> <span m=''141990''>by</span>
  <span m=''142610''>Amdahl''s</span> <span m=''142880''>Law.</span> <span m=''143450''>And</span>
  <span m=''143580''>that</span> <span m=''143730''>if</span> <span m=''143950''>there''s</span>
  <span m=''144130''>not</span> <span m=''144290''>a</span> <span m=''144320''>whole</span>
  <span m=''144560''>lot</span> <span m=''144800''>of</span> <span m=''145520''>parallels</span>
  <span m=''145870''>in</span> <span m=''145950''>the</span> <span m=''146110''>application</span>
  <span m=''146660''>your</span> <span m=''146780''>decomposition</span> <span m=''147680''>is</span>
  <span m=''147870''>a</span> <span m=''147950''>waste</span> <span m=''148160''>of</span>
  <span m=''148220''>time.</span> <span m=''148590''>There''s</span> <span m=''148720''>not</span>
  <span m=''148890''>really</span> <span m=''149110''>a</span> <span m=''149140''>whole</span>
  <span m=''149300''>lot</span> <span m=''149490''>to</span> <span m=''149570''>get.</span>
  <span m=''150340''>But</span> <span m=''150470''>what</span> <span m=''150570''>you''re</span>
  <span m=''150710''>trying</span> <span m=''150940''>to</span> <span m=''151010''>do</span>
  <span m=''151190''>is</span> <span m=''151530''>identify</span> <span m=''152150''>concurrency</span>
  <span m=''153010''>in</span> <span m=''153150''>your</span> <span m=''153260''>application</span>
  <span m=''153960''>and</span> <span m=''154150''>figure</span> <span m=''154400''>out</span>
  <span m=''154580''>at</span> <span m=''154940''>what</span> <span m=''155200''>level</span>
  <span m=''155510''>to</span> <span m=''155610''>exploit</span> <span m=''156050''>it.</span>
  <span m=''156570''>So</span> <span m=''157010''>what</span> <span m=''157140''>you''re</span>
  <span m=''157240''>trying</span> <span m=''157440''>to</span> <span m=''157510''>do
  is</span> <span m=''157700''>divide</span> <span m=''158140''>up</span> <span m=''158250''>your</span>
  <span m=''158350''>computation</span> <span m=''159140''>into tasks</span> <span
  m=''160030''>and</span> <span m=''160880''>eventually</span> <span m=''161300''>these</span>
  <span m=''161510''>are</span> <span m=''161610''>going</span> <span m=''161810''>to</span>
  <span m=''161920''>be</span> <span m=''162050''>distributed</span> <span m=''162480''>among</span>
  <span m=''162690''>processors</span> <span m=''163640''>and</span> <span m=''163790''>you</span>
  <span m=''163850''>want</span> <span m=''164050''>to</span> <span m=''164160''>find</span>
  <span m=''164510''>enough</span> <span m=''164780''>of</span> <span m=''164900''>them</span>
  <span m=''165510''>so</span> <span m=''165700''>that you</span> <span m=''165840''>can</span>
  <span m=''165960''>keep</span> <span m=''166200''>all</span> <span m=''166350''>the</span>
  <span m=''166430''>processors</span> <span m=''167010''>busy.</span> <span m=''168190''>And</span>
  <span m=''168360''>remember</span> <span m=''168600''>that</span> <span m=''169100''>the</span>
  <span m=''169220''>more</span> <span m=''169520''>of</span> <span m=''169620''>these</span>
  <span m=''169800''>that</span> <span m=''169930''>you</span> <span m=''170030''>have</span>
  <span m=''170760''>this</span> <span m=''170990''>gives</span> <span m=''171200''>you</span>
  <span m=''171620''>sort</span> <span m=''171760''>of</span> <span m=''171820''>an</span>
  <span m=''171920''>upper</span> <span m=''172130''>bound</span> <span m=''172330''>on</span>
  <span m=''172660''>your</span> <span m=''172880''>potential</span> <span m=''173290''>speed</span>
  <span m=''173530''>up.</span> <span m=''174640''>And</span> <span m=''174960''>as</span>
  <span m=''175210''>in the</span> <span m=''175430''>rate</span> <span m=''175640''>tracing</span>
  <span m=''175980''>example</span> <span m=''176240''>that</span> <span m=''176350''>I</span>
  <span m=''176380''>showed,</span> <span m=''177210''>the</span> <span m=''177500''>number</span>
  <span m=''177770''>of</span> <span m=''177880''>tasks</span> <span m=''178250''>that</span>
  <span m=''178360''>you</span> <span m=''178450''>have</span> <span m=''178810''>may</span>
  <span m=''178910''>vary</span> <span m=''180030''>run</span> <span m=''180180''>time.</span>
  <span m=''180660''>So</span> <span m=''181050''>sometimes</span> <span m=''181630''>you</span>
  <span m=''181740''>might</span> <span m=''181930''>have</span> <span m=''182140''>lot</span>
  <span m=''182340''>of</span> <span m=''182430''>arrays</span> <span m=''182720''>bouncing</span>
  <span m=''183020''>off</span> <span m=''183170''>a</span> <span m=''183220''>lot</span>
  <span m=''183390''>of</span> <span m=''183470''>things,</span> <span m=''184200''>and</span>
  <span m=''184320''>sometimes</span> <span m=''184680''>you</span> <span m=''184770''>might</span>
  <span m=''184960''>not</span> <span m=''185150''>have</span> <span m=''185510''>a</span>
  <span m=''185830''>whole</span> <span m=''185970''>lot</span> <span m=''186140''>of</span>
  <span m=''186220''>reflection</span> <span m=''188130''>going</span> <span m=''188400''>on</span>
  <span m=''188600''>so</span> <span m=''189390''>number</span> <span m=''189700''>of</span>
  <span m=''189800''>arrays</span> <span m=''190150''>will</span> <span m=''190380''>change</span>
  <span m=''190690''>over</span> <span m=''190850''>time.</span> </p><p><span m=''192720''>And</span>
  <span m=''193170''>in</span> <span m=''193350''>other</span> <span m=''193490''>applications,</span>
  <span m=''194060''>interactions,</span> <span m=''194670''>for</span> <span m=''194760''>example,</span>
  <span m=''195080''>between</span> <span m=''195440''>molecules</span> <span m=''195990''>might</span>
  <span m=''196120''>change</span> <span m=''196530''>in a</span> <span m=''196610''>molecular</span>
  <span m=''197530''>dynamic</span> <span m=''198290''>simulator.</span> <span m=''199960''>The</span>
  <span m=''200090''>assignment</span> <span m=''200650''>really</span> <span m=''201010''>effects</span>
  <span m=''201390''>granularity.</span> <span m=''201980''>This</span> <span m=''202190''>is</span>
  <span m=''202370''>where</span> <span m=''202600''>you''ve</span> <span m=''202780''>partitioned</span>
  <span m=''203210''>your</span> <span m=''203320''>tasks,</span> <span m=''203680''>you''re</span>
  <span m=''203770''>trying</span> <span m=''203980''>to</span> <span m=''204040''>group</span>
  <span m=''204210''>them</span> <span m=''204350''>together</span> <span m=''206540''>so</span>
  <span m=''206700''>that</span> <span m=''206840''>you''re</span> <span m=''207150''>taking</span>
  <span m=''207300''>into</span> <span m=''207760''>account,</span> <span m=''208240''>what</span>
  <span m=''208560''>is the</span> <span m=''208690''>communication</span> <span m=''209300''>cost</span>
  <span m=''209660''>going</span> <span m=''209870''>to</span> <span m=''209980''>be?</span>
  <span m=''210830''>What</span> <span m=''211060''>kind</span> <span m=''211270''>of</span>
  <span m=''211370''>locality</span> <span m=''211990''>am</span> <span m=''212110''>I</span>
  <span m=''212180''>going</span> <span m=''212410''>to</span> <span m=''212520''>deal</span>
  <span m=''212740''>with?</span> <span m=''214640''>And</span> <span m=''214810''>what</span>
  <span m=''214910''>kind</span> <span m=''215070''>of</span> <span m=''215140''>synchronization</span>
  <span m=''215800''>mechanisms</span> <span m=''216330''>do I</span> <span m=''216570''>need</span>
  <span m=''216760''>and</span> <span m=''216850''>how</span> <span m=''217020''>often</span>
  <span m=''217300''>do</span> <span m=''217380''>I</span> <span m=''217440''>need</span>
  <span m=''217570''>to</span> <span m=''217670''>synchronize?</span> <span m=''222980''>You</span>
  <span m=''223180''>adjust</span> <span m=''223380''>your</span> <span m=''223470''>granularity</span>
  <span m=''224020''>such</span> <span m=''224280''>that</span> <span m=''224420''>you</span>
  <span m=''224560''>end</span> <span m=''224700''>up</span> <span m=''224840''>with</span>
  <span m=''225020''>things</span> <span m=''225240''>that</span> <span m=''225340''>are</span>
  <span m=''225770''>load</span> <span m=''225980''>balanced</span> <span m=''226400''>and</span>
  <span m=''226680''>you</span> <span m=''226830''>try</span> <span m=''227050''>to</span>
  <span m=''227140''>reduce</span> <span m=''227460''>communication</span> <span m=''228060''>as</span>
  <span m=''228180''>much</span> <span m=''228360''>as</span> <span m=''228470''>possible.</span>
  <span m=''230300''>And</span> <span m=''230450''>structured</span> <span m=''230820''>approaches</span>
  <span m=''231270''>might</span> <span m=''231400''>work</span> <span m=''231640''>well.</span>
  <span m=''231870''>You</span> <span m=''232000''>might</span> <span m=''232260''>look</span>
  <span m=''232450''>at</span> <span m=''232520''>the</span> <span m=''232610''>code,</span>
  <span m=''233200''>do</span> <span m=''233390''>some</span> <span m=''233590''>inspection,</span>
  <span m=''234480''>you</span> <span m=''234575''>might</span> <span m=''234670''>understand
  the</span> <span m=''235180''>application,</span> <span m=''236360''>but</span>
  <span m=''236520''>there</span> <span m=''236630''>are</span> <span m=''236720''>some</span>
  <span m=''236900''>well-known</span> <span m=''237360''>design</span> <span m=''237580''>patterns</span>
  <span m=''238050''>which</span> <span m=''238320''>is</span> <span m=''238540''>essentially</span>
  <span m=''239000''>the</span> <span m=''239070''>thing</span> <span m=''239250''>we''re</span>
  <span m=''239330''>going</span> <span m=''239530''>to</span> <span m=''239650''>get</span>
  <span m=''239820''>to</span> <span m=''240040''>try</span> <span m=''240230''>to</span>
  <span m=''240310''>help</span> <span m=''240540''>you</span> <span m=''240650''>with</span>
  <span m=''240840''>this.</span> </p><p><span m=''244470''>As</span> <span m=''244650''>programmers</span>
  <span m=''245960''>really,</span> <span m=''246480''>I</span> <span m=''246530''>think,</span>
  <span m=''246690''>we</span> <span m=''246820''>worry</span> <span m=''247090''>about</span>
  <span m=''247280''>partitioning</span> <span m=''247990''>first.</span> <span m=''250940''>This</span>
  <span m=''251190''>is</span> <span m=''251320''>really</span> <span m=''251580''>independent</span>
  <span m=''252270''>of</span> <span m=''252420''>an</span> <span m=''252510''>architecture</span>
  <span m=''253060''>programming</span> <span m=''253490''>model.</span> <span m=''254070''>Just</span>
  <span m=''254290''>taking</span> <span m=''254610''>my</span> <span m=''254760''>application</span>
  <span m=''255790''>and</span> <span m=''256360''>figuring</span> <span m=''256400''>out</span>
  <span m=''256440''>well,</span> <span m=''256690''>what</span> <span m=''256850''>are</span>
  <span m=''256920''>different</span> <span m=''257280''>parts</span> <span m=''257950''>that</span>
  <span m=''258110''>I</span> <span m=''258170''>need</span> <span m=''258360''>to</span>
  <span m=''258450''>compose</span> <span m=''258840''>together</span> <span m=''259220''>to</span>
  <span m=''259350''>build</span> <span m=''259580''>my</span> <span m=''259710''>application?</span>
  <span m=''260350''>So I''m</span> <span m=''260440''>going to</span> <span m=''260570''>show</span>
  <span m=''260730''>you</span> <span m=''260790''>an</span> <span m=''260850''>example</span>
  <span m=''261330''>of that.</span> <span m=''262100''>And</span> <span m=''262530''>one</span>
  <span m=''262720''>thing</span> <span m=''262950''>to</span> <span m=''263230''>keep</span>
  <span m=''263470''>in the</span> <span m=''263570''>back</span> <span m=''263810''>of</span>
  <span m=''263880''>your</span> <span m=''263980''>mind</span> <span m=''264310''>is</span>
  <span m=''264460''>that</span> <span m=''265010''>the</span> <span m=''265550''>complexity</span>
  <span m=''266630''>of</span> <span m=''267160''>how</span> <span m=''267370''>much</span>
  <span m=''267680''>partitioning</span> <span m=''268430''>work</span> <span m=''268720''>you</span>
  <span m=''268840''>actually</span> <span m=''269150''>have</span> <span m=''269400''>to</span>
  <span m=''270020''>do</span> <span m=''270160''>really</span> <span m=''270420''>effects</span>
  <span m=''270710''>your</span> <span m=''270820''>decision.</span> <span m=''271360''>So</span>
  <span m=''271670''>if</span> <span m=''271870''>you</span> <span m=''271990''>start</span>
  <span m=''272240''>out</span> <span m=''272300''>with</span> <span m=''272410''>some</span>
  <span m=''272560''>piece</span> <span m=''272770''>of</span> <span m=''272860''>code</span>
  <span m=''273140''>or</span> <span m=''273230''>you</span> <span m=''273390''>wrote</span>
  <span m=''273610''>your</span> <span m=''273720''>code</span> <span m=''274780''>in</span>
  <span m=''274980''>one</span> <span m=''275170''>way</span> <span m=''275620''>and</span>
  <span m=''275760''>you</span> <span m=''275840''>realize</span> <span m=''276280''>that
  to</span> <span m=''276370''>actually</span> <span m=''276730''>parallelize</span>
  <span m=''277150''>it</span> <span m=''277240''>requires</span> <span m=''277590''>so</span>
  <span m=''277680''>much</span> <span m=''277850''>more</span> <span m=''278030''>work,</span>
  <span m=''278860''>in</span> <span m=''278970''>some</span> <span m=''279120''>user</span>
  <span m=''279340''>studies</span> <span m=''279700''>we''ve</span> <span m=''279880''>done</span>
  <span m=''280130''>on</span> <span m=''280280''>sort</span> <span m=''280440''>of</span>
  <span m=''280510''>trying</span> <span m=''280730''>to</span> <span m=''280790''>get</span>
  <span m=''280900''>performance</span> <span m=''281560''>from</span> <span m=''281760''>code,</span>
  <span m=''282490''>it</span> <span m=''282610''>really</span> <span m=''282830''>effects</span>
  <span m=''283150''>how</span> <span m=''283250''>much</span> <span m=''283420''>work
  you</span> <span m=''283690''>actually</span> <span m=''284110''>do.</span> <span
  m=''284600''>And</span> <span m=''284990''>if</span> <span m=''285070''>something</span>
  <span m=''285370''>requires</span> <span m=''285730''>a</span> <span m=''285770''>lot</span>
  <span m=''285890''>of</span> <span m=''285950''>work,</span> <span m=''286120''>you</span>
  <span m=''286200''>might</span> <span m=''286340''>not</span> <span m=''286490''>do</span>
  <span m=''286610''>it</span> <span m=''286900''>even</span> <span m=''287130''>though</span>
  <span m=''287220''>it</span> <span m=''287290''>might</span> <span m=''287490''>have</span>
  <span m=''287710''>really</span> <span m=''287910''>hot</span> <span m=''288080''>payoff.</span>
  <span m=''288710''>So</span> <span m=''289760''>you</span> <span m=''289890''>want
  to</span> <span m=''290090''>be</span> <span m=''290180''>able</span> <span m=''290410''>to</span>
  <span m=''290520''>keep</span> <span m=''290740''>complexity</span> <span m=''291320''>down,</span>
  <span m=''291950''>so</span> <span m=''293160''>it</span> <span m=''293420''>pays</span>
  <span m=''293720''>off</span> <span m=''293940''>to</span> <span m=''294050''>really</span>
  <span m=''294280''>think</span> <span m=''294540''>well</span> <span m=''294790''>about</span>
  <span m=''295120''>your</span> <span m=''295260''>algorithm,</span> <span m=''295670''>how</span>
  <span m=''295850''>you</span> <span m=''295980''>structure</span> <span m=''296750''>it</span>
  <span m=''297000''>ahead</span> <span m=''297200''>of</span> <span m=''297310''>time.</span>
  </p><p><span m=''299430''>And</span> <span m=''300030''>finally,</span> <span m=''300340''>the
  last</span> <span m=''300620''>two</span> <span m=''300895''>stages</span> <span
  m=''301170''>I''ve lumped</span> <span m=''301470''>together.</span> <span m=''301880''>It''s</span>
  <span m=''301990''>really</span> <span m=''302190''>orchestration</span> <span m=''302860''>and</span>
  <span m=''303095''>mapping.</span> <span m=''303330''>I</span> <span m=''303450''>have</span>
  <span m=''303680''>my</span> <span m=''303830''>task,</span> <span m=''304570''>they</span>
  <span m=''304690''>need</span> <span m=''304880''>to</span> <span m=''304970''>communicate,</span>
  <span m=''305750''>so</span> <span m=''305870''>what</span> <span m=''305990''>kind</span>
  <span m=''306220''>of</span> <span m=''307230''>computation</span> <span m=''307780''>primitives</span>
  <span m=''308160''>do</span> <span m=''308310''>I</span> <span m=''308400''>need?</span>
  <span m=''308770''>What</span> <span m=''308910''>kind</span> <span m=''309120''>of</span>
  <span m=''309530''>communication</span> <span m=''310730''>primitives</span> <span
  m=''311110''>do</span> <span m=''311320''>I need?</span> <span m=''311450''>So am</span>
  <span m=''311610''>I</span> <span m=''311790''>packaging</span> <span m=''312240''>things</span>
  <span m=''312510''>up</span> <span m=''312640''>into</span> <span m=''312920''>threads?</span>
  <span m=''313590''>And</span> <span m=''314700''>they''re</span> <span m=''314890''>talking</span>
  <span m=''315190''>together</span> <span m=''315610''>over</span> <span m=''316560''>DMAs</span>
  <span m=''317320''>or</span> <span m=''318890''>shared</span> <span m=''319170''>memories.</span>
  <span m=''321270''>And</span> <span m=''321540''>what</span> <span m=''321650''>you</span>
  <span m=''321730''>want</span> <span m=''321880''>to</span> <span m=''321950''>do</span>
  <span m=''322100''>is</span> <span m=''322210''>try</span> <span m=''322360''>to</span>
  <span m=''322430''>preserve</span> <span m=''322790''>locality</span> <span m=''323670''>and</span>
  <span m=''323930''>then</span> <span m=''324050''>figure</span> <span m=''324300''>out</span>
  <span m=''324460''>how</span> <span m=''324650''>to</span> <span m=''325110''>come</span>
  <span m=''325270''>up</span> <span m=''325370''>with</span> <span m=''325470''>a</span>
  <span m=''325520''>scheduling</span> <span m=''325950''>order</span> <span m=''326260''>that</span>
  <span m=''326860''>preserves</span> <span m=''327320''>overall</span> <span m=''327710''>dependence</span>
  <span m=''328620''>of</span> <span m=''328800''>the</span> <span m=''328870''>computation.</span>
  </p><p><span m=''333390''>Parallel</span> <span m=''333730''>program</span> <span
  m=''334070''>by</span> <span m=''334210''>patterns</span> <span m=''335400''>is</span>
  <span m=''335740''>meant</span> <span m=''336010''>to</span> <span m=''336180''>essentially</span>
  <span m=''336540''>give</span> <span m=''336720''>you</span> <span m=''336870''>a</span>
  <span m=''336960''>cookbook</span> <span m=''337590''>or</span> <span m=''337780''>set</span>
  <span m=''337980''>of</span> <span m=''338100''>recipes</span> <span m=''338520''>you</span>
  <span m=''338630''>can</span> <span m=''338750''>follow</span> <span m=''340090''>to</span>
  <span m=''340460''>help</span> <span m=''340750''>you</span> <span m=''340880''>with</span>
  <span m=''341110''>different</span> <span m=''341420''>steps:</span> <span m=''342010''>decompose,</span>
  <span m=''342640''>assign,</span> <span m=''343050''>orchestrate</span> <span m=''343670''>and
  map.</span> <span m=''345100''>This</span> <span m=''345330''>could</span> <span
  m=''345490''>lead</span> <span m=''345740''>to</span> <span m=''345970''>really</span>
  <span m=''346190''>high</span> <span m=''346330''>quality</span> <span m=''346710''>solutions</span>
  <span m=''347190''>in some</span> <span m=''347390''>domains.</span> <span m=''347740''>So
  in the</span> <span m=''348010''>scientific</span> <span m=''348490''>computations</span>
  <span m=''351090''>there''s</span> <span m=''351260''>a</span> <span m=''351290''>lot</span>
  <span m=''351430''>of</span> <span m=''351490''>problems</span> <span m=''351820''>that
  are</span> <span m=''351910''>well</span> <span m=''352160''>understood</span> <span
  m=''352455''>and</span> <span m=''352750''>well</span> <span m=''352950''>studied</span>
  <span m=''353590''>and</span> <span m=''353810''>some</span> <span m=''353940''>of</span>
  <span m=''354010''>the</span> <span m=''354080''>frequently</span> <span m=''354530''>occurring</span>
  <span m=''354960''>things</span> <span m=''355180''>have</span> <span m=''355280''>been</span>
  <span m=''355430''>abstracted</span> <span m=''355950''>out</span> <span m=''356420''>and</span>
  <span m=''356660''>sort</span> <span m=''356830''>of</span> <span m=''357060''>recorded</span>
  <span m=''358020''>in</span> <span m=''358200''>patterns.</span> <span m=''360240''>And</span>
  <span m=''360950''>there''s</span> <span m=''361110''>another</span> <span m=''361310''>purpose
  to</span> <span m=''361680''>patterns</span> <span m=''362100''>too,</span> <span
  m=''362260''>in</span> <span m=''362360''>that</span> <span m=''362500''>they</span>
  <span m=''362700''>provide</span> <span m=''363210''>you</span> <span m=''363360''>with</span>
  <span m=''363630''>the</span> <span m=''363700''>vocabulary</span> <span m=''364470''>for--</span>
  <span m=''365360''>two</span> <span m=''365530''>programmers</span> <span m=''365980''>can</span>
  <span m=''366120''>talk</span> <span m=''366360''>to</span> <span m=''366430''>each</span>
  <span m=''366650''>other</span> <span m=''366930''>and</span> <span m=''367610''>use
  the</span> <span m=''367940''>right</span> <span m=''368100''>terminology</span>
  <span m=''368810''>and that</span> <span m=''368960''>conveys</span> <span m=''369290''>a</span>
  <span m=''369330''>whole</span> <span m=''369580''>lot</span> <span m=''369780''>of</span>
  <span m=''369890''>information</span> <span m=''370940''>without</span> <span m=''371200''>having</span>
  <span m=''371460''>to</span> <span m=''371550''>actually</span> <span m=''371990''>go</span>
  <span m=''372150''>through</span> <span m=''372430''>and</span> <span m=''373920''>understand</span>
  <span m=''375220''>all</span> <span m=''375530''>the</span> <span m=''375630''>details.</span>
  <span m=''376280''>You</span> <span m=''377400''>instantaneously</span> <span m=''378290''>know</span>
  <span m=''379560''>if</span> <span m=''379670''>I</span> <span m=''379740''>use</span>
  <span m=''380580''>a particular</span> <span m=''381180''>model.</span> <span m=''384010''>It</span>
  <span m=''384180''>can</span> <span m=''384330''>also</span> <span m=''384540''>help</span>
  <span m=''384750''>with</span> <span m=''385060''>software</span> <span m=''385560''>reusuability,</span>
  <span m=''386330''>malleability,</span> <span m=''386570''>and</span> <span m=''386910''>modularity.</span>
  <span m=''387640''>All</span> <span m=''387900''>of those</span> <span m=''388140''>things</span>
  <span m=''388370''>that are</span> <span m=''388470''>software</span> <span m=''388800''>engineer</span>
  <span m=''389240''>perspective</span> <span m=''390070''>from</span> <span m=''390250''>an</span>
  <span m=''390310''>engineering</span> <span m=''390680''>perspective</span> <span
  m=''391450''>are important.</span> </p><p><span m=''394060''>So</span> <span m=''394250''>brief</span>
  <span m=''394640''>history</span> <span m=''395120''>and</span> <span m=''395960''>I</span>
  <span m=''396270''>found</span> <span m=''396540''>this</span> <span m=''396730''>in</span>
  <span m=''397390''>some</span> <span m=''397540''>of</span> <span m=''397600''>the</span>
  <span m=''397660''>talks</span> <span m=''397980''>that I</span> <span m=''398090''>was</span>
  <span m=''398370''>researching.</span> <span m=''399770''>There''s</span> <span
  m=''400150''>a</span> <span m=''400210''>book</span> <span m=''400560''>by</span>
  <span m=''400790''>Christopher</span> <span m=''401230''>Alexander</span> <span
  m=''401810''>from</span> <span m=''402810''>Berkeley</span> <span m=''403230''>in</span>
  <span m=''403520''>1977</span> <span m=''404190''>that</span> <span m=''404500''>actually</span>
  <span m=''404920''>looked</span> <span m=''405180''>at</span> <span m=''406580''>classifying</span>
  <span m=''407190''>patterns</span> <span m=''407700''>or</span> <span m=''408130''>really</span>
  <span m=''408390''>listing</span> <span m=''408710''>patterns</span> <span m=''409200''>from
  an</span> <span m=''409550''>architectural</span> <span m=''410010''>perspective.</span>
  <span m=''410800''>He</span> <span m=''410890''>tried</span> <span m=''411100''>to</span>
  <span m=''411260''>look</span> <span m=''411460''>at</span> <span m=''411710''>what</span>
  <span m=''411860''>are</span> <span m=''411930''>some</span> <span m=''412880''>patterns</span>
  <span m=''413170''>that</span> <span m=''413390''>occur</span> <span m=''413790''>in
  living</span> <span m=''414040''>designs</span> <span m=''414510''>and</span> <span
  m=''415950''>recording</span> <span m=''416360''>those.</span> <span m=''417230''>So</span>
  <span m=''417370''>as</span> <span m=''417480''>an</span> <span m=''417570''>example,</span>
  <span m=''418070''>for</span> <span m=''418200''>example,</span> <span m=''418500''>there''s</span>
  <span m=''418760''>a</span> <span m=''418850''>6</span> <span m=''419150''>foot</span>
  <span m=''419320''>balcony</span> <span m=''420470''>pattern.</span> <span m=''420850''>So
  if</span> <span m=''420950''>you''re</span> <span m=''421050''>going</span> <span
  m=''421240''>to</span> <span m=''421330''>build</span> <span m=''421530''>a</span>
  <span m=''421570''>balcony</span> <span m=''421960''>you</span> <span m=''422120''>should</span>
  <span m=''422300''>build</span> <span m=''422530''>it</span> <span m=''422660''>6</span>
  <span m=''422920''>foot</span> <span m=''423570''>deep</span> <span m=''424100''>and</span>
  <span m=''424170''>you</span> <span m=''424230''>should</span> <span m=''424370''>have</span>
  <span m=''424590''>it</span> <span m=''424710''>slightly</span> <span m=''425040''>recessed</span>
  <span m=''426160''>and</span> <span m=''426300''>so</span> <span m=''426430''>on</span>
  <span m=''426590''>because</span> <span m=''426930''>this</span> <span m=''427070''>is</span>
  <span m=''427210''>what''s</span> <span m=''427360''>commonly</span> <span m=''427780''>used</span>
  <span m=''428060''>and</span> <span m=''428310''>these</span> <span m=''428480''>are</span>
  <span m=''428900''>the</span> <span m=''429050''>kinds</span> <span m=''429300''>of</span>
  <span m=''429370''>balconies</span> <span m=''430090''>that</span> <span m=''430230''>have</span>
  <span m=''430910''>good</span> <span m=''431080''>properties</span> <span m=''433140''>architecturally.</span>
  <span m=''433850''>Now</span> <span m=''434230''>I</span> <span m=''434320''>don''t</span>
  <span m=''434630''>know</span> <span m=''434850''>whether</span> <span m=''435080''>this</span>
  <span m=''435260''>book</span> <span m=''435580''>actually</span> <span m=''435970''>had</span>
  <span m=''436160''>a</span> <span m=''436190''>whole</span> <span m=''436330''>lot</span>
  <span m=''436480''>of</span> <span m=''436580''>impact</span> <span m=''436880''>on</span>
  <span m=''436990''>how</span> <span m=''437130''>people</span> <span m=''437380''>designed</span>
  <span m=''437700''>architectures.</span> <span m=''439180''>Certainly</span> <span
  m=''439560''>not</span> <span m=''439740''>probably</span> <span m=''440000''>for</span>
  <span m=''440120''>the</span> <span m=''440190''>Stata</span> <span m=''440510''>Center,</span>
  <span m=''441130''>but</span> <span m=''443070''>some</span> <span m=''443350''>patterns</span>
  <span m=''444380''>from</span> <span m=''444640''>object</span> <span m=''444940''>oriented</span>
  <span m=''445310''>programming,</span> <span m=''445740''>I</span> <span m=''445820''>think,</span>
  <span m=''446050''>many of</span> <span m=''446360''>you</span> <span m=''446650''>have</span>
  <span m=''446830''>already</span> <span m=''447100''>seen</span> <span m=''447360''>these</span>
  <span m=''447760''>by the</span> <span m=''447980''>Gang of</span> <span m=''448130''>Four</span>
  <span m=''449640''>in</span> <span m=''449760''>1995--</span> <span m=''451480''>really</span>
  <span m=''452040''>sort of</span> <span m=''452620''>organized and</span> <span
  m=''453250''>classified</span> <span m=''454090''>and</span> <span m=''454480''>came</span>
  <span m=''454680''>up</span> <span m=''454820''>with</span> <span m=''455760''>different</span>
  <span m=''456180''>ways</span> <span m=''456520''>of--</span> <span m=''458730''>or</span>
  <span m=''459910''>captured</span> <span m=''460750''>different</span> <span m=''461060''>ways</span>
  <span m=''461270''>of</span> <span m=''461370''>programming</span> <span m=''461740''>that</span>
  <span m=''461840''>people</span> <span m=''462090''>had</span> <span m=''462240''>been</span>
  <span m=''462410''>using.</span> <span m=''463060''>You</span> <span m=''463250''>know,</span>
  <span m=''463340''>things</span> <span m=''463570''>like</span> <span m=''463690''>the</span>
  <span m=''463770''>visitor</span> <span m=''464080''>pattern,</span> <span m=''464410''>for</span>
  <span m=''464540''>example,</span> <span m=''465230''>some</span> <span m=''465360''>of</span>
  <span m=''465490''>you</span> <span m=''465610''>might</span> <span m=''466220''>know.</span>
  </p><p><span m=''472460''>So</span> <span m=''472690''>in</span> <span m=''472900''>2005,</span>
  <span m=''473990''>not</span> <span m=''474170''>too</span> <span m=''474270''>long</span>
  <span m=''474500''>ago</span> <span m=''474800''>there</span> <span m=''474920''>was</span>
  <span m=''475640''>a</span> <span m=''475720''>new</span> <span m=''475880''>book,</span>
  <span m=''476090''>which</span> <span m=''476280''>I''m</span> <span m=''476410''>using</span>
  <span m=''478110''>to</span> <span m=''478270''>create</span> <span m=''478560''>some</span>
  <span m=''478670''>of</span> <span m=''478750''>these</span> <span m=''478950''>slides.</span>
  <span m=''479860''>Really</span> <span m=''480080''>came</span> <span m=''480320''>up</span>
  <span m=''480490''>with</span> <span m=''481440''>or</span> <span m=''481960''>recorded</span>
  <span m=''483540''>patterns</span> <span m=''483970''>for</span> <span m=''484790''>parallel</span>
  <span m=''485540''>programming.</span> <span m=''486480''>And</span> <span m=''486830''>they</span>
  <span m=''486930''>identified</span> <span m=''487570''>really</span> <span m=''487750''>4</span>
  <span m=''488020''>design</span> <span m=''488370''>spaces.</span> <span m=''489500''>I</span>
  <span m=''489720''>think</span> <span m=''490030''>these</span> <span m=''490500''>are</span>
  <span m=''491570''>sort  of</span> <span m=''491820''>structured</span> <span m=''493040''>to</span>
  <span m=''493230''>express</span> <span m=''494070''>or</span> <span m=''494260''>capture</span>
  <span m=''494750''>different</span> <span m=''495160''>elements.</span> <span m=''495930''>So</span>
  <span m=''496270''>some</span> <span m=''496570''>elements</span> <span m=''496960''>are</span>
  <span m=''497140''>for</span> <span m=''497310''>the</span> <span m=''497430''>algorithm</span>
  <span m=''498100''>expression,</span> <span m=''499280''>I''ve</span> <span m=''499580''>listed</span>
  <span m=''499860''>those</span> <span m=''500050''>here</span> <span m=''500660''>and</span>
  <span m=''500790''>some</span> <span m=''501030''>are</span> <span m=''501136''>for</span>
  <span m=''501243''>the</span> <span m=''501350''>actual</span> <span m=''501680''>software</span>
  <span m=''502080''>construction</span> <span m=''502600''>or</span> <span m=''502740''>the</span>
  <span m=''502820''>actual</span> <span m=''503180''>implementation.</span> <span
  m=''504380''>So</span> <span m=''504910''>under</span> <span m=''505280''>algorithm</span>
  <span m=''505740''>expression</span> <span m=''506460''>it''s</span> <span m=''506620''>really</span>
  <span m=''507670''>the</span> <span m=''507890''>thing</span> <span m=''508120''>of</span>
  <span m=''508380''>decomposition;</span> <span m=''509090''>finding</span> <span
  m=''509550''>concurrency.</span> <span m=''509920''>Where</span> <span m=''510140''>are
  my</span> <span m=''510330''>tasks?</span> <span m=''512050''>In</span> <span m=''512230''>the</span>
  <span m=''512460''>algorithm</span> <span m=''512580''>structure,</span> <span m=''513020''>well,</span>
  <span m=''513240''>you</span> <span m=''513440''>might</span> <span m=''513680''>need</span>
  <span m=''513960''>some</span> <span m=''515130''>way</span> <span m=''515390''>of</span>
  <span m=''515710''>packaging</span> <span m=''516110''>those</span> <span m=''516350''>tasks</span>
  <span m=''516680''>together</span> <span m=''518160''>so</span> <span m=''518420''>that</span>
  <span m=''518530''>they</span> <span m=''518630''>can</span> <span m=''518770''>talk</span>
  <span m=''519050''>to</span> <span m=''519140''>each</span> <span m=''519320''>other</span>
  <span m=''519560''>and</span> <span m=''520320''>be</span> <span m=''520500''>able</span>
  <span m=''520700''>to</span> <span m=''525280''>use</span> <span m=''525660''>parallel</span>
  <span m=''526070''>architecture.</span> <span m=''526950''>On</span> <span m=''527090''>the</span>
  <span m=''527150''>software</span> <span m=''527490''>construction</span> <span
  m=''527980''>side</span> <span m=''528250''>you''re</span> <span m=''528370''>dealing</span>
  <span m=''528760''>slightly</span> <span m=''529150''>more</span> <span m=''529460''>low</span>
  <span m=''529590''>level</span> <span m=''529910''>details.</span> <span m=''530640''>So</span>
  <span m=''531010''>what</span> <span m=''531190''>are</span> <span m=''531270''>some</span>
  <span m=''531450''>things</span> <span m=''531740''>you</span> <span m=''531820''>might</span>
  <span m=''532030''>need</span> <span m=''532280''>at</span> <span m=''532450''>a</span>
  <span m=''532740''>slightly</span> <span m=''533110''>lower</span> <span m=''533320''>level</span>
  <span m=''533610''>of</span> <span m=''533700''>implementation</span> <span m=''534680''>to
  actually</span> <span m=''535280''>get</span> <span m=''535510''>all</span> <span
  m=''535710''>the</span> <span m=''535770''>computation</span> <span m=''536630''>that''s</span>
  <span m=''536925''>expressed</span> <span m=''537220''>at the</span> <span m=''537470''>algorithm</span>
  <span m=''537670''>level</span> <span m=''538510''>to</span> <span m=''538660''>work</span>
  <span m=''538920''>and</span> <span m=''539220''>run</span> <span m=''539380''>well?</span>
  <span m=''539950''>So</span> <span m=''540320''>I''m</span> <span m=''540460''>going</span>
  <span m=''540660''>to</span> <span m=''541790''>essentially</span> <span m=''542390''>talk</span>
  <span m=''542660''>about</span> <span m=''543170''>the</span> <span m=''543270''>latter</span>
  <span m=''543650''>part</span> <span m=''544580''>in</span> <span m=''545010''>the</span>
  <span m=''545200''>next</span> <span m=''545420''>lecture</span> <span m=''546010''>and
  I''ll</span> <span m=''546200''>cover</span> <span m=''546610''>much</span> <span
  m=''546960''>of</span> <span m=''547150''>the</span> <span m=''547230''>algorithm</span>
  <span m=''547580''>expression</span> <span m=''548070''>stuff</span> <span m=''548360''>here--</span>
  <span m=''549320''>at</span> <span m=''549450''>least</span> <span m=''549630''>the</span>
  <span m=''549670''>fine</span> <span m=''549950''>concurrency</span> <span m=''550370''>part</span>
  <span m=''551160''>in</span> <span m=''551330''>this</span> <span m=''551440''>talk.</span>
  <span m=''552780''>And</span> <span m=''552960''>if</span> <span m=''553090''>there''s</span>
  <span m=''553290''>time</span> <span m=''553660''>I''ll</span> <span m=''553850''>do</span>
  <span m=''553990''>algorithm</span> <span m=''554390''>structure.</span> <span m=''554740''>Otherwise,</span>
  <span m=''555480''>just talk</span> <span m=''555660''>about</span> <span m=''555770''>it</span>
  <span m=''556150''>next</span> <span m=''556683''>time.</span> </p><p><span m=''557750''>So</span>
  <span m=''558460''>let''s</span> <span m=''558610''>say</span> <span m=''558890''>you''re</span>
  <span m=''559070''>working</span> <span m=''559370''>with</span> <span m=''559660''>MPEG</span>
  <span m=''560510''>decoding.</span> <span m=''561650''>This</span> <span m=''561810''>is</span>
  <span m=''562000''>a</span> <span m=''562150''>pipeline</span> <span m=''562750''>picture</span>
  <span m=''563110''>of</span> <span m=''563220''>an</span> <span m=''563300''>MPEG</span>
  <span m=''563610''>2</span> <span m=''563740''>decoder</span> <span m=''564260''>or</span>
  <span m=''564410''>rather a</span> <span m=''564690''>blocked</span> <span m=''565150''>level</span>
  <span m=''565340''>diagram</span> <span m=''565770''>of</span> <span m=''565930''>an</span>
  <span m=''566210''>MPEG</span> <span m=''566330''>2 decoder.</span> <span m=''567780''>And</span>
  <span m=''567930''>you</span> <span m=''567990''>have</span> <span m=''568140''>this</span>
  <span m=''568200''>algorithm</span> <span m=''568670''>and</span> <span m=''568790''>you</span>
  <span m=''568930''>say,</span> <span m=''569200''>OK,</span> <span m=''569410''>I</span>
  <span m=''569520''>want to</span> <span m=''569690''>parallelize</span> <span m=''570210''>this.</span>
  <span m=''570380''>Where''s</span> <span m=''570630''>my</span> <span m=''570800''>parallelism?</span>
  <span m=''571830''>Where''s</span> <span m=''572090''>my</span> <span m=''572210''>concurrency?</span>
  <span m=''574510''>You</span> <span m=''574640''>know,</span> <span m=''574730''>in</span>
  <span m=''574860''>MPEG</span> <span m=''574910''>2</span> <span m=''575240''>you</span>
  <span m=''575360''>have</span> <span m=''575520''>some</span> <span m=''575730''>bit</span>
  <span m=''576220''>screen,</span> <span m=''576520''>you</span> <span m=''576640''>do</span>
  <span m=''576800''>some</span> <span m=''577000''>decoding</span> <span m=''577510''>on</span>
  <span m=''577690''>it</span> <span m=''578180''>and</span> <span m=''578640''>you</span>
  <span m=''578760''>end</span> <span m=''578930''>up</span> <span m=''579090''>with</span>
  <span m=''579380''>two</span> <span m=''579540''>things.</span> <span m=''579770''>You</span>
  <span m=''579840''>end</span> <span m=''579930''>up</span> <span m=''580030''>with</span>
  <span m=''580210''>motion</span> <span m=''580530''>vectors</span> <span m=''580950''>that</span>
  <span m=''581050''>tell</span> <span m=''581240''>you</span> <span m=''582180''>here''s</span>
  <span m=''582430''>somebody''s</span> <span m=''582830''>head,</span> <span m=''583260''>in</span>
  <span m=''583540''>the</span> <span m=''583600''>next</span> <span m=''583830''>scene</span>
  <span m=''584030''>it''s</span> <span m=''584190''>moved</span> <span m=''584520''>to</span>
  <span m=''584720''>this</span> <span m=''584890''>particular</span> <span m=''585280''>location.</span>
  <span m=''589050''>So</span> <span m=''589200''>these</span> <span m=''589420''>are</span>
  <span m=''589940''>captured</span> <span m=''590190''>by the</span> <span m=''590350''>motion</span>
  <span m=''590650''>vectors.</span> <span m=''593350''>So</span> <span m=''593570''>this</span>
  <span m=''593770''>captures</span> <span m=''594360''>or</span> <span m=''594830''>recovers</span>
  <span m=''595370''>temporal</span> <span m=''596020''>information.</span> <span
  m=''596800''>In</span> <span m=''596920''>here</span> <span m=''597170''>you</span>
  <span m=''597370''>cover</span> <span m=''597650''>spatial</span> <span m=''597990''>information.</span>
  <span m=''598730''>So in</span> <span m=''599080''>somebody''s</span> <span m=''599480''>head</span>
  <span m=''599800''>you</span> <span m=''599930''>might</span> <span m=''600140''>have</span>
  <span m=''601060''>discovered</span> <span m=''601470''>some</span> <span m=''601730''>redundancies</span>
  <span m=''602040''>so</span> <span m=''602230''>that</span> <span m=''602500''>redundancy</span>
  <span m=''602950''>is</span> <span m=''603030''>eliminated</span> <span m=''603520''>out</span>
  <span m=''603880''>so</span> <span m=''604000''>you</span> <span m=''604060''>need</span>
  <span m=''604190''>to</span> <span m=''604370''>know</span> <span m=''604580''>essentially,</span>
  <span m=''606740''>uncompress</span> <span m=''607030''>or</span> <span m=''607180''>undo</span>
  <span m=''607450''>that</span> <span m=''607550''>compression.</span> <span m=''608560''>So</span>
  <span m=''608680''>you</span> <span m=''608750''>go</span> <span m=''608860''>through</span>
  <span m=''609060''>some</span> <span m=''609210''>stages.</span> <span m=''610070''>You</span>
  <span m=''610210''>combine</span> <span m=''610550''>the</span> <span m=''610610''>two</span>
  <span m=''610780''>together.</span> <span m=''612330''>Combine</span> <span m=''612790''>the
  motion</span> <span m=''613110''>estimation</span> <span m=''613770''>and</span>
  <span m=''613930''>now</span> <span m=''614040''>the</span> <span m=''614120''>recovered</span>
  <span m=''614510''>pictures</span> <span m=''615030''>to</span> <span m=''615160''>reconstruct</span>
  <span m=''615650''>the</span> <span m=''615770''>image</span> <span m=''616480''>and</span>
  <span m=''616620''>then</span> <span m=''616740''>you</span> <span m=''616830''>might</span>
  <span m=''617000''>do</span> <span m=''617110''>some</span> <span m=''617480''>additional</span>
  <span m=''617780''>stages.</span> <span m=''620850''>This</span> <span m=''621030''>particular</span>
  <span m=''621530''>stage</span> <span m=''622000''>here</span> <span m=''622320''>is</span>
  <span m=''622460''>indicated</span> <span m=''622960''>to</span> <span m=''623080''>be</span>
  <span m=''623980''>data</span> <span m=''624180''>parallel</span> <span m=''624600''>in</span>
  <span m=''624780''>that</span> <span m=''625210''>I</span> <span m=''625320''>can</span>
  <span m=''625590''>do</span> <span m=''626190''>different</span> <span m=''626530''>scenes</span>
  <span m=''626900''>for</span> <span m=''627000''>example</span> <span m=''627510''>in</span>
  <span m=''627720''>parallel</span> <span m=''628120''>or</span> <span m=''628310''>I</span>
  <span m=''628380''>might</span> <span m=''628570''>be</span> <span m=''628650''>able</span>
  <span m=''628790''>to</span> <span m=''628900''>do</span> <span m=''629000''>different</span>
  <span m=''629330''>slices</span> <span m=''629680''>of</span> <span m=''629770''>the</span>
  <span m=''629850''>picture</span> <span m=''630160''>in</span> <span m=''630280''>parallel.</span>
  <span m=''631030''>So I can</span> <span m=''631360''>essentially</span> <span m=''632110''>take</span>
  <span m=''632280''>advantage</span> <span m=''632730''>of</span> <span m=''633100''>data</span>
  <span m=''633300''>parallelism</span> <span m=''633820''>in</span> <span m=''634880''>the</span>
  <span m=''634980''>concept</span> <span m=''635430''>of</span> <span m=''635550''>taking</span>
  <span m=''635920''>a loop</span> <span m=''636220''>and breaking</span> <span m=''636600''>it
  up</span> <span m=''636880''>as</span> <span m=''637090''>I</span> <span m=''637140''>showed</span>
  <span m=''638040''>in</span> <span m=''638180''>lecture</span> <span m=''638500''>5.</span>
  </p><p><span m=''640520''>So</span> <span m=''640880''>in</span> <span m=''641060''>task</span>
  <span m=''641150''>decomposition</span> <span m=''642040''>what</span> <span m=''642150''>we''re</span>
  <span m=''642270''>looking</span> <span m=''642520''>for is</span> <span m=''642980''>really</span>
  <span m=''643480''>independent</span> <span m=''644080''>coarse-grain</span> <span
  m=''644700''>computation.</span> <span m=''647630''>And</span> <span m=''647910''>these</span>
  <span m=''648160''>often</span> <span m=''648510''>are</span> <span m=''648820''>inherent</span>
  <span m=''649240''>to</span> <span m=''649400''>the</span> <span m=''649540''>algorithm.</span>
  <span m=''650280''>so</span> <span m=''650610''>here</span> <span m=''650940''>I''ve</span>
  <span m=''651040''>outlined</span> <span m=''651190''>these</span> <span m=''651380''>in</span>
  <span m=''651680''>yellow</span> <span m=''651940''>here.</span> <span m=''652850''>You</span>
  <span m=''652930''>know,</span> <span m=''653050''>so</span> <span m=''653180''>this</span>
  <span m=''653390''>is</span> <span m=''653560''>one</span> <span m=''653720''>particular</span>
  <span m=''654100''>task.</span> <span m=''654600''>I can</span> <span m=''654900''>have</span>
  <span m=''655630''>one</span> <span m=''655850''>thread</span> <span m=''656350''>of</span>
  <span m=''656620''>execution</span> <span m=''657440''>doing</span> <span m=''657730''>all</span>
  <span m=''657870''>the</span> <span m=''657960''>spatial</span> <span m=''658420''>decomposition.</span>
  <span m=''659370''>I</span> <span m=''659480''>can</span> <span m=''659600''>have</span>
  <span m=''659790''>another</span> <span m=''660040''>thread</span> <span m=''660350''>decoding</span>
  <span m=''660830''>all</span> <span m=''660960''>my</span> <span m=''661060''>motion</span>
  <span m=''661380''>vectors.</span> <span m=''663710''>And</span> <span m=''664020''>in</span>
  <span m=''664170''>general,</span> <span m=''665430''>you''re</span> <span m=''665570''>looking</span>
  <span m=''665840''>for</span> <span m=''666050''>sequences</span> <span m=''666440''>of</span>
  <span m=''666600''>statements</span> <span m=''667410''>that</span> <span m=''667550''>operate</span>
  <span m=''668010''>together</span> <span m=''668350''>as</span> <span m=''668460''>a</span>
  <span m=''668520''>group.</span> <span m=''669410''>These</span> <span m=''669580''>could</span>
  <span m=''669730''>be</span> <span m=''669880''>loops</span> <span m=''670590''>or</span>
  <span m=''671110''>they</span> <span m=''671210''>could</span> <span m=''671320''>be</span>
  <span m=''671400''>functions.</span> <span m=''672970''>And</span> <span m=''673390''>usually</span>
  <span m=''673830''>you</span> <span m=''673920''>want</span> <span m=''674170''>these</span>
  <span m=''674360''>to</span> <span m=''674570''>essentially</span> <span m=''674850''>just</span>
  <span m=''675020''>fall</span> <span m=''675280''>out</span> <span m=''675490''>of</span>
  <span m=''675990''>your</span> <span m=''676120''>algorithm</span> <span m=''676580''>as</span>
  <span m=''676780''>it''s</span> <span m=''676920''>expressed.</span> <span m=''677670''>And</span>
  <span m=''677850''>a</span> <span m=''677920''>lot</span> <span m=''678070''>of</span>
  <span m=''678150''>cases</span> <span m=''678470''>it</span> <span m=''678580''>does,</span>
  <span m=''679410''>so</span> <span m=''680150''>depending</span> <span m=''680530''>on</span>
  <span m=''680640''>how</span> <span m=''680780''>you</span> <span m=''680910''>think</span>
  <span m=''681070''>about</span> <span m=''681230''>the</span> <span m=''681310''>program</span>
  <span m=''681750''>you</span> <span m=''681830''>might</span> <span m=''681990''>be</span>
  <span m=''682070''>able</span> <span m=''682230''>to</span> <span m=''682300''>find</span>
  <span m=''682570''>these</span> <span m=''683920''>quicker or</span> <span m=''684360''>easier.</span>
  </p><p><span m=''686260''>Data</span> <span m=''686440''>decompositions,</span>
  <span m=''686650''>which I''ve</span> <span m=''687550''>highlighted</span> <span
  m=''687840''>here</span> <span m=''688760''>essentially</span> <span m=''689120''>says</span>
  <span m=''689310''>you</span> <span m=''689383''>have</span> <span m=''689456''>the</span>
  <span m=''689530''>same</span> <span m=''689780''>computation</span> <span m=''690730''>applied</span>
  <span m=''691170''>to</span> <span m=''691490''>lots</span> <span m=''691800''>of</span>
  <span m=''691910''>small</span> <span m=''692180''>data</span> <span m=''692430''>element.</span>
  <span m=''693080''>You</span> <span m=''693270''>know,</span> <span m=''693340''>you</span>
  <span m=''693420''>can</span> <span m=''693630''>take</span> <span m=''693860''>your</span>
  <span m=''694000''>large</span> <span m=''694340''>data element,</span> <span m=''694690''>partition</span>
  <span m=''695130''>it</span> <span m=''695230''>into</span> <span m=''695290''>smaller</span>
  <span m=''695600''>chunks</span> <span m=''696340''>and</span> <span m=''696890''>do</span>
  <span m=''697060''>the</span> <span m=''697130''>computation</span> <span m=''697610''>over</span>
  <span m=''697840''>and</span> <span m=''697930''>over</span> <span m=''698150''>in</span>
  <span m=''698290''>parallel</span> <span m=''699120''>and</span> <span m=''699360''>so</span>
  <span m=''699480''>that</span> <span m=''699660''>allows</span> <span m=''699930''>you</span>
  <span m=''700010''>to</span> <span m=''700110''>essentially</span> <span m=''700460''>get</span>
  <span m=''700610''>that</span> <span m=''700750''>kind</span> <span m=''700980''>of</span>
  <span m=''701200''>data</span> <span m=''701410''>parallelism,</span> <span m=''701800''>expansion</span>
  <span m=''702320''>of</span> <span m=''702500''>space.</span> </p><p><span m=''704070''>And</span>
  <span m=''704240''>finally,</span> <span m=''704910''>I''m</span> <span m=''705070''>going
  to</span> <span m=''705400''>make</span> <span m=''706010''>a</span> <span m=''706170''>case</span>
  <span m=''706470''>for</span> <span m=''706820''>pipeline</span> <span m=''707000''>parallelism,</span>
  <span m=''708190''>which</span> <span m=''708540''>essentially</span> <span m=''708900''>says,</span>
  <span m=''709200''>well,</span> <span m=''709420''>I can</span> <span m=''709540''>recognize</span>
  <span m=''709960''>that</span> <span m=''710060''>I</span> <span m=''710100''>have</span>
  <span m=''710270''>a</span> <span m=''710310''>lot</span> <span m=''710500''>of</span>
  <span m=''710600''>stages</span> <span m=''710990''>in my</span> <span m=''711150''>computation</span>
  <span m=''712240''>and</span> <span m=''712670''>it</span> <span m=''712820''>does</span>
  <span m=''713060''>help</span> <span m=''713340''>to actually</span> <span m=''713740''>have</span>
  <span m=''714010''>this</span> <span m=''714130''>kind</span> <span m=''714420''>of</span>
  <span m=''714650''>decomposition</span> <span m=''716140''>just</span> <span m=''716430''>because</span>
  <span m=''717180''>you''re</span> <span m=''717450''>familiar</span> <span m=''717800''>with</span>
  <span m=''717920''>pipelining</span> <span m=''718400''>concepts</span> <span m=''718880''>from</span>
  <span m=''719140''>other</span> <span m=''720210''>domains.</span> <span m=''720890''>So</span>
  <span m=''721110''>this</span> <span m=''721710''>type</span> <span m=''722020''>of</span>
  <span m=''723270''>producer</span> <span m=''723690''>consumer</span> <span m=''724080''>chain</span>
  <span m=''724450''>is</span> <span m=''724640''>actually</span> <span m=''725030''>beneficial.</span>
  <span m=''726590''>So</span> <span m=''726750''>it</span> <span m=''726820''>does</span>
  <span m=''727060''>help</span> <span m=''727300''>to</span> <span m=''727590''>sort</span>
  <span m=''727850''>of</span> <span m=''727950''>expose</span> <span m=''728430''>these</span>
  <span m=''728580''>kinds</span> <span m=''728840''>of</span> <span m=''728950''>relationships.</span>
  <span m=''732170''>So</span> <span m=''732450''>what</span> <span m=''732600''>are</span>
  <span m=''732660''>some</span> <span m=''732930''>guidelines</span> <span m=''733590''>for</span>
  <span m=''733720''>actually</span> <span m=''734700''>coming</span> <span m=''734990''>up</span>
  <span m=''735140''>with</span> <span m=''735370''>your</span> <span m=''735480''>task</span>
  <span m=''735900''>decomposition?</span> <span m=''736560''>Where</span> <span m=''736790''>do</span>
  <span m=''736880''>you</span> <span m=''736980''>start?</span> <span m=''737640''>You</span>
  <span m=''737770''>have</span> <span m=''737970''>your</span> <span m=''738090''>algorithm,</span>
  <span m=''740220''>you</span> <span m=''740600''>understand the</span> <span m=''741040''>problem</span>
  <span m=''741380''>really</span> <span m=''741600''>well,</span> <span m=''741870''>you''re</span>
  <span m=''742020''>writing</span> <span m=''742280''>some</span> <span m=''742450''>code</span>
  <span m=''743150''>and</span> <span m=''743530''>the</span> <span m=''743600''>hope</span>
  <span m=''743850''>is</span> <span m=''743970''>that</span> <span m=''744340''>in</span>
  <span m=''744660''>fact,</span> <span m=''744970''>as</span> <span m=''745190''>I''ve</span>
  <span m=''745370''>pointed</span> <span m=''745590''>out,</span> <span m=''745940''>it</span>
  <span m=''746080''>does</span> <span m=''746270''>happen</span> <span m=''746630''>that</span>
  <span m=''747490''>you</span> <span m=''747630''>can</span> <span m=''747790''>look</span>
  <span m=''747980''>for</span> <span m=''748650''>natural</span> <span m=''750250''>code</span>
  <span m=''750550''>regions</span> <span m=''750930''>that</span> <span m=''751310''>incapsulate</span>
  <span m=''751535''>your</span> <span m=''751760''>computation.</span> <span m=''752640''>So</span>
  <span m=''752840''>function</span> <span m=''753200''>calls,</span> <span m=''754210''>distinct</span>
  <span m=''754600''>loop</span> <span m=''755060''>iterations</span> <span m=''755520''>are</span>
  <span m=''755760''>pretty</span> <span m=''756020''>good</span> <span m=''756190''>places</span>
  <span m=''756590''>to</span> <span m=''756700''>start</span> <span m=''756960''>looking.</span>
  <span m=''758830''>And</span> <span m=''759330''>it''s</span> <span m=''759520''>easier</span>
  <span m=''760720''>as</span> <span m=''760830''>a</span> <span m=''760870''>general</span>
  <span m=''761640''>rule,</span> <span m=''761980''>it''s</span> <span m=''762190''>easier</span>
  <span m=''762530''>to</span> <span m=''762660''>start</span> <span m=''762990''>with</span>
  <span m=''763260''>as</span> <span m=''763410''>many</span> <span m=''763610''>tasks
  as</span> <span m=''764010''>possible</span> <span m=''765360''>and</span> <span
  m=''765550''>then</span> <span m=''765710''>fuse</span> <span m=''765890''>them</span>
  <span m=''766500''>to</span> <span m=''766620''>make</span> <span m=''766790''>the</span>
  <span m=''766880''>more</span> <span m=''767060''>coarse-grained</span> <span m=''767800''>than</span>
  <span m=''767990''>to</span> <span m=''768110''>go</span> <span m=''768240''>the</span>
  <span m=''768370''>other</span> <span m=''768540''>way</span> <span m=''768690''>around.</span>
  <span m=''770220''>It</span> <span m=''770640''>impacts</span> <span m=''770900''>your</span>
  <span m=''771350''>software</span> <span m=''772600''>engineering</span> <span m=''773030''>decisions,</span>
  <span m=''773560''>it</span> <span m=''773730''>impacts</span> <span m=''774920''>software</span>
  <span m=''775260''>implementation,</span> <span m=''776040''>it impacts</span> <span
  m=''776410''>how</span> <span m=''776530''>you</span> <span m=''776680''>incapsulate</span>
  <span m=''777000''>things</span> <span m=''777810''>at</span> <span m=''778160''>low</span>
  <span m=''778290''>level</span> <span m=''778580''>details</span> <span m=''778815''>of</span>
  <span m=''779050''>implementation.</span> <span m=''780970''>So</span> <span m=''781140''>it''s</span>
  <span m=''781240''>always</span> <span m=''781520''>easier</span> <span m=''781810''>to</span>
  <span m=''781930''>fuse</span> <span m=''782190''>than</span> <span m=''782440''>to</span>
  <span m=''782540''>fizz.</span> </p><p><span m=''784720''>And</span> <span m=''784830''>you</span>
  <span m=''784890''>want to</span> <span m=''785090''>consider</span> <span m=''785610''>three</span>
  <span m=''785970''>things.</span> <span m=''786180''>You</span> <span m=''786250''>want</span>
  <span m=''786520''>to</span> <span m=''786730''>keep three</span> <span m=''786800''>things</span>
  <span m=''787100''>in</span> <span m=''787230''>mind:</span> <span m=''787570''>flexibility,</span>
  <span m=''788380''>efficiency,</span> <span m=''789000''>and</span> <span m=''789110''>simplicity.</span>
  <span m=''790150''>So</span> <span m=''790550''>flexibility</span> <span m=''791210''>says</span>
  <span m=''791730''>if</span> <span m=''791840''>you</span> <span m=''791930''>made</span>
  <span m=''792190''>some</span> <span m=''793710''>decisions,</span> <span m=''801400''>is</span>
  <span m=''801620''>that</span> <span m=''801760''>really</span> <span m=''801940''>going</span>
  <span m=''802100''>to</span> <span m=''802210''>scale</span> <span m=''802520''>well</span>
  <span m=''802950''>or</span> <span m=''803460''>is</span> <span m=''803550''>it</span>
  <span m=''803630''>going</span> <span m=''803760''>to</span> <span m=''803840''>allow</span>
  <span m=''804020''>you</span> <span m=''804170''>to</span> <span m=''804540''>sort</span>
  <span m=''804740''>of</span> <span m=''805240''>make</span> <span m=''805500''>the</span>
  <span m=''805650''>decisions,</span> <span m=''806610''>changes?</span> <span m=''808330''>So</span>
  <span m=''808550''>you</span> <span m=''808650''>might</span> <span m=''808880''>want</span>
  <span m=''809070''>to</span> <span m=''809140''>have</span> <span m=''809380''>fixed</span>
  <span m=''809700''>tasks</span> <span m=''809950''>versus</span> <span m=''810230''>parameterized</span>
  <span m=''811100''>tasks,</span> <span m=''811380''>for</span> <span m=''811500''>example.</span>
  <span m=''812140''>So</span> <span m=''812350''>the</span> <span m=''812450''>loops</span>
  <span m=''812740''>that</span> <span m=''812890''>I</span> <span m=''812940''>showed</span>
  <span m=''813420''>in</span> <span m=''813530''>the</span> <span m=''813600''>previous</span>
  <span m=''815720''>talk,</span> <span m=''816670''>each</span> <span m=''817010''>loop</span>
  <span m=''817420''>that</span> <span m=''817550''>I</span> <span m=''817600''>parallelized</span>
  <span m=''818330''>had</span> <span m=''818630''>a</span> <span m=''818670''>hard</span>
  <span m=''818890''>coded</span> <span m=''819200''>number</span> <span m=''819500''>that</span>
  <span m=''819660''>said,</span> <span m=''819950''>you''re</span> <span m=''820070''>going</span>
  <span m=''820190''>to</span> <span m=''820250''>do</span> <span m=''820330''>4</span>
  <span m=''820580''>iterations.</span> <span m=''821460''>That</span> <span m=''821640''>may</span>
  <span m=''821800''>work</span> <span m=''822070''>well</span> <span m=''822400''>or</span>
  <span m=''822670''>it</span> <span m=''822700''>may</span> <span m=''822920''>not</span>
  <span m=''822990''>work</span> <span m=''823230''>well.</span> <span m=''823520''>You</span>
  <span m=''823610''>know,</span> <span m=''823690''>I</span> <span m=''823740''>can''t</span>
  <span m=''824000''>reuse</span> <span m=''824320''>that</span> <span m=''824480''>code</span>
  <span m=''824720''>now</span> <span m=''824860''>if</span> <span m=''824990''>I</span>
  <span m=''825060''>want</span> <span m=''825300''>to</span> <span m=''825420''>essentially</span>
  <span m=''825870''>use</span> <span m=''826000''>that</span> <span m=''826240''>kind
  of</span> <span m=''826690''>data</span> <span m=''826960''>decomposition</span>
  <span m=''827060''>and</span> <span m=''827910''>work</span> <span m=''828130''>sharing</span>
  <span m=''828720''>if</span> <span m=''828850''>I</span> <span m=''828910''>have</span>
  <span m=''829100''>a</span> <span m=''829160''>longer</span> <span m=''829500''>loop</span>
  <span m=''829760''>and</span> <span m=''829880''>I</span> <span m=''829950''>want</span>
  <span m=''830240''>a</span> <span m=''830510''>longer</span> <span m=''830840''>array</span>
  <span m=''831220''>and</span> <span m=''831330''>I</span> <span m=''831390''>want</span>
  <span m=''831720''>each</span> <span m=''832280''>thread</span> <span m=''832570''>to</span>
  <span m=''832660''>do</span> <span m=''832770''>more</span> <span m=''832990''>work.</span>
  <span m=''833510''>So</span> <span m=''833750''>you</span> <span m=''833860''>might</span>
  <span m=''834020''>want</span> <span m=''834190''>to</span> <span m=''834270''>parameterize</span>
  <span m=''834940''>more</span> <span m=''835140''>things</span> <span m=''836500''>in</span>
  <span m=''836670''>your</span> <span m=''836780''>tasks.</span> </p><p><span m=''838140''>The</span>
  <span m=''838550''>efficiency,</span> <span m=''839200''>in</span> <span m=''839280''>that</span>
  <span m=''839580''>you</span> <span m=''839790''>have</span> <span m=''839910''>to</span>
  <span m=''840000''>keep</span> <span m=''840170''>in</span> <span m=''840240''>mind</span>
  <span m=''840580''>that</span> <span m=''840820''>each</span> <span m=''841110''>of</span>
  <span m=''841200''>these</span> <span m=''841430''>tasks</span> <span m=''842040''>will</span>
  <span m=''842210''>eventually</span> <span m=''843350''>sort</span> <span m=''843500''>of</span>
  <span m=''843580''>have</span> <span m=''843720''>to</span> <span m=''843820''>talk</span>
  <span m=''844170''>with</span> <span m=''844470''>other</span> <span m=''844960''>tasks.</span>
  <span m=''845410''>There''s</span> <span m=''845590''>communication</span> <span
  m=''846180''>costs</span> <span m=''846520''>that</span> <span m=''846590''>have</span>
  <span m=''846750''>to</span> <span m=''846870''>be</span> <span m=''848240''>taken
  into</span> <span m=''848530''>account,</span> <span m=''848980''>synchronization.</span>
  <span m=''850030''>So</span> <span m=''850160''>you</span> <span m=''850260''>want</span>
  <span m=''850480''>these</span> <span m=''850640''>tasks</span> <span m=''850890''>to</span>
  <span m=''850990''>actually</span> <span m=''851340''>amortize</span> <span m=''851950''>the</span>
  <span m=''852040''>communication</span> <span m=''852640''>costs</span> <span m=''852950''>or</span>
  <span m=''853050''>other</span> <span m=''853250''>overheads</span> <span m=''853940''>over</span>
  <span m=''854210''>to</span> <span m=''854270''>computation.</span> <span m=''856080''>And</span>
  <span m=''856250''>you</span> <span m=''856310''>want to</span> <span m=''856480''>keep</span>
  <span m=''856690''>in</span> <span m=''856760''>mind</span> <span m=''857050''>that</span>
  <span m=''857810''>there''s</span> <span m=''857980''>going to</span> <span m=''858180''>be</span>
  <span m=''858340''>dependencies</span> <span m=''858910''>between</span> <span m=''859290''>these</span>
  <span m=''859470''>tasks</span> <span m=''860040''>and</span> <span m=''860260''>you</span>
  <span m=''860320''>don''t</span> <span m=''860440''>want</span> <span m=''860580''>these</span>
  <span m=''860720''>dependencies</span> <span m=''861300''>to</span> <span m=''861390''>get</span>
  <span m=''861520''>out</span> <span m=''861620''>of</span> <span m=''861710''>hand.</span>
  <span m=''862260''>So</span> <span m=''862420''>you</span> <span m=''862490''>want</span>
  <span m=''862620''>to</span> <span m=''862680''>keep</span> <span m=''862880''>things</span>
  <span m=''863100''>under</span> <span m=''863270''>control.</span> <span m=''864230''>And</span>
  <span m=''864370''>lastly,</span> <span m=''865250''>which</span> <span m=''865440''>is</span>
  <span m=''866190''>probably</span> <span m=''866490''>as</span> <span m=''866660''>important</span>
  <span m=''867070''>as</span> <span m=''867710''>the</span> <span m=''867820''>other</span>
  <span m=''867960''>two:</span> <span m=''868410''>simplicity.</span> <span m=''869220''>And</span>
  <span m=''869330''>that</span> <span m=''869450''>if</span> <span m=''869610''>you</span>
  <span m=''869940''>start</span> <span m=''870290''>decomposing</span> <span m=''870800''>your</span>
  <span m=''870930''>code</span> <span m=''871250''>into</span> <span m=''872290''>different</span>
  <span m=''872920''>chunks</span> <span m=''873260''>and</span> <span m=''873840''>you</span>
  <span m=''873970''>can''t</span> <span m=''874530''>then</span> <span m=''874900''>understand</span>
  <span m=''875320''>your</span> <span m=''875410''>code</span> <span m=''875690''>in</span>
  <span m=''875850''>the</span> <span m=''876310''>end,</span> <span m=''876900''>it</span>
  <span m=''877070''>doesn''t</span> <span m=''877330''>help</span> <span m=''877560''>you</span>
  <span m=''877630''>from</span> <span m=''878140''>debugging</span> <span m=''878610''>perspective,</span>
  <span m=''879180''>doesn''t</span> <span m=''879400''>help</span> <span m=''879580''>you</span>
  <span m=''879660''>from a</span> <span m=''880230''>software</span> <span m=''880580''>engineering</span>
  <span m=''880970''>perspective</span> <span m=''881680''>or</span> <span m=''882850''>not</span>
  <span m=''882990''>being</span> <span m=''883160''>able</span> <span m=''883300''>to</span>
  <span m=''883430''>reuse</span> <span m=''883690''>you</span> <span m=''883790''>code</span>
  <span m=''884070''>or</span> <span m=''884580''>other</span> <span m=''884780''>people</span>
  <span m=''885060''>being</span> <span m=''885240''>able</span> <span m=''885390''>to</span>
  <span m=''885470''>understand</span> <span m=''885850''>your</span> <span m=''885940''>code.</span>
  </p><p><span m=''889040''>Guidelines</span> <span m=''889480''>for</span> <span
  m=''889660''>data</span> <span m=''889990''>decomposition</span> <span m=''890990''>are</span>
  <span m=''891140''>sort</span> <span m=''891390''>of</span> <span m=''891490''>similar.</span>
  <span m=''892250''>And</span> <span m=''892510''>you</span> <span m=''892590''>essentially</span>
  <span m=''892920''>have to</span> <span m=''893120''>do</span> <span m=''893260''>task</span>
  <span m=''893780''>and</span> <span m=''894060''>data</span> <span m=''894250''>parallelism</span>
  <span m=''895510''>to</span> <span m=''896200''>sort</span> <span m=''896480''>of</span>
  <span m=''898480''>complete</span> <span m=''898810''>your</span> <span m=''898920''>process.</span>
  <span m=''900250''>And</span> <span m=''900460''>often</span> <span m=''900890''>your</span>
  <span m=''901310''>task</span> <span m=''901750''>decomposition</span> <span m=''902520''>dictates</span>
  <span m=''902930''>your</span> <span m=''903040''>data</span> <span m=''903290''>partitioning.</span>
  <span m=''904210''>So</span> <span m=''904520''>if</span> <span m=''904880''>I''ve</span>
  <span m=''904930''>split</span> <span m=''905360''>up</span> <span m=''905640''>a</span>
  <span m=''905740''>loop</span> <span m=''906040''>into</span> <span m=''906260''>two</span>
  <span m=''906440''>different</span> <span m=''906700''>processes</span> <span m=''907320''>I''ve</span>
  <span m=''907790''>essentially</span> <span m=''908240''>implied</span> <span m=''909290''>how</span>
  <span m=''909560''>data</span> <span m=''909790''>should</span> <span m=''909990''>be</span>
  <span m=''910120''>distributed</span> <span m=''910590''>between</span> <span m=''910880''>these</span>
  <span m=''911070''>two</span> <span m=''911740''>threads.</span> <span m=''913290''>And</span>
  <span m=''913510''>data</span> <span m=''913700''>composition</span> <span m=''914820''>is</span>
  <span m=''915150''>a</span> <span m=''915180''>good</span> <span m=''915400''>starting</span>
  <span m=''915760''>point</span> <span m=''916360''>as</span> <span m=''916490''>opposed</span>
  <span m=''916880''>to</span> <span m=''917320''>task</span> <span m=''918010''>parallelism</span>
  <span m=''918710''>as</span> <span m=''918830''>a</span> <span m=''918900''>good</span>
  <span m=''919060''>starting</span> <span m=''919350''>point.</span> <span m=''920340''>If</span>
  <span m=''920610''>you''re</span> <span m=''920720''>doing</span> <span m=''921000''>the</span>
  <span m=''921070''>same</span> <span m=''921280''>computation</span> <span m=''921780''>over</span>
  <span m=''922010''>and</span> <span m=''922100''>over</span> <span m=''922360''>and</span>
  <span m=''922470''>over</span> <span m=''922700''>again,</span> <span m=''923120''>over</span>
  <span m=''923370''>really,</span> <span m=''923790''>really</span> <span m=''924070''>large</span>
  <span m=''924330''>data</span> <span m=''924600''>sets,</span> <span m=''926000''>so</span>
  <span m=''926900''>you</span> <span m=''927050''>can</span> <span m=''927660''>essentially</span>
  <span m=''928210''>use</span> <span m=''928460''>that</span> <span m=''928700''>as
  your</span> <span m=''928910''>stick</span> <span m=''929200''>to</span> <span m=''929380''>decide</span>
  <span m=''929830''>whether</span> <span m=''930040''>you</span> <span m=''930140''>do</span>
  <span m=''930290''>task</span> <span m=''930740''>decomposition</span> <span m=''931260''>first</span>
  <span m=''931890''>or</span> <span m=''932360''>data</span> <span m=''932820''>decomposition</span>
  <span m=''933380''>first.</span> </p><p><span m=''937720''>I''ve</span> <span m=''937920''>just</span>
  <span m=''938180''>listed</span> <span m=''938490''>two</span> <span m=''939150''>common</span>
  <span m=''939740''>data</span> <span m=''940670''>decompositions.</span> <span m=''941460''>I''ll</span>
  <span m=''941580''>talk</span> <span m=''941820''>about</span> <span m=''942060''>more</span>
  <span m=''942730''>of</span> <span m=''942920''>these</span> <span m=''943130''>later</span>
  <span m=''943330''>on</span> <span m=''943480''>when</span> <span m=''943580''>we</span>
  <span m=''943660''>talk</span> <span m=''943880''>about</span> <span m=''944040''>actual</span>
  <span m=''944330''>performance</span> <span m=''946010''>optimizations.</span> <span
  m=''948000''>So</span> <span m=''948780''>you</span> <span m=''948880''>want</span>
  <span m=''949050''>to</span> <span m=''949120''>decompose</span> <span m=''950020''>arrays</span>
  <span m=''950670''>for</span> <span m=''950770''>example,</span> <span m=''951140''>along</span>
  <span m=''951450''>rows</span> <span m=''951890''>or</span> <span m=''952040''>columns.</span>
  <span m=''952670''>You</span> <span m=''952790''>can</span> <span m=''952920''>compose</span>
  <span m=''953290''>arrays</span> <span m=''953580''>into</span> <span m=''953690''>blocks,</span>
  <span m=''954610''>you</span> <span m=''954780''>decompose</span> <span m=''955070''>them</span>
  <span m=''955200''>into</span> <span m=''955360''>blocks.</span> <span m=''956640''>You</span>
  <span m=''956970''>have</span> <span m=''957040''>recursive</span> <span m=''957350''>data</span>
  <span m=''957590''>structures.</span> <span m=''958150''>So a</span> <span m=''958280''>tree,</span>
  <span m=''958790''>you might</span> <span m=''958910''>partition</span> <span m=''959410''>it
  into</span> <span m=''959750''>left</span> <span m=''960000''>and</span> <span m=''960140''>right</span>
  <span m=''960570''>sub-trees</span> <span m=''961280''>in</span> <span m=''961340''>a</span>
  <span m=''961420''>binary</span> <span m=''961800''>tree.</span> <span m=''962420''>And</span>
  <span m=''962740''>the</span> <span m=''962800''>thing</span> <span m=''962970''>you''re</span>
  <span m=''963100''>trying</span> <span m=''963300''>to</span> <span m=''963360''>get</span>
  <span m=''963530''>to</span> <span m=''963700''>is</span> <span m=''963880''>actually</span>
  <span m=''965800''>start</span> <span m=''966060''>with</span> <span m=''966150''>a</span>
  <span m=''966190''>problem,</span> <span m=''966780''>and</span> <span m=''966900''>then</span>
  <span m=''967020''>recursively</span> <span m=''967510''>subdivide it</span> <span
  m=''968440''>until</span> <span m=''968740''>you</span> <span m=''968800''>can</span>
  <span m=''968930''>get</span> <span m=''969100''>to a</span> <span m=''969260''>manageable</span>
  <span m=''969690''>part.</span> <span m=''970340''>Do</span> <span m=''970500''>the</span>
  <span m=''970600''>computation</span> <span m=''971190''>and</span> <span m=''971320''>figure</span>
  <span m=''971540''>out</span> <span m=''971650''>a</span> <span m=''971710''>way</span>
  <span m=''971820''>to</span> <span m=''971930''>do</span> <span m=''972050''>the</span>
  <span m=''972190''>integration.</span> <span m=''973390''>You</span> <span m=''973460''>know,</span>
  <span m=''973530''>it''s</span> <span m=''973730''>like</span> <span m=''974500''>merge
  sort,</span> <span m=''975150''>classic</span> <span m=''975460''>example --</span>
  <span m=''976970''>tries</span> <span m=''977260''>to capture</span> <span m=''977540''>this</span>
  <span m=''977660''>really</span> <span m=''977860''>well.</span> <span m=''979660''>So</span>
  <span m=''980310''>again,</span> <span m=''980645''>the</span> <span m=''980980''>three</span>
  <span m=''981210''>theme,</span> <span m=''982280''>key</span> <span m=''982470''>concepts</span>
  <span m=''982850''>to</span> <span m=''982960''>keep</span> <span m=''983160''>in</span>
  <span m=''983240''>mind</span> <span m=''983500''>when</span> <span m=''983620''>you''re</span>
  <span m=''983760''>doing</span> <span m=''983980''>data</span> <span m=''984190''>decomposition:</span>
  <span m=''985220''>flexibility,</span> <span m=''985980''>efficiency,</span> <span
  m=''986590''>and</span> <span m=''986710''>simplicity.</span> <span m=''989100''>The</span>
  <span m=''989200''>first</span> <span m=''989530''>two</span> <span m=''989650''>are</span>
  <span m=''989780''>really</span> <span m=''990070''>just</span> <span m=''990290''>meant</span>
  <span m=''990480''>to</span> <span m=''991200''>suggest</span> <span m=''991690''>that</span>
  <span m=''992850''>the</span> <span m=''993000''>size</span> <span m=''993370''>of</span>
  <span m=''993540''>the</span> <span m=''993620''>data</span> <span m=''993920''>that</span>
  <span m=''994050''>you''ve</span> <span m=''994330''>allocated</span> <span m=''995230''>actually</span>
  <span m=''995660''>leads to</span> <span m=''996150''>enough</span> <span m=''996430''>work.</span>
  <span m=''997670''>Because</span> <span m=''998100''>you</span> <span m=''998190''>want</span>
  <span m=''998400''>to</span> <span m=''998510''>amortize</span> <span m=''999270''>the</span>
  <span m=''999390''>cost</span> <span m=''1000100''>of</span> <span m=''1000150''>communication</span>
  <span m=''1000200''>or</span> <span m=''1000250''>synchronization,</span> <span
  m=''1001220''>but</span> <span m=''1001440''>you</span> <span m=''1001520''>also</span>
  <span m=''1001810''>want</span> <span m=''1002430''>the</span> <span m=''1002640''>amount</span>
  <span m=''1002980''>of</span> <span m=''1003100''>work</span> <span m=''1003400''>that''s</span>
  <span m=''1003570''>generated</span> <span m=''1004060''>by</span> <span m=''1004180''>each</span>
  <span m=''1005130''>data</span> <span m=''1005980''>chunk</span> <span m=''1006620''>to</span>
  <span m=''1006790''>generate</span> <span m=''1007500''>about</span> <span m=''1008160''>the</span>
  <span m=''1008250''>same</span> <span m=''1008510''>amount</span> <span m=''1008720''>of</span>
  <span m=''1008820''>work,</span> <span m=''1009200''>so</span> <span m=''1009350''>load</span>
  <span m=''1009520''>balancing.</span> <span m=''1011040''>And</span> <span m=''1011230''>simplicity,</span>
  <span m=''1011830''>just</span> <span m=''1012010''>for</span> <span m=''1012200''>same</span>
  <span m=''1012430''>reason</span> <span m=''1012730''>as</span> <span m=''1014090''>task</span>
  <span m=''1014510''>decomposition</span> <span m=''1015360''>can</span> <span m=''1015540''>get</span>
  <span m=''1015700''>out</span> <span m=''1015810''>of</span> <span m=''1015910''>hand,</span>
  <span m=''1016400''>data</span> <span m=''1016720''>decomposition</span> <span m=''1017600''>can</span>
  <span m=''1017810''>get</span> <span m=''1017970''>out</span> <span m=''1018090''>of</span>
  <span m=''1018170''>hand.</span> <span m=''1018550''>You</span> <span m=''1018880''>don''t
  want</span> <span m=''1019420''>data</span> <span m=''1019620''>moving</span> <span
  m=''1019950''>around</span> <span m=''1020340''>throughout</span> <span m=''1021250''>and</span>
  <span m=''1021410''>then it</span> <span m=''1021480''>becomes</span> <span m=''1021840''>again,</span>
  <span m=''1022090''>hard</span> <span m=''1022360''>to</span> <span m=''1022460''>debug</span>
  <span m=''1023120''>or</span> <span m=''1023350''>manage</span> <span m=''1023780''>or</span>
  <span m=''1023920''>make</span> <span m=''1024140''>changes</span> <span m=''1024530''>and</span>
  <span m=''1026120''>track</span> <span m=''1026330''>dependencies.</span> </p><p><span
  m=''1029110''>Pipeline</span> <span m=''1029570''>parallelism,</span> <span m=''1030180''>this</span>
  <span m=''1030300''>is</span> <span m=''1030410''>actually</span> <span m=''1030740''>classified</span>
  <span m=''1031280''>somewhere</span> <span m=''1031550''>else</span> <span m=''1031820''>in</span>
  <span m=''1031890''>the</span> <span m=''1031970''>book.</span> <span m=''1032500''>Actually,</span>
  <span m=''1033090''>lifted</span> <span m=''1033500''>it</span> <span m=''1033600''>up</span>
  <span m=''1033990''>and</span> <span m=''1034440''>tried to</span> <span m=''1034730''>make</span>
  <span m=''1034890''>a</span> <span m=''1035020''>case</span> <span m=''1035360''>for</span>
  <span m=''1035420''>it</span> <span m=''1037530''>in</span> <span m=''1037850''>that</span>
  <span m=''1038140''>it''s</span> <span m=''1038310''>just</span> <span m=''1038480''>good</span>
  <span m=''1038640''>nature</span> <span m=''1038950''>I</span> <span m=''1039100''>think,</span>
  <span m=''1039340''>to</span> <span m=''1039490''>expose</span> <span m=''1040080''>producer</span>
  <span m=''1040480''>consumer</span> <span m=''1040850''>relationships</span> <span
  m=''1041400''>in</span> <span m=''1041490''>your</span> <span m=''1041570''>code.</span>
  <span m=''1041720''>So</span> <span m=''1041890''>if</span> <span m=''1042000''>I</span>
  <span m=''1042060''>have</span> <span m=''1042190''>a</span> <span m=''1042250''>function</span>
  <span m=''1042600''>that''s</span> <span m=''1042720''>producing</span> <span m=''1043210''>data</span>
  <span m=''1043820''>that''s</span> <span m=''1043980''>going</span> <span m=''1044190''>to</span>
  <span m=''1044280''>be</span> <span m=''1044430''>used</span> <span m=''1044710''>by</span>
  <span m=''1044890''>another</span> <span m=''1047380''>function</span> <span m=''1048380''>as</span>
  <span m=''1048510''>with</span> <span m=''1048650''>the</span> <span m=''1048730''>spatial</span>
  <span m=''1049060''>decomposition</span> <span m=''1049780''>or</span> <span m=''1050280''>in</span>
  <span m=''1050420''>different</span> <span m=''1050720''>stages</span> <span m=''1051170''>of</span>
  <span m=''1051440''>classic</span> <span m=''1051710''>rate</span> <span m=''1052000''>tracing</span>
  <span m=''1052300''>algorithms</span> <span m=''1053240''>you</span> <span m=''1053420''>want</span>
  <span m=''1053600''>to</span> <span m=''1053690''>maintain</span> <span m=''1054160''>that</span>
  <span m=''1054360''>producer</span> <span m=''1055320''>consumer</span> <span m=''1055710''>relationship</span>
  <span m=''1056210''>or that</span> <span m=''1056520''>asembly</span> <span m=''1056870''>line</span>
  <span m=''1057210''>analogy.</span> <span m=''1058970''>And</span> <span m=''1059840''>what</span>
  <span m=''1059990''>are</span> <span m=''1060060''>some</span> <span m=''1060310''>prime</span>
  <span m=''1060580''>examples</span> <span m=''1061040''>of</span> <span m=''1061200''>pipelines</span>
  <span m=''1061770''>in</span> <span m=''1061910''>computer</span> <span m=''1062260''>architecture?</span>
  <span m=''1063810''>It''s</span> <span m=''1063920''>like</span> <span m=''1064080''>the</span>
  <span m=''1064190''>instruction</span> <span m=''1064610''>pipeline</span> <span
  m=''1065280''>and</span> <span m=''1065420''>your</span> <span m=''1065530''>super</span>
  <span m=''1065800''>scalar.</span> <span m=''1067170''>But</span> <span m=''1067280''>there</span>
  <span m=''1067420''>might</span> <span m=''1067600''>be</span> <span m=''1067760''>some</span>
  <span m=''1068330''>other</span> <span m=''1068550''>examples</span> <span m=''1068960''>of</span>
  <span m=''1069040''>pipelines,</span> <span m=''1069780''>things</span> <span m=''1070070''>that</span>
  <span m=''1070190''>you</span> <span m=''1070280''>might</span> <span m=''1070460''>have</span>
  <span m=''1070560''>used</span> <span m=''1070850''>in</span> <span m=''1071410''>say,</span>
  <span m=''1071630''>UNIX</span> <span m=''1071990''>shell.</span> <span m=''1073590''>So</span>
  <span m=''1074560''>cat</span> <span m=''1075000''>processor,</span> <span m=''1075530''>pipe</span>
  <span m=''1075860''>it</span> <span m=''1075950''>to</span> <span m=''1076150''>another--</span>
  <span m=''1077740''>to</span> <span m=''1077920''>a</span> <span m=''1078190''>grep</span>
  <span m=''1078250''>word</span> <span m=''1078590''>and</span> <span m=''1078690''>then</span>
  <span m=''1078830''>word</span> <span m=''1078990''>count</span> <span m=''1079270''>that.</span>
  <span m=''1079780''>So</span> <span m=''1081600''>I</span> <span m=''1081820''>think</span>
  <span m=''1082010''>it''s</span> <span m=''1082110''>a</span> <span m=''1082160''>natural</span>
  <span m=''1082480''>concept.</span> <span m=''1082860''>We</span> <span m=''1083240''>use</span>
  <span m=''1083470''>it</span> <span m=''1083790''>in</span> <span m=''1084000''>many</span>
  <span m=''1084200''>different</span> <span m=''1084480''>ways</span> <span m=''1084770''>and</span>
  <span m=''1084890''>it''s</span> <span m=''1085110''>good</span> <span m=''1085310''>to</span>
  <span m=''1085530''>sort</span> <span m=''1085710''>of</span> <span m=''1085880''>practice</span>
  <span m=''1086300''>that</span> <span m=''1086770''>at</span> <span m=''1086900''>the</span>
  <span m=''1086980''>software</span> <span m=''1087350''>level</span> <span m=''1087610''>as</span>
  <span m=''1087720''>well.</span> <span m=''1088890''>And</span> <span m=''1089030''>there</span>
  <span m=''1089160''>are</span> <span m=''1089260''>some</span> <span m=''1089930''>computations</span>
  <span m=''1090860''>in</span> <span m=''1091050''>specific</span> <span m=''1091490''>domains,</span>
  <span m=''1091920''>like</span> <span m=''1092025''>in</span> <span m=''1092130''>signal</span>
  <span m=''1092470''>processing</span> <span m=''1093070''>and</span> <span m=''1093150''>graphics</span>
  <span m=''1093850''>that</span> <span m=''1093990''>have</span> <span m=''1094050''>really</span>
  <span m=''1094480''>sort</span> <span m=''1094640''>of--</span> <span m=''1097140''>where</span>
  <span m=''1097340''>the</span> <span m=''1097440''>pipeline</span> <span m=''1097970''>model</span>
  <span m=''1098650''>is</span> <span m=''1098990''>really</span> <span m=''1099310''>important</span>
  <span m=''1099680''>part</span> <span m=''1099960''>of</span> <span m=''1100200''>how</span>
  <span m=''1100410''>computation</span> <span m=''1100910''>gets</span> <span m=''1101090''>carried</span>
  <span m=''1101400''>out.</span> <span m=''1101960''>You</span> <span m=''1102100''>know,</span>
  <span m=''1102170''>you</span> <span m=''1102270''>have</span> <span m=''1102430''>your</span>
  <span m=''1102620''>graphics</span> <span m=''1103010''>pipeline</span> <span m=''1103380''>for</span>
  <span m=''1103510''>example,</span> <span m=''1105040''>in</span> <span m=''1105870''>signal</span>
  <span m=''1106350''>processing.</span> <span m=''1107070''>How</span> <span m=''1107450''>much</span>
  <span m=''1107560''>time</span> <span m=''1107910''>do I</span> <span m=''1108412''>have?</span>
  <span m=''1109418''>How</span> <span m=''1109921''>am</span> <span m=''1110021''>I</span>
  <span m=''1110122''>doing</span> <span m=''1110222''>on</span> <span m=''1110323''>time?</span>
  </p><p></p><p><span m=''1111430''>PROFESSOR: OK,</span> <span m=''1111980''>should
  I</span> <span m=''1112300''>stop</span> <span m=''1112430''>here?</span> </p><p><span
  m=''1113250''>AUDIENCE: About</span> <span m=''1113720''>how</span> <span m=''1114190''>much
  more?</span> </p><p><span m=''1114660''>PROFESSOR: 10 slides.</span> </p><p></p><p><span
  m=''1117550''>PROFESSOR: OK,</span> <span m=''1118150''>so</span> <span m=''1120010''>this</span>
  <span m=''1120150''>is</span> <span m=''1120270''>sort</span> <span m=''1120620''>of
  a</span> <span m=''1121260''>brief</span> <span m=''1122340''>summary,</span> <span
  m=''1122670''>which</span> <span m=''1122810''>will</span> <span m=''1122930''>lead</span>
  <span m=''1123170''>into</span> <span m=''1123390''>a</span> <span m=''1123450''>much</span>
  <span m=''1123680''>larger</span> <span m=''1123970''>talk</span> <span m=''1124520''>at</span>
  <span m=''1124680''>the</span> <span m=''1124780''>next</span> <span m=''1125050''>lecture</span>
  <span m=''1125680''>on</span> <span m=''1125980''>how</span> <span m=''1126150''>you</span>
  <span m=''1126270''>actually</span> <span m=''1126640''>go</span> <span m=''1126830''>about</span>
  <span m=''1127140''>re-engineering</span> <span m=''1127750''>your</span> <span
  m=''1127860''>code</span> <span m=''1128090''>for</span> <span m=''1128200''>parallelism.</span>
  <span m=''1129090''>And</span> <span m=''1129220''>this</span> <span m=''1129350''>could</span>
  <span m=''1129620''>come</span> <span m=''1129830''>into</span> <span m=''1130490''>play</span>
  <span m=''1130780''>if</span> <span m=''1130940''>you</span> <span m=''1131310''>start</span>
  <span m=''1131620''>with</span> <span m=''1131740''>sequential</span> <span m=''1132160''>code</span>
  <span m=''1132730''>and</span> <span m=''1132910''>you''re parallelizing</span>
  <span m=''1133460''>it.</span> <span m=''1133610''>Some of</span> <span m=''1133770''>you
  are</span> <span m=''1133940''>doing</span> <span m=''1134160''>that</span> <span
  m=''1134300''>for</span> <span m=''1134390''>your</span> <span m=''1134460''>projects.</span>
  <span m=''1135090''>Or</span> <span m=''1135450''>if</span> <span m=''1135560''>you''re</span>
  <span m=''1135660''>actually</span> <span m=''1136020''>writing</span> <span m=''1136470''>code</span>
  <span m=''1136840''>from</span> <span m=''1137020''>scratch</span> <span m=''1137820''>and</span>
  <span m=''1137980''>you</span> <span m=''1138050''>want to</span> <span m=''1138230''>engineer</span>
  <span m=''1138670''>that</span> <span m=''1138810''>for</span> <span m=''1138920''>parallelism</span>
  <span m=''1139310''>as</span> <span m=''1139420''>well.</span> <span m=''1142570''>So</span>
  <span m=''1143660''>I</span> <span m=''1143900''>think</span> <span m=''1144110''>it''s</span>
  <span m=''1144610''>important</span> <span m=''1145000''>to</span> <span m=''1145140''>sort</span>
  <span m=''1145300''>of</span> <span m=''1145460''>understand</span> <span m=''1145940''>the</span>
  <span m=''1146000''>problem</span> <span m=''1146280''>that</span> <span m=''1146380''>you''re</span>
  <span m=''1146520''>working</span> <span m=''1147180''>with.</span> <span m=''1147305''>So</span>
  <span m=''1147430''>you</span> <span m=''1147530''>want to</span> <span m=''1147760''>survey</span>
  <span m=''1147950''>your</span> <span m=''1148140''>landscape,</span> <span m=''1148720''>understand</span>
  <span m=''1149160''>what</span> <span m=''1149300''>other</span> <span m=''1149480''>people</span>
  <span m=''1149730''>might</span> <span m=''1149910''>have</span> <span m=''1150050''>done,</span>
  <span m=''1151260''>and</span> <span m=''1151450''>look</span> <span m=''1151610''>for</span>
  <span m=''1151830''>well-known</span> <span m=''1152270''>solutions</span> <span
  m=''1153050''>and</span> <span m=''1154520''>common</span> <span m=''1154820''>pitfalls.</span>
  <span m=''1156320''>And</span> <span m=''1156590''>the</span> <span m=''1156670''>patterns</span>
  <span m=''1156910''>that</span> <span m=''1157440''>I''m</span> <span m=''1157580''>going</span>
  <span m=''1157760''>to</span> <span m=''1157880''>talk</span> <span m=''1158110''>about</span>
  <span m=''1158320''>in</span> <span m=''1158380''>more</span> <span m=''1158570''>detail</span>
  <span m=''1158990''>really</span> <span m=''1159230''>provide</span> <span m=''1159670''>you</span>
  <span m=''1159760''>with a</span> <span m=''1159820''>list</span> <span m=''1160090''>of</span>
  <span m=''1160210''>questions</span> <span m=''1160800''>to sort</span> <span m=''1161050''>of</span>
  <span m=''1161480''>help</span> <span m=''1161710''>you</span> <span m=''1161870''>assess</span>
  <span m=''1164230''>the</span> <span m=''1164680''>existing</span> <span m=''1165030''>code</span>
  <span m=''1165230''>that</span> <span m=''1165340''>you''re</span> <span m=''1165460''>working</span>
  <span m=''1165710''>with</span> <span m=''1166620''>or</span> <span m=''1166880''>the</span>
  <span m=''1167140''>problem</span> <span m=''1167400''>that</span> <span m=''1167500''>you''re</span>
  <span m=''1167610''>trying</span> <span m=''1167850''>to</span> <span m=''1167910''>solve.</span>
  <span m=''1169160''>There''s</span> <span m=''1169410''>something</span> <span m=''1169860''>that</span>
  <span m=''1169970''>you</span> <span m=''1170030''>need</span> <span m=''1170150''>to</span>
  <span m=''1170220''>keep</span> <span m=''1170470''>in</span> <span m=''1170560''>mind</span>
  <span m=''1170880''>that</span> <span m=''1171090''>sort</span> <span m=''1171250''>of</span>
  <span m=''1171370''>effect</span> <span m=''1172360''>your</span> <span m=''1172560''>overall</span>
  <span m=''1172940''>correctness.</span> </p><p><span m=''1173450''>So</span> <span
  m=''1173690''>for</span> <span m=''1173840''>example,</span> <span m=''1174380''>is</span>
  <span m=''1174550''>your</span> <span m=''1174660''>computation</span> <span m=''1175240''>numerically</span>
  <span m=''1175670''>stable?</span> <span m=''1177110''>You</span> <span m=''1177230''>might</span>
  <span m=''1177420''>know</span> <span m=''1177640''>if</span> <span m=''1177790''>you</span>
  <span m=''1177900''>have</span> <span m=''1178930''>a floating</span> <span m=''1179250''>point</span>
  <span m=''1179470''>computation</span> <span m=''1180540''>you</span> <span m=''1180640''>might</span>
  <span m=''1180750''>not</span> <span m=''1180880''>be</span> <span m=''1180960''>able</span>
  <span m=''1181120''>to</span> <span m=''1181240''>reorder</span> <span m=''1181630''>all</span>
  <span m=''1181840''>the</span> <span m=''1181910''>operations</span> <span m=''1183000''>because</span>
  <span m=''1183540''>that</span> <span m=''1183690''>might</span> <span m=''1183870''>effect</span>
  <span m=''1184200''>your</span> <span m=''1184680''>actual</span> <span m=''1184960''>precision.</span>
  <span m=''1186320''>And</span> <span m=''1186440''>so</span> <span m=''1186550''>your</span>
  <span m=''1186700''>overall</span> <span m=''1187100''>output</span> <span m=''1187400''>might</span>
  <span m=''1187540''>be</span> <span m=''1187640''>different</span> <span m=''1188040''>and</span>
  <span m=''1188190''>that</span> <span m=''1188320''>may</span> <span m=''1188530''>or</span>
  <span m=''1188620''>may</span> <span m=''1188740''>not</span> <span m=''1188920''>be</span>
  <span m=''1189020''>acceptable.</span> <span m=''1190730''>So a</span> <span m=''1190930''>lot</span>
  <span m=''1191030''>of</span> <span m=''1192010''>scientific</span> <span m=''1192190''>codes</span>
  <span m=''1192550''>for</span> <span m=''1192640''>example,</span> <span m=''1193060''>are</span>
  <span m=''1193200''>things</span> <span m=''1193540''>that</span> <span m=''1193930''>have</span>
  <span m=''1194130''>to</span> <span m=''1194210''>deal</span> <span m=''1194370''>with</span>
  <span m=''1194460''>a</span> <span m=''1194490''>lot</span> <span m=''1194630''>of</span>
  <span m=''1194700''>precision,</span> <span m=''1196060''>might</span> <span m=''1196220''>have</span>
  <span m=''1196350''>to</span> <span m=''1196430''>be</span> <span m=''1196530''>cognizant</span>
  <span m=''1197010''>of</span> <span m=''1197090''>that</span> <span m=''1197270''>fact.</span>
  <span m=''1198720''>You</span> <span m=''1198840''>want</span> <span m=''1199040''>to</span>
  <span m=''1199110''>also</span> <span m=''1199430''>define</span> <span m=''1199900''>the</span>
  <span m=''1199970''>scope</span> <span m=''1200290''>of,</span> <span m=''1200690''>what</span>
  <span m=''1200830''>are</span> <span m=''1200890''>you</span> <span m=''1201000''>trying</span>
  <span m=''1201260''>to</span> <span m=''1201330''>do</span> <span m=''1201600''>and</span>
  <span m=''1202060''>will</span> <span m=''1202290''>it be</span> <span m=''1202480''>good</span>
  <span m=''1202640''>enough?</span> <span m=''1204880''>You</span> <span m=''1205050''>want</span>
  <span m=''1205190''>to</span> <span m=''1205260''>do</span> <span m=''1205410''>back</span>
  <span m=''1205690''>of the</span> <span m=''1205760''>hand,</span> <span m=''1206290''>back</span>
  <span m=''1206650''>of</span> <span m=''1206710''>the</span> <span m=''1206780''>envelope</span>
  <span m=''1207160''>calculations</span> <span m=''1207850''>to</span> <span m=''1207950''>make</span>
  <span m=''1208110''>sure</span> <span m=''1208310''>that</span> <span m=''1208760''>things</span>
  <span m=''1209000''>that</span> <span m=''1209110''>you''re</span> <span m=''1209230''>suggesting</span>
  <span m=''1210550''>of</span> <span m=''1210880''>doing</span> <span m=''1211380''>are</span>
  <span m=''1211540''>actually</span> <span m=''1211910''>feasible,</span> <span m=''1212750''>that</span>
  <span m=''1212920''>they''re</span> <span m=''1213095''>actually</span> <span m=''1213270''>practical</span>
  <span m=''1214180''>and</span> <span m=''1214430''>that</span> <span m=''1214500''>will</span>
  <span m=''1214650''>give</span> <span m=''1214870''>you</span> <span m=''1215020''>the</span>
  <span m=''1215080''>sort of</span> <span m=''1215310''>performance</span> <span
  m=''1215810''>expectations</span> <span m=''1216610''>that</span> <span m=''1217780''>you''ve</span>
  <span m=''1217920''>set</span> <span m=''1218150''>out.</span> <span m=''1219460''>You</span>
  <span m=''1219570''>also</span> <span m=''1219800''>want</span> <span m=''1219930''>to</span>
  <span m=''1219990''>understand</span> <span m=''1221420''>your</span> <span m=''1221840''>input</span>
  <span m=''1222120''>range.</span> <span m=''1224400''>You</span> <span m=''1224830''>might</span>
  <span m=''1224990''>be</span> <span m=''1225060''>able</span> <span m=''1225220''>to</span>
  <span m=''1225330''>specialize</span> <span m=''1226040''>if</span> <span m=''1226250''>there</span>
  <span m=''1226360''>are</span> <span m=''1226430''>some</span> <span m=''1226630''>cases</span>
  <span m=''1226990''>for</span> <span m=''1227110''>example,</span> <span m=''1227450''>that</span>
  <span m=''1227580''>you''re</span> <span m=''1227740''>allowed</span> <span m=''1227980''>to</span>
  <span m=''1228080''>ignore.</span> <span m=''1229170''>So</span> <span m=''1229290''>these</span>
  <span m=''1229390''>are</span> <span m=''1229540''>good</span> <span m=''1229700''>things</span>
  <span m=''1229920''>to</span> <span m=''1230010''>keep</span> <span m=''1230200''>in</span>
  <span m=''1230270''>mind.</span> </p><p><span m=''1231930''>You</span> <span m=''1232090''>also</span>
  <span m=''1232380''>want</span> <span m=''1232670''>to</span> <span m=''1232750''>define</span>
  <span m=''1233050''>a</span> <span m=''1233170''>testing</span> <span m=''1233410''>protocol.</span>
  <span m=''1234140''>I</span> <span m=''1234360''>think</span> <span m=''1234560''>it''s</span>
  <span m=''1234680''>important</span> <span m=''1235060''>to</span> <span m=''1235140''>understand--</span>
  <span m=''1237250''>you</span> <span m=''1237450''>started</span> <span m=''1237770''>out</span>
  <span m=''1237860''>with</span> <span m=''1237950''>some</span> <span m=''1238090''>piece</span>
  <span m=''1238260''>of</span> <span m=''1238340''>code,</span> <span m=''1238580''>you''re</span>
  <span m=''1238650''>going to</span> <span m=''1238800''>make</span> <span m=''1238940''>some</span>
  <span m=''1239060''>changes</span> <span m=''1239420''>to</span> <span m=''1239590''>it,</span>
  <span m=''1240040''>how</span> <span m=''1240160''>you</span> <span m=''1240240''>going
  to</span> <span m=''1240410''>go</span> <span m=''1240520''>about</span> <span m=''1240730''>testing</span>
  <span m=''1241030''>it?</span> <span m=''1241770''>How</span> <span m=''1241970''>you
  might</span> <span m=''1242120''>go</span> <span m=''1242310''>about</span> <span
  m=''1242570''>debugging</span> <span m=''1242960''>it</span> <span m=''1243850''>and</span>
  <span m=''1244200''>that</span> <span m=''1244330''>could</span> <span m=''1244450''>be</span>
  <span m=''1244650''>essentially</span> <span m=''1245080''>where</span> <span m=''1245280''>you</span>
  <span m=''1245380''>spend</span> <span m=''1245640''>a</span> <span m=''1245700''>lot</span>
  <span m=''1245880''>of</span> <span m=''1245970''>your</span> <span m=''1246090''>time.</span>
  <span m=''1247910''>And</span> <span m=''1248250''>then</span> <span m=''1249120''>having</span>
  <span m=''1249660''>these</span> <span m=''1249850''>things</span> <span m=''1250060''>in</span>
  <span m=''1250130''>mind,</span> <span m=''1250780''>I</span> <span m=''1250900''>think,</span>
  <span m=''1251090''>the</span> <span m=''1251240''>parts</span> <span m=''1251650''>that</span>
  <span m=''1252350''>are</span> <span m=''1252450''>worth</span> <span m=''1253060''>looking</span>
  <span m=''1253340''>at</span> <span m=''1253970''>are</span> <span m=''1254160''>the</span>
  <span m=''1254290''>parts</span> <span m=''1254610''>that</span> <span m=''1255400''>make</span>
  <span m=''1255560''>the</span> <span m=''1255630''>most</span> <span m=''1256190''>sense.</span>
  <span m=''1256470''>Where</span> <span m=''1256506''>is</span> <span m=''1256543''>your</span>
  <span m=''1256580''>computation</span> <span m=''1257060''>spending</span> <span
  m=''1257340''>most</span> <span m=''1257540''>of</span> <span m=''1257620''>its</span>
  <span m=''1257760''>time?</span> <span m=''1258140''>Is</span> <span m=''1258240''>there</span>
  <span m=''1258420''>hot</span> <span m=''1258630''>spots</span> <span m=''1258920''>in</span>
  <span m=''1259020''>your</span> <span m=''1259100''>code?</span> <span m=''1259610''>And</span>
  <span m=''1259750''>you</span> <span m=''1259810''>can</span> <span m=''1259930''>use</span>
  <span m=''1260140''>profiling</span> <span m=''1260570''>tools</span> <span m=''1260740''>for</span>
  <span m=''1260890''>that</span> <span m=''1261250''>and</span> <span m=''1261990''>in</span>
  <span m=''1262170''>fact,</span> <span m=''1262380''>you''ll</span> <span m=''1262490''>see</span>
  <span m=''1262680''>some</span> <span m=''1262820''>of</span> <span m=''1262930''>that</span>
  <span m=''1263130''>for</span> <span m=''1263640''>cell</span> <span m=''1263770''>in</span>
  <span m=''1263900''>some</span> <span m=''1264020''>of</span> <span m=''1264090''>the</span>
  <span m=''1264150''>recitations</span> <span m=''1265440''>later</span> <span m=''1265700''>in</span>
  <span m=''1265790''>the</span> <span m=''1265850''>course.</span> <span m=''1268660''>So</span>
  <span m=''1269460''>a</span> <span m=''1269570''>simple</span> <span m=''1269870''>example</span>
  <span m=''1271380''>of</span> <span m=''1271510''>molecular</span> <span m=''1271880''>dynamics</span>
  <span m=''1272400''>simulator.</span> </p><p><span m=''1273750''>What</span> <span
  m=''1274140''>you''re</span> <span m=''1274270''>trying</span> <span m=''1274510''>to</span>
  <span m=''1274590''>do</span> <span m=''1274780''>is,</span> <span m=''1275570''>you</span>
  <span m=''1275760''>have</span> <span m=''1276100''>some</span> <span m=''1276450''>space</span>
  <span m=''1276830''>of</span> <span m=''1276940''>molecules,</span> <span m=''1277820''>which</span>
  <span m=''1278020''>I''m</span> <span m=''1278130''>just</span> <span m=''1278290''>going</span>
  <span m=''1278420''>to</span> <span m=''1278500''>represent in</span> <span m=''1279010''>2D.</span>
  <span m=''1279930''>You</span> <span m=''1280100''>know,</span> <span m=''1280240''>look,</span>
  <span m=''1280360''>they</span> <span m=''1280480''>have</span> <span m=''1280720''>water</span>
  <span m=''1280970''>molecules</span> <span m=''1282570''>and</span> <span m=''1282750''>I</span>
  <span m=''1282790''>have</span> <span m=''1283040''>some</span> <span m=''1283900''>protein</span>
  <span m=''1284560''>that</span> <span m=''1284670''>I''m</span> <span m=''1284780''>trying</span>
  <span m=''1285010''>to</span> <span m=''1285740''>understand</span> <span m=''1289740''>how</span>
  <span m=''1290150''>the</span> <span m=''1290250''>different</span> <span m=''1290520''>atoms</span>
  <span m=''1290840''>in</span> <span m=''1290910''>that</span> <span m=''1291120''>molecule</span>
  <span m=''1291260''>are</span> <span m=''1291540''>moving</span> <span m=''1291840''>around</span>
  <span m=''1292490''>so</span> <span m=''1292640''>that</span> <span m=''1292800''>I
  can</span> <span m=''1292890''>determine</span> <span m=''1293320''>the shape</span>
  <span m=''1293560''>of</span> <span m=''1293650''>the</span> <span m=''1293730''>protein.</span>
  <span m=''1294880''>So</span> <span m=''1295060''>there are</span> <span m=''1295500''>forces,</span>
  <span m=''1296290''>there</span> <span m=''1296470''>are</span> <span m=''1296740''>bonded</span>
  <span m=''1297010''>forces</span> <span m=''1297410''>between</span> <span m=''1297750''>the</span>
  <span m=''1297820''>molecules.</span> <span m=''1299190''>So</span> <span m=''1299370''>I''ve</span>
  <span m=''1299510''>just</span> <span m=''1299670''>shown</span> <span m=''1300480''>for
  example,</span> <span m=''1300770''>bonded</span> <span m=''1301540''>forces</span>
  <span m=''1301670''>among</span> <span m=''1302420''>my</span> <span m=''1302550''>protein</span>
  <span m=''1303330''>and</span> <span m=''1303440''>then</span> <span m=''1303730''>there
  are</span> <span m=''1304200''>non-bonded</span> <span m=''1304730''>forces.</span>
  <span m=''1305120''>So</span> <span m=''1305310''>how are</span> <span m=''1305680''>different</span>
  <span m=''1306170''>atoms</span> <span m=''1306290''>sort</span> <span m=''1306430''>of</span>
  <span m=''1306500''>interacting</span> <span m=''1306970''>with</span> <span m=''1307060''>each</span>
  <span m=''1307300''>other</span> <span m=''1307450''>because</span> <span m=''1307690''>of</span>
  <span m=''1307760''>electrostatic</span> <span m=''1308380''>forces,</span> <span
  m=''1309250''>for</span> <span m=''1309310''>example.</span> <span m=''1312920''>So</span>
  <span m=''1313050''>what</span> <span m=''1313160''>you</span> <span m=''1313220''>try</span>
  <span m=''1313370''>to</span> <span m=''1313470''>do</span> <span m=''1313610''>is</span>
  <span m=''1313750''>figure</span> <span m=''1314010''>out,</span> <span m=''1314400''>on</span>
  <span m=''1314660''>each</span> <span m=''1314900''>atom,</span> <span m=''1315310''>what
  are</span> <span m=''1315560''>all</span> <span m=''1315730''>the</span> <span m=''1315830''>forces</span>
  <span m=''1316230''>that</span> <span m=''1316360''>are</span> <span m=''1316450''>affecting</span>
  <span m=''1316830''>it</span> <span m=''1317100''>and</span> <span m=''1317750''>what</span>
  <span m=''1317890''>is</span> <span m=''1318010''>its</span> <span m=''1318100''>current</span>
  <span m=''1318380''>position</span> <span m=''1319060''>and</span> <span m=''1319200''>then</span>
  <span m=''1319700''>you</span> <span m=''1319880''>try</span> <span m=''1320090''>to</span>
  <span m=''1320170''>estimate</span> <span m=''1320620''>where</span> <span m=''1320960''>it''s</span>
  <span m=''1321110''>going</span> <span m=''1321310''>to</span> <span m=''1321420''>move</span>
  <span m=''1322360''>based</span> <span m=''1322740''>on</span> <span m=''1324030''>Newtonian,</span>
  <span m=''1325300''>in</span> <span m=''1325470''>the</span> <span m=''1325810''>simplest</span>
  <span m=''1325930''>case,</span> <span m=''1326140''>a</span> <span m=''1326200''>Newtonian</span>
  <span m=''1326510''>f</span> <span m=''1326660''>equals</span> <span m=''1327080''>m
  a</span> <span m=''1328490''>type</span> <span m=''1328770''>projection.</span>
  <span m=''1329710''>So</span> <span m=''1329803''>in</span> <span m=''1329896''>a</span>
  <span m=''1329990''>naive</span> <span m=''1330490''>algorithm</span> <span m=''1331490''>you</span>
  <span m=''1331590''>have</span> <span m=''1331900''>n</span> <span m=''1332060''>squared</span>
  <span m=''1332310''>interactions.</span> <span m=''1332950''>You</span> <span m=''1333030''>have</span>
  <span m=''1333140''>to</span> <span m=''1333250''>calculate</span> <span m=''1333740''>all</span>
  <span m=''1333880''>the</span> <span m=''1333960''>forces</span> <span m=''1335160''>on</span>
  <span m=''1335310''>one</span> <span m=''1335500''>molecule</span> <span m=''1335920''>from</span>
  <span m=''1336150''>all</span> <span m=''1336360''>others.</span> <span m=''1339210''>By</span>
  <span m=''1339390''>understanding</span> <span m=''1339720''>your</span> <span m=''1339830''>problem</span>
  <span m=''1340440''>you</span> <span m=''1340650''>know</span> <span m=''1340820''>that</span>
  <span m=''1341220''>you</span> <span m=''1341360''>can</span> <span m=''1341540''>actually</span>
  <span m=''1341910''>exploit</span> <span m=''1342280''>the</span> <span m=''1342360''>properties</span>
  <span m=''1342870''>of</span> <span m=''1342950''>forces</span> <span m=''1343510''>that</span>
  <span m=''1343690''>essentially</span> <span m=''1344720''>decrease</span> <span
  m=''1345230''>exponentially,</span> <span m=''1345900''>so</span> <span m=''1346030''>you</span>
  <span m=''1346090''>can</span> <span m=''1346190''>use</span> <span m=''1346330''>a</span>
  <span m=''1346390''>cutoff</span> <span m=''1346760''>distance.</span> <span m=''1347490''>So</span>
  <span m=''1347790''>if</span> <span m=''1347910''>a</span> <span m=''1347990''>molecule</span>
  <span m=''1348380''>is</span> <span m=''1348520''>way</span> <span m=''1348680''>too</span>
  <span m=''1348820''>far</span> <span m=''1349040''>away</span> <span m=''1349300''>you</span>
  <span m=''1349470''>can</span> <span m=''1349590''>ignore</span> <span m=''1349860''>this.</span>
  <span m=''1350400''>And</span> <span m=''1351140''>for</span> <span m=''1351260''>people</span>
  <span m=''1351560''>who</span> <span m=''1351710''>do</span> <span m=''1353460''>galaxy</span>
  <span m=''1353990''>calculations,</span> <span m=''1354640''>you</span> <span m=''1354720''>know</span>
  <span m=''1354800''>you</span> <span m=''1355040''>can</span> <span m=''1355220''>ignore</span>
  <span m=''1355480''>geometric</span> <span m=''1355870''>forces</span> <span m=''1356790''>between</span>
  <span m=''1357520''>constellations</span> <span m=''1358260''>or</span> <span m=''1358620''>clusters</span>
  <span m=''1359020''>that</span> <span m=''1359085''>are</span> <span m=''1359150''>too</span>
  <span m=''1359290''>far</span> <span m=''1359490''>apart.</span> <span m=''1361160''>So</span>
  <span m=''1361236''>in</span> <span m=''1361313''>the</span> <span m=''1361390''>sequential</span>
  <span m=''1361840''>code,</span> <span m=''1363610''>some</span> <span m=''1363940''>pseudo</span>
  <span m=''1364210''>code</span> <span m=''1364440''>for</span> <span m=''1365090''>doing
  a</span> <span m=''1365370''>molecular</span> <span m=''1365700''>dynamic</span>
  <span m=''1366120''>simulator,</span> <span m=''1367060''>you</span> <span m=''1367250''>have</span>
  <span m=''1367390''>your</span> <span m=''1367480''>atoms</span> <span m=''1367870''>array,</span>
  <span m=''1368100''>your</span> <span m=''1368220''>force</span> <span m=''1368540''>array,</span>
  <span m=''1368970''>your set</span> <span m=''1369270''>of</span> <span m=''1369370''>neighbors</span>
  <span m=''1369890''>in a</span> <span m=''1370210''>two-dimensional</span> <span
  m=''1370750''>space</span> <span m=''1371710''>and</span> <span m=''1372050''>you''re</span>
  <span m=''1372160''>going to</span> <span m=''1372360''>go</span> <span m=''1372460''>through</span>
  <span m=''1372770''>and</span> <span m=''1372960''>sort</span> <span m=''1373110''>of</span>
  <span m=''1373490''>simulate</span> <span m=''1374470''>different</span> <span m=''1374760''>time</span>
  <span m=''1375070''>steps.</span> <span m=''1375710''>And</span> <span m=''1375870''>for</span>
  <span m=''1375980''>each</span> <span m=''1376180''>time</span> <span m=''1376470''>step</span>
  <span m=''1376770''>you''re</span> <span m=''1376890''>going</span> <span m=''1377100''>to</span>
  <span m=''1377270''>do--</span> <span m=''1377510''>for</span> <span m=''1377700''>each</span>
  <span m=''1377910''>atom--</span> <span m=''1378660''>compute the</span> <span m=''1379060''>bonded</span>
  <span m=''1379390''>forces,</span> <span m=''1379800''>compute</span> <span m=''1381130''>who</span>
  <span m=''1381280''>are</span> <span m=''1381390''>my</span> <span m=''1381520''>neighbors</span>
  <span m=''1382250''>for</span> <span m=''1382410''>those</span> <span m=''1382600''>neighbors,</span>
  <span m=''1383790''>compute--</span> <span m=''1384360''>so</span> <span m=''1384470''>these</span>
  <span m=''1384640''>are</span> <span m=''1384720''>things</span> <span m=''1385050''>that</span>
  <span m=''1385250''>essentially</span> <span m=''1385740''>incapsulate</span> <span
  m=''1386590''>distance.</span> <span m=''1387100''>Compute the</span> <span m=''1387630''>forces</span>
  <span m=''1388190''>between</span> <span m=''1388520''>them,</span> <span m=''1389070''>update
  the</span> <span m=''1389500''>position</span> <span m=''1390410''>and</span> <span
  m=''1390710''>end.</span> <span m=''1391360''>So</span> <span m=''1392130''>since</span>
  <span m=''1392370''>this</span> <span m=''1392540''>is</span> <span m=''1392650''>a</span>
  <span m=''1392710''>loop</span> <span m=''1394830''>then</span> <span m=''1394990''>that</span>
  <span m=''1395110''>might</span> <span m=''1395290''>suggest</span> <span m=''1395650''>essentially</span>
  <span m=''1396180''>where</span> <span m=''1396480''>to</span> <span m=''1396550''>start</span>
  <span m=''1396820''>looking</span> <span m=''1397060''>for</span> <span m=''1397580''>concurrency.</span>
  </p><p><span m=''1398810''>So</span> <span m=''1399050''>you</span> <span m=''1399160''>can</span>
  <span m=''1399260''>start</span> <span m=''1399560''>with</span> <span m=''1399970''>the</span>
  <span m=''1400080''>decomposition</span> <span m=''1400820''>patterns</span> <span
  m=''1401430''>and</span> <span m=''1401680''>they''ll</span> <span m=''1401820''>be</span>
  <span m=''1402000''>more</span> <span m=''1403010''>in</span> <span m=''1403490''>depth</span>
  <span m=''1403750''>details</span> <span m=''1404120''>about</span> <span m=''1404320''>those</span>
  <span m=''1404540''>next.</span> <span m=''1406360''>I''m</span> <span m=''1406560''>going
  to</span> <span m=''1406720''>give</span> <span m=''1406850''>you</span> <span m=''1406940''>some</span>
  <span m=''1407250''>intuition</span> <span m=''1408110''>and</span> <span m=''1408250''>then</span>
  <span m=''1408380''>you</span> <span m=''1408610''>would try</span> <span m=''1408800''>to</span>
  <span m=''1408900''>figure</span> <span m=''1409140''>out</span> <span m=''1409260''>whether</span>
  <span m=''1409540''>your</span> <span m=''1409770''>decomposition</span> <span m=''1410410''>has</span>
  <span m=''1410580''>to</span> <span m=''1410770''>abide</span> <span m=''1410850''>by</span>
  <span m=''1411370''>certain</span> <span m=''1411640''>dependencies</span> <span
  m=''1412840''>and</span> <span m=''1413220''>what</span> <span m=''1413360''>are</span>
  <span m=''1413480''>those</span> <span m=''1413650''>dependencies?</span> <span
  m=''1414120''>How</span> <span m=''1414230''>do</span> <span m=''1414340''>you</span>
  <span m=''1414440''>expose</span> <span m=''1414710''>them?</span> <span m=''1415140''>And</span>
  <span m=''1415300''>then,</span> <span m=''1415610''>how</span> <span m=''1415750''>can</span>
  <span m=''1415870''>you</span> <span m=''1416220''>design</span> <span m=''1416570''>and</span>
  <span m=''1416660''>evaluate?</span> <span m=''1417620''>How</span> <span m=''1417740''>can</span>
  <span m=''1417870''>you</span> <span m=''1417980''>evaluate</span> <span m=''1418390''>your</span>
  <span m=''1418510''>design?</span> <span m=''1422050''>Screwed</span> <span m=''1422290''>up</span>
  <span m=''1422400''>again.</span> <span m=''1424000''>I</span> <span m=''1424050''>just</span>
  <span m=''1424100''>fixed</span> <span m=''1424280''>this.</span> </p><p><span m=''1424920''>OK,</span>
  <span m=''1425120''>so</span> <span m=''1425460''>this</span> <span m=''1425670''>is</span>
  <span m=''1425990''>the</span> <span m=''1426060''>pseudo</span> <span m=''1426300''>code</span>
  <span m=''1426530''>again</span> <span m=''1426750''>from</span> <span m=''1426920''>the</span>
  <span m=''1427000''>previous</span> <span m=''1427340''>slide.</span> <span m=''1428800''>And</span>
  <span m=''1429630''>since</span> <span m=''1430350''>all</span> <span m=''1430590''>you</span>
  <span m=''1430690''>have</span> <span m=''1430950''>is</span> <span m=''1431140''>a</span>
  <span m=''1431230''>simple</span> <span m=''1431520''>loop</span> <span m=''1431860''>that</span>
  <span m=''1431990''>essentially</span> <span m=''1432440''>says,</span> <span m=''1432710''>this</span>
  <span m=''1432860''>is</span> <span m=''1432960''>where</span> <span m=''1433100''>to</span>
  <span m=''1433190''>look</span> <span m=''1433340''>for</span> <span m=''1433480''>the</span>
  <span m=''1434040''>computation.</span> <span m=''1434600''>And</span> <span m=''1435010''>since</span>
  <span m=''1435180''>you''re</span> <span m=''1435360''>essentially</span> <span
  m=''1435760''>doing</span> <span m=''1435960''>the</span> <span m=''1436040''>same</span>
  <span m=''1436300''>computation</span> <span m=''1436870''>for</span> <span m=''1436980''>each</span>
  <span m=''1437230''>atom</span> <span m=''1437860''>then</span> <span m=''1438190''>that</span>
  <span m=''1438310''>again,</span> <span m=''1438600''>gives</span> <span m=''1438840''>you</span>
  <span m=''1439540''>the</span> <span m=''1439960''>type</span> <span m=''1442120''>of</span>
  <span m=''1442210''>parallelism</span> <span m=''1442760''>that</span> <span m=''1442860''>we''ve</span>
  <span m=''1442990''>talked</span> <span m=''1443260''>about</span> <span m=''1443580''>before.</span>
  <span m=''1445170''>So</span> <span m=''1445310''>you</span> <span m=''1445400''>can</span>
  <span m=''1445540''>look</span> <span m=''1445710''>for</span> <span m=''1446560''>splitting</span>
  <span m=''1447010''>up</span> <span m=''1447260''>each</span> <span m=''1447480''>iteration</span>
  <span m=''1448470''>and</span> <span m=''1448700''>parallelizing</span> <span m=''1449270''>those</span>
  <span m=''1449560''>so</span> <span m=''1449660''>that</span> <span m=''1449820''>each</span>
  <span m=''1450030''>processor</span> <span m=''1450430''>for</span> <span m=''1450530''>example,</span>
  <span m=''1450970''>does</span> <span m=''1451160''>one</span> <span m=''1451370''>atom.</span>
  <span m=''1452850''>Or</span> <span m=''1453120''>each</span> <span m=''1453410''>processor</span>
  <span m=''1453790''>does</span> <span m=''1453940''>a</span> <span m=''1454010''>collection
  of</span> <span m=''1454410''>atoms.</span> <span m=''1455620''>But</span> <span
  m=''1455770''>there are</span> <span m=''1455970''>additional</span> <span m=''1456430''>tasks.</span>
  <span m=''1456920''>So data</span> <span m=''1457230''>level</span> <span m=''1457820''>parallelism</span>
  <span m=''1458110''>versus</span> <span m=''1458870''>sort</span> <span m=''1459030''>of</span>
  <span m=''1459350''>control</span> <span m=''1459640''>parallelism.</span> <span
  m=''1460670''>For</span> <span m=''1460790''>each</span> <span m=''1461350''>atom</span>
  <span m=''1461690''>you</span> <span m=''1461910''>also</span> <span m=''1462150''>want</span>
  <span m=''1462340''>to calculate</span> <span m=''1462710''>the forces.</span> <span
  m=''1463320''>You</span> <span m=''1463410''>want to</span> <span m=''1463570''>calculate</span>
  <span m=''1464080''>long</span> <span m=''1464330''>range</span> <span m=''1464560''>interactions,</span>
  <span m=''1465170''>find</span> <span m=''1465410''>neighbors,</span> <span m=''1465820''>update</span>
  <span m=''1466100''>position and</span> <span m=''1466580''>so</span> <span m=''1466710''>on.</span>
  <span m=''1467490''>And</span> <span m=''1467850''>some</span> <span m=''1467980''>of</span>
  <span m=''1468130''>these</span> <span m=''1468360''>have</span> <span m=''1468590''>shared</span>
  <span m=''1468850''>data,</span> <span m=''1469130''>some</span> <span m=''1469260''>of</span>
  <span m=''1469350''>them</span> <span m=''1469510''>do</span> <span m=''1469640''>not.</span>
  <span m=''1470340''>So</span> <span m=''1470500''>you</span> <span m=''1470600''>have</span>
  <span m=''1470730''>to</span> <span m=''1470860''>factor</span> <span m=''1471250''>that</span>
  <span m=''1471360''>in.</span> <span m=''1471790''>So</span> <span m=''1471910''>understanding</span>
  <span m=''1472520''>there</span> <span m=''1472660''>control</span> <span m=''1473020''>dependencies</span>
  <span m=''1474010''>essentially</span> <span m=''1474360''>tells</span> <span m=''1474660''>you</span>
  <span m=''1477210''>how</span> <span m=''1477380''>you</span> <span m=''1477460''>need</span>
  <span m=''1477630''>to</span> <span m=''1477800''>it</span> <span m=''1477920''>lay</span>
  <span m=''1478120''>out</span> <span m=''1478340''>your</span> <span m=''1479270''>orchestration.</span>
  <span m=''1480930''>So</span> <span m=''1481060''>you</span> <span m=''1481140''>have</span>
  <span m=''1481270''>your</span> <span m=''1481380''>bonded</span> <span m=''1481650''>forces,</span>
  <span m=''1482180''>you</span> <span m=''1482250''>have</span> <span m=''1482400''>your</span>
  <span m=''1482490''>neighbor</span> <span m=''1482750''>list,</span> <span m=''1483270''>that</span>
  <span m=''1483460''>effects</span> <span m=''1483780''>your</span> <span m=''1483920''>long</span>
  <span m=''1484150''>range</span> <span m=''1484400''>calculations.</span> <span
  m=''1485240''>But</span> <span m=''1485450''>to</span> <span m=''1485550''>do</span>
  <span m=''1485670''>this</span> <span m=''1485830''>update</span> <span m=''1486200''>position</span>
  <span m=''1486640''>I</span> <span m=''1486730''>need</span> <span m=''1487220''>both</span>
  <span m=''1487430''>of</span> <span m=''1487520''>these</span> <span m=''1487720''>tasks</span>
  <span m=''1488010''>to have</span> <span m=''1488210''>completed.</span> <span m=''1489870''>And</span>
  <span m=''1490360''>in</span> <span m=''1490530''>each</span> <span m=''1490720''>one</span>
  <span m=''1490900''>of</span> <span m=''1491000''>these</span> <span m=''1491190''>tasks</span>
  <span m=''1492090''>there''s</span> <span m=''1492750''>different</span> <span m=''1493040''>data</span>
  <span m=''1493270''>structures</span> <span m=''1493660''>that</span> <span m=''1493790''>they</span>
  <span m=''1493920''>need.</span> </p><p><span m=''1494660''>So</span> <span m=''1495770''>everybody</span>
  <span m=''1496430''>essentially</span> <span m=''1497110''>reads</span> <span m=''1497860''>the</span>
  <span m=''1498020''>location</span> <span m=''1498460''>of</span> <span m=''1498550''>the</span>
  <span m=''1498650''>items.</span> <span m=''1499960''>So</span> <span m=''1500180''>this</span>
  <span m=''1500370''>is</span> <span m=''1500520''>good</span> <span m=''1500760''>because</span>
  <span m=''1501120''>we want</span> <span m=''1501390''>time</span> <span m=''1501650''>step</span>
  <span m=''1501930''>that</span> <span m=''1502070''>essentially</span> <span m=''1502510''>says,</span>
  <span m=''1505600''>I</span> <span m=''1505900''>can</span> <span m=''1506260''>really</span>
  <span m=''1506490''>distribute</span> <span m=''1506830''>this</span> <span m=''1506970''>really</span>
  <span m=''1507210''>well,</span> <span m=''1507670''>but</span> <span m=''1507870''>then</span>
  <span m=''1508470''>there''s</span> <span m=''1508720''>a</span> <span m=''1508790''>right</span>
  <span m=''1509030''>synchronization</span> <span m=''1509720''>problem</span> <span
  m=''1510480''>because</span> <span m=''1510750''>eventually</span> <span m=''1511160''>I
  have</span> <span m=''1511350''>to</span> <span m=''1511460''>update</span> <span
  m=''1511730''>this</span> <span m=''1511820''>array</span> <span m=''1512530''>so
  I</span> <span m=''1512660''>have</span> <span m=''1512790''>to</span> <span m=''1512880''>be</span>
  <span m=''1512970''>careful</span> <span m=''1513320''>about</span> <span m=''1514730''>who</span>
  <span m=''1514890''>goes</span> <span m=''1515130''>first.</span> <span m=''1516250''>There''s</span>
  <span m=''1516510''>an</span> <span m=''1516590''>accumulation,</span> <span m=''1517520''>which</span>
  <span m=''1517750''>means</span> <span m=''1517940''>I</span> <span m=''1518030''>can</span>
  <span m=''1518330''>potentially</span> <span m=''1518930''>do</span> <span m=''1519120''>a</span>
  <span m=''1519200''>reduction</span> <span m=''1519690''>on</span> <span m=''1519870''>these.</span>
  <span m=''1521280''>There''s</span> <span m=''1521500''>some</span> <span m=''1521670''>write</span>
  <span m=''1521920''>on</span> <span m=''1522040''>the</span> <span m=''1522160''>other</span>
  <span m=''1522350''>end,</span> <span m=''1523000''>but</span> <span m=''1523120''>that</span>
  <span m=''1523310''>seems</span> <span m=''1523530''>to</span> <span m=''1523630''>be</span>
  <span m=''1523780''>a</span> <span m=''1523850''>localized</span> <span m=''1524350''>data</span>
  <span m=''1524520''>structure.</span> <span m=''1525280''>So for</span> <span m=''1525630''>partitioning</span>
  <span m=''1526640''>example,</span> <span m=''1527020''>neighbors</span> <span m=''1527470''>might</span>
  <span m=''1527700''>have</span> <span m=''1527910''>to</span> <span m=''1527990''>be</span>
  <span m=''1530040''>just</span> <span m=''1530430''>locals</span> <span m=''1530740''>at</span>
  <span m=''1530870''>a</span> <span m=''1530950''>different</span> <span m=''1531290''>processor.</span>
  <span m=''1531960''>So</span> <span m=''1532240''>coming</span> <span m=''1532580''>up</span>
  <span m=''1532710''>with</span> <span m=''1532840''>this</span> <span m=''1533730''>structure</span>
  <span m=''1534240''>and</span> <span m=''1534420''>sort</span> <span m=''1534560''>of</span>
  <span m=''1534640''>block</span> <span m=''1534890''>level</span> <span m=''1535120''>diagram</span>
  <span m=''1535850''>helps</span> <span m=''1536160''>you</span> <span m=''1536370''>essentially</span>
  <span m=''1536830''>figure</span> <span m=''1537130''>out</span> <span m=''1538130''>where</span>
  <span m=''1538380''>are</span> <span m=''1538510''>your tasks?</span> <span m=''1539180''>Helps</span>
  <span m=''1539320''>you</span> <span m=''1539420''>figure</span> <span m=''1539760''>out
  what</span> <span m=''1539880''>kind</span> <span m=''1540060''>of</span> <span
  m=''1540140''>synchronization</span> <span m=''1540750''>mechanisms</span> <span
  m=''1541410''>you</span> <span m=''1541580''>need</span> <span m=''1542070''>and</span>
  <span m=''1542230''>it</span> <span m=''1542290''>can</span> <span m=''1542390''>also</span>
  <span m=''1542660''>help</span> <span m=''1542890''>you</span> <span m=''1542980''>suggest</span>
  <span m=''1544310''>the</span> <span m=''1544420''>data</span> <span m=''1544710''>distribution</span>
  <span m=''1546070''>that</span> <span m=''1546310''>you</span> <span m=''1546440''>might</span>
  <span m=''1546800''>need</span> <span m=''1547010''>to</span> <span m=''1547590''>reduce</span>
  <span m=''1547730''>synchronization</span> <span m=''1548380''>costs</span> <span
  m=''1549220''>and</span> <span m=''1549480''>problems.</span> <span m=''1551070''>And</span>
  <span m=''1551220''>lastly,</span> <span m=''1551620''>you</span> <span m=''1551710''>want</span>
  <span m=''1551920''>to</span> <span m=''1552330''>essentially</span> <span m=''1552650''>evaluate</span>
  <span m=''1553220''>your</span> <span m=''1553360''>design.</span> <span m=''1554440''>And</span>
  <span m=''1554570''>you</span> <span m=''1554630''>want to</span> <span m=''1554790''>keep</span>
  <span m=''1554990''>in</span> <span m=''1555060''>mind,</span> <span m=''1555300''>what</span>
  <span m=''1555450''>is</span> <span m=''1555530''>your</span> <span m=''1555660''>target</span>
  <span m=''1555980''>architecture.</span> <span m=''1556990''>Are you</span> <span
  m=''1557120''>trying</span> <span m=''1557380''>to</span> <span m=''1557570''>really</span>
  <span m=''1557830''>run</span> <span m=''1558080''>on</span> <span m=''1558250''>shared</span>
  <span m=''1558550''>memory</span> <span m=''1558920''>and</span> <span m=''1559130''>distributed</span>
  <span m=''1559560''>memory</span> <span m=''1560250''>and</span> <span m=''1560450''>message</span>
  <span m=''1560760''>passing</span> <span m=''1561500''>or</span> <span m=''1561750''>are
  you</span> <span m=''1561910''>just</span> <span m=''1562100''>doing</span> <span
  m=''1562290''>this</span> <span m=''1562450''>for</span> <span m=''1562700''>one</span>
  <span m=''1562820''>architecture?</span> </p><p><span m=''1563160''>So</span> <span
  m=''1563340''>for</span> <span m=''1563460''>your</span> <span m=''1563580''>project,</span>
  <span m=''1565160''>you''re</span> <span m=''1565480''>doing</span> <span m=''1565730''>this</span>
  <span m=''1565850''>for</span> <span m=''1565980''>self,</span> <span m=''1566640''>so
  you</span> <span m=''1566750''>can</span> <span m=''1566890''>be</span> <span m=''1567010''>very</span>
  <span m=''1567240''>self</span> <span m=''1567390''>specific.</span> <span m=''1568830''>But</span>
  <span m=''1568950''>if</span> <span m=''1569040''>you''re</span> <span m=''1569160''>doing</span>
  <span m=''1569380''>this</span> <span m=''1569540''>in</span> <span m=''1569680''>other</span>
  <span m=''1569860''>contexts,</span> <span m=''1571130''>the</span> <span m=''1571270''>architecture</span>
  <span m=''1571780''>actually</span> <span m=''1572090''>might</span> <span m=''1572300''>influence</span>
  <span m=''1572770''>some</span> <span m=''1572880''>of</span> <span m=''1572990''>your</span>
  <span m=''1573120''>decisions.</span> <span m=''1576080''>Does</span> <span m=''1576350''>data</span>
  <span m=''1576600''>sharing</span> <span m=''1576940''>have</span> <span m=''1577270''>enough</span>
  <span m=''1577460''>special</span> <span m=''1577760''>properties</span> <span m=''1578320''>like</span>
  <span m=''1578790''>a</span> <span m=''1578910''>read</span> <span m=''1579120''>only?</span>
  <span m=''1579980''>There are</span> <span m=''1580210''>data</span> <span m=''1580400''>structures</span>
  <span m=''1580770''>that are</span> <span m=''1580920''>read</span> <span m=''1581080''>only.</span>
  <span m=''1581460''>Are</span> <span m=''1581630''>there</span> <span m=''1581850''>enough</span>
  <span m=''1582070''>accumulations</span> <span m=''1582750''>that</span> <span m=''1582900''>you</span>
  <span m=''1583060''>can</span> <span m=''1583550''>exploit</span> <span m=''1584080''>by</span>
  <span m=''1584370''>reductions?</span> <span m=''1585250''>Are</span> <span m=''1585530''>there</span>
  <span m=''1586200''>temporal</span> <span m=''1586640''>constraints</span> <span
  m=''1587240''>on</span> <span m=''1588390''>data</span> <span m=''1588660''>sharing</span>
  <span m=''1589300''>that</span> <span m=''1589420''>you</span> <span m=''1589520''>can</span>
  <span m=''1589640''>exploit?</span> <span m=''1590250''>And</span> <span m=''1590360''>can</span>
  <span m=''1590480''>you</span> <span m=''1590550''>deal</span> <span m=''1590740''>with</span>
  <span m=''1590850''>those</span> <span m=''1591030''>efficiently?</span> <span m=''1591630''>If
  you</span> <span m=''1591840''>can''t</span> <span m=''1592150''>then</span> <span
  m=''1592440''>you</span> <span m=''1592510''>have</span> <span m=''1592610''>a</span>
  <span m=''1592660''>problem.</span> <span m=''1594170''>So</span> <span m=''1594300''>you</span>
  <span m=''1594600''>need to</span> <span m=''1594690''>resolve</span> <span m=''1595020''>that.</span>
  <span m=''1595550''>If the</span> <span m=''1595740''>designs</span> <span m=''1596180''>OK</span>
  <span m=''1596520''>then</span> <span m=''1596680''>you</span> <span m=''1596850''>move</span>
  <span m=''1597080''>on to the</span> <span m=''1597230''>next</span> <span m=''1597980''>design</span>
  <span m=''1598320''>space.</span> <span m=''1598970''>So</span> <span m=''1599480''>at</span>
  <span m=''1599580''>the</span> <span m=''1599650''>next</span> <span m=''1599910''>lecture</span>
  <span m=''1600180''>I''ll</span> <span m=''1600350''>go</span> <span m=''1600480''>through</span>
  <span m=''1601460''>these</span> <span m=''1601680''>in</span> <span m=''1601860''>a</span>
  <span m=''1601930''>lot</span> <span m=''1602070''>more</span> <span m=''1602230''>detail.</span>
  <span m=''1602460''>That''s it.</span> </p>'
type: course
uid: e551fb0d383f0b60a4cb1eef41a1c90b

---
None